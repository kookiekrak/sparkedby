var Mh=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var R=(t,e,n)=>(Mh(t,e,"read from private field"),n?n.call(t):e.get(t)),Y=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},H=(t,e,n,r)=>(Mh(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n);var uu=(t,e,n,r)=>({set _(i){H(t,e,i,n)},get _(){return R(t,e,r)}}),ae=(t,e,n)=>(Mh(t,e,"access private method"),n);function nO(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var Tn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function N1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function rO(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var j1={exports:{}},Sf={},L1={exports:{}},se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $c=Symbol.for("react.element"),iO=Symbol.for("react.portal"),oO=Symbol.for("react.fragment"),sO=Symbol.for("react.strict_mode"),aO=Symbol.for("react.profiler"),lO=Symbol.for("react.provider"),cO=Symbol.for("react.context"),uO=Symbol.for("react.forward_ref"),dO=Symbol.for("react.suspense"),fO=Symbol.for("react.memo"),hO=Symbol.for("react.lazy"),P0=Symbol.iterator;function pO(t){return t===null||typeof t!="object"?null:(t=P0&&t[P0]||t["@@iterator"],typeof t=="function"?t:null)}var $1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F1=Object.assign,B1={};function Va(t,e,n){this.props=t,this.context=e,this.refs=B1,this.updater=n||$1}Va.prototype.isReactComponent={};Va.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Va.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function z1(){}z1.prototype=Va.prototype;function ly(t,e,n){this.props=t,this.context=e,this.refs=B1,this.updater=n||$1}var cy=ly.prototype=new z1;cy.constructor=ly;F1(cy,Va.prototype);cy.isPureReactComponent=!0;var M0=Array.isArray,U1=Object.prototype.hasOwnProperty,uy={current:null},V1={key:!0,ref:!0,__self:!0,__source:!0};function H1(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)U1.call(e,r)&&!V1.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:$c,type:t,key:o,ref:s,props:i,_owner:uy.current}}function mO(t,e){return{$$typeof:$c,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function dy(t){return typeof t=="object"&&t!==null&&t.$$typeof===$c}function gO(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var A0=/\/+/g;function Ah(t,e){return typeof t=="object"&&t!==null&&t.key!=null?gO(""+t.key):e.toString(36)}function ed(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case $c:case iO:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+Ah(s,0):r,M0(i)?(n="",t!=null&&(n=t.replace(A0,"$&/")+"/"),ed(i,e,n,"",function(c){return c})):i!=null&&(dy(i)&&(i=mO(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(A0,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",M0(t))for(var a=0;a<t.length;a++){o=t[a];var l=r+Ah(o,a);s+=ed(o,e,n,l,i)}else if(l=pO(t),typeof l=="function")for(t=l.call(t),a=0;!(o=t.next()).done;)o=o.value,l=r+Ah(o,a++),s+=ed(o,e,n,l,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function du(t,e,n){if(t==null)return t;var r=[],i=0;return ed(t,r,"","",function(o){return e.call(n,o,i++)}),r}function yO(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var At={current:null},td={transition:null},vO={ReactCurrentDispatcher:At,ReactCurrentBatchConfig:td,ReactCurrentOwner:uy};function W1(){throw Error("act(...) is not supported in production builds of React.")}se.Children={map:du,forEach:function(t,e,n){du(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return du(t,function(){e++}),e},toArray:function(t){return du(t,function(e){return e})||[]},only:function(t){if(!dy(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};se.Component=Va;se.Fragment=oO;se.Profiler=aO;se.PureComponent=ly;se.StrictMode=sO;se.Suspense=dO;se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vO;se.act=W1;se.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=F1({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=uy.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)U1.call(e,l)&&!V1.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:$c,type:t.type,key:i,ref:o,props:r,_owner:s}};se.createContext=function(t){return t={$$typeof:cO,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:lO,_context:t},t.Consumer=t};se.createElement=H1;se.createFactory=function(t){var e=H1.bind(null,t);return e.type=t,e};se.createRef=function(){return{current:null}};se.forwardRef=function(t){return{$$typeof:uO,render:t}};se.isValidElement=dy;se.lazy=function(t){return{$$typeof:hO,_payload:{_status:-1,_result:t},_init:yO}};se.memo=function(t,e){return{$$typeof:fO,type:t,compare:e===void 0?null:e}};se.startTransition=function(t){var e=td.transition;td.transition={};try{t()}finally{td.transition=e}};se.unstable_act=W1;se.useCallback=function(t,e){return At.current.useCallback(t,e)};se.useContext=function(t){return At.current.useContext(t)};se.useDebugValue=function(){};se.useDeferredValue=function(t){return At.current.useDeferredValue(t)};se.useEffect=function(t,e){return At.current.useEffect(t,e)};se.useId=function(){return At.current.useId()};se.useImperativeHandle=function(t,e,n){return At.current.useImperativeHandle(t,e,n)};se.useInsertionEffect=function(t,e){return At.current.useInsertionEffect(t,e)};se.useLayoutEffect=function(t,e){return At.current.useLayoutEffect(t,e)};se.useMemo=function(t,e){return At.current.useMemo(t,e)};se.useReducer=function(t,e,n){return At.current.useReducer(t,e,n)};se.useRef=function(t){return At.current.useRef(t)};se.useState=function(t){return At.current.useState(t)};se.useSyncExternalStore=function(t,e,n){return At.current.useSyncExternalStore(t,e,n)};se.useTransition=function(){return At.current.useTransition()};se.version="18.3.1";L1.exports=se;var y=L1.exports;const we=N1(y),xO=nO({__proto__:null,default:we},[y]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wO=y,bO=Symbol.for("react.element"),SO=Symbol.for("react.fragment"),CO=Object.prototype.hasOwnProperty,kO=wO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,EO={key:!0,ref:!0,__self:!0,__source:!0};function K1(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)CO.call(e,r)&&!EO.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:bO,type:t,key:o,ref:s,props:i,_owner:kO.current}}Sf.Fragment=SO;Sf.jsx=K1;Sf.jsxs=K1;j1.exports=Sf;var m=j1.exports;window.global=window;var nm={},q1={exports:{}},cn={},G1={exports:{}},J1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(P,M){var L=P.length;P.push(M);e:for(;0<L;){var J=L-1>>>1,B=P[J];if(0<i(B,M))P[J]=M,P[L]=B,L=J;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var M=P[0],L=P.pop();if(L!==M){P[0]=L;e:for(var J=0,B=P.length,X=B>>>1;J<X;){var fe=2*(J+1)-1,Te=P[fe],Se=fe+1,Ne=P[Se];if(0>i(Te,L))Se<B&&0>i(Ne,Te)?(P[J]=Ne,P[Se]=L,J=Se):(P[J]=Te,P[fe]=L,J=fe);else if(Se<B&&0>i(Ne,L))P[J]=Ne,P[Se]=L,J=Se;else break e}}return M}function i(P,M){var L=P.sortIndex-M.sortIndex;return L!==0?L:P.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var l=[],c=[],u=1,d=null,f=3,h=!1,p=!1,g=!1,x=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(P){for(var M=n(c);M!==null;){if(M.callback===null)r(c);else if(M.startTime<=P)r(c),M.sortIndex=M.expirationTime,e(l,M);else break;M=n(c)}}function b(P){if(g=!1,S(P),!p)if(n(l)!==null)p=!0,F(C);else{var M=n(c);M!==null&&K(b,M.startTime-P)}}function C(P,M){p=!1,g&&(g=!1,v(_),_=-1),h=!0;var L=f;try{for(S(M),d=n(l);d!==null&&(!(d.expirationTime>M)||P&&!D());){var J=d.callback;if(typeof J=="function"){d.callback=null,f=d.priorityLevel;var B=J(d.expirationTime<=M);M=t.unstable_now(),typeof B=="function"?d.callback=B:d===n(l)&&r(l),S(M)}else r(l);d=n(l)}if(d!==null)var X=!0;else{var fe=n(c);fe!==null&&K(b,fe.startTime-M),X=!1}return X}finally{d=null,f=L,h=!1}}var k=!1,E=null,_=-1,O=5,T=-1;function D(){return!(t.unstable_now()-T<O)}function j(){if(E!==null){var P=t.unstable_now();T=P;var M=!0;try{M=E(!0,P)}finally{M?z():(k=!1,E=null)}}else k=!1}var z;if(typeof w=="function")z=function(){w(j)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,U=I.port2;I.port1.onmessage=j,z=function(){U.postMessage(null)}}else z=function(){x(j,0)};function F(P){E=P,k||(k=!0,z())}function K(P,M){_=x(function(){P(t.unstable_now())},M)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_continueExecution=function(){p||h||(p=!0,F(C))},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(P){switch(f){case 1:case 2:case 3:var M=3;break;default:M=f}var L=f;f=M;try{return P()}finally{f=L}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(P,M){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var L=f;f=P;try{return M()}finally{f=L}},t.unstable_scheduleCallback=function(P,M,L){var J=t.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?J+L:J):L=J,P){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=L+B,P={id:u++,callback:M,priorityLevel:P,startTime:L,expirationTime:B,sortIndex:-1},L>J?(P.sortIndex=L,e(c,P),n(l)===null&&P===n(c)&&(g?(v(_),_=-1):g=!0,K(b,L-J))):(P.sortIndex=B,e(l,P),p||h||(p=!0,F(C))),P},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(P){var M=f;return function(){var L=f;f=M;try{return P.apply(this,arguments)}finally{f=L}}}})(J1);G1.exports=J1;var TO=G1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _O=y,an=TO;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Y1=new Set,Hl={};function ss(t,e){Sa(t,e),Sa(t+"Capture",e)}function Sa(t,e){for(Hl[t]=e,t=0;t<e.length;t++)Y1.add(e[t])}var Vr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rm=Object.prototype.hasOwnProperty,RO=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,D0={},I0={};function OO(t){return rm.call(I0,t)?!0:rm.call(D0,t)?!1:RO.test(t)?I0[t]=!0:(D0[t]=!0,!1)}function PO(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function MO(t,e,n,r){if(e===null||typeof e>"u"||PO(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Dt(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var at={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){at[t]=new Dt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];at[e]=new Dt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){at[t]=new Dt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){at[t]=new Dt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){at[t]=new Dt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){at[t]=new Dt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){at[t]=new Dt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){at[t]=new Dt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){at[t]=new Dt(t,5,!1,t.toLowerCase(),null,!1,!1)});var fy=/[\-:]([a-z])/g;function hy(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(fy,hy);at[e]=new Dt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(fy,hy);at[e]=new Dt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(fy,hy);at[e]=new Dt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){at[t]=new Dt(t,1,!1,t.toLowerCase(),null,!1,!1)});at.xlinkHref=new Dt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){at[t]=new Dt(t,1,!1,t.toLowerCase(),null,!0,!0)});function py(t,e,n,r){var i=at.hasOwnProperty(e)?at[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(MO(e,n,i,r)&&(n=null),r||i===null?OO(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Yr=_O.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fu=Symbol.for("react.element"),Ns=Symbol.for("react.portal"),js=Symbol.for("react.fragment"),my=Symbol.for("react.strict_mode"),im=Symbol.for("react.profiler"),Q1=Symbol.for("react.provider"),X1=Symbol.for("react.context"),gy=Symbol.for("react.forward_ref"),om=Symbol.for("react.suspense"),sm=Symbol.for("react.suspense_list"),yy=Symbol.for("react.memo"),li=Symbol.for("react.lazy"),Z1=Symbol.for("react.offscreen"),N0=Symbol.iterator;function rl(t){return t===null||typeof t!="object"?null:(t=N0&&t[N0]||t["@@iterator"],typeof t=="function"?t:null)}var Me=Object.assign,Dh;function gl(t){if(Dh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Dh=e&&e[1]||""}return`
`+Dh+t}var Ih=!1;function Nh(t,e){if(!t||Ih)return"";Ih=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var l=`
`+i[s].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=s&&0<=a);break}}}finally{Ih=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?gl(t):""}function AO(t){switch(t.tag){case 5:return gl(t.type);case 16:return gl("Lazy");case 13:return gl("Suspense");case 19:return gl("SuspenseList");case 0:case 2:case 15:return t=Nh(t.type,!1),t;case 11:return t=Nh(t.type.render,!1),t;case 1:return t=Nh(t.type,!0),t;default:return""}}function am(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case js:return"Fragment";case Ns:return"Portal";case im:return"Profiler";case my:return"StrictMode";case om:return"Suspense";case sm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case X1:return(t.displayName||"Context")+".Consumer";case Q1:return(t._context.displayName||"Context")+".Provider";case gy:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case yy:return e=t.displayName||null,e!==null?e:am(t.type)||"Memo";case li:e=t._payload,t=t._init;try{return am(t(e))}catch{}}return null}function DO(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return am(e);case 8:return e===my?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ui(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function eS(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function IO(t){var e=eS(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function hu(t){t._valueTracker||(t._valueTracker=IO(t))}function tS(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=eS(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Sd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function lm(t,e){var n=e.checked;return Me({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function j0(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ui(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function nS(t,e){e=e.checked,e!=null&&py(t,"checked",e,!1)}function cm(t,e){nS(t,e);var n=Ui(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?um(t,e.type,n):e.hasOwnProperty("defaultValue")&&um(t,e.type,Ui(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function L0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function um(t,e,n){(e!=="number"||Sd(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var yl=Array.isArray;function Js(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ui(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function dm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return Me({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function $0(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error($(92));if(yl(n)){if(1<n.length)throw Error($(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ui(n)}}function rS(t,e){var n=Ui(e.value),r=Ui(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function F0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function iS(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?iS(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var pu,oS=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(pu=pu||document.createElement("div"),pu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=pu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Wl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Tl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},NO=["Webkit","ms","Moz","O"];Object.keys(Tl).forEach(function(t){NO.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Tl[e]=Tl[t]})});function sS(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Tl.hasOwnProperty(t)&&Tl[t]?(""+e).trim():e+"px"}function aS(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=sS(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var jO=Me({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function hm(t,e){if(e){if(jO[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function pm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mm=null;function vy(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var gm=null,Ys=null,Qs=null;function B0(t){if(t=zc(t)){if(typeof gm!="function")throw Error($(280));var e=t.stateNode;e&&(e=_f(e),gm(t.stateNode,t.type,e))}}function lS(t){Ys?Qs?Qs.push(t):Qs=[t]:Ys=t}function cS(){if(Ys){var t=Ys,e=Qs;if(Qs=Ys=null,B0(t),e)for(t=0;t<e.length;t++)B0(e[t])}}function uS(t,e){return t(e)}function dS(){}var jh=!1;function fS(t,e,n){if(jh)return t(e,n);jh=!0;try{return uS(t,e,n)}finally{jh=!1,(Ys!==null||Qs!==null)&&(dS(),cS())}}function Kl(t,e){var n=t.stateNode;if(n===null)return null;var r=_f(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($(231,e,typeof n));return n}var ym=!1;if(Vr)try{var il={};Object.defineProperty(il,"passive",{get:function(){ym=!0}}),window.addEventListener("test",il,il),window.removeEventListener("test",il,il)}catch{ym=!1}function LO(t,e,n,r,i,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var _l=!1,Cd=null,kd=!1,vm=null,$O={onError:function(t){_l=!0,Cd=t}};function FO(t,e,n,r,i,o,s,a,l){_l=!1,Cd=null,LO.apply($O,arguments)}function BO(t,e,n,r,i,o,s,a,l){if(FO.apply(this,arguments),_l){if(_l){var c=Cd;_l=!1,Cd=null}else throw Error($(198));kd||(kd=!0,vm=c)}}function as(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function hS(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function z0(t){if(as(t)!==t)throw Error($(188))}function zO(t){var e=t.alternate;if(!e){if(e=as(t),e===null)throw Error($(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return z0(i),t;if(o===r)return z0(i),e;o=o.sibling}throw Error($(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?t:e}function pS(t){return t=zO(t),t!==null?mS(t):null}function mS(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=mS(t);if(e!==null)return e;t=t.sibling}return null}var gS=an.unstable_scheduleCallback,U0=an.unstable_cancelCallback,UO=an.unstable_shouldYield,VO=an.unstable_requestPaint,Le=an.unstable_now,HO=an.unstable_getCurrentPriorityLevel,xy=an.unstable_ImmediatePriority,yS=an.unstable_UserBlockingPriority,Ed=an.unstable_NormalPriority,WO=an.unstable_LowPriority,vS=an.unstable_IdlePriority,Cf=null,mr=null;function KO(t){if(mr&&typeof mr.onCommitFiberRoot=="function")try{mr.onCommitFiberRoot(Cf,t,void 0,(t.current.flags&128)===128)}catch{}}var Wn=Math.clz32?Math.clz32:JO,qO=Math.log,GO=Math.LN2;function JO(t){return t>>>=0,t===0?32:31-(qO(t)/GO|0)|0}var mu=64,gu=4194304;function vl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Td(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var a=s&~i;a!==0?r=vl(a):(o&=s,o!==0&&(r=vl(o)))}else s=n&~i,s!==0?r=vl(s):o!==0&&(r=vl(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Wn(e),i=1<<n,r|=t[n],e&=~i;return r}function YO(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function QO(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-Wn(o),a=1<<s,l=i[s];l===-1?(!(a&n)||a&r)&&(i[s]=YO(a,e)):l<=e&&(t.expiredLanes|=a),o&=~a}}function xm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function xS(){var t=mu;return mu<<=1,!(mu&4194240)&&(mu=64),t}function Lh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Fc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Wn(e),t[e]=n}function XO(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Wn(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function wy(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Wn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var me=0;function wS(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var bS,by,SS,CS,kS,wm=!1,yu=[],Oi=null,Pi=null,Mi=null,ql=new Map,Gl=new Map,hi=[],ZO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function V0(t,e){switch(t){case"focusin":case"focusout":Oi=null;break;case"dragenter":case"dragleave":Pi=null;break;case"mouseover":case"mouseout":Mi=null;break;case"pointerover":case"pointerout":ql.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gl.delete(e.pointerId)}}function ol(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=zc(e),e!==null&&by(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function eP(t,e,n,r,i){switch(e){case"focusin":return Oi=ol(Oi,t,e,n,r,i),!0;case"dragenter":return Pi=ol(Pi,t,e,n,r,i),!0;case"mouseover":return Mi=ol(Mi,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return ql.set(o,ol(ql.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Gl.set(o,ol(Gl.get(o)||null,t,e,n,r,i)),!0}return!1}function ES(t){var e=So(t.target);if(e!==null){var n=as(e);if(n!==null){if(e=n.tag,e===13){if(e=hS(n),e!==null){t.blockedOn=e,kS(t.priority,function(){SS(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function nd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=bm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);mm=r,n.target.dispatchEvent(r),mm=null}else return e=zc(n),e!==null&&by(e),t.blockedOn=n,!1;e.shift()}return!0}function H0(t,e,n){nd(t)&&n.delete(e)}function tP(){wm=!1,Oi!==null&&nd(Oi)&&(Oi=null),Pi!==null&&nd(Pi)&&(Pi=null),Mi!==null&&nd(Mi)&&(Mi=null),ql.forEach(H0),Gl.forEach(H0)}function sl(t,e){t.blockedOn===e&&(t.blockedOn=null,wm||(wm=!0,an.unstable_scheduleCallback(an.unstable_NormalPriority,tP)))}function Jl(t){function e(i){return sl(i,t)}if(0<yu.length){sl(yu[0],t);for(var n=1;n<yu.length;n++){var r=yu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Oi!==null&&sl(Oi,t),Pi!==null&&sl(Pi,t),Mi!==null&&sl(Mi,t),ql.forEach(e),Gl.forEach(e),n=0;n<hi.length;n++)r=hi[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<hi.length&&(n=hi[0],n.blockedOn===null);)ES(n),n.blockedOn===null&&hi.shift()}var Xs=Yr.ReactCurrentBatchConfig,_d=!0;function nP(t,e,n,r){var i=me,o=Xs.transition;Xs.transition=null;try{me=1,Sy(t,e,n,r)}finally{me=i,Xs.transition=o}}function rP(t,e,n,r){var i=me,o=Xs.transition;Xs.transition=null;try{me=4,Sy(t,e,n,r)}finally{me=i,Xs.transition=o}}function Sy(t,e,n,r){if(_d){var i=bm(t,e,n,r);if(i===null)qh(t,e,r,Rd,n),V0(t,r);else if(eP(i,t,e,n,r))r.stopPropagation();else if(V0(t,r),e&4&&-1<ZO.indexOf(t)){for(;i!==null;){var o=zc(i);if(o!==null&&bS(o),o=bm(t,e,n,r),o===null&&qh(t,e,r,Rd,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else qh(t,e,r,null,n)}}var Rd=null;function bm(t,e,n,r){if(Rd=null,t=vy(r),t=So(t),t!==null)if(e=as(t),e===null)t=null;else if(n=e.tag,n===13){if(t=hS(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Rd=t,null}function TS(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(HO()){case xy:return 1;case yS:return 4;case Ed:case WO:return 16;case vS:return 536870912;default:return 16}default:return 16}}var ki=null,Cy=null,rd=null;function _S(){if(rd)return rd;var t,e=Cy,n=e.length,r,i="value"in ki?ki.value:ki.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return rd=i.slice(t,1<r?1-r:void 0)}function id(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function vu(){return!0}function W0(){return!1}function un(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?vu:W0,this.isPropagationStopped=W0,this}return Me(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=vu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=vu)},persist:function(){},isPersistent:vu}),e}var Ha={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ky=un(Ha),Bc=Me({},Ha,{view:0,detail:0}),iP=un(Bc),$h,Fh,al,kf=Me({},Bc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ey,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==al&&(al&&t.type==="mousemove"?($h=t.screenX-al.screenX,Fh=t.screenY-al.screenY):Fh=$h=0,al=t),$h)},movementY:function(t){return"movementY"in t?t.movementY:Fh}}),K0=un(kf),oP=Me({},kf,{dataTransfer:0}),sP=un(oP),aP=Me({},Bc,{relatedTarget:0}),Bh=un(aP),lP=Me({},Ha,{animationName:0,elapsedTime:0,pseudoElement:0}),cP=un(lP),uP=Me({},Ha,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),dP=un(uP),fP=Me({},Ha,{data:0}),q0=un(fP),hP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gP(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=mP[t])?!!e[t]:!1}function Ey(){return gP}var yP=Me({},Bc,{key:function(t){if(t.key){var e=hP[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=id(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?pP[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ey,charCode:function(t){return t.type==="keypress"?id(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?id(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),vP=un(yP),xP=Me({},kf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),G0=un(xP),wP=Me({},Bc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ey}),bP=un(wP),SP=Me({},Ha,{propertyName:0,elapsedTime:0,pseudoElement:0}),CP=un(SP),kP=Me({},kf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),EP=un(kP),TP=[9,13,27,32],Ty=Vr&&"CompositionEvent"in window,Rl=null;Vr&&"documentMode"in document&&(Rl=document.documentMode);var _P=Vr&&"TextEvent"in window&&!Rl,RS=Vr&&(!Ty||Rl&&8<Rl&&11>=Rl),J0=String.fromCharCode(32),Y0=!1;function OS(t,e){switch(t){case"keyup":return TP.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function PS(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ls=!1;function RP(t,e){switch(t){case"compositionend":return PS(e);case"keypress":return e.which!==32?null:(Y0=!0,J0);case"textInput":return t=e.data,t===J0&&Y0?null:t;default:return null}}function OP(t,e){if(Ls)return t==="compositionend"||!Ty&&OS(t,e)?(t=_S(),rd=Cy=ki=null,Ls=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return RS&&e.locale!=="ko"?null:e.data;default:return null}}var PP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Q0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!PP[t.type]:e==="textarea"}function MS(t,e,n,r){lS(r),e=Od(e,"onChange"),0<e.length&&(n=new ky("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ol=null,Yl=null;function MP(t){US(t,0)}function Ef(t){var e=Bs(t);if(tS(e))return t}function AP(t,e){if(t==="change")return e}var AS=!1;if(Vr){var zh;if(Vr){var Uh="oninput"in document;if(!Uh){var X0=document.createElement("div");X0.setAttribute("oninput","return;"),Uh=typeof X0.oninput=="function"}zh=Uh}else zh=!1;AS=zh&&(!document.documentMode||9<document.documentMode)}function Z0(){Ol&&(Ol.detachEvent("onpropertychange",DS),Yl=Ol=null)}function DS(t){if(t.propertyName==="value"&&Ef(Yl)){var e=[];MS(e,Yl,t,vy(t)),fS(MP,e)}}function DP(t,e,n){t==="focusin"?(Z0(),Ol=e,Yl=n,Ol.attachEvent("onpropertychange",DS)):t==="focusout"&&Z0()}function IP(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ef(Yl)}function NP(t,e){if(t==="click")return Ef(e)}function jP(t,e){if(t==="input"||t==="change")return Ef(e)}function LP(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Gn=typeof Object.is=="function"?Object.is:LP;function Ql(t,e){if(Gn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!rm.call(e,i)||!Gn(t[i],e[i]))return!1}return!0}function ex(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function tx(t,e){var n=ex(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ex(n)}}function IS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?IS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function NS(){for(var t=window,e=Sd();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Sd(t.document)}return e}function _y(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function $P(t){var e=NS(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&IS(n.ownerDocument.documentElement,n)){if(r!==null&&_y(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=tx(n,o);var s=tx(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var FP=Vr&&"documentMode"in document&&11>=document.documentMode,$s=null,Sm=null,Pl=null,Cm=!1;function nx(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Cm||$s==null||$s!==Sd(r)||(r=$s,"selectionStart"in r&&_y(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Pl&&Ql(Pl,r)||(Pl=r,r=Od(Sm,"onSelect"),0<r.length&&(e=new ky("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=$s)))}function xu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Fs={animationend:xu("Animation","AnimationEnd"),animationiteration:xu("Animation","AnimationIteration"),animationstart:xu("Animation","AnimationStart"),transitionend:xu("Transition","TransitionEnd")},Vh={},jS={};Vr&&(jS=document.createElement("div").style,"AnimationEvent"in window||(delete Fs.animationend.animation,delete Fs.animationiteration.animation,delete Fs.animationstart.animation),"TransitionEvent"in window||delete Fs.transitionend.transition);function Tf(t){if(Vh[t])return Vh[t];if(!Fs[t])return t;var e=Fs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in jS)return Vh[t]=e[n];return t}var LS=Tf("animationend"),$S=Tf("animationiteration"),FS=Tf("animationstart"),BS=Tf("transitionend"),zS=new Map,rx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xi(t,e){zS.set(t,e),ss(e,[t])}for(var Hh=0;Hh<rx.length;Hh++){var Wh=rx[Hh],BP=Wh.toLowerCase(),zP=Wh[0].toUpperCase()+Wh.slice(1);Xi(BP,"on"+zP)}Xi(LS,"onAnimationEnd");Xi($S,"onAnimationIteration");Xi(FS,"onAnimationStart");Xi("dblclick","onDoubleClick");Xi("focusin","onFocus");Xi("focusout","onBlur");Xi(BS,"onTransitionEnd");Sa("onMouseEnter",["mouseout","mouseover"]);Sa("onMouseLeave",["mouseout","mouseover"]);Sa("onPointerEnter",["pointerout","pointerover"]);Sa("onPointerLeave",["pointerout","pointerover"]);ss("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ss("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ss("onBeforeInput",["compositionend","keypress","textInput","paste"]);ss("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ss("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ss("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),UP=new Set("cancel close invalid load scroll toggle".split(" ").concat(xl));function ix(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,BO(r,e,void 0,t),t.currentTarget=null}function US(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;ix(i,a,c),o=l}else for(s=0;s<r.length;s++){if(a=r[s],l=a.instance,c=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;ix(i,a,c),o=l}}}if(kd)throw t=vm,kd=!1,vm=null,t}function ke(t,e){var n=e[Rm];n===void 0&&(n=e[Rm]=new Set);var r=t+"__bubble";n.has(r)||(VS(e,t,2,!1),n.add(r))}function Kh(t,e,n){var r=0;e&&(r|=4),VS(n,t,r,e)}var wu="_reactListening"+Math.random().toString(36).slice(2);function Xl(t){if(!t[wu]){t[wu]=!0,Y1.forEach(function(n){n!=="selectionchange"&&(UP.has(n)||Kh(n,!1,t),Kh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[wu]||(e[wu]=!0,Kh("selectionchange",!1,e))}}function VS(t,e,n,r){switch(TS(e)){case 1:var i=nP;break;case 4:i=rP;break;default:i=Sy}n=i.bind(null,e,n,t),i=void 0,!ym||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function qh(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;a!==null;){if(s=So(a),s===null)return;if(l=s.tag,l===5||l===6){r=o=s;continue e}a=a.parentNode}}r=r.return}fS(function(){var c=o,u=vy(n),d=[];e:{var f=zS.get(t);if(f!==void 0){var h=ky,p=t;switch(t){case"keypress":if(id(n)===0)break e;case"keydown":case"keyup":h=vP;break;case"focusin":p="focus",h=Bh;break;case"focusout":p="blur",h=Bh;break;case"beforeblur":case"afterblur":h=Bh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=K0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=sP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=bP;break;case LS:case $S:case FS:h=cP;break;case BS:h=CP;break;case"scroll":h=iP;break;case"wheel":h=EP;break;case"copy":case"cut":case"paste":h=dP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=G0}var g=(e&4)!==0,x=!g&&t==="scroll",v=g?f!==null?f+"Capture":null:f;g=[];for(var w=c,S;w!==null;){S=w;var b=S.stateNode;if(S.tag===5&&b!==null&&(S=b,v!==null&&(b=Kl(w,v),b!=null&&g.push(Zl(w,b,S)))),x)break;w=w.return}0<g.length&&(f=new h(f,p,null,n,u),d.push({event:f,listeners:g}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",f&&n!==mm&&(p=n.relatedTarget||n.fromElement)&&(So(p)||p[Hr]))break e;if((h||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=c,p=p?So(p):null,p!==null&&(x=as(p),p!==x||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=c),h!==p)){if(g=K0,b="onMouseLeave",v="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(g=G0,b="onPointerLeave",v="onPointerEnter",w="pointer"),x=h==null?f:Bs(h),S=p==null?f:Bs(p),f=new g(b,w+"leave",h,n,u),f.target=x,f.relatedTarget=S,b=null,So(u)===c&&(g=new g(v,w+"enter",p,n,u),g.target=S,g.relatedTarget=x,b=g),x=b,h&&p)t:{for(g=h,v=p,w=0,S=g;S;S=vs(S))w++;for(S=0,b=v;b;b=vs(b))S++;for(;0<w-S;)g=vs(g),w--;for(;0<S-w;)v=vs(v),S--;for(;w--;){if(g===v||v!==null&&g===v.alternate)break t;g=vs(g),v=vs(v)}g=null}else g=null;h!==null&&ox(d,f,h,g,!1),p!==null&&x!==null&&ox(d,x,p,g,!0)}}e:{if(f=c?Bs(c):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var C=AP;else if(Q0(f))if(AS)C=jP;else{C=IP;var k=DP}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(C=NP);if(C&&(C=C(t,c))){MS(d,C,n,u);break e}k&&k(t,f,c),t==="focusout"&&(k=f._wrapperState)&&k.controlled&&f.type==="number"&&um(f,"number",f.value)}switch(k=c?Bs(c):window,t){case"focusin":(Q0(k)||k.contentEditable==="true")&&($s=k,Sm=c,Pl=null);break;case"focusout":Pl=Sm=$s=null;break;case"mousedown":Cm=!0;break;case"contextmenu":case"mouseup":case"dragend":Cm=!1,nx(d,n,u);break;case"selectionchange":if(FP)break;case"keydown":case"keyup":nx(d,n,u)}var E;if(Ty)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Ls?OS(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(RS&&n.locale!=="ko"&&(Ls||_!=="onCompositionStart"?_==="onCompositionEnd"&&Ls&&(E=_S()):(ki=u,Cy="value"in ki?ki.value:ki.textContent,Ls=!0)),k=Od(c,_),0<k.length&&(_=new q0(_,t,null,n,u),d.push({event:_,listeners:k}),E?_.data=E:(E=PS(n),E!==null&&(_.data=E)))),(E=_P?RP(t,n):OP(t,n))&&(c=Od(c,"onBeforeInput"),0<c.length&&(u=new q0("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=E))}US(d,e)})}function Zl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Od(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Kl(t,n),o!=null&&r.unshift(Zl(t,o,i)),o=Kl(t,e),o!=null&&r.push(Zl(t,o,i))),t=t.return}return r}function vs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ox(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Kl(n,o),l!=null&&s.unshift(Zl(n,l,a))):i||(l=Kl(n,o),l!=null&&s.push(Zl(n,l,a)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var VP=/\r\n?/g,HP=/\u0000|\uFFFD/g;function sx(t){return(typeof t=="string"?t:""+t).replace(VP,`
`).replace(HP,"")}function bu(t,e,n){if(e=sx(e),sx(t)!==e&&n)throw Error($(425))}function Pd(){}var km=null,Em=null;function Tm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var _m=typeof setTimeout=="function"?setTimeout:void 0,WP=typeof clearTimeout=="function"?clearTimeout:void 0,ax=typeof Promise=="function"?Promise:void 0,KP=typeof queueMicrotask=="function"?queueMicrotask:typeof ax<"u"?function(t){return ax.resolve(null).then(t).catch(qP)}:_m;function qP(t){setTimeout(function(){throw t})}function Gh(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Jl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Jl(e)}function Ai(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function lx(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Wa=Math.random().toString(36).slice(2),fr="__reactFiber$"+Wa,ec="__reactProps$"+Wa,Hr="__reactContainer$"+Wa,Rm="__reactEvents$"+Wa,GP="__reactListeners$"+Wa,JP="__reactHandles$"+Wa;function So(t){var e=t[fr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Hr]||n[fr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=lx(t);t!==null;){if(n=t[fr])return n;t=lx(t)}return e}t=n,n=t.parentNode}return null}function zc(t){return t=t[fr]||t[Hr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Bs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function _f(t){return t[ec]||null}var Om=[],zs=-1;function Zi(t){return{current:t}}function Ee(t){0>zs||(t.current=Om[zs],Om[zs]=null,zs--)}function be(t,e){zs++,Om[zs]=t.current,t.current=e}var Vi={},gt=Zi(Vi),Wt=Zi(!1),Wo=Vi;function Ca(t,e){var n=t.type.contextTypes;if(!n)return Vi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Kt(t){return t=t.childContextTypes,t!=null}function Md(){Ee(Wt),Ee(gt)}function cx(t,e,n){if(gt.current!==Vi)throw Error($(168));be(gt,e),be(Wt,n)}function HS(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error($(108,DO(t)||"Unknown",i));return Me({},n,r)}function Ad(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Vi,Wo=gt.current,be(gt,t),be(Wt,Wt.current),!0}function ux(t,e,n){var r=t.stateNode;if(!r)throw Error($(169));n?(t=HS(t,e,Wo),r.__reactInternalMemoizedMergedChildContext=t,Ee(Wt),Ee(gt),be(gt,t)):Ee(Wt),be(Wt,n)}var Dr=null,Rf=!1,Jh=!1;function WS(t){Dr===null?Dr=[t]:Dr.push(t)}function YP(t){Rf=!0,WS(t)}function eo(){if(!Jh&&Dr!==null){Jh=!0;var t=0,e=me;try{var n=Dr;for(me=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Dr=null,Rf=!1}catch(i){throw Dr!==null&&(Dr=Dr.slice(t+1)),gS(xy,eo),i}finally{me=e,Jh=!1}}return null}var Us=[],Vs=0,Dd=null,Id=0,yn=[],vn=0,Ko=null,jr=1,Lr="";function po(t,e){Us[Vs++]=Id,Us[Vs++]=Dd,Dd=t,Id=e}function KS(t,e,n){yn[vn++]=jr,yn[vn++]=Lr,yn[vn++]=Ko,Ko=t;var r=jr;t=Lr;var i=32-Wn(r)-1;r&=~(1<<i),n+=1;var o=32-Wn(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,jr=1<<32-Wn(e)+i|n<<i|r,Lr=o+t}else jr=1<<o|n<<i|r,Lr=t}function Ry(t){t.return!==null&&(po(t,1),KS(t,1,0))}function Oy(t){for(;t===Dd;)Dd=Us[--Vs],Us[Vs]=null,Id=Us[--Vs],Us[Vs]=null;for(;t===Ko;)Ko=yn[--vn],yn[vn]=null,Lr=yn[--vn],yn[vn]=null,jr=yn[--vn],yn[vn]=null}var on=null,rn=null,_e=!1,zn=null;function qS(t,e){var n=wn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function dx(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,on=t,rn=Ai(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,on=t,rn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ko!==null?{id:jr,overflow:Lr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=wn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,on=t,rn=null,!0):!1;default:return!1}}function Pm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Mm(t){if(_e){var e=rn;if(e){var n=e;if(!dx(t,e)){if(Pm(t))throw Error($(418));e=Ai(n.nextSibling);var r=on;e&&dx(t,e)?qS(r,n):(t.flags=t.flags&-4097|2,_e=!1,on=t)}}else{if(Pm(t))throw Error($(418));t.flags=t.flags&-4097|2,_e=!1,on=t}}}function fx(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;on=t}function Su(t){if(t!==on)return!1;if(!_e)return fx(t),_e=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Tm(t.type,t.memoizedProps)),e&&(e=rn)){if(Pm(t))throw GS(),Error($(418));for(;e;)qS(t,e),e=Ai(e.nextSibling)}if(fx(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){rn=Ai(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}rn=null}}else rn=on?Ai(t.stateNode.nextSibling):null;return!0}function GS(){for(var t=rn;t;)t=Ai(t.nextSibling)}function ka(){rn=on=null,_e=!1}function Py(t){zn===null?zn=[t]:zn.push(t)}var QP=Yr.ReactCurrentBatchConfig;function ll(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var a=i.refs;s===null?delete a[o]:a[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error($(284));if(!n._owner)throw Error($(290,t))}return t}function Cu(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function hx(t){var e=t._init;return e(t._payload)}function JS(t){function e(v,w){if(t){var S=v.deletions;S===null?(v.deletions=[w],v.flags|=16):S.push(w)}}function n(v,w){if(!t)return null;for(;w!==null;)e(v,w),w=w.sibling;return null}function r(v,w){for(v=new Map;w!==null;)w.key!==null?v.set(w.key,w):v.set(w.index,w),w=w.sibling;return v}function i(v,w){return v=ji(v,w),v.index=0,v.sibling=null,v}function o(v,w,S){return v.index=S,t?(S=v.alternate,S!==null?(S=S.index,S<w?(v.flags|=2,w):S):(v.flags|=2,w)):(v.flags|=1048576,w)}function s(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,w,S,b){return w===null||w.tag!==6?(w=np(S,v.mode,b),w.return=v,w):(w=i(w,S),w.return=v,w)}function l(v,w,S,b){var C=S.type;return C===js?u(v,w,S.props.children,b,S.key):w!==null&&(w.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===li&&hx(C)===w.type)?(b=i(w,S.props),b.ref=ll(v,w,S),b.return=v,b):(b=dd(S.type,S.key,S.props,null,v.mode,b),b.ref=ll(v,w,S),b.return=v,b)}function c(v,w,S,b){return w===null||w.tag!==4||w.stateNode.containerInfo!==S.containerInfo||w.stateNode.implementation!==S.implementation?(w=rp(S,v.mode,b),w.return=v,w):(w=i(w,S.children||[]),w.return=v,w)}function u(v,w,S,b,C){return w===null||w.tag!==7?(w=Lo(S,v.mode,b,C),w.return=v,w):(w=i(w,S),w.return=v,w)}function d(v,w,S){if(typeof w=="string"&&w!==""||typeof w=="number")return w=np(""+w,v.mode,S),w.return=v,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case fu:return S=dd(w.type,w.key,w.props,null,v.mode,S),S.ref=ll(v,null,w),S.return=v,S;case Ns:return w=rp(w,v.mode,S),w.return=v,w;case li:var b=w._init;return d(v,b(w._payload),S)}if(yl(w)||rl(w))return w=Lo(w,v.mode,S,null),w.return=v,w;Cu(v,w)}return null}function f(v,w,S,b){var C=w!==null?w.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return C!==null?null:a(v,w,""+S,b);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case fu:return S.key===C?l(v,w,S,b):null;case Ns:return S.key===C?c(v,w,S,b):null;case li:return C=S._init,f(v,w,C(S._payload),b)}if(yl(S)||rl(S))return C!==null?null:u(v,w,S,b,null);Cu(v,S)}return null}function h(v,w,S,b,C){if(typeof b=="string"&&b!==""||typeof b=="number")return v=v.get(S)||null,a(w,v,""+b,C);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case fu:return v=v.get(b.key===null?S:b.key)||null,l(w,v,b,C);case Ns:return v=v.get(b.key===null?S:b.key)||null,c(w,v,b,C);case li:var k=b._init;return h(v,w,S,k(b._payload),C)}if(yl(b)||rl(b))return v=v.get(S)||null,u(w,v,b,C,null);Cu(w,b)}return null}function p(v,w,S,b){for(var C=null,k=null,E=w,_=w=0,O=null;E!==null&&_<S.length;_++){E.index>_?(O=E,E=null):O=E.sibling;var T=f(v,E,S[_],b);if(T===null){E===null&&(E=O);break}t&&E&&T.alternate===null&&e(v,E),w=o(T,w,_),k===null?C=T:k.sibling=T,k=T,E=O}if(_===S.length)return n(v,E),_e&&po(v,_),C;if(E===null){for(;_<S.length;_++)E=d(v,S[_],b),E!==null&&(w=o(E,w,_),k===null?C=E:k.sibling=E,k=E);return _e&&po(v,_),C}for(E=r(v,E);_<S.length;_++)O=h(E,v,_,S[_],b),O!==null&&(t&&O.alternate!==null&&E.delete(O.key===null?_:O.key),w=o(O,w,_),k===null?C=O:k.sibling=O,k=O);return t&&E.forEach(function(D){return e(v,D)}),_e&&po(v,_),C}function g(v,w,S,b){var C=rl(S);if(typeof C!="function")throw Error($(150));if(S=C.call(S),S==null)throw Error($(151));for(var k=C=null,E=w,_=w=0,O=null,T=S.next();E!==null&&!T.done;_++,T=S.next()){E.index>_?(O=E,E=null):O=E.sibling;var D=f(v,E,T.value,b);if(D===null){E===null&&(E=O);break}t&&E&&D.alternate===null&&e(v,E),w=o(D,w,_),k===null?C=D:k.sibling=D,k=D,E=O}if(T.done)return n(v,E),_e&&po(v,_),C;if(E===null){for(;!T.done;_++,T=S.next())T=d(v,T.value,b),T!==null&&(w=o(T,w,_),k===null?C=T:k.sibling=T,k=T);return _e&&po(v,_),C}for(E=r(v,E);!T.done;_++,T=S.next())T=h(E,v,_,T.value,b),T!==null&&(t&&T.alternate!==null&&E.delete(T.key===null?_:T.key),w=o(T,w,_),k===null?C=T:k.sibling=T,k=T);return t&&E.forEach(function(j){return e(v,j)}),_e&&po(v,_),C}function x(v,w,S,b){if(typeof S=="object"&&S!==null&&S.type===js&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case fu:e:{for(var C=S.key,k=w;k!==null;){if(k.key===C){if(C=S.type,C===js){if(k.tag===7){n(v,k.sibling),w=i(k,S.props.children),w.return=v,v=w;break e}}else if(k.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===li&&hx(C)===k.type){n(v,k.sibling),w=i(k,S.props),w.ref=ll(v,k,S),w.return=v,v=w;break e}n(v,k);break}else e(v,k);k=k.sibling}S.type===js?(w=Lo(S.props.children,v.mode,b,S.key),w.return=v,v=w):(b=dd(S.type,S.key,S.props,null,v.mode,b),b.ref=ll(v,w,S),b.return=v,v=b)}return s(v);case Ns:e:{for(k=S.key;w!==null;){if(w.key===k)if(w.tag===4&&w.stateNode.containerInfo===S.containerInfo&&w.stateNode.implementation===S.implementation){n(v,w.sibling),w=i(w,S.children||[]),w.return=v,v=w;break e}else{n(v,w);break}else e(v,w);w=w.sibling}w=rp(S,v.mode,b),w.return=v,v=w}return s(v);case li:return k=S._init,x(v,w,k(S._payload),b)}if(yl(S))return p(v,w,S,b);if(rl(S))return g(v,w,S,b);Cu(v,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,w!==null&&w.tag===6?(n(v,w.sibling),w=i(w,S),w.return=v,v=w):(n(v,w),w=np(S,v.mode,b),w.return=v,v=w),s(v)):n(v,w)}return x}var Ea=JS(!0),YS=JS(!1),Nd=Zi(null),jd=null,Hs=null,My=null;function Ay(){My=Hs=jd=null}function Dy(t){var e=Nd.current;Ee(Nd),t._currentValue=e}function Am(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Zs(t,e){jd=t,My=Hs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Vt=!0),t.firstContext=null)}function _n(t){var e=t._currentValue;if(My!==t)if(t={context:t,memoizedValue:e,next:null},Hs===null){if(jd===null)throw Error($(308));Hs=t,jd.dependencies={lanes:0,firstContext:t}}else Hs=Hs.next=t;return e}var Co=null;function Iy(t){Co===null?Co=[t]:Co.push(t)}function QS(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Iy(e)):(n.next=i.next,i.next=n),e.interleaved=n,Wr(t,r)}function Wr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ci=!1;function Ny(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function XS(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Br(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Di(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,de&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Wr(t,n)}return i=r.interleaved,i===null?(e.next=e,Iy(r)):(e.next=i.next,i.next=e),r.interleaved=e,Wr(t,n)}function od(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,wy(t,n)}}function px(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ld(t,e,n,r){var i=t.updateQueue;ci=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,s===null?o=c:s.next=c,s=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==s&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(o!==null){var d=i.baseState;s=0,u=c=l=null,a=o;do{var f=a.lane,h=a.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,g=a;switch(f=e,h=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){d=p.call(h,d,f);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,f=typeof p=="function"?p.call(h,d,f):p,f==null)break e;d=Me({},d,f);break e;case 2:ci=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else h={eventTime:h,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=h,l=d):u=u.next=h,s|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(1);if(u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);Go|=s,t.lanes=s,t.memoizedState=d}}function mx(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error($(191,i));i.call(r)}}}var Uc={},gr=Zi(Uc),tc=Zi(Uc),nc=Zi(Uc);function ko(t){if(t===Uc)throw Error($(174));return t}function jy(t,e){switch(be(nc,e),be(tc,t),be(gr,Uc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:fm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=fm(e,t)}Ee(gr),be(gr,e)}function Ta(){Ee(gr),Ee(tc),Ee(nc)}function ZS(t){ko(nc.current);var e=ko(gr.current),n=fm(e,t.type);e!==n&&(be(tc,t),be(gr,n))}function Ly(t){tc.current===t&&(Ee(gr),Ee(tc))}var Oe=Zi(0);function $d(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Yh=[];function $y(){for(var t=0;t<Yh.length;t++)Yh[t]._workInProgressVersionPrimary=null;Yh.length=0}var sd=Yr.ReactCurrentDispatcher,Qh=Yr.ReactCurrentBatchConfig,qo=0,Pe=null,ze=null,qe=null,Fd=!1,Ml=!1,rc=0,XP=0;function ct(){throw Error($(321))}function Fy(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Gn(t[n],e[n]))return!1;return!0}function By(t,e,n,r,i,o){if(qo=o,Pe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,sd.current=t===null||t.memoizedState===null?nM:rM,t=n(r,i),Ml){o=0;do{if(Ml=!1,rc=0,25<=o)throw Error($(301));o+=1,qe=ze=null,e.updateQueue=null,sd.current=iM,t=n(r,i)}while(Ml)}if(sd.current=Bd,e=ze!==null&&ze.next!==null,qo=0,qe=ze=Pe=null,Fd=!1,e)throw Error($(300));return t}function zy(){var t=rc!==0;return rc=0,t}function sr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qe===null?Pe.memoizedState=qe=t:qe=qe.next=t,qe}function Rn(){if(ze===null){var t=Pe.alternate;t=t!==null?t.memoizedState:null}else t=ze.next;var e=qe===null?Pe.memoizedState:qe.next;if(e!==null)qe=e,ze=t;else{if(t===null)throw Error($(310));ze=t,t={memoizedState:ze.memoizedState,baseState:ze.baseState,baseQueue:ze.baseQueue,queue:ze.queue,next:null},qe===null?Pe.memoizedState=qe=t:qe=qe.next=t}return qe}function ic(t,e){return typeof e=="function"?e(t):e}function Xh(t){var e=Rn(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=ze,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var a=s=null,l=null,c=o;do{var u=c.lane;if((qo&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,s=r):l=l.next=d,Pe.lanes|=u,Go|=u}c=c.next}while(c!==null&&c!==o);l===null?s=r:l.next=a,Gn(r,e.memoizedState)||(Vt=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,Pe.lanes|=o,Go|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Zh(t){var e=Rn(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);Gn(o,e.memoizedState)||(Vt=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function eC(){}function tC(t,e){var n=Pe,r=Rn(),i=e(),o=!Gn(r.memoizedState,i);if(o&&(r.memoizedState=i,Vt=!0),r=r.queue,Uy(iC.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||qe!==null&&qe.memoizedState.tag&1){if(n.flags|=2048,oc(9,rC.bind(null,n,r,i,e),void 0,null),Je===null)throw Error($(349));qo&30||nC(n,e,i)}return i}function nC(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Pe.updateQueue,e===null?(e={lastEffect:null,stores:null},Pe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function rC(t,e,n,r){e.value=n,e.getSnapshot=r,oC(e)&&sC(t)}function iC(t,e,n){return n(function(){oC(e)&&sC(t)})}function oC(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Gn(t,n)}catch{return!0}}function sC(t){var e=Wr(t,1);e!==null&&Kn(e,t,1,-1)}function gx(t){var e=sr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ic,lastRenderedState:t},e.queue=t,t=t.dispatch=tM.bind(null,Pe,t),[e.memoizedState,t]}function oc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Pe.updateQueue,e===null?(e={lastEffect:null,stores:null},Pe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function aC(){return Rn().memoizedState}function ad(t,e,n,r){var i=sr();Pe.flags|=t,i.memoizedState=oc(1|e,n,void 0,r===void 0?null:r)}function Of(t,e,n,r){var i=Rn();r=r===void 0?null:r;var o=void 0;if(ze!==null){var s=ze.memoizedState;if(o=s.destroy,r!==null&&Fy(r,s.deps)){i.memoizedState=oc(e,n,o,r);return}}Pe.flags|=t,i.memoizedState=oc(1|e,n,o,r)}function yx(t,e){return ad(8390656,8,t,e)}function Uy(t,e){return Of(2048,8,t,e)}function lC(t,e){return Of(4,2,t,e)}function cC(t,e){return Of(4,4,t,e)}function uC(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function dC(t,e,n){return n=n!=null?n.concat([t]):null,Of(4,4,uC.bind(null,e,t),n)}function Vy(){}function fC(t,e){var n=Rn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Fy(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function hC(t,e){var n=Rn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Fy(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function pC(t,e,n){return qo&21?(Gn(n,e)||(n=xS(),Pe.lanes|=n,Go|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Vt=!0),t.memoizedState=n)}function ZP(t,e){var n=me;me=n!==0&&4>n?n:4,t(!0);var r=Qh.transition;Qh.transition={};try{t(!1),e()}finally{me=n,Qh.transition=r}}function mC(){return Rn().memoizedState}function eM(t,e,n){var r=Ni(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},gC(t))yC(e,n);else if(n=QS(t,e,n,r),n!==null){var i=Tt();Kn(n,t,r,i),vC(n,e,r)}}function tM(t,e,n){var r=Ni(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(gC(t))yC(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,Gn(a,s)){var l=e.interleaved;l===null?(i.next=i,Iy(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=QS(t,e,i,r),n!==null&&(i=Tt(),Kn(n,t,r,i),vC(n,e,r))}}function gC(t){var e=t.alternate;return t===Pe||e!==null&&e===Pe}function yC(t,e){Ml=Fd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function vC(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,wy(t,n)}}var Bd={readContext:_n,useCallback:ct,useContext:ct,useEffect:ct,useImperativeHandle:ct,useInsertionEffect:ct,useLayoutEffect:ct,useMemo:ct,useReducer:ct,useRef:ct,useState:ct,useDebugValue:ct,useDeferredValue:ct,useTransition:ct,useMutableSource:ct,useSyncExternalStore:ct,useId:ct,unstable_isNewReconciler:!1},nM={readContext:_n,useCallback:function(t,e){return sr().memoizedState=[t,e===void 0?null:e],t},useContext:_n,useEffect:yx,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ad(4194308,4,uC.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ad(4194308,4,t,e)},useInsertionEffect:function(t,e){return ad(4,2,t,e)},useMemo:function(t,e){var n=sr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=sr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=eM.bind(null,Pe,t),[r.memoizedState,t]},useRef:function(t){var e=sr();return t={current:t},e.memoizedState=t},useState:gx,useDebugValue:Vy,useDeferredValue:function(t){return sr().memoizedState=t},useTransition:function(){var t=gx(!1),e=t[0];return t=ZP.bind(null,t[1]),sr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Pe,i=sr();if(_e){if(n===void 0)throw Error($(407));n=n()}else{if(n=e(),Je===null)throw Error($(349));qo&30||nC(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,yx(iC.bind(null,r,o,t),[t]),r.flags|=2048,oc(9,rC.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=sr(),e=Je.identifierPrefix;if(_e){var n=Lr,r=jr;n=(r&~(1<<32-Wn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=rc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=XP++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},rM={readContext:_n,useCallback:fC,useContext:_n,useEffect:Uy,useImperativeHandle:dC,useInsertionEffect:lC,useLayoutEffect:cC,useMemo:hC,useReducer:Xh,useRef:aC,useState:function(){return Xh(ic)},useDebugValue:Vy,useDeferredValue:function(t){var e=Rn();return pC(e,ze.memoizedState,t)},useTransition:function(){var t=Xh(ic)[0],e=Rn().memoizedState;return[t,e]},useMutableSource:eC,useSyncExternalStore:tC,useId:mC,unstable_isNewReconciler:!1},iM={readContext:_n,useCallback:fC,useContext:_n,useEffect:Uy,useImperativeHandle:dC,useInsertionEffect:lC,useLayoutEffect:cC,useMemo:hC,useReducer:Zh,useRef:aC,useState:function(){return Zh(ic)},useDebugValue:Vy,useDeferredValue:function(t){var e=Rn();return ze===null?e.memoizedState=t:pC(e,ze.memoizedState,t)},useTransition:function(){var t=Zh(ic)[0],e=Rn().memoizedState;return[t,e]},useMutableSource:eC,useSyncExternalStore:tC,useId:mC,unstable_isNewReconciler:!1};function jn(t,e){if(t&&t.defaultProps){e=Me({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Dm(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Me({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Pf={isMounted:function(t){return(t=t._reactInternals)?as(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Tt(),i=Ni(t),o=Br(r,i);o.payload=e,n!=null&&(o.callback=n),e=Di(t,o,i),e!==null&&(Kn(e,t,i,r),od(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Tt(),i=Ni(t),o=Br(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Di(t,o,i),e!==null&&(Kn(e,t,i,r),od(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Tt(),r=Ni(t),i=Br(n,r);i.tag=2,e!=null&&(i.callback=e),e=Di(t,i,r),e!==null&&(Kn(e,t,r,n),od(e,t,r))}};function vx(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!Ql(n,r)||!Ql(i,o):!0}function xC(t,e,n){var r=!1,i=Vi,o=e.contextType;return typeof o=="object"&&o!==null?o=_n(o):(i=Kt(e)?Wo:gt.current,r=e.contextTypes,o=(r=r!=null)?Ca(t,i):Vi),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Pf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function xx(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Pf.enqueueReplaceState(e,e.state,null)}function Im(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Ny(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=_n(o):(o=Kt(e)?Wo:gt.current,i.context=Ca(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Dm(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Pf.enqueueReplaceState(i,i.state,null),Ld(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function _a(t,e){try{var n="",r=e;do n+=AO(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function ep(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Nm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var oM=typeof WeakMap=="function"?WeakMap:Map;function wC(t,e,n){n=Br(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ud||(Ud=!0,Wm=r),Nm(t,e)},n}function bC(t,e,n){n=Br(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Nm(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Nm(t,e),typeof r!="function"&&(Ii===null?Ii=new Set([this]):Ii.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function wx(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new oM;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=xM.bind(null,t,e,n),e.then(t,t))}function bx(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Sx(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Br(-1,1),e.tag=2,Di(n,e,1))),n.lanes|=1),t)}var sM=Yr.ReactCurrentOwner,Vt=!1;function Et(t,e,n,r){e.child=t===null?YS(e,null,n,r):Ea(e,t.child,n,r)}function Cx(t,e,n,r,i){n=n.render;var o=e.ref;return Zs(e,i),r=By(t,e,n,r,o,i),n=zy(),t!==null&&!Vt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Kr(t,e,i)):(_e&&n&&Ry(e),e.flags|=1,Et(t,e,r,i),e.child)}function kx(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!Qy(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,SC(t,e,o,r,i)):(t=dd(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:Ql,n(s,r)&&t.ref===e.ref)return Kr(t,e,i)}return e.flags|=1,t=ji(o,r),t.ref=e.ref,t.return=e,e.child=t}function SC(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(Ql(o,r)&&t.ref===e.ref)if(Vt=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(Vt=!0);else return e.lanes=t.lanes,Kr(t,e,i)}return jm(t,e,n,r,i)}function CC(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},be(Ks,en),en|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,be(Ks,en),en|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,be(Ks,en),en|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,be(Ks,en),en|=r;return Et(t,e,i,n),e.child}function kC(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function jm(t,e,n,r,i){var o=Kt(n)?Wo:gt.current;return o=Ca(e,o),Zs(e,i),n=By(t,e,n,r,o,i),r=zy(),t!==null&&!Vt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Kr(t,e,i)):(_e&&r&&Ry(e),e.flags|=1,Et(t,e,n,i),e.child)}function Ex(t,e,n,r,i){if(Kt(n)){var o=!0;Ad(e)}else o=!1;if(Zs(e,i),e.stateNode===null)ld(t,e),xC(e,n,r),Im(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var l=s.context,c=n.contextType;typeof c=="object"&&c!==null?c=_n(c):(c=Kt(n)?Wo:gt.current,c=Ca(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof s.getSnapshotBeforeUpdate=="function";d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||l!==c)&&xx(e,s,r,c),ci=!1;var f=e.memoizedState;s.state=f,Ld(e,r,s,i),l=e.memoizedState,a!==r||f!==l||Wt.current||ci?(typeof u=="function"&&(Dm(e,n,u,r),l=e.memoizedState),(a=ci||vx(e,n,a,r,f,l,c))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),s.props=r,s.state=l,s.context=c,r=a):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,XS(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:jn(e.type,a),s.props=c,d=e.pendingProps,f=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=_n(l):(l=Kt(n)?Wo:gt.current,l=Ca(e,l));var h=n.getDerivedStateFromProps;(u=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==d||f!==l)&&xx(e,s,r,l),ci=!1,f=e.memoizedState,s.state=f,Ld(e,r,s,i);var p=e.memoizedState;a!==d||f!==p||Wt.current||ci?(typeof h=="function"&&(Dm(e,n,h,r),p=e.memoizedState),(c=ci||vx(e,n,c,r,f,p,l)||!1)?(u||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,p,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,p,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),s.props=r,s.state=p,s.context=l,r=c):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Lm(t,e,n,r,o,i)}function Lm(t,e,n,r,i,o){kC(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&ux(e,n,!1),Kr(t,e,o);r=e.stateNode,sM.current=e;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=Ea(e,t.child,null,o),e.child=Ea(e,null,a,o)):Et(t,e,a,o),e.memoizedState=r.state,i&&ux(e,n,!0),e.child}function EC(t){var e=t.stateNode;e.pendingContext?cx(t,e.pendingContext,e.pendingContext!==e.context):e.context&&cx(t,e.context,!1),jy(t,e.containerInfo)}function Tx(t,e,n,r,i){return ka(),Py(i),e.flags|=256,Et(t,e,n,r),e.child}var $m={dehydrated:null,treeContext:null,retryLane:0};function Fm(t){return{baseLanes:t,cachePool:null,transitions:null}}function TC(t,e,n){var r=e.pendingProps,i=Oe.current,o=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),be(Oe,i&1),t===null)return Mm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=Df(s,r,0,null),t=Lo(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Fm(n),e.memoizedState=$m,t):Hy(e,s));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return aM(t,e,s,r,a,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ji(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=ji(a,o):(o=Lo(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?Fm(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=$m,r}return o=t.child,t=o.sibling,r=ji(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Hy(t,e){return e=Df({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ku(t,e,n,r){return r!==null&&Py(r),Ea(e,t.child,null,n),t=Hy(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function aM(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=ep(Error($(422))),ku(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=Df({mode:"visible",children:r.children},i,0,null),o=Lo(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Ea(e,t.child,null,s),e.child.memoizedState=Fm(s),e.memoizedState=$m,o);if(!(e.mode&1))return ku(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error($(419)),r=ep(o,r,void 0),ku(t,e,s,r)}if(a=(s&t.childLanes)!==0,Vt||a){if(r=Je,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Wr(t,i),Kn(r,t,i,-1))}return Yy(),r=ep(Error($(421))),ku(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=wM.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,rn=Ai(i.nextSibling),on=e,_e=!0,zn=null,t!==null&&(yn[vn++]=jr,yn[vn++]=Lr,yn[vn++]=Ko,jr=t.id,Lr=t.overflow,Ko=e),e=Hy(e,r.children),e.flags|=4096,e)}function _x(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Am(t.return,e,n)}function tp(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function _C(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Et(t,e,r.children,n),r=Oe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&_x(t,n,e);else if(t.tag===19)_x(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(be(Oe,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&$d(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),tp(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&$d(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}tp(e,!0,n,null,o);break;case"together":tp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ld(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Kr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Go|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,n=ji(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ji(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function lM(t,e,n){switch(e.tag){case 3:EC(e),ka();break;case 5:ZS(e);break;case 1:Kt(e.type)&&Ad(e);break;case 4:jy(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;be(Nd,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(be(Oe,Oe.current&1),e.flags|=128,null):n&e.child.childLanes?TC(t,e,n):(be(Oe,Oe.current&1),t=Kr(t,e,n),t!==null?t.sibling:null);be(Oe,Oe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return _C(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),be(Oe,Oe.current),r)break;return null;case 22:case 23:return e.lanes=0,CC(t,e,n)}return Kr(t,e,n)}var RC,Bm,OC,PC;RC=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Bm=function(){};OC=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ko(gr.current);var o=null;switch(n){case"input":i=lm(t,i),r=lm(t,r),o=[];break;case"select":i=Me({},i,{value:void 0}),r=Me({},r,{value:void 0}),o=[];break;case"textarea":i=dm(t,i),r=dm(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Pd)}hm(n,r);var s;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Hl.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(o||(o=[]),o.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Hl.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&ke("scroll",t),o||a===l||(o=[])):(o=o||[]).push(c,l))}n&&(o=o||[]).push("style",n);var c=o;(e.updateQueue=c)&&(e.flags|=4)}};PC=function(t,e,n,r){n!==r&&(e.flags|=4)};function cl(t,e){if(!_e)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ut(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function cM(t,e,n){var r=e.pendingProps;switch(Oy(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(e),null;case 1:return Kt(e.type)&&Md(),ut(e),null;case 3:return r=e.stateNode,Ta(),Ee(Wt),Ee(gt),$y(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Su(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,zn!==null&&(Gm(zn),zn=null))),Bm(t,e),ut(e),null;case 5:Ly(e);var i=ko(nc.current);if(n=e.type,t!==null&&e.stateNode!=null)OC(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error($(166));return ut(e),null}if(t=ko(gr.current),Su(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[fr]=e,r[ec]=o,t=(e.mode&1)!==0,n){case"dialog":ke("cancel",r),ke("close",r);break;case"iframe":case"object":case"embed":ke("load",r);break;case"video":case"audio":for(i=0;i<xl.length;i++)ke(xl[i],r);break;case"source":ke("error",r);break;case"img":case"image":case"link":ke("error",r),ke("load",r);break;case"details":ke("toggle",r);break;case"input":j0(r,o),ke("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},ke("invalid",r);break;case"textarea":$0(r,o),ke("invalid",r)}hm(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&bu(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&bu(r.textContent,a,t),i=["children",""+a]):Hl.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&ke("scroll",r)}switch(n){case"input":hu(r),L0(r,o,!0);break;case"textarea":hu(r),F0(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Pd)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=iS(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[fr]=e,t[ec]=r,RC(t,e,!1,!1),e.stateNode=t;e:{switch(s=pm(n,r),n){case"dialog":ke("cancel",t),ke("close",t),i=r;break;case"iframe":case"object":case"embed":ke("load",t),i=r;break;case"video":case"audio":for(i=0;i<xl.length;i++)ke(xl[i],t);i=r;break;case"source":ke("error",t),i=r;break;case"img":case"image":case"link":ke("error",t),ke("load",t),i=r;break;case"details":ke("toggle",t),i=r;break;case"input":j0(t,r),i=lm(t,r),ke("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Me({},r,{value:void 0}),ke("invalid",t);break;case"textarea":$0(t,r),i=dm(t,r),ke("invalid",t);break;default:i=r}hm(n,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?aS(t,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&oS(t,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Wl(t,l):typeof l=="number"&&Wl(t,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Hl.hasOwnProperty(o)?l!=null&&o==="onScroll"&&ke("scroll",t):l!=null&&py(t,o,l,s))}switch(n){case"input":hu(t),L0(t,r,!1);break;case"textarea":hu(t),F0(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ui(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Js(t,!!r.multiple,o,!1):r.defaultValue!=null&&Js(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Pd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ut(e),null;case 6:if(t&&e.stateNode!=null)PC(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error($(166));if(n=ko(nc.current),ko(gr.current),Su(e)){if(r=e.stateNode,n=e.memoizedProps,r[fr]=e,(o=r.nodeValue!==n)&&(t=on,t!==null))switch(t.tag){case 3:bu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&bu(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[fr]=e,e.stateNode=r}return ut(e),null;case 13:if(Ee(Oe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(_e&&rn!==null&&e.mode&1&&!(e.flags&128))GS(),ka(),e.flags|=98560,o=!1;else if(o=Su(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error($(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error($(317));o[fr]=e}else ka(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ut(e),o=!1}else zn!==null&&(Gm(zn),zn=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Oe.current&1?Ue===0&&(Ue=3):Yy())),e.updateQueue!==null&&(e.flags|=4),ut(e),null);case 4:return Ta(),Bm(t,e),t===null&&Xl(e.stateNode.containerInfo),ut(e),null;case 10:return Dy(e.type._context),ut(e),null;case 17:return Kt(e.type)&&Md(),ut(e),null;case 19:if(Ee(Oe),o=e.memoizedState,o===null)return ut(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)cl(o,!1);else{if(Ue!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=$d(t),s!==null){for(e.flags|=128,cl(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return be(Oe,Oe.current&1|2),e.child}t=t.sibling}o.tail!==null&&Le()>Ra&&(e.flags|=128,r=!0,cl(o,!1),e.lanes=4194304)}else{if(!r)if(t=$d(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),cl(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!_e)return ut(e),null}else 2*Le()-o.renderingStartTime>Ra&&n!==1073741824&&(e.flags|=128,r=!0,cl(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Le(),e.sibling=null,n=Oe.current,be(Oe,r?n&1|2:n&1),e):(ut(e),null);case 22:case 23:return Jy(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?en&1073741824&&(ut(e),e.subtreeFlags&6&&(e.flags|=8192)):ut(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function uM(t,e){switch(Oy(e),e.tag){case 1:return Kt(e.type)&&Md(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ta(),Ee(Wt),Ee(gt),$y(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ly(e),null;case 13:if(Ee(Oe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));ka()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ee(Oe),null;case 4:return Ta(),null;case 10:return Dy(e.type._context),null;case 22:case 23:return Jy(),null;case 24:return null;default:return null}}var Eu=!1,pt=!1,dM=typeof WeakSet=="function"?WeakSet:Set,W=null;function Ws(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){De(t,e,r)}else n.current=null}function zm(t,e,n){try{n()}catch(r){De(t,e,r)}}var Rx=!1;function fM(t,e){if(km=_d,t=NS(),_y(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,a=-1,l=-1,c=0,u=0,d=t,f=null;t:for(;;){for(var h;d!==n||i!==0&&d.nodeType!==3||(a=s+i),d!==o||r!==0&&d.nodeType!==3||(l=s+r),d.nodeType===3&&(s+=d.nodeValue.length),(h=d.firstChild)!==null;)f=d,d=h;for(;;){if(d===t)break t;if(f===n&&++c===i&&(a=s),f===o&&++u===r&&(l=s),(h=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=h}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Em={focusedElem:t,selectionRange:n},_d=!1,W=e;W!==null;)if(e=W,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,W=t;else for(;W!==null;){e=W;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,x=p.memoizedState,v=e.stateNode,w=v.getSnapshotBeforeUpdate(e.elementType===e.type?g:jn(e.type,g),x);v.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(b){De(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,W=t;break}W=e.return}return p=Rx,Rx=!1,p}function Al(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&zm(e,n,o)}i=i.next}while(i!==r)}}function Mf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Um(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function MC(t){var e=t.alternate;e!==null&&(t.alternate=null,MC(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[fr],delete e[ec],delete e[Rm],delete e[GP],delete e[JP])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function AC(t){return t.tag===5||t.tag===3||t.tag===4}function Ox(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||AC(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Vm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Pd));else if(r!==4&&(t=t.child,t!==null))for(Vm(t,e,n),t=t.sibling;t!==null;)Vm(t,e,n),t=t.sibling}function Hm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Hm(t,e,n),t=t.sibling;t!==null;)Hm(t,e,n),t=t.sibling}var tt=null,Fn=!1;function Zr(t,e,n){for(n=n.child;n!==null;)DC(t,e,n),n=n.sibling}function DC(t,e,n){if(mr&&typeof mr.onCommitFiberUnmount=="function")try{mr.onCommitFiberUnmount(Cf,n)}catch{}switch(n.tag){case 5:pt||Ws(n,e);case 6:var r=tt,i=Fn;tt=null,Zr(t,e,n),tt=r,Fn=i,tt!==null&&(Fn?(t=tt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):tt.removeChild(n.stateNode));break;case 18:tt!==null&&(Fn?(t=tt,n=n.stateNode,t.nodeType===8?Gh(t.parentNode,n):t.nodeType===1&&Gh(t,n),Jl(t)):Gh(tt,n.stateNode));break;case 4:r=tt,i=Fn,tt=n.stateNode.containerInfo,Fn=!0,Zr(t,e,n),tt=r,Fn=i;break;case 0:case 11:case 14:case 15:if(!pt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&zm(n,e,s),i=i.next}while(i!==r)}Zr(t,e,n);break;case 1:if(!pt&&(Ws(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){De(n,e,a)}Zr(t,e,n);break;case 21:Zr(t,e,n);break;case 22:n.mode&1?(pt=(r=pt)||n.memoizedState!==null,Zr(t,e,n),pt=r):Zr(t,e,n);break;default:Zr(t,e,n)}}function Px(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new dM),e.forEach(function(r){var i=bM.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Nn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,a=s;e:for(;a!==null;){switch(a.tag){case 5:tt=a.stateNode,Fn=!1;break e;case 3:tt=a.stateNode.containerInfo,Fn=!0;break e;case 4:tt=a.stateNode.containerInfo,Fn=!0;break e}a=a.return}if(tt===null)throw Error($(160));DC(o,s,i),tt=null,Fn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){De(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)IC(e,t),e=e.sibling}function IC(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Nn(e,t),nr(t),r&4){try{Al(3,t,t.return),Mf(3,t)}catch(g){De(t,t.return,g)}try{Al(5,t,t.return)}catch(g){De(t,t.return,g)}}break;case 1:Nn(e,t),nr(t),r&512&&n!==null&&Ws(n,n.return);break;case 5:if(Nn(e,t),nr(t),r&512&&n!==null&&Ws(n,n.return),t.flags&32){var i=t.stateNode;try{Wl(i,"")}catch(g){De(t,t.return,g)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&nS(i,o),pm(a,s);var c=pm(a,o);for(s=0;s<l.length;s+=2){var u=l[s],d=l[s+1];u==="style"?aS(i,d):u==="dangerouslySetInnerHTML"?oS(i,d):u==="children"?Wl(i,d):py(i,u,d,c)}switch(a){case"input":cm(i,o);break;case"textarea":rS(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var h=o.value;h!=null?Js(i,!!o.multiple,h,!1):f!==!!o.multiple&&(o.defaultValue!=null?Js(i,!!o.multiple,o.defaultValue,!0):Js(i,!!o.multiple,o.multiple?[]:"",!1))}i[ec]=o}catch(g){De(t,t.return,g)}}break;case 6:if(Nn(e,t),nr(t),r&4){if(t.stateNode===null)throw Error($(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(g){De(t,t.return,g)}}break;case 3:if(Nn(e,t),nr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Jl(e.containerInfo)}catch(g){De(t,t.return,g)}break;case 4:Nn(e,t),nr(t);break;case 13:Nn(e,t),nr(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(qy=Le())),r&4&&Px(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(pt=(c=pt)||u,Nn(e,t),pt=c):Nn(e,t),nr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(W=t,u=t.child;u!==null;){for(d=W=u;W!==null;){switch(f=W,h=f.child,f.tag){case 0:case 11:case 14:case 15:Al(4,f,f.return);break;case 1:Ws(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){De(r,n,g)}}break;case 5:Ws(f,f.return);break;case 22:if(f.memoizedState!==null){Ax(d);continue}}h!==null?(h.return=f,W=h):Ax(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=d.stateNode,l=d.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=sS("display",s))}catch(g){De(t,t.return,g)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(g){De(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Nn(e,t),nr(t),r&4&&Px(t);break;case 21:break;default:Nn(e,t),nr(t)}}function nr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(AC(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Wl(i,""),r.flags&=-33);var o=Ox(t);Hm(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,a=Ox(t);Vm(t,a,s);break;default:throw Error($(161))}}catch(l){De(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function hM(t,e,n){W=t,NC(t)}function NC(t,e,n){for(var r=(t.mode&1)!==0;W!==null;){var i=W,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||Eu;if(!s){var a=i.alternate,l=a!==null&&a.memoizedState!==null||pt;a=Eu;var c=pt;if(Eu=s,(pt=l)&&!c)for(W=i;W!==null;)s=W,l=s.child,s.tag===22&&s.memoizedState!==null?Dx(i):l!==null?(l.return=s,W=l):Dx(i);for(;o!==null;)W=o,NC(o),o=o.sibling;W=i,Eu=a,pt=c}Mx(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,W=o):Mx(t)}}function Mx(t){for(;W!==null;){var e=W;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:pt||Mf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!pt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:jn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&mx(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}mx(e,s,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Jl(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}pt||e.flags&512&&Um(e)}catch(f){De(e,e.return,f)}}if(e===t){W=null;break}if(n=e.sibling,n!==null){n.return=e.return,W=n;break}W=e.return}}function Ax(t){for(;W!==null;){var e=W;if(e===t){W=null;break}var n=e.sibling;if(n!==null){n.return=e.return,W=n;break}W=e.return}}function Dx(t){for(;W!==null;){var e=W;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Mf(4,e)}catch(l){De(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){De(e,i,l)}}var o=e.return;try{Um(e)}catch(l){De(e,o,l)}break;case 5:var s=e.return;try{Um(e)}catch(l){De(e,s,l)}}}catch(l){De(e,e.return,l)}if(e===t){W=null;break}var a=e.sibling;if(a!==null){a.return=e.return,W=a;break}W=e.return}}var pM=Math.ceil,zd=Yr.ReactCurrentDispatcher,Wy=Yr.ReactCurrentOwner,bn=Yr.ReactCurrentBatchConfig,de=0,Je=null,$e=null,st=0,en=0,Ks=Zi(0),Ue=0,sc=null,Go=0,Af=0,Ky=0,Dl=null,zt=null,qy=0,Ra=1/0,Pr=null,Ud=!1,Wm=null,Ii=null,Tu=!1,Ei=null,Vd=0,Il=0,Km=null,cd=-1,ud=0;function Tt(){return de&6?Le():cd!==-1?cd:cd=Le()}function Ni(t){return t.mode&1?de&2&&st!==0?st&-st:QP.transition!==null?(ud===0&&(ud=xS()),ud):(t=me,t!==0||(t=window.event,t=t===void 0?16:TS(t.type)),t):1}function Kn(t,e,n,r){if(50<Il)throw Il=0,Km=null,Error($(185));Fc(t,n,r),(!(de&2)||t!==Je)&&(t===Je&&(!(de&2)&&(Af|=n),Ue===4&&pi(t,st)),qt(t,r),n===1&&de===0&&!(e.mode&1)&&(Ra=Le()+500,Rf&&eo()))}function qt(t,e){var n=t.callbackNode;QO(t,e);var r=Td(t,t===Je?st:0);if(r===0)n!==null&&U0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&U0(n),e===1)t.tag===0?YP(Ix.bind(null,t)):WS(Ix.bind(null,t)),KP(function(){!(de&6)&&eo()}),n=null;else{switch(wS(r)){case 1:n=xy;break;case 4:n=yS;break;case 16:n=Ed;break;case 536870912:n=vS;break;default:n=Ed}n=VC(n,jC.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function jC(t,e){if(cd=-1,ud=0,de&6)throw Error($(327));var n=t.callbackNode;if(ea()&&t.callbackNode!==n)return null;var r=Td(t,t===Je?st:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Hd(t,r);else{e=r;var i=de;de|=2;var o=$C();(Je!==t||st!==e)&&(Pr=null,Ra=Le()+500,jo(t,e));do try{yM();break}catch(a){LC(t,a)}while(1);Ay(),zd.current=o,de=i,$e!==null?e=0:(Je=null,st=0,e=Ue)}if(e!==0){if(e===2&&(i=xm(t),i!==0&&(r=i,e=qm(t,i))),e===1)throw n=sc,jo(t,0),pi(t,r),qt(t,Le()),n;if(e===6)pi(t,r);else{if(i=t.current.alternate,!(r&30)&&!mM(i)&&(e=Hd(t,r),e===2&&(o=xm(t),o!==0&&(r=o,e=qm(t,o))),e===1))throw n=sc,jo(t,0),pi(t,r),qt(t,Le()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error($(345));case 2:mo(t,zt,Pr);break;case 3:if(pi(t,r),(r&130023424)===r&&(e=qy+500-Le(),10<e)){if(Td(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Tt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=_m(mo.bind(null,t,zt,Pr),e);break}mo(t,zt,Pr);break;case 4:if(pi(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-Wn(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=Le()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*pM(r/1960))-r,10<r){t.timeoutHandle=_m(mo.bind(null,t,zt,Pr),r);break}mo(t,zt,Pr);break;case 5:mo(t,zt,Pr);break;default:throw Error($(329))}}}return qt(t,Le()),t.callbackNode===n?jC.bind(null,t):null}function qm(t,e){var n=Dl;return t.current.memoizedState.isDehydrated&&(jo(t,e).flags|=256),t=Hd(t,e),t!==2&&(e=zt,zt=n,e!==null&&Gm(e)),t}function Gm(t){zt===null?zt=t:zt.push.apply(zt,t)}function mM(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Gn(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function pi(t,e){for(e&=~Ky,e&=~Af,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Wn(e),r=1<<n;t[n]=-1,e&=~r}}function Ix(t){if(de&6)throw Error($(327));ea();var e=Td(t,0);if(!(e&1))return qt(t,Le()),null;var n=Hd(t,e);if(t.tag!==0&&n===2){var r=xm(t);r!==0&&(e=r,n=qm(t,r))}if(n===1)throw n=sc,jo(t,0),pi(t,e),qt(t,Le()),n;if(n===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,mo(t,zt,Pr),qt(t,Le()),null}function Gy(t,e){var n=de;de|=1;try{return t(e)}finally{de=n,de===0&&(Ra=Le()+500,Rf&&eo())}}function Jo(t){Ei!==null&&Ei.tag===0&&!(de&6)&&ea();var e=de;de|=1;var n=bn.transition,r=me;try{if(bn.transition=null,me=1,t)return t()}finally{me=r,bn.transition=n,de=e,!(de&6)&&eo()}}function Jy(){en=Ks.current,Ee(Ks)}function jo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,WP(n)),$e!==null)for(n=$e.return;n!==null;){var r=n;switch(Oy(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Md();break;case 3:Ta(),Ee(Wt),Ee(gt),$y();break;case 5:Ly(r);break;case 4:Ta();break;case 13:Ee(Oe);break;case 19:Ee(Oe);break;case 10:Dy(r.type._context);break;case 22:case 23:Jy()}n=n.return}if(Je=t,$e=t=ji(t.current,null),st=en=e,Ue=0,sc=null,Ky=Af=Go=0,zt=Dl=null,Co!==null){for(e=0;e<Co.length;e++)if(n=Co[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}Co=null}return t}function LC(t,e){do{var n=$e;try{if(Ay(),sd.current=Bd,Fd){for(var r=Pe.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Fd=!1}if(qo=0,qe=ze=Pe=null,Ml=!1,rc=0,Wy.current=null,n===null||n.return===null){Ue=1,sc=e,$e=null;break}e:{var o=t,s=n.return,a=n,l=e;if(e=st,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=bx(s);if(h!==null){h.flags&=-257,Sx(h,s,a,o,e),h.mode&1&&wx(o,c,e),e=h,l=c;var p=e.updateQueue;if(p===null){var g=new Set;g.add(l),e.updateQueue=g}else p.add(l);break e}else{if(!(e&1)){wx(o,c,e),Yy();break e}l=Error($(426))}}else if(_e&&a.mode&1){var x=bx(s);if(x!==null){!(x.flags&65536)&&(x.flags|=256),Sx(x,s,a,o,e),Py(_a(l,a));break e}}o=l=_a(l,a),Ue!==4&&(Ue=2),Dl===null?Dl=[o]:Dl.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var v=wC(o,l,e);px(o,v);break e;case 1:a=l;var w=o.type,S=o.stateNode;if(!(o.flags&128)&&(typeof w.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Ii===null||!Ii.has(S)))){o.flags|=65536,e&=-e,o.lanes|=e;var b=bC(o,a,e);px(o,b);break e}}o=o.return}while(o!==null)}BC(n)}catch(C){e=C,$e===n&&n!==null&&($e=n=n.return);continue}break}while(1)}function $C(){var t=zd.current;return zd.current=Bd,t===null?Bd:t}function Yy(){(Ue===0||Ue===3||Ue===2)&&(Ue=4),Je===null||!(Go&268435455)&&!(Af&268435455)||pi(Je,st)}function Hd(t,e){var n=de;de|=2;var r=$C();(Je!==t||st!==e)&&(Pr=null,jo(t,e));do try{gM();break}catch(i){LC(t,i)}while(1);if(Ay(),de=n,zd.current=r,$e!==null)throw Error($(261));return Je=null,st=0,Ue}function gM(){for(;$e!==null;)FC($e)}function yM(){for(;$e!==null&&!UO();)FC($e)}function FC(t){var e=UC(t.alternate,t,en);t.memoizedProps=t.pendingProps,e===null?BC(t):$e=e,Wy.current=null}function BC(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=uM(n,e),n!==null){n.flags&=32767,$e=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ue=6,$e=null;return}}else if(n=cM(n,e,en),n!==null){$e=n;return}if(e=e.sibling,e!==null){$e=e;return}$e=e=t}while(e!==null);Ue===0&&(Ue=5)}function mo(t,e,n){var r=me,i=bn.transition;try{bn.transition=null,me=1,vM(t,e,n,r)}finally{bn.transition=i,me=r}return null}function vM(t,e,n,r){do ea();while(Ei!==null);if(de&6)throw Error($(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(XO(t,o),t===Je&&($e=Je=null,st=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Tu||(Tu=!0,VC(Ed,function(){return ea(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=bn.transition,bn.transition=null;var s=me;me=1;var a=de;de|=4,Wy.current=null,fM(t,n),IC(n,t),$P(Em),_d=!!km,Em=km=null,t.current=n,hM(n),VO(),de=a,me=s,bn.transition=o}else t.current=n;if(Tu&&(Tu=!1,Ei=t,Vd=i),o=t.pendingLanes,o===0&&(Ii=null),KO(n.stateNode),qt(t,Le()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ud)throw Ud=!1,t=Wm,Wm=null,t;return Vd&1&&t.tag!==0&&ea(),o=t.pendingLanes,o&1?t===Km?Il++:(Il=0,Km=t):Il=0,eo(),null}function ea(){if(Ei!==null){var t=wS(Vd),e=bn.transition,n=me;try{if(bn.transition=null,me=16>t?16:t,Ei===null)var r=!1;else{if(t=Ei,Ei=null,Vd=0,de&6)throw Error($(331));var i=de;for(de|=4,W=t.current;W!==null;){var o=W,s=o.child;if(W.flags&16){var a=o.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(W=c;W!==null;){var u=W;switch(u.tag){case 0:case 11:case 15:Al(8,u,o)}var d=u.child;if(d!==null)d.return=u,W=d;else for(;W!==null;){u=W;var f=u.sibling,h=u.return;if(MC(u),u===c){W=null;break}if(f!==null){f.return=h,W=f;break}W=h}}}var p=o.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var x=g.sibling;g.sibling=null,g=x}while(g!==null)}}W=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,W=s;else e:for(;W!==null;){if(o=W,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Al(9,o,o.return)}var v=o.sibling;if(v!==null){v.return=o.return,W=v;break e}W=o.return}}var w=t.current;for(W=w;W!==null;){s=W;var S=s.child;if(s.subtreeFlags&2064&&S!==null)S.return=s,W=S;else e:for(s=w;W!==null;){if(a=W,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Mf(9,a)}}catch(C){De(a,a.return,C)}if(a===s){W=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,W=b;break e}W=a.return}}if(de=i,eo(),mr&&typeof mr.onPostCommitFiberRoot=="function")try{mr.onPostCommitFiberRoot(Cf,t)}catch{}r=!0}return r}finally{me=n,bn.transition=e}}return!1}function Nx(t,e,n){e=_a(n,e),e=wC(t,e,1),t=Di(t,e,1),e=Tt(),t!==null&&(Fc(t,1,e),qt(t,e))}function De(t,e,n){if(t.tag===3)Nx(t,t,n);else for(;e!==null;){if(e.tag===3){Nx(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ii===null||!Ii.has(r))){t=_a(n,t),t=bC(e,t,1),e=Di(e,t,1),t=Tt(),e!==null&&(Fc(e,1,t),qt(e,t));break}}e=e.return}}function xM(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Tt(),t.pingedLanes|=t.suspendedLanes&n,Je===t&&(st&n)===n&&(Ue===4||Ue===3&&(st&130023424)===st&&500>Le()-qy?jo(t,0):Ky|=n),qt(t,e)}function zC(t,e){e===0&&(t.mode&1?(e=gu,gu<<=1,!(gu&130023424)&&(gu=4194304)):e=1);var n=Tt();t=Wr(t,e),t!==null&&(Fc(t,e,n),qt(t,n))}function wM(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),zC(t,n)}function bM(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(e),zC(t,n)}var UC;UC=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Wt.current)Vt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Vt=!1,lM(t,e,n);Vt=!!(t.flags&131072)}else Vt=!1,_e&&e.flags&1048576&&KS(e,Id,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ld(t,e),t=e.pendingProps;var i=Ca(e,gt.current);Zs(e,n),i=By(null,e,r,t,i,n);var o=zy();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Kt(r)?(o=!0,Ad(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Ny(e),i.updater=Pf,e.stateNode=i,i._reactInternals=e,Im(e,r,t,n),e=Lm(null,e,r,!0,o,n)):(e.tag=0,_e&&o&&Ry(e),Et(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ld(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=CM(r),t=jn(r,t),i){case 0:e=jm(null,e,r,t,n);break e;case 1:e=Ex(null,e,r,t,n);break e;case 11:e=Cx(null,e,r,t,n);break e;case 14:e=kx(null,e,r,jn(r.type,t),n);break e}throw Error($(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:jn(r,i),jm(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:jn(r,i),Ex(t,e,r,i,n);case 3:e:{if(EC(e),t===null)throw Error($(387));r=e.pendingProps,o=e.memoizedState,i=o.element,XS(t,e),Ld(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=_a(Error($(423)),e),e=Tx(t,e,r,n,i);break e}else if(r!==i){i=_a(Error($(424)),e),e=Tx(t,e,r,n,i);break e}else for(rn=Ai(e.stateNode.containerInfo.firstChild),on=e,_e=!0,zn=null,n=YS(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ka(),r===i){e=Kr(t,e,n);break e}Et(t,e,r,n)}e=e.child}return e;case 5:return ZS(e),t===null&&Mm(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,Tm(r,i)?s=null:o!==null&&Tm(r,o)&&(e.flags|=32),kC(t,e),Et(t,e,s,n),e.child;case 6:return t===null&&Mm(e),null;case 13:return TC(t,e,n);case 4:return jy(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ea(e,null,r,n):Et(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:jn(r,i),Cx(t,e,r,i,n);case 7:return Et(t,e,e.pendingProps,n),e.child;case 8:return Et(t,e,e.pendingProps.children,n),e.child;case 12:return Et(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,be(Nd,r._currentValue),r._currentValue=s,o!==null)if(Gn(o.value,s)){if(o.children===i.children&&!Wt.current){e=Kr(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=Br(-1,n&-n),l.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Am(o.return,n,e),a.lanes|=n;break}l=l.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error($(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Am(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Et(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Zs(e,n),i=_n(i),r=r(i),e.flags|=1,Et(t,e,r,n),e.child;case 14:return r=e.type,i=jn(r,e.pendingProps),i=jn(r.type,i),kx(t,e,r,i,n);case 15:return SC(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:jn(r,i),ld(t,e),e.tag=1,Kt(r)?(t=!0,Ad(e)):t=!1,Zs(e,n),xC(e,r,i),Im(e,r,i,n),Lm(null,e,r,!0,t,n);case 19:return _C(t,e,n);case 22:return CC(t,e,n)}throw Error($(156,e.tag))};function VC(t,e){return gS(t,e)}function SM(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wn(t,e,n,r){return new SM(t,e,n,r)}function Qy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function CM(t){if(typeof t=="function")return Qy(t)?1:0;if(t!=null){if(t=t.$$typeof,t===gy)return 11;if(t===yy)return 14}return 2}function ji(t,e){var n=t.alternate;return n===null?(n=wn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function dd(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")Qy(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case js:return Lo(n.children,i,o,e);case my:s=8,i|=8;break;case im:return t=wn(12,n,e,i|2),t.elementType=im,t.lanes=o,t;case om:return t=wn(13,n,e,i),t.elementType=om,t.lanes=o,t;case sm:return t=wn(19,n,e,i),t.elementType=sm,t.lanes=o,t;case Z1:return Df(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Q1:s=10;break e;case X1:s=9;break e;case gy:s=11;break e;case yy:s=14;break e;case li:s=16,r=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=wn(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function Lo(t,e,n,r){return t=wn(7,t,r,e),t.lanes=n,t}function Df(t,e,n,r){return t=wn(22,t,r,e),t.elementType=Z1,t.lanes=n,t.stateNode={isHidden:!1},t}function np(t,e,n){return t=wn(6,t,null,e),t.lanes=n,t}function rp(t,e,n){return e=wn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function kM(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Lh(0),this.expirationTimes=Lh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Lh(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Xy(t,e,n,r,i,o,s,a,l){return t=new kM(t,e,n,a,l),e===1?(e=1,o===!0&&(e|=8)):e=0,o=wn(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ny(o),t}function EM(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ns,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function HC(t){if(!t)return Vi;t=t._reactInternals;e:{if(as(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Kt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var n=t.type;if(Kt(n))return HS(t,n,e)}return e}function WC(t,e,n,r,i,o,s,a,l){return t=Xy(n,r,!0,t,i,o,s,a,l),t.context=HC(null),n=t.current,r=Tt(),i=Ni(n),o=Br(r,i),o.callback=e??null,Di(n,o,i),t.current.lanes=i,Fc(t,i,r),qt(t,r),t}function If(t,e,n,r){var i=e.current,o=Tt(),s=Ni(i);return n=HC(n),e.context===null?e.context=n:e.pendingContext=n,e=Br(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Di(i,e,s),t!==null&&(Kn(t,i,s,o),od(t,i,s)),s}function Wd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function jx(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Zy(t,e){jx(t,e),(t=t.alternate)&&jx(t,e)}function TM(){return null}var KC=typeof reportError=="function"?reportError:function(t){console.error(t)};function ev(t){this._internalRoot=t}Nf.prototype.render=ev.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));If(t,e,null,null)};Nf.prototype.unmount=ev.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Jo(function(){If(null,t,null,null)}),e[Hr]=null}};function Nf(t){this._internalRoot=t}Nf.prototype.unstable_scheduleHydration=function(t){if(t){var e=CS();t={blockedOn:null,target:t,priority:e};for(var n=0;n<hi.length&&e!==0&&e<hi[n].priority;n++);hi.splice(n,0,t),n===0&&ES(t)}};function tv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function jf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Lx(){}function _M(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var c=Wd(s);o.call(c)}}var s=WC(e,r,t,0,null,!1,!1,"",Lx);return t._reactRootContainer=s,t[Hr]=s.current,Xl(t.nodeType===8?t.parentNode:t),Jo(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Wd(l);a.call(c)}}var l=Xy(t,0,!1,null,null,!1,!1,"",Lx);return t._reactRootContainer=l,t[Hr]=l.current,Xl(t.nodeType===8?t.parentNode:t),Jo(function(){If(e,l,n,r)}),l}function Lf(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var l=Wd(s);a.call(l)}}If(e,s,t,i)}else s=_M(n,e,t,i,r);return Wd(s)}bS=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=vl(e.pendingLanes);n!==0&&(wy(e,n|1),qt(e,Le()),!(de&6)&&(Ra=Le()+500,eo()))}break;case 13:Jo(function(){var r=Wr(t,1);if(r!==null){var i=Tt();Kn(r,t,1,i)}}),Zy(t,1)}};by=function(t){if(t.tag===13){var e=Wr(t,134217728);if(e!==null){var n=Tt();Kn(e,t,134217728,n)}Zy(t,134217728)}};SS=function(t){if(t.tag===13){var e=Ni(t),n=Wr(t,e);if(n!==null){var r=Tt();Kn(n,t,e,r)}Zy(t,e)}};CS=function(){return me};kS=function(t,e){var n=me;try{return me=t,e()}finally{me=n}};gm=function(t,e,n){switch(e){case"input":if(cm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=_f(r);if(!i)throw Error($(90));tS(r),cm(r,i)}}}break;case"textarea":rS(t,n);break;case"select":e=n.value,e!=null&&Js(t,!!n.multiple,e,!1)}};uS=Gy;dS=Jo;var RM={usingClientEntryPoint:!1,Events:[zc,Bs,_f,lS,cS,Gy]},ul={findFiberByHostInstance:So,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},OM={bundleType:ul.bundleType,version:ul.version,rendererPackageName:ul.rendererPackageName,rendererConfig:ul.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Yr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=pS(t),t===null?null:t.stateNode},findFiberByHostInstance:ul.findFiberByHostInstance||TM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _u=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_u.isDisabled&&_u.supportsFiber)try{Cf=_u.inject(OM),mr=_u}catch{}}cn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=RM;cn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tv(e))throw Error($(200));return EM(t,e,null,n)};cn.createRoot=function(t,e){if(!tv(t))throw Error($(299));var n=!1,r="",i=KC;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Xy(t,1,!1,null,null,n,!1,r,i),t[Hr]=e.current,Xl(t.nodeType===8?t.parentNode:t),new ev(e)};cn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=pS(e),t=t===null?null:t.stateNode,t};cn.flushSync=function(t){return Jo(t)};cn.hydrate=function(t,e,n){if(!jf(e))throw Error($(200));return Lf(null,t,e,!0,n)};cn.hydrateRoot=function(t,e,n){if(!tv(t))throw Error($(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=KC;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=WC(e,null,t,1,n??null,i,!1,o,s),t[Hr]=e.current,Xl(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Nf(e)};cn.render=function(t,e,n){if(!jf(e))throw Error($(200));return Lf(null,t,e,!1,n)};cn.unmountComponentAtNode=function(t){if(!jf(t))throw Error($(40));return t._reactRootContainer?(Jo(function(){Lf(null,null,t,!1,function(){t._reactRootContainer=null,t[Hr]=null})}),!0):!1};cn.unstable_batchedUpdates=Gy;cn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!jf(n))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return Lf(t,e,n,!1,r)};cn.version="18.3.1-next-f1338f8080-20240426";function qC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(qC)}catch(t){console.error(t)}}qC(),q1.exports=cn;var Vc=q1.exports;const GC=N1(Vc);var $x=Vc;nm.createRoot=$x.createRoot,nm.hydrateRoot=$x.hydrateRoot;const PM="modulepreload",MM=function(t){return"/"+t},Fx={},Yo=function(e,n,r){if(!n||n.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(n.map(o=>{if(o=MM(o),o in Fx)return;Fx[o]=!0;const s=o.endsWith(".css"),a=s?'[rel="stylesheet"]':"";if(!!r)for(let u=i.length-1;u>=0;u--){const d=i[u];if(d.href===o&&(!s||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${a}`))return;const c=document.createElement("link");if(c.rel=s?"stylesheet":PM,s||(c.as="script",c.crossOrigin=""),c.href=o,document.head.appendChild(c),s)return new Promise((u,d)=>{c.addEventListener("load",u),c.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>e()).catch(o=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o})};var nv={};Object.defineProperty(nv,"__esModule",{value:!0});nv.parse=$M;nv.serialize=FM;const AM=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,DM=/^[\u0021-\u003A\u003C-\u007E]*$/,IM=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,NM=/^[\u0020-\u003A\u003D-\u007E]*$/,jM=Object.prototype.toString,LM=(()=>{const t=function(){};return t.prototype=Object.create(null),t})();function $M(t,e){const n=new LM,r=t.length;if(r<2)return n;const i=(e==null?void 0:e.decode)||BM;let o=0;do{const s=t.indexOf("=",o);if(s===-1)break;const a=t.indexOf(";",o),l=a===-1?r:a;if(s>l){o=t.lastIndexOf(";",s-1)+1;continue}const c=Bx(t,o,s),u=zx(t,s,c),d=t.slice(c,u);if(n[d]===void 0){let f=Bx(t,s+1,l),h=zx(t,l,f);const p=i(t.slice(f,h));n[d]=p}o=l+1}while(o<r);return n}function Bx(t,e,n){do{const r=t.charCodeAt(e);if(r!==32&&r!==9)return e}while(++e<n);return n}function zx(t,e,n){for(;e>n;){const r=t.charCodeAt(--e);if(r!==32&&r!==9)return e+1}return n}function FM(t,e,n){const r=(n==null?void 0:n.encode)||encodeURIComponent;if(!AM.test(t))throw new TypeError(`argument name is invalid: ${t}`);const i=r(e);if(!DM.test(i))throw new TypeError(`argument val is invalid: ${e}`);let o=t+"="+i;if(!n)return o;if(n.maxAge!==void 0){if(!Number.isInteger(n.maxAge))throw new TypeError(`option maxAge is invalid: ${n.maxAge}`);o+="; Max-Age="+n.maxAge}if(n.domain){if(!IM.test(n.domain))throw new TypeError(`option domain is invalid: ${n.domain}`);o+="; Domain="+n.domain}if(n.path){if(!NM.test(n.path))throw new TypeError(`option path is invalid: ${n.path}`);o+="; Path="+n.path}if(n.expires){if(!zM(n.expires)||!Number.isFinite(n.expires.valueOf()))throw new TypeError(`option expires is invalid: ${n.expires}`);o+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(o+="; HttpOnly"),n.secure&&(o+="; Secure"),n.partitioned&&(o+="; Partitioned"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():void 0){case"low":o+="; Priority=Low";break;case"medium":o+="; Priority=Medium";break;case"high":o+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${n.priority}`)}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:case"strict":o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"none":o+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${n.sameSite}`)}return o}function BM(t){if(t.indexOf("%")===-1)return t;try{return decodeURIComponent(t)}catch{return t}}function zM(t){return jM.call(t)==="[object Date]"}var Ux="popstate";function UM(t={}){function e(r,i){let{pathname:o,search:s,hash:a}=r.location;return Jm("",{pathname:o,search:s,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:ac(i)}return HM(e,n,null,t)}function Re(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function On(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function VM(){return Math.random().toString(36).substring(2,10)}function Vx(t,e){return{usr:t.state,key:t.key,idx:e}}function Jm(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Ka(e):e,state:n,key:e&&e.key||r||VM()}}function ac({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Ka(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function HM(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:o=!1}=r,s=i.history,a="POP",l=null,c=u();c==null&&(c=0,s.replaceState({...s.state,idx:c},""));function u(){return(s.state||{idx:null}).idx}function d(){a="POP";let x=u(),v=x==null?null:x-c;c=x,l&&l({action:a,location:g.location,delta:v})}function f(x,v){a="PUSH";let w=Jm(g.location,x,v);n&&n(w,x),c=u()+1;let S=Vx(w,c),b=g.createHref(w);try{s.pushState(S,"",b)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;i.location.assign(b)}o&&l&&l({action:a,location:g.location,delta:1})}function h(x,v){a="REPLACE";let w=Jm(g.location,x,v);n&&n(w,x),c=u();let S=Vx(w,c),b=g.createHref(w);s.replaceState(S,"",b),o&&l&&l({action:a,location:g.location,delta:0})}function p(x){let v=i.location.origin!=="null"?i.location.origin:i.location.href,w=typeof x=="string"?x:ac(x);return w=w.replace(/ $/,"%20"),Re(v,`No window.location.(origin|href) available to create URL for href: ${w}`),new URL(w,v)}let g={get action(){return a},get location(){return t(i,s)},listen(x){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(Ux,d),l=x,()=>{i.removeEventListener(Ux,d),l=null}},createHref(x){return e(i,x)},createURL:p,encodeLocation(x){let v=p(x);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:h,go(x){return s.go(x)}};return g}function JC(t,e,n="/"){return WM(t,e,n,!1)}function WM(t,e,n,r){let i=typeof e=="string"?Ka(e):e,o=Hi(i.pathname||"/",n);if(o==null)return null;let s=YC(t);KM(s);let a=null;for(let l=0;a==null&&l<s.length;++l){let c=rA(o);a=tA(s[l],c,r)}return a}function YC(t,e=[],n=[],r=""){let i=(o,s,a)=>{let l={relativePath:a===void 0?o.path||"":a,caseSensitive:o.caseSensitive===!0,childrenIndex:s,route:o};l.relativePath.startsWith("/")&&(Re(l.relativePath.startsWith(r),`Absolute route path "${l.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(r.length));let c=zr([r,l.relativePath]),u=n.concat(l);o.children&&o.children.length>0&&(Re(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),YC(o.children,e,u,c)),!(o.path==null&&!o.index)&&e.push({path:c,score:ZM(c,o.index),routesMeta:u})};return t.forEach((o,s)=>{var a;if(o.path===""||!((a=o.path)!=null&&a.includes("?")))i(o,s);else for(let l of QC(o.path))i(o,s,l)}),e}function QC(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let s=QC(r.join("/")),a=[];return a.push(...s.map(l=>l===""?o:[o,l].join("/"))),i&&a.push(...s),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function KM(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:eA(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var qM=/^:[\w-]+$/,GM=3,JM=2,YM=1,QM=10,XM=-2,Hx=t=>t==="*";function ZM(t,e){let n=t.split("/"),r=n.length;return n.some(Hx)&&(r+=XM),e&&(r+=JM),n.filter(i=>!Hx(i)).reduce((i,o)=>i+(qM.test(o)?GM:o===""?YM:QM),r)}function eA(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function tA(t,e,n=!1){let{routesMeta:r}=t,i={},o="/",s=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=o==="/"?e:e.slice(o.length)||"/",d=Kd({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),f=l.route;if(!d&&c&&n&&!r[r.length-1].route.index&&(d=Kd({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!d)return null;Object.assign(i,d.params),s.push({params:i,pathname:zr([o,d.pathname]),pathnameBase:aA(zr([o,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(o=zr([o,d.pathnameBase]))}return s}function Kd(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=nA(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,{paramName:u,isOptional:d},f)=>{if(u==="*"){let p=a[f]||"";s=o.slice(0,o.length-p.length).replace(/(.)\/+$/,"$1")}const h=a[f];return d&&!h?c[u]=void 0:c[u]=(h||"").replace(/%2F/g,"/"),c},{}),pathname:o,pathnameBase:s,pattern:t}}function nA(t,e=!1,n=!0){On(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function rA(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return On(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Hi(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function iA(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Ka(t):t;return{pathname:n?n.startsWith("/")?n:oA(n,e):e,search:lA(r),hash:cA(i)}}function oA(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function ip(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function sA(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function rv(t){let e=sA(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function iv(t,e,n,r=!1){let i;typeof t=="string"?i=Ka(t):(i={...t},Re(!i.pathname||!i.pathname.includes("?"),ip("?","pathname","search",i)),Re(!i.pathname||!i.pathname.includes("#"),ip("#","pathname","hash",i)),Re(!i.search||!i.search.includes("#"),ip("#","search","hash",i)));let o=t===""||i.pathname==="",s=o?"/":i.pathname,a;if(s==null)a=n;else{let d=e.length-1;if(!r&&s.startsWith("..")){let f=s.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}a=d>=0?e[d]:"/"}let l=iA(i,a),c=s&&s!=="/"&&s.endsWith("/"),u=(o||s===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}var zr=t=>t.join("/").replace(/\/\/+/g,"/"),aA=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),lA=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,cA=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function uA(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var XC=["POST","PUT","PATCH","DELETE"];new Set(XC);var dA=["GET",...XC];new Set(dA);var qa=y.createContext(null);qa.displayName="DataRouter";var $f=y.createContext(null);$f.displayName="DataRouterState";var ZC=y.createContext({isTransitioning:!1});ZC.displayName="ViewTransition";var fA=y.createContext(new Map);fA.displayName="Fetchers";var hA=y.createContext(null);hA.displayName="Await";var Xn=y.createContext(null);Xn.displayName="Navigation";var Hc=y.createContext(null);Hc.displayName="Location";var Zn=y.createContext({outlet:null,matches:[],isDataRoute:!1});Zn.displayName="Route";var ov=y.createContext(null);ov.displayName="RouteError";function pA(t,{relative:e}={}){Re(Ga(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=y.useContext(Xn),{hash:i,pathname:o,search:s}=Wc(t,{relative:e}),a=o;return n!=="/"&&(a=o==="/"?n:zr([n,o])),r.createHref({pathname:a,search:s,hash:i})}function Ga(){return y.useContext(Hc)!=null}function An(){return Re(Ga(),"useLocation() may be used only in the context of a <Router> component."),y.useContext(Hc).location}var ek="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function tk(t){y.useContext(Xn).static||y.useLayoutEffect(t)}function Cr(){let{isDataRoute:t}=y.useContext(Zn);return t?RA():mA()}function mA(){Re(Ga(),"useNavigate() may be used only in the context of a <Router> component.");let t=y.useContext(qa),{basename:e,navigator:n}=y.useContext(Xn),{matches:r}=y.useContext(Zn),{pathname:i}=An(),o=JSON.stringify(rv(r)),s=y.useRef(!1);return tk(()=>{s.current=!0}),y.useCallback((l,c={})=>{if(On(s.current,ek),!s.current)return;if(typeof l=="number"){n.go(l);return}let u=iv(l,JSON.parse(o),i,c.relative==="path");t==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:zr([e,u.pathname])),(c.replace?n.replace:n.push)(u,c.state,c)},[e,n,o,i,t])}y.createContext(null);function gA(){let{matches:t}=y.useContext(Zn),e=t[t.length-1];return e?e.params:{}}function Wc(t,{relative:e}={}){let{matches:n}=y.useContext(Zn),{pathname:r}=An(),i=JSON.stringify(rv(n));return y.useMemo(()=>iv(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function yA(t,e){return nk(t,e)}function nk(t,e,n,r){var w;Re(Ga(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:o}=y.useContext(Xn),{matches:s}=y.useContext(Zn),a=s[s.length-1],l=a?a.params:{},c=a?a.pathname:"/",u=a?a.pathnameBase:"/",d=a&&a.route;{let S=d&&d.path||"";rk(c,!d||S.endsWith("*")||S.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${S}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${S}"> to <Route path="${S==="/"?"*":`${S}/*`}">.`)}let f=An(),h;if(e){let S=typeof e=="string"?Ka(e):e;Re(u==="/"||((w=S.pathname)==null?void 0:w.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${S.pathname}" was given in the \`location\` prop.`),h=S}else h=f;let p=h.pathname||"/",g=p;if(u!=="/"){let S=u.replace(/^\//,"").split("/");g="/"+p.replace(/^\//,"").split("/").slice(S.length).join("/")}let x=!o&&n&&n.matches&&n.matches.length>0?n.matches:JC(t,{pathname:g});On(d||x!=null,`No routes matched location "${h.pathname}${h.search}${h.hash}" `),On(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${h.pathname}${h.search}${h.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let v=SA(x&&x.map(S=>Object.assign({},S,{params:Object.assign({},l,S.params),pathname:zr([u,i.encodeLocation?i.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?u:zr([u,i.encodeLocation?i.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),s,n,r);return e&&v?y.createElement(Hc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...h},navigationType:"POP"}},v):v}function vA(){let t=_A(),e=uA(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},s=null;return console.error("Error handled by React Router default ErrorBoundary:",t),s=y.createElement(y.Fragment,null,y.createElement("p",null," Hey developer "),y.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",y.createElement("code",{style:o},"ErrorBoundary")," or"," ",y.createElement("code",{style:o},"errorElement")," prop on your route.")),y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},e),n?y.createElement("pre",{style:i},n):null,s)}var xA=y.createElement(vA,null),wA=class extends y.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?y.createElement(Zn.Provider,{value:this.props.routeContext},y.createElement(ov.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function bA({routeContext:t,match:e,children:n}){let r=y.useContext(qa);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),y.createElement(Zn.Provider,{value:t},n)}function SA(t,e=[],n=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,o=n==null?void 0:n.errors;if(o!=null){let l=i.findIndex(c=>c.route.id&&(o==null?void 0:o[c.route.id])!==void 0);Re(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,l+1))}let s=!1,a=-1;if(n)for(let l=0;l<i.length;l++){let c=i[l];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(a=l),c.route.id){let{loaderData:u,errors:d}=n,f=c.route.loader&&!u.hasOwnProperty(c.route.id)&&(!d||d[c.route.id]===void 0);if(c.route.lazy||f){s=!0,a>=0?i=i.slice(0,a+1):i=[i[0]];break}}}return i.reduceRight((l,c,u)=>{let d,f=!1,h=null,p=null;n&&(d=o&&c.route.id?o[c.route.id]:void 0,h=c.route.errorElement||xA,s&&(a<0&&u===0?(rk("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),f=!0,p=null):a===u&&(f=!0,p=c.route.hydrateFallbackElement||null)));let g=e.concat(i.slice(0,u+1)),x=()=>{let v;return d?v=h:f?v=p:c.route.Component?v=y.createElement(c.route.Component,null):c.route.element?v=c.route.element:v=l,y.createElement(bA,{match:c,routeContext:{outlet:l,matches:g,isDataRoute:n!=null},children:v})};return n&&(c.route.ErrorBoundary||c.route.errorElement||u===0)?y.createElement(wA,{location:n.location,revalidation:n.revalidation,component:h,error:d,children:x(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):x()},null)}function sv(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function CA(t){let e=y.useContext(qa);return Re(e,sv(t)),e}function kA(t){let e=y.useContext($f);return Re(e,sv(t)),e}function EA(t){let e=y.useContext(Zn);return Re(e,sv(t)),e}function av(t){let e=EA(t),n=e.matches[e.matches.length-1];return Re(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function TA(){return av("useRouteId")}function _A(){var r;let t=y.useContext(ov),e=kA("useRouteError"),n=av("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function RA(){let{router:t}=CA("useNavigate"),e=av("useNavigate"),n=y.useRef(!1);return tk(()=>{n.current=!0}),y.useCallback(async(i,o={})=>{On(n.current,ek),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...o}))},[t,e])}var Wx={};function rk(t,e,n){!e&&!Wx[t]&&(Wx[t]=!0,On(!1,n))}y.memo(OA);function OA({routes:t,future:e,state:n}){return nk(t,void 0,n,e)}function qd({to:t,replace:e,state:n,relative:r}){Re(Ga(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=y.useContext(Xn);On(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=y.useContext(Zn),{pathname:s}=An(),a=Cr(),l=iv(t,rv(o),s,r==="path"),c=JSON.stringify(l);return y.useEffect(()=>{a(JSON.parse(c),{replace:e,state:n,relative:r})},[a,c,r,e,n]),null}function hn(t){Re(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function PA({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:o=!1}){Re(!Ga(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let s=t.replace(/^\/*/,"/"),a=y.useMemo(()=>({basename:s,navigator:i,static:o,future:{}}),[s,i,o]);typeof n=="string"&&(n=Ka(n));let{pathname:l="/",search:c="",hash:u="",state:d=null,key:f="default"}=n,h=y.useMemo(()=>{let p=Hi(l,s);return p==null?null:{location:{pathname:p,search:c,hash:u,state:d,key:f},navigationType:r}},[s,l,c,u,d,f,r]);return On(h!=null,`<Router basename="${s}"> is not able to match the URL "${l}${c}${u}" because it does not start with the basename, so the <Router> won't render anything.`),h==null?null:y.createElement(Xn.Provider,{value:a},y.createElement(Hc.Provider,{children:e,value:h}))}function MA({children:t,location:e}){return yA(Ym(t),e)}function Ym(t,e=[]){let n=[];return y.Children.forEach(t,(r,i)=>{if(!y.isValidElement(r))return;let o=[...e,i];if(r.type===y.Fragment){n.push.apply(n,Ym(r.props.children,o));return}Re(r.type===hn,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Re(!r.props.index||!r.props.children,"An index route cannot have child routes.");let s={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=Ym(r.props.children,o)),n.push(s)}),n}var fd="get",hd="application/x-www-form-urlencoded";function Ff(t){return t!=null&&typeof t.tagName=="string"}function AA(t){return Ff(t)&&t.tagName.toLowerCase()==="button"}function DA(t){return Ff(t)&&t.tagName.toLowerCase()==="form"}function IA(t){return Ff(t)&&t.tagName.toLowerCase()==="input"}function NA(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function jA(t,e){return t.button===0&&(!e||e==="_self")&&!NA(t)}function Qm(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function LA(t,e){let n=Qm(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(o=>{n.append(i,o)})}),n}var Ru=null;function $A(){if(Ru===null)try{new FormData(document.createElement("form"),0),Ru=!1}catch{Ru=!0}return Ru}var FA=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function op(t){return t!=null&&!FA.has(t)?(On(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${hd}"`),null):t}function BA(t,e){let n,r,i,o,s;if(DA(t)){let a=t.getAttribute("action");r=a?Hi(a,e):null,n=t.getAttribute("method")||fd,i=op(t.getAttribute("enctype"))||hd,o=new FormData(t)}else if(AA(t)||IA(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||a.getAttribute("action");if(r=l?Hi(l,e):null,n=t.getAttribute("formmethod")||a.getAttribute("method")||fd,i=op(t.getAttribute("formenctype"))||op(a.getAttribute("enctype"))||hd,o=new FormData(a,t),!$A()){let{name:c,type:u,value:d}=t;if(u==="image"){let f=c?`${c}.`:"";o.append(`${f}x`,"0"),o.append(`${f}y`,"0")}else c&&o.append(c,d)}}else{if(Ff(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=fd,r=null,i=hd,s=t}return o&&i==="text/plain"&&(s=o,o=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:o,body:s}}function lv(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function zA(t,e){if(t.id in e)return e[t.id];try{let n=await Yo(()=>import(t.module),[]);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function UA(t){return t!=null&&typeof t.page=="string"}function VA(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function HA(t,e,n){let r=await Promise.all(t.map(async i=>{let o=e.routes[i.route.id];if(o){let s=await zA(o,n);return s.links?s.links():[]}return[]}));return GA(r.flat(1).filter(VA).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Kx(t,e,n,r,i,o){let s=(l,c)=>n[c]?l.route.id!==n[c].route.id:!0,a=(l,c)=>{var u;return n[c].pathname!==l.pathname||((u=n[c].route.path)==null?void 0:u.endsWith("*"))&&n[c].params["*"]!==l.params["*"]};return o==="assets"?e.filter((l,c)=>s(l,c)||a(l,c)):o==="data"?e.filter((l,c)=>{var d;let u=r.routes[l.route.id];if(!u||!u.hasLoader)return!1;if(s(l,c)||a(l,c))return!0;if(l.route.shouldRevalidate){let f=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((d=n[0])==null?void 0:d.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function WA(t,e,{includeHydrateFallback:n}={}){return KA(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let o=[i.module];return i.clientActionModule&&(o=o.concat(i.clientActionModule)),i.clientLoaderModule&&(o=o.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(o=o.concat(i.hydrateFallbackModule)),i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function KA(t){return[...new Set(t)]}function qA(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function GA(t,e){let n=new Set,r=new Set(e);return t.reduce((i,o)=>{if(e&&!UA(o)&&o.as==="script"&&o.href&&r.has(o.href))return i;let a=JSON.stringify(qA(o));return n.has(a)||(n.add(a),i.push({key:a,link:o})),i},[])}function JA(t){let e=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function YA(){let t=y.useContext(qa);return lv(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function QA(){let t=y.useContext($f);return lv(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var cv=y.createContext(void 0);cv.displayName="FrameworkContext";function ik(){let t=y.useContext(cv);return lv(t,"You must render this element inside a <HydratedRouter> element"),t}function XA(t,e){let n=y.useContext(cv),[r,i]=y.useState(!1),[o,s]=y.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:c,onMouseLeave:u,onTouchStart:d}=e,f=y.useRef(null);y.useEffect(()=>{if(t==="render"&&s(!0),t==="viewport"){let g=v=>{v.forEach(w=>{s(w.isIntersecting)})},x=new IntersectionObserver(g,{threshold:.5});return f.current&&x.observe(f.current),()=>{x.disconnect()}}},[t]),y.useEffect(()=>{if(r){let g=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(g)}}},[r]);let h=()=>{i(!0)},p=()=>{i(!1),s(!1)};return n?t!=="intent"?[o,f,{}]:[o,f,{onFocus:dl(a,h),onBlur:dl(l,p),onMouseEnter:dl(c,h),onMouseLeave:dl(u,p),onTouchStart:dl(d,h)}]:[!1,f,{}]}function dl(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function ZA({page:t,...e}){let{router:n}=YA(),r=y.useMemo(()=>JC(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?y.createElement(tD,{page:t,matches:r,...e}):null}function eD(t){let{manifest:e,routeModules:n}=ik(),[r,i]=y.useState([]);return y.useEffect(()=>{let o=!1;return HA(t,e,n).then(s=>{o||i(s)}),()=>{o=!0}},[t,e,n]),r}function tD({page:t,matches:e,...n}){let r=An(),{manifest:i,routeModules:o}=ik(),{loaderData:s,matches:a}=QA(),l=y.useMemo(()=>Kx(t,e,a,i,r,"data"),[t,e,a,i,r]),c=y.useMemo(()=>Kx(t,e,a,i,r,"assets"),[t,e,a,i,r]),u=y.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let h=new Set,p=!1;if(e.forEach(x=>{var w;let v=i.routes[x.route.id];!v||!v.hasLoader||(!l.some(S=>S.route.id===x.route.id)&&x.route.id in s&&((w=o[x.route.id])!=null&&w.shouldRevalidate)||v.hasClientLoader?p=!0:h.add(x.route.id))}),h.size===0)return[];let g=JA(t);return p&&h.size>0&&g.searchParams.set("_routes",e.filter(x=>h.has(x.route.id)).map(x=>x.route.id).join(",")),[g.pathname+g.search]},[s,r,i,l,e,t,o]),d=y.useMemo(()=>WA(c,i),[c,i]),f=eD(c);return y.createElement(y.Fragment,null,u.map(h=>y.createElement("link",{key:h,rel:"prefetch",as:"fetch",href:h,...n})),d.map(h=>y.createElement("link",{key:h,rel:"modulepreload",href:h,...n})),f.map(({key:h,link:p})=>y.createElement("link",{key:h,...p})))}function nD(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var ok=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{ok&&(window.__reactRouterVersion="7.2.0")}catch{}function rD({basename:t,children:e,window:n}){let r=y.useRef();r.current==null&&(r.current=UM({window:n,v5Compat:!0}));let i=r.current,[o,s]=y.useState({action:i.action,location:i.location}),a=y.useCallback(l=>{y.startTransition(()=>s(l))},[s]);return y.useLayoutEffect(()=>i.listen(a),[i,a]),y.createElement(PA,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:i})}var sk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,uv=y.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:o,replace:s,state:a,target:l,to:c,preventScrollReset:u,viewTransition:d,...f},h){let{basename:p}=y.useContext(Xn),g=typeof c=="string"&&sk.test(c),x,v=!1;if(typeof c=="string"&&g&&(x=c,ok))try{let O=new URL(window.location.href),T=c.startsWith("//")?new URL(O.protocol+c):new URL(c),D=Hi(T.pathname,p);T.origin===O.origin&&D!=null?c=D+T.search+T.hash:v=!0}catch{On(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let w=pA(c,{relative:i}),[S,b,C]=XA(r,f),k=aD(c,{replace:s,state:a,target:l,preventScrollReset:u,relative:i,viewTransition:d});function E(O){e&&e(O),O.defaultPrevented||k(O)}let _=y.createElement("a",{...f,...C,href:x||w,onClick:v||o?e:E,ref:nD(h,b),target:l,"data-discover":!g&&n==="render"?"true":void 0});return S&&!g?y.createElement(y.Fragment,null,_,y.createElement(ZA,{page:w})):_});uv.displayName="Link";var iD=y.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:o,to:s,viewTransition:a,children:l,...c},u){let d=Wc(s,{relative:c.relative}),f=An(),h=y.useContext($f),{navigator:p,basename:g}=y.useContext(Xn),x=h!=null&&hD(d)&&a===!0,v=p.encodeLocation?p.encodeLocation(d).pathname:d.pathname,w=f.pathname,S=h&&h.navigation&&h.navigation.location?h.navigation.location.pathname:null;n||(w=w.toLowerCase(),S=S?S.toLowerCase():null,v=v.toLowerCase()),S&&g&&(S=Hi(S,g)||S);const b=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let C=w===v||!i&&w.startsWith(v)&&w.charAt(b)==="/",k=S!=null&&(S===v||!i&&S.startsWith(v)&&S.charAt(v.length)==="/"),E={isActive:C,isPending:k,isTransitioning:x},_=C?e:void 0,O;typeof r=="function"?O=r(E):O=[r,C?"active":null,k?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let T=typeof o=="function"?o(E):o;return y.createElement(uv,{...c,"aria-current":_,className:O,ref:u,style:T,to:s,viewTransition:a},typeof l=="function"?l(E):l)});iD.displayName="NavLink";var oD=y.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:o,method:s=fd,action:a,onSubmit:l,relative:c,preventScrollReset:u,viewTransition:d,...f},h)=>{let p=dD(),g=fD(a,{relative:c}),x=s.toLowerCase()==="get"?"get":"post",v=typeof a=="string"&&sk.test(a),w=S=>{if(l&&l(S),S.defaultPrevented)return;S.preventDefault();let b=S.nativeEvent.submitter,C=(b==null?void 0:b.getAttribute("formmethod"))||s;p(b||S.currentTarget,{fetcherKey:e,method:C,navigate:n,replace:i,state:o,relative:c,preventScrollReset:u,viewTransition:d})};return y.createElement("form",{ref:h,method:x,action:g,onSubmit:r?l:w,...f,"data-discover":!v&&t==="render"?"true":void 0})});oD.displayName="Form";function sD(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ak(t){let e=y.useContext(qa);return Re(e,sD(t)),e}function aD(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:o,viewTransition:s}={}){let a=Cr(),l=An(),c=Wc(t,{relative:o});return y.useCallback(u=>{if(jA(u,e)){u.preventDefault();let d=n!==void 0?n:ac(l)===ac(c);a(t,{replace:d,state:r,preventScrollReset:i,relative:o,viewTransition:s})}},[l,a,c,n,r,e,t,i,o,s])}function lD(t){On(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=y.useRef(Qm(t)),n=y.useRef(!1),r=An(),i=y.useMemo(()=>LA(r.search,n.current?null:e.current),[r.search]),o=Cr(),s=y.useCallback((a,l)=>{const c=Qm(typeof a=="function"?a(i):a);n.current=!0,o("?"+c,l)},[o,i]);return[i,s]}var cD=0,uD=()=>`__${String(++cD)}__`;function dD(){let{router:t}=ak("useSubmit"),{basename:e}=y.useContext(Xn),n=TA();return y.useCallback(async(r,i={})=>{let{action:o,method:s,encType:a,formData:l,body:c}=BA(r,e);if(i.navigate===!1){let u=i.fetcherKey||uD();await t.fetch(u,n,i.action||o,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||s,formEncType:i.encType||a,flushSync:i.flushSync})}else await t.navigate(i.action||o,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||s,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function fD(t,{relative:e}={}){let{basename:n}=y.useContext(Xn),r=y.useContext(Zn);Re(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),o={...Wc(t||".",{relative:e})},s=An();if(t==null){o.search=s.search;let a=new URLSearchParams(o.search),l=a.getAll("index");if(l.some(u=>u==="")){a.delete("index"),l.filter(d=>d).forEach(d=>a.append("index",d));let u=a.toString();o.search=u?`?${u}`:""}}return(!t||t===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:zr([n,o.pathname])),ac(o)}function hD(t,e={}){let n=y.useContext(ZC);Re(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=ak("useViewTransitionState"),i=Wc(t,{relative:e.relative});if(!n.isTransitioning)return!1;let o=Hi(n.currentLocation.pathname,r)||n.currentLocation.pathname,s=Hi(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Kd(i.pathname,s)!=null||Kd(i.pathname,o)!=null}new TextEncoder;var Kc=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Qo=typeof window>"u"||"Deno"in globalThis;function mn(){}function pD(t,e){return typeof t=="function"?t(e):t}function Xm(t){return typeof t=="number"&&t>=0&&t!==1/0}function lk(t,e){return Math.max(t+(e||0)-Date.now(),0)}function ta(t,e){return typeof t=="function"?t(e):t}function Un(t,e){return typeof t=="function"?t(e):t}function qx(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:o,queryKey:s,stale:a}=t;if(s){if(r){if(e.queryHash!==dv(s,e.options))return!1}else if(!cc(e.queryKey,s))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||i&&i!==e.state.fetchStatus||o&&!o(e))}function Gx(t,e){const{exact:n,status:r,predicate:i,mutationKey:o}=t;if(o){if(!e.options.mutationKey)return!1;if(n){if(lc(e.options.mutationKey)!==lc(o))return!1}else if(!cc(e.options.mutationKey,o))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function dv(t,e){return((e==null?void 0:e.queryKeyHashFn)||lc)(t)}function lc(t){return JSON.stringify(t,(e,n)=>eg(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function cc(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!cc(t[n],e[n])):!1}function ck(t,e){if(t===e)return t;const n=Jx(t)&&Jx(e);if(n||eg(t)&&eg(e)){const r=n?t:Object.keys(t),i=r.length,o=n?e:Object.keys(e),s=o.length,a=n?[]:{};let l=0;for(let c=0;c<s;c++){const u=n?c:o[c];(!n&&r.includes(u)||n)&&t[u]===void 0&&e[u]===void 0?(a[u]=void 0,l++):(a[u]=ck(t[u],e[u]),a[u]===t[u]&&t[u]!==void 0&&l++)}return i===s&&l===i?t:a}return e}function Zm(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function Jx(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function eg(t){if(!Yx(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!Yx(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Yx(t){return Object.prototype.toString.call(t)==="[object Object]"}function mD(t){return new Promise(e=>{setTimeout(e,t)})}function tg(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?ck(t,e):e}function gD(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function yD(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var fv=Symbol();function uk(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===fv?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var _o,yi,ca,T1,vD=(T1=class extends Kc{constructor(){super();Y(this,_o,void 0);Y(this,yi,void 0);Y(this,ca,void 0);H(this,ca,e=>{if(!Qo&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){R(this,yi)||this.setEventListener(R(this,ca))}onUnsubscribe(){var e;this.hasListeners()||((e=R(this,yi))==null||e.call(this),H(this,yi,void 0))}setEventListener(e){var n;H(this,ca,e),(n=R(this,yi))==null||n.call(this),H(this,yi,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){R(this,_o)!==e&&(H(this,_o,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof R(this,_o)=="boolean"?R(this,_o):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},_o=new WeakMap,yi=new WeakMap,ca=new WeakMap,T1),hv=new vD,ua,vi,da,_1,xD=(_1=class extends Kc{constructor(){super();Y(this,ua,!0);Y(this,vi,void 0);Y(this,da,void 0);H(this,da,e=>{if(!Qo&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){R(this,vi)||this.setEventListener(R(this,da))}onUnsubscribe(){var e;this.hasListeners()||((e=R(this,vi))==null||e.call(this),H(this,vi,void 0))}setEventListener(e){var n;H(this,da,e),(n=R(this,vi))==null||n.call(this),H(this,vi,e(this.setOnline.bind(this)))}setOnline(e){R(this,ua)!==e&&(H(this,ua,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return R(this,ua)}},ua=new WeakMap,vi=new WeakMap,da=new WeakMap,_1),Gd=new xD;function ng(){let t,e;const n=new Promise((i,o)=>{t=i,e=o});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),t(i)},n.reject=i=>{r({status:"rejected",reason:i}),e(i)},n}function wD(t){return Math.min(1e3*2**t,3e4)}function dk(t){return(t??"online")==="online"?Gd.isOnline():!0}var fk=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function sp(t){return t instanceof fk}function hk(t){let e=!1,n=0,r=!1,i;const o=ng(),s=g=>{var x;r||(f(new fk(g)),(x=t.abort)==null||x.call(t))},a=()=>{e=!0},l=()=>{e=!1},c=()=>hv.isFocused()&&(t.networkMode==="always"||Gd.isOnline())&&t.canRun(),u=()=>dk(t.networkMode)&&t.canRun(),d=g=>{var x;r||(r=!0,(x=t.onSuccess)==null||x.call(t,g),i==null||i(),o.resolve(g))},f=g=>{var x;r||(r=!0,(x=t.onError)==null||x.call(t,g),i==null||i(),o.reject(g))},h=()=>new Promise(g=>{var x;i=v=>{(r||c())&&g(v)},(x=t.onPause)==null||x.call(t)}).then(()=>{var g;i=void 0,r||(g=t.onContinue)==null||g.call(t)}),p=()=>{if(r)return;let g;const x=n===0?t.initialPromise:void 0;try{g=x??t.fn()}catch(v){g=Promise.reject(v)}Promise.resolve(g).then(d).catch(v=>{var k;if(r)return;const w=t.retry??(Qo?0:3),S=t.retryDelay??wD,b=typeof S=="function"?S(n,v):S,C=w===!0||typeof w=="number"&&n<w||typeof w=="function"&&w(n,v);if(e||!C){f(v);return}n++,(k=t.onFail)==null||k.call(t,n,v),mD(b).then(()=>c()?void 0:h()).then(()=>{e?f(v):p()})})};return{promise:o,cancel:s,continue:()=>(i==null||i(),o),cancelRetry:a,continueRetry:l,canStart:u,start:()=>(u()?p():h().then(p),o)}}function bD(){let t=[],e=0,n=a=>{a()},r=a=>{a()},i=a=>setTimeout(a,0);const o=a=>{e?t.push(a):i(()=>{n(a)})},s=()=>{const a=t;t=[],a.length&&i(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||s()}return l},batchCalls:a=>(...l)=>{o(()=>{a(...l)})},schedule:o,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{i=a}}}var rt=bD(),Ro,R1,pk=(R1=class{constructor(){Y(this,Ro,void 0)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Xm(this.gcTime)&&H(this,Ro,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Qo?1/0:5*60*1e3))}clearGcTimeout(){R(this,Ro)&&(clearTimeout(R(this,Ro)),H(this,Ro,void 0))}},Ro=new WeakMap,R1),fa,ha,pn,Oo,ft,_c,Po,Ln,Or,O1,SD=(O1=class extends pk{constructor(e){super();Y(this,Ln);Y(this,fa,void 0);Y(this,ha,void 0);Y(this,pn,void 0);Y(this,Oo,void 0);Y(this,ft,void 0);Y(this,_c,void 0);Y(this,Po,void 0);H(this,Po,!1),H(this,_c,e.defaultOptions),this.setOptions(e.options),this.observers=[],H(this,Oo,e.client),H(this,pn,R(this,Oo).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,H(this,fa,CD(this.options)),this.state=e.state??R(this,fa),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=R(this,ft))==null?void 0:e.promise}setOptions(e){this.options={...R(this,_c),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&R(this,pn).remove(this)}setData(e,n){const r=tg(this.state.data,e,this.options);return ae(this,Ln,Or).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){ae(this,Ln,Or).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,i;const n=(r=R(this,ft))==null?void 0:r.promise;return(i=R(this,ft))==null||i.cancel(e),n?n.then(mn).catch(mn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(R(this,fa))}isActive(){return this.observers.some(e=>Un(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===fv||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!lk(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=R(this,ft))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=R(this,ft))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),R(this,pn).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(R(this,ft)&&(R(this,Po)?R(this,ft).cancel({revert:!0}):R(this,ft).cancelRetry()),this.scheduleGc()),R(this,pn).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ae(this,Ln,Or).call(this,{type:"invalidate"})}fetch(e,n){var l,c,u;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(R(this,ft))return R(this,ft).continueRetry(),R(this,ft).promise}if(e&&this.setOptions(e),!this.options.queryFn){const d=this.observers.find(f=>f.options.queryFn);d&&this.setOptions(d.options)}const r=new AbortController,i=d=>{Object.defineProperty(d,"signal",{enumerable:!0,get:()=>(H(this,Po,!0),r.signal)})},o=()=>{const d=uk(this.options,n),f={client:R(this,Oo),queryKey:this.queryKey,meta:this.meta};return i(f),H(this,Po,!1),this.options.persister?this.options.persister(d,f,this):d(f)},s={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:R(this,Oo),state:this.state,fetchFn:o};i(s),(l=this.options.behavior)==null||l.onFetch(s,this),H(this,ha,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((c=s.fetchOptions)==null?void 0:c.meta))&&ae(this,Ln,Or).call(this,{type:"fetch",meta:(u=s.fetchOptions)==null?void 0:u.meta});const a=d=>{var f,h,p,g;sp(d)&&d.silent||ae(this,Ln,Or).call(this,{type:"error",error:d}),sp(d)||((h=(f=R(this,pn).config).onError)==null||h.call(f,d,this),(g=(p=R(this,pn).config).onSettled)==null||g.call(p,this.state.data,d,this)),this.scheduleGc()};return H(this,ft,hk({initialPromise:n==null?void 0:n.initialPromise,fn:s.fetchFn,abort:r.abort.bind(r),onSuccess:d=>{var f,h,p,g;if(d===void 0){a(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(d)}catch(x){a(x);return}(h=(f=R(this,pn).config).onSuccess)==null||h.call(f,d,this),(g=(p=R(this,pn).config).onSettled)==null||g.call(p,d,this.state.error,this),this.scheduleGc()},onError:a,onFail:(d,f)=>{ae(this,Ln,Or).call(this,{type:"failed",failureCount:d,error:f})},onPause:()=>{ae(this,Ln,Or).call(this,{type:"pause"})},onContinue:()=>{ae(this,Ln,Or).call(this,{type:"continue"})},retry:s.options.retry,retryDelay:s.options.retryDelay,networkMode:s.options.networkMode,canRun:()=>!0})),R(this,ft).start()}},fa=new WeakMap,ha=new WeakMap,pn=new WeakMap,Oo=new WeakMap,ft=new WeakMap,_c=new WeakMap,Po=new WeakMap,Ln=new WeakSet,Or=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...mk(r.data,this.options),fetchMeta:e.meta??null};case"success":return{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=e.error;return sp(i)&&i.revert&&R(this,ha)?{...R(this,ha),fetchStatus:"idle"}:{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),rt.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),R(this,pn).notify({query:this,type:"updated",action:e})})},O1);function mk(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:dk(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function CD(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var ar,P1,kD=(P1=class extends Kc{constructor(e={}){super();Y(this,ar,void 0);this.config=e,H(this,ar,new Map)}build(e,n,r){const i=n.queryKey,o=n.queryHash??dv(i,n);let s=this.get(o);return s||(s=new SD({client:e,queryKey:i,queryHash:o,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(s)),s}add(e){R(this,ar).has(e.queryHash)||(R(this,ar).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=R(this,ar).get(e.queryHash);n&&(e.destroy(),n===e&&R(this,ar).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){rt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return R(this,ar).get(e)}getAll(){return[...R(this,ar).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>qx(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>qx(e,r)):n}notify(e){rt.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){rt.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){rt.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},ar=new WeakMap,P1),lr,Ct,Mo,cr,ri,M1,ED=(M1=class extends pk{constructor(e){super();Y(this,cr);Y(this,lr,void 0);Y(this,Ct,void 0);Y(this,Mo,void 0);this.mutationId=e.mutationId,H(this,Ct,e.mutationCache),H(this,lr,[]),this.state=e.state||TD(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){R(this,lr).includes(e)||(R(this,lr).push(e),this.clearGcTimeout(),R(this,Ct).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){H(this,lr,R(this,lr).filter(n=>n!==e)),this.scheduleGc(),R(this,Ct).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){R(this,lr).length||(this.state.status==="pending"?this.scheduleGc():R(this,Ct).remove(this))}continue(){var e;return((e=R(this,Mo))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,o,s,a,l,c,u,d,f,h,p,g,x,v,w,S,b,C,k,E;H(this,Mo,hk({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(_,O)=>{ae(this,cr,ri).call(this,{type:"failed",failureCount:_,error:O})},onPause:()=>{ae(this,cr,ri).call(this,{type:"pause"})},onContinue:()=>{ae(this,cr,ri).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>R(this,Ct).canRun(this)}));const n=this.state.status==="pending",r=!R(this,Mo).canStart();try{if(!n){ae(this,cr,ri).call(this,{type:"pending",variables:e,isPaused:r}),await((o=(i=R(this,Ct).config).onMutate)==null?void 0:o.call(i,e,this));const O=await((a=(s=this.options).onMutate)==null?void 0:a.call(s,e));O!==this.state.context&&ae(this,cr,ri).call(this,{type:"pending",context:O,variables:e,isPaused:r})}const _=await R(this,Mo).start();return await((c=(l=R(this,Ct).config).onSuccess)==null?void 0:c.call(l,_,e,this.state.context,this)),await((d=(u=this.options).onSuccess)==null?void 0:d.call(u,_,e,this.state.context)),await((h=(f=R(this,Ct).config).onSettled)==null?void 0:h.call(f,_,null,this.state.variables,this.state.context,this)),await((g=(p=this.options).onSettled)==null?void 0:g.call(p,_,null,e,this.state.context)),ae(this,cr,ri).call(this,{type:"success",data:_}),_}catch(_){try{throw await((v=(x=R(this,Ct).config).onError)==null?void 0:v.call(x,_,e,this.state.context,this)),await((S=(w=this.options).onError)==null?void 0:S.call(w,_,e,this.state.context)),await((C=(b=R(this,Ct).config).onSettled)==null?void 0:C.call(b,void 0,_,this.state.variables,this.state.context,this)),await((E=(k=this.options).onSettled)==null?void 0:E.call(k,void 0,_,e,this.state.context)),_}finally{ae(this,cr,ri).call(this,{type:"error",error:_})}}finally{R(this,Ct).runNext(this)}}},lr=new WeakMap,Ct=new WeakMap,Mo=new WeakMap,cr=new WeakSet,ri=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),rt.batch(()=>{R(this,lr).forEach(r=>{r.onMutationUpdate(e)}),R(this,Ct).notify({mutation:this,type:"updated",action:e})})},M1);function TD(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Nr,$n,Rc,A1,_D=(A1=class extends Kc{constructor(e={}){super();Y(this,Nr,void 0);Y(this,$n,void 0);Y(this,Rc,void 0);this.config=e,H(this,Nr,new Set),H(this,$n,new Map),H(this,Rc,0)}build(e,n,r){const i=new ED({mutationCache:this,mutationId:++uu(this,Rc)._,options:e.defaultMutationOptions(n),state:r});return this.add(i),i}add(e){R(this,Nr).add(e);const n=Ou(e);if(typeof n=="string"){const r=R(this,$n).get(n);r?r.push(e):R(this,$n).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(R(this,Nr).delete(e)){const n=Ou(e);if(typeof n=="string"){const r=R(this,$n).get(n);if(r)if(r.length>1){const i=r.indexOf(e);i!==-1&&r.splice(i,1)}else r[0]===e&&R(this,$n).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Ou(e);if(typeof n=="string"){const r=R(this,$n).get(n),i=r==null?void 0:r.find(o=>o.state.status==="pending");return!i||i===e}else return!0}runNext(e){var r;const n=Ou(e);if(typeof n=="string"){const i=(r=R(this,$n).get(n))==null?void 0:r.find(o=>o!==e&&o.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){rt.batch(()=>{R(this,Nr).forEach(e=>{this.notify({type:"removed",mutation:e})}),R(this,Nr).clear(),R(this,$n).clear()})}getAll(){return Array.from(R(this,Nr))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>Gx(n,r))}findAll(e={}){return this.getAll().filter(n=>Gx(e,n))}notify(e){rt.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return rt.batch(()=>Promise.all(e.map(n=>n.continue().catch(mn))))}},Nr=new WeakMap,$n=new WeakMap,Rc=new WeakMap,A1);function Ou(t){var e;return(e=t.options.scope)==null?void 0:e.id}function Qx(t){return{onFetch:(e,n)=>{var u,d,f,h,p;const r=e.options,i=(f=(d=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:d.fetchMore)==null?void 0:f.direction,o=((h=e.state.data)==null?void 0:h.pages)||[],s=((p=e.state.data)==null?void 0:p.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let g=!1;const x=S=>{Object.defineProperty(S,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},v=uk(e.options,e.fetchOptions),w=async(S,b,C)=>{if(g)return Promise.reject();if(b==null&&S.pages.length)return Promise.resolve(S);const k={client:e.client,queryKey:e.queryKey,pageParam:b,direction:C?"backward":"forward",meta:e.options.meta};x(k);const E=await v(k),{maxPages:_}=e.options,O=C?yD:gD;return{pages:O(S.pages,E,_),pageParams:O(S.pageParams,b,_)}};if(i&&o.length){const S=i==="backward",b=S?RD:Xx,C={pages:o,pageParams:s},k=b(r,C);a=await w(C,k,S)}else{const S=t??o.length;do{const b=l===0?s[0]??r.initialPageParam:Xx(r,a);if(l>0&&b==null)break;a=await w(a,b),l++}while(l<S)}return a};e.options.persister?e.fetchFn=()=>{var g,x;return(x=(g=e.options).persister)==null?void 0:x.call(g,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=c}}}function Xx(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function RD(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var Ae,xi,wi,pa,ma,bi,ga,ya,D1,gk=(D1=class{constructor(t={}){Y(this,Ae,void 0);Y(this,xi,void 0);Y(this,wi,void 0);Y(this,pa,void 0);Y(this,ma,void 0);Y(this,bi,void 0);Y(this,ga,void 0);Y(this,ya,void 0);H(this,Ae,t.queryCache||new kD),H(this,xi,t.mutationCache||new _D),H(this,wi,t.defaultOptions||{}),H(this,pa,new Map),H(this,ma,new Map),H(this,bi,0)}mount(){uu(this,bi)._++,R(this,bi)===1&&(H(this,ga,hv.subscribe(async t=>{t&&(await this.resumePausedMutations(),R(this,Ae).onFocus())})),H(this,ya,Gd.subscribe(async t=>{t&&(await this.resumePausedMutations(),R(this,Ae).onOnline())})))}unmount(){var t,e;uu(this,bi)._--,R(this,bi)===0&&((t=R(this,ga))==null||t.call(this),H(this,ga,void 0),(e=R(this,ya))==null||e.call(this),H(this,ya,void 0))}isFetching(t){return R(this,Ae).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return R(this,xi).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=R(this,Ae).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=R(this,Ae).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(ta(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return R(this,Ae).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),i=R(this,Ae).get(r.queryHash),o=i==null?void 0:i.state.data,s=pD(e,o);if(s!==void 0)return R(this,Ae).build(this,r).setData(s,{...n,manual:!0})}setQueriesData(t,e,n){return rt.batch(()=>R(this,Ae).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=R(this,Ae).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=R(this,Ae);rt.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=R(this,Ae);return rt.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=rt.batch(()=>R(this,Ae).findAll(t).map(i=>i.cancel(n)));return Promise.all(r).then(mn).catch(mn)}invalidateQueries(t,e={}){return rt.batch(()=>(R(this,Ae).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=rt.batch(()=>R(this,Ae).findAll(t).filter(i=>!i.isDisabled()).map(i=>{let o=i.fetch(void 0,n);return n.throwOnError||(o=o.catch(mn)),i.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(r).then(mn)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=R(this,Ae).build(this,e);return n.isStaleByTime(ta(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(mn).catch(mn)}fetchInfiniteQuery(t){return t.behavior=Qx(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(mn).catch(mn)}ensureInfiniteQueryData(t){return t.behavior=Qx(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Gd.isOnline()?R(this,xi).resumePausedMutations():Promise.resolve()}getQueryCache(){return R(this,Ae)}getMutationCache(){return R(this,xi)}getDefaultOptions(){return R(this,wi)}setDefaultOptions(t){H(this,wi,t)}setQueryDefaults(t,e){R(this,pa).set(lc(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...R(this,pa).values()],n={};return e.forEach(r=>{cc(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){R(this,ma).set(lc(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...R(this,ma).values()],n={};return e.forEach(r=>{cc(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...R(this,wi).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=dv(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===fv&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...R(this,wi).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){R(this,Ae).clear(),R(this,xi).clear()}},Ae=new WeakMap,xi=new WeakMap,wi=new WeakMap,pa=new WeakMap,ma=new WeakMap,bi=new WeakMap,ga=new WeakMap,ya=new WeakMap,D1),Bt,le,Oc,kt,Ao,va,Si,ur,Pc,xa,wa,Do,Io,Ci,ba,No,wl,Mc,rg,Ac,ig,Dc,og,Ic,sg,Nc,ag,jc,lg,Lc,cg,bf,yk,I1,OD=(I1=class extends Kc{constructor(e,n){super();Y(this,No);Y(this,Mc);Y(this,Ac);Y(this,Dc);Y(this,Ic);Y(this,Nc);Y(this,jc);Y(this,Lc);Y(this,bf);Y(this,Bt,void 0);Y(this,le,void 0);Y(this,Oc,void 0);Y(this,kt,void 0);Y(this,Ao,void 0);Y(this,va,void 0);Y(this,Si,void 0);Y(this,ur,void 0);Y(this,Pc,void 0);Y(this,xa,void 0);Y(this,wa,void 0);Y(this,Do,void 0);Y(this,Io,void 0);Y(this,Ci,void 0);Y(this,ba,new Set);this.options=n,H(this,Bt,e),H(this,ur,null),H(this,Si,ng()),this.options.experimental_prefetchInRender||R(this,Si).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(R(this,le).addObserver(this),Zx(R(this,le),this.options)?ae(this,No,wl).call(this):this.updateResult(),ae(this,Ic,sg).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return ug(R(this,le),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return ug(R(this,le),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,ae(this,Nc,ag).call(this),ae(this,jc,lg).call(this),R(this,le).removeObserver(this)}setOptions(e,n){const r=this.options,i=R(this,le);if(this.options=R(this,Bt).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Un(this.options.enabled,R(this,le))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");ae(this,Lc,cg).call(this),R(this,le).setOptions(this.options),r._defaulted&&!Zm(this.options,r)&&R(this,Bt).getQueryCache().notify({type:"observerOptionsUpdated",query:R(this,le),observer:this});const o=this.hasListeners();o&&ew(R(this,le),i,this.options,r)&&ae(this,No,wl).call(this),this.updateResult(n),o&&(R(this,le)!==i||Un(this.options.enabled,R(this,le))!==Un(r.enabled,R(this,le))||ta(this.options.staleTime,R(this,le))!==ta(r.staleTime,R(this,le)))&&ae(this,Mc,rg).call(this);const s=ae(this,Ac,ig).call(this);o&&(R(this,le)!==i||Un(this.options.enabled,R(this,le))!==Un(r.enabled,R(this,le))||s!==R(this,Ci))&&ae(this,Dc,og).call(this,s)}getOptimisticResult(e){const n=R(this,Bt).getQueryCache().build(R(this,Bt),e),r=this.createResult(n,e);return MD(this,r)&&(H(this,kt,r),H(this,va,this.options),H(this,Ao,R(this,le).state)),r}getCurrentResult(){return R(this,kt)}trackResult(e,n){const r={};return Object.keys(e).forEach(i=>{Object.defineProperty(r,i,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(i),n==null||n(i),e[i])})}),r}trackProp(e){R(this,ba).add(e)}getCurrentQuery(){return R(this,le)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=R(this,Bt).defaultQueryOptions(e),r=R(this,Bt).getQueryCache().build(R(this,Bt),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return ae(this,No,wl).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),R(this,kt)))}createResult(e,n){var _;const r=R(this,le),i=this.options,o=R(this,kt),s=R(this,Ao),a=R(this,va),c=e!==r?e.state:R(this,Oc),{state:u}=e;let d={...u},f=!1,h;if(n._optimisticResults){const O=this.hasListeners(),T=!O&&Zx(e,n),D=O&&ew(e,r,n,i);(T||D)&&(d={...d,...mk(u.data,e.options)}),n._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:p,errorUpdatedAt:g,status:x}=d;if(n.select&&d.data!==void 0)if(o&&d.data===(s==null?void 0:s.data)&&n.select===R(this,Pc))h=R(this,xa);else try{H(this,Pc,n.select),h=n.select(d.data),h=tg(o==null?void 0:o.data,h,n),H(this,xa,h),H(this,ur,null)}catch(O){H(this,ur,O)}else h=d.data;if(n.placeholderData!==void 0&&h===void 0&&x==="pending"){let O;if(o!=null&&o.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData))O=o.data;else if(O=typeof n.placeholderData=="function"?n.placeholderData((_=R(this,wa))==null?void 0:_.state.data,R(this,wa)):n.placeholderData,n.select&&O!==void 0)try{O=n.select(O),H(this,ur,null)}catch(T){H(this,ur,T)}O!==void 0&&(x="success",h=tg(o==null?void 0:o.data,O,n),f=!0)}R(this,ur)&&(p=R(this,ur),h=R(this,xa),g=Date.now(),x="error");const v=d.fetchStatus==="fetching",w=x==="pending",S=x==="error",b=w&&v,C=h!==void 0,E={status:x,fetchStatus:d.fetchStatus,isPending:w,isSuccess:x==="success",isError:S,isInitialLoading:b,isLoading:b,data:h,dataUpdatedAt:d.dataUpdatedAt,error:p,errorUpdatedAt:g,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>c.dataUpdateCount||d.errorUpdateCount>c.errorUpdateCount,isFetching:v,isRefetching:v&&!w,isLoadingError:S&&!C,isPaused:d.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:S&&C,isStale:pv(e,n),refetch:this.refetch,promise:R(this,Si)};if(this.options.experimental_prefetchInRender){const O=j=>{E.status==="error"?j.reject(E.error):E.data!==void 0&&j.resolve(E.data)},T=()=>{const j=H(this,Si,E.promise=ng());O(j)},D=R(this,Si);switch(D.status){case"pending":e.queryHash===r.queryHash&&O(D);break;case"fulfilled":(E.status==="error"||E.data!==D.value)&&T();break;case"rejected":(E.status!=="error"||E.error!==D.reason)&&T();break}}return E}updateResult(e){const n=R(this,kt),r=this.createResult(R(this,le),this.options);if(H(this,Ao,R(this,le).state),H(this,va,this.options),R(this,Ao).data!==void 0&&H(this,wa,R(this,le)),Zm(r,n))return;H(this,kt,r);const i={},o=()=>{if(!n)return!0;const{notifyOnChangeProps:s}=this.options,a=typeof s=="function"?s():s;if(a==="all"||!a&&!R(this,ba).size)return!0;const l=new Set(a??R(this,ba));return this.options.throwOnError&&l.add("error"),Object.keys(R(this,kt)).some(c=>{const u=c;return R(this,kt)[u]!==n[u]&&l.has(u)})};(e==null?void 0:e.listeners)!==!1&&o()&&(i.listeners=!0),ae(this,bf,yk).call(this,{...i,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&ae(this,Ic,sg).call(this)}},Bt=new WeakMap,le=new WeakMap,Oc=new WeakMap,kt=new WeakMap,Ao=new WeakMap,va=new WeakMap,Si=new WeakMap,ur=new WeakMap,Pc=new WeakMap,xa=new WeakMap,wa=new WeakMap,Do=new WeakMap,Io=new WeakMap,Ci=new WeakMap,ba=new WeakMap,No=new WeakSet,wl=function(e){ae(this,Lc,cg).call(this);let n=R(this,le).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(mn)),n},Mc=new WeakSet,rg=function(){ae(this,Nc,ag).call(this);const e=ta(this.options.staleTime,R(this,le));if(Qo||R(this,kt).isStale||!Xm(e))return;const r=lk(R(this,kt).dataUpdatedAt,e)+1;H(this,Do,setTimeout(()=>{R(this,kt).isStale||this.updateResult()},r))},Ac=new WeakSet,ig=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(R(this,le)):this.options.refetchInterval)??!1},Dc=new WeakSet,og=function(e){ae(this,jc,lg).call(this),H(this,Ci,e),!(Qo||Un(this.options.enabled,R(this,le))===!1||!Xm(R(this,Ci))||R(this,Ci)===0)&&H(this,Io,setInterval(()=>{(this.options.refetchIntervalInBackground||hv.isFocused())&&ae(this,No,wl).call(this)},R(this,Ci)))},Ic=new WeakSet,sg=function(){ae(this,Mc,rg).call(this),ae(this,Dc,og).call(this,ae(this,Ac,ig).call(this))},Nc=new WeakSet,ag=function(){R(this,Do)&&(clearTimeout(R(this,Do)),H(this,Do,void 0))},jc=new WeakSet,lg=function(){R(this,Io)&&(clearInterval(R(this,Io)),H(this,Io,void 0))},Lc=new WeakSet,cg=function(){const e=R(this,Bt).getQueryCache().build(R(this,Bt),this.options);if(e===R(this,le))return;const n=R(this,le);H(this,le,e),H(this,Oc,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},bf=new WeakSet,yk=function(e){rt.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(R(this,kt))}),R(this,Bt).getQueryCache().notify({query:R(this,le),type:"observerResultsUpdated"})})},I1);function PD(t,e){return Un(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function Zx(t,e){return PD(t,e)||t.state.data!==void 0&&ug(t,e,e.refetchOnMount)}function ug(t,e,n){if(Un(e.enabled,t)!==!1){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&pv(t,e)}return!1}function ew(t,e,n,r){return(t!==e||Un(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&pv(t,n)}function pv(t,e){return Un(e.enabled,t)!==!1&&t.isStaleByTime(ta(e.staleTime,t))}function MD(t,e){return!Zm(t.getCurrentResult(),e)}var vk=y.createContext(void 0),Bf=t=>{const e=y.useContext(vk);if(t)return t;if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},xk=({client:t,children:e})=>(y.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),m.jsx(vk.Provider,{value:t,children:e})),wk=y.createContext(!1),AD=()=>y.useContext(wk);wk.Provider;function DD(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var ID=y.createContext(DD()),ND=()=>y.useContext(ID);function jD(t,e){return typeof t=="function"?t(...e):!!t}function tw(){}var LD=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},$D=t=>{y.useEffect(()=>{t.clearReset()},[t])},FD=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:i})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(i&&t.data===void 0||jD(n,[t.error,r])),BD=t=>{const e=t.staleTime;t.suspense&&(t.staleTime=typeof e=="function"?(...n)=>Math.max(e(...n),1e3):Math.max(e??1e3,1e3),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3)))},zD=(t,e)=>t.isLoading&&t.isFetching&&!e,UD=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,nw=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function VD(t,e,n){var d,f,h,p,g;const r=Bf(n),i=AD(),o=ND(),s=r.defaultQueryOptions(t);(f=(d=r.getDefaultOptions().queries)==null?void 0:d._experimental_beforeQuery)==null||f.call(d,s),s._optimisticResults=i?"isRestoring":"optimistic",BD(s),LD(s,o),$D(o);const a=!r.getQueryCache().get(s.queryHash),[l]=y.useState(()=>new e(r,s)),c=l.getOptimisticResult(s),u=!i&&t.subscribed!==!1;if(y.useSyncExternalStore(y.useCallback(x=>{const v=u?l.subscribe(rt.batchCalls(x)):tw;return l.updateResult(),v},[l,u]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),y.useEffect(()=>{l.setOptions(s,{listeners:!1})},[s,l]),UD(s,c))throw nw(s,l,o);if(FD({result:c,errorResetBoundary:o,throwOnError:s.throwOnError,query:r.getQueryCache().get(s.queryHash),suspense:s.suspense}))throw c.error;if((p=(h=r.getDefaultOptions().queries)==null?void 0:h._experimental_afterQuery)==null||p.call(h,s,c),s.experimental_prefetchInRender&&!Qo&&zD(c,i)){const x=a?nw(s,l,o):(g=r.getQueryCache().get(s.queryHash))==null?void 0:g.promise;x==null||x.catch(tw).finally(()=>{l.updateResult()})}return s.notifyOnChangeProps?c:l.trackResult(c)}function HD(t,e){return VD(t,OD,e)}const WD=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Yo(()=>Promise.resolve().then(()=>Ja),void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class mv extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class KD extends mv{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class qD extends mv{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class GD extends mv{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var dg;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(dg||(dg={}));var JD=globalThis&&globalThis.__awaiter||function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{c(r.next(u))}catch(d){s(d)}}function l(u){try{c(r.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};class YD{constructor(e,{headers:n={},customFetch:r,region:i=dg.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=WD(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return JD(this,void 0,void 0,function*(){try{const{headers:i,method:o,body:s}=n;let a={},{region:l}=n;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let c;s&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&s instanceof Blob||s instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",c=s):typeof s=="string"?(a["Content-Type"]="text/plain",c=s):typeof FormData<"u"&&s instanceof FormData?c=s:(a["Content-Type"]="application/json",c=JSON.stringify(s)));const u=yield this.fetch(`${this.url}/${e}`,{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),i),body:c}).catch(p=>{throw new KD(p)}),d=u.headers.get("x-relay-error");if(d&&d==="true")throw new qD(u);if(!u.ok)throw new GD(u);let f=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),h;return f==="application/json"?h=yield u.json():f==="application/octet-stream"?h=yield u.blob():f==="text/event-stream"?h=u:f==="multipart/form-data"?h=yield u.formData():h=yield u.text(),{data:h,error:null}}catch(i){return{data:null,error:i}}})}}var Ut={},gv={},zf={},qc={},Uf={},Vf={},QD=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Oa=QD();const XD=Oa.fetch,bk=Oa.fetch.bind(Oa),Sk=Oa.Headers,ZD=Oa.Request,eI=Oa.Response,Ja=Object.freeze(Object.defineProperty({__proto__:null,Headers:Sk,Request:ZD,Response:eI,default:bk,fetch:XD},Symbol.toStringTag,{value:"Module"})),tI=rO(Ja);var Hf={};Object.defineProperty(Hf,"__esModule",{value:!0});let nI=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Hf.default=nI;var Ck=Tn&&Tn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Vf,"__esModule",{value:!0});const rI=Ck(tI),iI=Ck(Hf);let oI=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=rI.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=Object.assign({},this.headers),this.headers[e]=n,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{var s,a,l;let c=null,u=null,d=null,f=o.status,h=o.statusText;if(o.ok){if(this.method!=="HEAD"){const v=await o.text();v===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=v:u=JSON.parse(v))}const g=(s=this.headers.Prefer)===null||s===void 0?void 0:s.match(/count=(exact|planned|estimated)/),x=(a=o.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");g&&x&&x.length>1&&(d=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,d=null,f=406,h="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const g=await o.text();try{c=JSON.parse(g),Array.isArray(c)&&o.status===404&&(u=[],c=null,f=200,h="OK")}catch{o.status===404&&g===""?(f=204,h="No Content"):c={message:g}}if(c&&this.isMaybeSingle&&(!((l=c==null?void 0:c.details)===null||l===void 0)&&l.includes("0 rows"))&&(c=null,f=200,h="OK"),c&&this.shouldThrowOnError)throw new iI.default(c)}return{error:c,data:u,count:d,status:f,statusText:h}});return this.shouldThrowOnError||(i=i.catch(o=>{var s,a,l;return{error:{message:`${(s=o==null?void 0:o.name)!==null&&s!==void 0?s:"FetchError"}: ${o==null?void 0:o.message}`,details:`${(a=o==null?void 0:o.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=o==null?void 0:o.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,n)}returns(){return this}overrideTypes(){return this}};Vf.default=oI;var sI=Tn&&Tn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Uf,"__esModule",{value:!0});const aI=sI(Vf);let lI=class extends aI.default{select(e){let n=!1;const r=(e??"*").split("").map(i=>/\s/.test(i)&&!n?"":(i==='"'&&(n=!n),i)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:i,referencedTable:o=i}={}){const s=o?`${o}.order`:"order",a=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${a?`${a},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:i=r}={}){const o=typeof i>"u"?"offset":`${i}.offset`,s=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(o,`${e}`),this.url.searchParams.set(s,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:i=!1,wal:o=!1,format:s="text"}={}){var a;const l=[e?"analyze":null,n?"verbose":null,r?"settings":null,i?"buffers":null,o?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${s}; for="${c}"; options=${l};`,s==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Uf.default=lI;var cI=Tn&&Tn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(qc,"__esModule",{value:!0});const uI=cI(Uf);let dI=class extends uI.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:i}={}){let o="";i==="plain"?o="pl":i==="phrase"?o="ph":i==="websearch"&&(o="w");const s=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${o}fts${s}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};qc.default=dI;var fI=Tn&&Tn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(zf,"__esModule",{value:!0});const fl=fI(qc);let hI=class{constructor(e,{headers:n={},schema:r,fetch:i}){this.url=e,this.headers=n,this.schema=r,this.fetch=i}select(e,{head:n=!1,count:r}={}){const i=n?"HEAD":"GET";let o=!1;const s=(e??"*").split("").map(a=>/\s/.test(a)&&!o?"":(a==='"'&&(o=!o),a)).join("");return this.url.searchParams.set("select",s),r&&(this.headers.Prefer=`count=${r}`),new fl.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:n,defaultToNull:r=!0}={}){const i="POST",o=[];if(this.headers.Prefer&&o.push(this.headers.Prefer),n&&o.push(`count=${n}`),r||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(e)){const s=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(s.length>0){const a=[...new Set(s)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new fl.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:i,defaultToNull:o=!0}={}){const s="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&a.push(this.headers.Prefer),i&&a.push(`count=${i}`),o||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const l=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new fl.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:n}={}){const r="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),this.headers.Prefer=i.join(","),new fl.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const n="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new fl.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};zf.default=hI;var Wf={},Kf={};Object.defineProperty(Kf,"__esModule",{value:!0});Kf.version=void 0;Kf.version="0.0.0-automated";Object.defineProperty(Wf,"__esModule",{value:!0});Wf.DEFAULT_HEADERS=void 0;const pI=Kf;Wf.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${pI.version}`};var kk=Tn&&Tn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(gv,"__esModule",{value:!0});const mI=kk(zf),gI=kk(qc),yI=Wf;let vI=class Ek{constructor(e,{headers:n={},schema:r,fetch:i}={}){this.url=e,this.headers=Object.assign(Object.assign({},yI.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=i}from(e){const n=new URL(`${this.url}/${e}`);return new mI.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Ek(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:i=!1,count:o}={}){let s;const a=new URL(`${this.url}/rpc/${e}`);let l;r||i?(s=r?"HEAD":"GET",Object.entries(n).filter(([u,d])=>d!==void 0).map(([u,d])=>[u,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([u,d])=>{a.searchParams.append(u,d)})):(s="POST",l=n);const c=Object.assign({},this.headers);return o&&(c.Prefer=`count=${o}`),new gI.default({method:s,url:a,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};gv.default=vI;var Ya=Tn&&Tn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ut,"__esModule",{value:!0});Ut.PostgrestError=Ut.PostgrestBuilder=Ut.PostgrestTransformBuilder=Ut.PostgrestFilterBuilder=Ut.PostgrestQueryBuilder=Ut.PostgrestClient=void 0;const Tk=Ya(gv);Ut.PostgrestClient=Tk.default;const _k=Ya(zf);Ut.PostgrestQueryBuilder=_k.default;const Rk=Ya(qc);Ut.PostgrestFilterBuilder=Rk.default;const Ok=Ya(Uf);Ut.PostgrestTransformBuilder=Ok.default;const Pk=Ya(Vf);Ut.PostgrestBuilder=Pk.default;const Mk=Ya(Hf);Ut.PostgrestError=Mk.default;var xI=Ut.default={PostgrestClient:Tk.default,PostgrestQueryBuilder:_k.default,PostgrestFilterBuilder:Rk.default,PostgrestTransformBuilder:Ok.default,PostgrestBuilder:Pk.default,PostgrestError:Mk.default};const{PostgrestClient:wI,PostgrestQueryBuilder:zH,PostgrestFilterBuilder:UH,PostgrestTransformBuilder:VH,PostgrestBuilder:HH,PostgrestError:WH}=xI,bI="2.11.2",SI={"X-Client-Info":`realtime-js/${bI}`},CI="1.0.0",Ak=1e4,kI=1e3;var na;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(na||(na={}));var Zt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Zt||(Zt={}));var Bn;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Bn||(Bn={}));var fg;(function(t){t.websocket="websocket"})(fg||(fg={}));var vo;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(vo||(vo={}));class EI{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const i=n.getUint8(1),o=n.getUint8(2);let s=this.HEADER_LENGTH+2;const a=r.decode(e.slice(s,s+i));s=s+i;const l=r.decode(e.slice(s,s+o));s=s+o;const c=JSON.parse(r.decode(e.slice(s,e.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class Dk{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var xe;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(xe||(xe={}));const rw=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((o,s)=>(o[s]=TI(s,t,e,i),o),{})},TI=(t,e,n,r)=>{const i=e.find(a=>a.name===t),o=i==null?void 0:i.type,s=n[t];return o&&!r.includes(o)?Ik(o,s):hg(s)},Ik=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return PI(e,n)}switch(t){case xe.bool:return _I(e);case xe.float4:case xe.float8:case xe.int2:case xe.int4:case xe.int8:case xe.numeric:case xe.oid:return RI(e);case xe.json:case xe.jsonb:return OI(e);case xe.timestamp:return MI(e);case xe.abstime:case xe.date:case xe.daterange:case xe.int4range:case xe.int8range:case xe.money:case xe.reltime:case xe.text:case xe.time:case xe.timestamptz:case xe.timetz:case xe.tsrange:case xe.tstzrange:return hg(e);default:return hg(e)}},hg=t=>t,_I=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},RI=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},OI=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},PI=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let o;const s=t.slice(1,n);try{o=JSON.parse("["+s+"]")}catch{o=s?s.split(","):[]}return o.map(a=>Ik(e,a))}return t},MI=t=>typeof t=="string"?t.replace(" ","T"):t,Nk=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class ap{constructor(e,n,r={},i=Ak){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var iw;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(iw||(iw={}));class Nl{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:o,onLeave:s,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Nl.syncState(this.state,i,o,s),this.pendingDiffs.forEach(l=>{this.state=Nl.syncDiff(this.state,l,o,s)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{const{onJoin:o,onLeave:s,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Nl.syncDiff(this.state,i,o,s),a())}),this.onJoin((i,o,s)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:s})}),this.onLeave((i,o,s)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const o=this.cloneDeep(e),s=this.transformState(n),a={},l={};return this.map(o,(c,u)=>{s[c]||(l[c]=u)}),this.map(s,(c,u)=>{const d=o[c];if(d){const f=u.map(x=>x.presence_ref),h=d.map(x=>x.presence_ref),p=u.filter(x=>h.indexOf(x.presence_ref)<0),g=d.filter(x=>f.indexOf(x.presence_ref)<0);p.length>0&&(a[c]=p),g.length>0&&(l[c]=g)}else a[c]=u}),this.syncDiff(o,{joins:a,leaves:l},r,i)}static syncDiff(e,n,r,i){const{joins:o,leaves:s}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(o,(a,l)=>{var c;const u=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),u.length>0){const d=e[a].map(h=>h.presence_ref),f=u.filter(h=>d.indexOf(h.presence_ref)<0);e[a].unshift(...f)}r(a,u,l)}),this.map(s,(a,l)=>{let c=e[a];if(!c)return;const u=l.map(d=>d.presence_ref);c=c.filter(d=>u.indexOf(d.presence_ref)<0),e[a]=c,i(a,c,l),c.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var qn;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(qn||(qn={}));var ow;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(ow||(ow={}));var Mr;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Mr||(Mr={}));class yv{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Zt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new ap(this,Bn.join,this.params,this.timeout),this.rejoinTimer=new Dk(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Zt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Zt.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Zt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Zt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Bn.reply,{},(i,o)=>{this._trigger(this._replyEventName(o),i)}),this.presence=new Nl(this),this.broadcastEndpointURL=Nk(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:o,presence:s,private:a}}=this.params;this._onError(u=>e==null?void 0:e(Mr.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(Mr.CLOSED));const l={},c={broadcast:o,presence:s,postgres_changes:(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(u=>u.filter))!==null&&i!==void 0?i:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},l)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:u})=>{var d;if(this.socket.setAuth(),u===void 0){e==null||e(Mr.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,h=(d=f==null?void 0:f.length)!==null&&d!==void 0?d:0,p=[];for(let g=0;g<h;g++){const x=f[g],{filter:{event:v,schema:w,table:S,filter:b}}=x,C=u&&u[g];if(C&&C.event===v&&C.schema===w&&C.table===S&&C.filter===b)p.push(Object.assign(Object.assign({},x),{id:C.id}));else{this.unsubscribe(),e==null||e(Mr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,e&&e(Mr.SUBSCRIBED);return}}).receive("error",u=>{e==null||e(Mr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Mr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this._on(e,n,r)}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){const{event:o,payload:s}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:s,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var s,a,l;const c=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(s=this.params)===null||s===void 0?void 0:s.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&o("ok"),c.receive("ok",()=>o("ok")),c.receive("error",()=>o("error")),c.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Zt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Bn.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const i=new ap(this,Bn.leave,{},e);i.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}async _fetchWithTimeout(e,n,r){const i=new AbortController,o=setTimeout(()=>i.abort(),r),s=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(o),s}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new ap(this,e,n,r);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,o;const s=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=Bn;if(r&&[a,l,c,u].indexOf(s)>=0&&r!==this._joinRef())return;let f=this._onMessage(s,n,r);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(h=>{var p,g,x;return((p=h.filter)===null||p===void 0?void 0:p.event)==="*"||((x=(g=h.filter)===null||g===void 0?void 0:g.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===s}).map(h=>h.callback(f,r)):(o=this.bindings[s])===null||o===void 0||o.filter(h=>{var p,g,x,v,w,S;if(["broadcast","presence","postgres_changes"].includes(s))if("id"in h){const b=h.id,C=(p=h.filter)===null||p===void 0?void 0:p.event;return b&&((g=n.ids)===null||g===void 0?void 0:g.includes(b))&&(C==="*"||(C==null?void 0:C.toLocaleLowerCase())===((x=n.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const b=(w=(v=h==null?void 0:h.filter)===null||v===void 0?void 0:v.event)===null||w===void 0?void 0:w.toLocaleLowerCase();return b==="*"||b===((S=n==null?void 0:n.event)===null||S===void 0?void 0:S.toLocaleLowerCase())}else return h.type.toLocaleLowerCase()===s}).map(h=>{if(typeof f=="object"&&"ids"in f){const p=f.data,{schema:g,table:x,commit_timestamp:v,type:w,errors:S}=p;f=Object.assign(Object.assign({},{schema:g,table:x,commit_timestamp:v,eventType:w,new:{},old:{},errors:S}),this._getPayloadRecords(p))}h.callback(f,r)})}_isClosed(){return this.state===Zt.closed}_isJoined(){return this.state===Zt.joined}_isJoining(){return this.state===Zt.joining}_isLeaving(){return this.state===Zt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),o={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&yv.isEqual(i.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Bn.close,{},e)}_onError(e){this._on(Bn.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Zt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=rw(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=rw(e.columns,e.old_record)),n}}const AI=()=>{},DI=typeof WebSocket<"u",II=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class NI{constructor(e,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=SI,this.params={},this.timeout=Ak,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=AI,this.conn=null,this.sendBuffer=[],this.serializer=new EI,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=o=>{let s;return o?s=o:typeof fetch>"u"?s=(...a)=>Yo(()=>Promise.resolve().then(()=>Ja),void 0).then(({default:l})=>l(...a)):s=fetch,(...a)=>s(...a)},this.endPoint=`${e}/${fg.websocket}`,this.httpEndpoint=Nk(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const i=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:o=>[1e3,2e3,5e3,1e4][o-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(o,s)=>s(JSON.stringify(o)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Dk(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(DI){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new jI(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),Yo(()=>import("./browser-703bf7ff.js").then(e=>e.b),[]).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:CI}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case na.connecting:return vo.Connecting;case na.open:return vo.Open;case na.closing:return vo.Closing;default:return vo.Closed}}isConnected(){return this.connectionState()===vo.Open}channel(e,n={config:{}}){const r=new yv(`realtime:${e}`,n,this);return this.channels.push(r),r}push(e){const{topic:n,event:r,payload:i,ref:o}=e,s=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${o})`,i),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(n){let r=null;try{r=JSON.parse(atob(n.split(".")[1]))}catch{}if(r&&r.exp&&!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`);this.accessTokenValue=n,this.channels.forEach(i=>{n&&i.updateJoinPayload({access_token:n}),i.joinedOnce&&i._isJoined()&&i._push(Bn.access_token,{access_token:n})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(kI,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:i,payload:o,ref:s}=n;s&&s===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${o.status||""} ${r} ${i} ${s&&"("+s+")"||""}`,o),this.channels.filter(a=>a._isMember(r)).forEach(a=>a._trigger(i,o,s)),this.stateChangeCallbacks.message.forEach(a=>a(n))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Bn.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([II],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class jI{constructor(e,n,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=na.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class vv extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ke(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class LI extends vv{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class pg extends vv{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var $I=globalThis&&globalThis.__awaiter||function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{c(r.next(u))}catch(d){s(d)}}function l(u){try{c(r.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const jk=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Yo(()=>Promise.resolve().then(()=>Ja),void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},FI=()=>$I(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Yo(()=>Promise.resolve().then(()=>Ja),void 0)).Response:Response}),mg=t=>{if(Array.isArray(t))return t.map(n=>mg(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[i]=mg(r)}),e};var ls=globalThis&&globalThis.__awaiter||function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{c(r.next(u))}catch(d){s(d)}}function l(u){try{c(r.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const lp=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),BI=(t,e,n)=>ls(void 0,void 0,void 0,function*(){const r=yield FI();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(i=>{e(new LI(lp(i),t.status||500))}).catch(i=>{e(new pg(lp(i),i))}):e(new pg(lp(t),t))}),zI=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(i.body=JSON.stringify(r)),Object.assign(Object.assign({},i),n))};function Gc(t,e,n,r,i,o){return ls(this,void 0,void 0,function*(){return new Promise((s,a)=>{t(n,zI(e,r,i,o)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>s(l)).catch(l=>BI(l,a,r))})})}function Jd(t,e,n,r){return ls(this,void 0,void 0,function*(){return Gc(t,"GET",e,n,r)})}function ui(t,e,n,r,i){return ls(this,void 0,void 0,function*(){return Gc(t,"POST",e,r,i,n)})}function UI(t,e,n,r,i){return ls(this,void 0,void 0,function*(){return Gc(t,"PUT",e,r,i,n)})}function VI(t,e,n,r){return ls(this,void 0,void 0,function*(){return Gc(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function Lk(t,e,n,r,i){return ls(this,void 0,void 0,function*(){return Gc(t,"DELETE",e,r,i,n)})}var Lt=globalThis&&globalThis.__awaiter||function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{c(r.next(u))}catch(d){s(d)}}function l(u){try{c(r.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const HI={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},sw={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class WI{constructor(e,n={},r,i){this.url=e,this.headers=n,this.bucketId=r,this.fetch=jk(i)}uploadOrUpdate(e,n,r,i){return Lt(this,void 0,void 0,function*(){try{let o;const s=Object.assign(Object.assign({},sw),i);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(s.upsert)});const l=s.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",s.cacheControl),l&&o.append("metadata",this.encodeMetadata(l)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.append("cacheControl",s.cacheControl),l&&o.append("metadata",this.encodeMetadata(l))):(o=r,a["cache-control"]=`max-age=${s.cacheControl}`,a["content-type"]=s.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i!=null&&i.headers&&(a=Object.assign(Object.assign({},a),i.headers));const c=this._removeEmptyFolders(n),u=this._getFinalPath(c),d=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:o,headers:a},s!=null&&s.duplex?{duplex:s.duplex}:{})),f=yield d.json();return d.ok?{data:{path:c,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(o){if(Ke(o))return{data:null,error:o};throw o}})}upload(e,n,r){return Lt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,i){return Lt(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),s=this._getFinalPath(o),a=new URL(this.url+`/object/upload/sign/${s}`);a.searchParams.set("token",n);try{let l;const c=Object.assign({upsert:sw.upsert},i),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const d=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:u}),f=yield d.json();return d.ok?{data:{path:o,fullPath:f.Key},error:null}:{data:null,error:f}}catch(l){if(Ke(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,n){return Lt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const o=yield ui(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),s=new URL(this.url+o.url),a=s.searchParams.get("token");if(!a)throw new vv("No token returned by API");return{data:{signedUrl:s.toString(),path:e,token:a},error:null}}catch(r){if(Ke(r))return{data:null,error:r};throw r}})}update(e,n,r){return Lt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return Lt(this,void 0,void 0,function*(){try{return{data:yield ui(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(Ke(i))return{data:null,error:i};throw i}})}copy(e,n,r){return Lt(this,void 0,void 0,function*(){try{return{data:{path:(yield ui(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(Ke(i))return{data:null,error:i};throw i}})}createSignedUrl(e,n,r){return Lt(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),o=yield ui(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${s}`)},{data:o,error:null}}catch(i){if(Ke(i))return{data:null,error:i};throw i}})}createSignedUrls(e,n,r){return Lt(this,void 0,void 0,function*(){try{const i=yield ui(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(s=>Object.assign(Object.assign({},s),{signedUrl:s.signedURL?encodeURI(`${this.url}${s.signedURL}${o}`):null})),error:null}}catch(i){if(Ke(i))return{data:null,error:i};throw i}})}download(e,n){return Lt(this,void 0,void 0,function*(){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),s=o?`?${o}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield Jd(this.fetch,`${this.url}/${i}/${a}${s}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Ke(a))return{data:null,error:a};throw a}})}info(e){return Lt(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield Jd(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:mg(r),error:null}}catch(r){if(Ke(r))return{data:null,error:r};throw r}})}exists(e){return Lt(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield VI(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Ke(r)&&r instanceof pg){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),i=[],o=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";o!==""&&i.push(o);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&i.push(l);let c=i.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${c}`)}}}remove(e){return Lt(this,void 0,void 0,function*(){try{return{data:yield Lk(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(Ke(n))return{data:null,error:n};throw n}})}list(e,n,r){return Lt(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},HI),n),{prefix:e||""});return{data:yield ui(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(Ke(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const KI="2.7.1",qI={"X-Client-Info":`storage-js/${KI}`};var xs=globalThis&&globalThis.__awaiter||function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{c(r.next(u))}catch(d){s(d)}}function l(u){try{c(r.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};class GI{constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},qI),n),this.fetch=jk(r)}listBuckets(){return xs(this,void 0,void 0,function*(){try{return{data:yield Jd(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Ke(e))return{data:null,error:e};throw e}})}getBucket(e){return xs(this,void 0,void 0,function*(){try{return{data:yield Jd(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(Ke(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return xs(this,void 0,void 0,function*(){try{return{data:yield ui(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Ke(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return xs(this,void 0,void 0,function*(){try{return{data:yield UI(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Ke(r))return{data:null,error:r};throw r}})}emptyBucket(e){return xs(this,void 0,void 0,function*(){try{return{data:yield ui(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Ke(n))return{data:null,error:n};throw n}})}deleteBucket(e){return xs(this,void 0,void 0,function*(){try{return{data:yield Lk(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(Ke(n))return{data:null,error:n};throw n}})}}class JI extends GI{constructor(e,n={},r){super(e,n,r)}from(e){return new WI(this.url,this.headers,e,this.fetch)}}const YI="2.49.1";let bl="";typeof Deno<"u"?bl="deno":typeof document<"u"?bl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?bl="react-native":bl="node";const QI={"X-Client-Info":`supabase-js-${bl}/${YI}`},XI={headers:QI},ZI={schema:"public"},eN={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},tN={};var nN=globalThis&&globalThis.__awaiter||function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{c(r.next(u))}catch(d){s(d)}}function l(u){try{c(r.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const rN=t=>{let e;return t?e=t:typeof fetch>"u"?e=bk:e=fetch,(...n)=>e(...n)},iN=()=>typeof Headers>"u"?Sk:Headers,oN=(t,e,n)=>{const r=rN(n),i=iN();return(o,s)=>nN(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:t;let c=new i(s==null?void 0:s.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(o,Object.assign(Object.assign({},s),{headers:c}))})};var sN=globalThis&&globalThis.__awaiter||function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{c(r.next(u))}catch(d){s(d)}}function l(u){try{c(r.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};function aN(t){return t.replace(/\/$/,"")}function lN(t,e){const{db:n,auth:r,realtime:i,global:o}=t,{db:s,auth:a,realtime:l,global:c}=e,u={db:Object.assign(Object.assign({},s),n),auth:Object.assign(Object.assign({},a),r),realtime:Object.assign(Object.assign({},l),i),global:Object.assign(Object.assign({},c),o),accessToken:()=>sN(this,void 0,void 0,function*(){return""})};return t.accessToken?u.accessToken=t.accessToken:delete u.accessToken,u}const $k="2.68.0",Ps=30*1e3,gg=3,cp=gg*Ps,cN="http://localhost:9999",uN="supabase.auth.token",dN={"X-Client-Info":`gotrue-js/${$k}`},yg="X-Supabase-Api-Version",Fk={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function fN(t){return Math.round(Date.now()/1e3)+t}function hN(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const or=()=>typeof window<"u"&&typeof document<"u",fo={tested:!1,writable:!1},jl=()=>{if(!or())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(fo.tested)return fo.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),fo.tested=!0,fo.writable=!0}catch{fo.tested=!0,fo.writable=!1}return fo.writable};function pN(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,o)=>{e[o]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const Bk=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Yo(()=>Promise.resolve().then(()=>Ja),void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},mN=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",zk=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Pu=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Mu=async(t,e)=>{await t.removeItem(e)};function gN(t){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n="",r,i,o,s,a,l,c,u=0;for(t=t.replace("-","+").replace("_","/");u<t.length;)s=e.indexOf(t.charAt(u++)),a=e.indexOf(t.charAt(u++)),l=e.indexOf(t.charAt(u++)),c=e.indexOf(t.charAt(u++)),r=s<<2|a>>4,i=(a&15)<<4|l>>2,o=(l&3)<<6|c,n=n+String.fromCharCode(r),l!=64&&i!=0&&(n=n+String.fromCharCode(i)),c!=64&&o!=0&&(n=n+String.fromCharCode(o));return n}class qf{constructor(){this.promise=new qf.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}qf.promiseConstructor=Promise;function aw(t){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,n=t.split(".");if(n.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(n[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=n[1];return JSON.parse(gN(r))}async function yN(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function vN(t,e){return new Promise((r,i)=>{(async()=>{for(let o=0;o<1/0;o++)try{const s=await t(o);if(!e(o,null,s)){r(s);return}}catch(s){if(!e(o,s)){i(s);return}}})()})}function xN(t){return("0"+t.toString(16)).substr(-2)}function wN(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let o=0;o<56;o++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,xN).join("")}async function bN(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(o=>String.fromCharCode(o)).join("")}function SN(t){return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function CN(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await bN(t);return SN(n)}async function ws(t,e,n=!1){const r=wN();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await zk(t,`${e}-code-verifier`,i);const o=await CN(r);return[o,r===o?"plain":"s256"]}const kN=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function EN(t){const e=t.headers.get(yg);if(!e||!e.match(kN))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class xv extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function ie(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class TN extends xv{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function _N(t){return ie(t)&&t.name==="AuthApiError"}class Uk extends xv{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class cs extends xv{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}}class ii extends cs{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function RN(t){return ie(t)&&t.name==="AuthSessionMissingError"}class up extends cs{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Au extends cs{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Du extends cs{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function ON(t){return ie(t)&&t.name==="AuthImplicitGrantRedirectError"}class lw extends cs{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class vg extends cs{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function dp(t){return ie(t)&&t.name==="AuthRetryableFetchError"}class cw extends cs{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}var PN=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const go=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),MN=[502,503,504];async function uw(t){var e;if(!mN(t))throw new vg(go(t),0);if(MN.includes(t.status))throw new vg(go(t),t.status);let n;try{n=await t.json()}catch(o){throw new Uk(go(o),o)}let r;const i=EN(t);if(i&&i.getTime()>=Fk["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new cw(go(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new ii}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,s)=>o&&typeof s=="string",!0))throw new cw(go(n),t.status,n.weak_password.reasons);throw new TN(go(n),t.status||500,r)}const AN=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function ce(t,e,n,r){var i;const o=Object.assign({},r==null?void 0:r.headers);o[yg]||(o[yg]=Fk["2024-01-01"].name),r!=null&&r.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const s=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(s.redirect_to=r.redirectTo);const a=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",l=await DN(t,e,n+a,{headers:o,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function DN(t,e,n,r,i,o){const s=AN(e,r,i,o);let a;try{a=await t(n,Object.assign({},s))}catch(l){throw console.error(l),new vg(go(l),0)}if(a.ok||await uw(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await uw(l)}}function oi(t){var e;let n=null;LN(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=fN(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function dw(t){const e=oi(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function mi(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function IN(t){return{data:t,error:null}}function NN(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o}=t,s=PN(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o},l=Object.assign({},s);return{data:{properties:a,user:l},error:null}}function jN(t){return t}function LN(t){return t.access_token&&t.refresh_token&&t.expires_in}var $N=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class FN{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=Bk(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n="global"){try{return await ce(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ie(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await ce(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:mi})}catch(r){if(ie(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=$N(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await ce(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:NN,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(ie(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await ce(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:mi})}catch(n){if(ie(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,o,s,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await ce(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:jN});if(u.error)throw u.error;const d=await u.json(),f=(s=u.headers.get("x-total-count"))!==null&&s!==void 0?s:0,h=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return h.length>0&&(h.forEach(p=>{const g=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(p.split(";")[1].split("=")[1]);c[`${x}Page`]=g}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(ie(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){try{return await ce(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:mi})}catch(n){if(ie(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){try{return await ce(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:mi})}catch(r){if(ie(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){try{return await ce(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:mi})}catch(r){if(ie(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:n,error:r}=await ce(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(ie(n))return{data:null,error:n};throw n}}async _deleteFactor(e){try{return{data:await ce(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(ie(n))return{data:null,error:n};throw n}}}const BN={getItem:t=>jl()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{jl()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{jl()&&globalThis.localStorage.removeItem(t)}};function fw(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function zN(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const bs={debug:!!(globalThis&&jl()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Vk extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class UN extends Vk{}async function VN(t,e,n){bs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),bs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){bs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{bs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw bs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new UN(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(bs.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}zN();const HN={url:cN,storageKey:uN,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:dN,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function hw(t,e,n){return await n()}class uc{constructor(e){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=uc.nextInstanceID,uc.nextInstanceID+=1,this.instanceID>0&&or()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},HN),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new FN({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=Bk(i.fetch),this.lock=i.lock||hw,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:or()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=VN:this.lock=hw,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:jl()?this.storage=BN:(this.memoryStorage={},this.storage=fw(this.memoryStorage)):(this.memoryStorage={},this.storage=fw(this.memoryStorage)),or()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${$k}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=pN(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),or()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:o}=await this._getSessionFromURL(n,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),ON(o)){const l=(e=o.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:s,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",s,"redirect type",a),await this._saveSession(s),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return ie(n)?{error:n}:{error:new Uk("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{const o=await ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:oi}),{data:s,error:a}=o;if(a||!s)return{data:{user:null,session:null},error:a};const l=s.session,c=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(o){if(ie(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(e){var n,r,i;try{let o;if("email"in e){const{email:u,password:d,options:f}=e;let h=null,p=null;this.flowType==="pkce"&&([h,p]=await ws(this.storage,this.storageKey)),o=await ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:u,password:d,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:h,code_challenge_method:p},xform:oi})}else if("phone"in e){const{phone:u,password:d,options:f}=e;o=await ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(i=f==null?void 0:f.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:oi})}else throw new Au("You must provide either an email or phone number and a password");const{data:s,error:a}=o;if(a||!s)return{data:{user:null,session:null},error:a};const l=s.session,c=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(o){if(ie(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(e){try{let n;if("email"in e){const{email:o,password:s,options:a}=e;n=await ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:dw})}else if("phone"in e){const{phone:o,password:s,options:a}=e;n=await ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:dw})}else throw new Au("You must provide either an email or phone number and a password");const{data:r,error:i}=n;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new up}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(ie(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,i,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const n=await Pu(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:o,error:s}=await ce(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:oi});if(await Mu(this.storage,`${this.storageKey}-code-verifier`),s)throw s;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new up}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:i??null}),error:s})}catch(o){if(ie(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(e){try{const{options:n,provider:r,token:i,access_token:o,nonce:s}=e,a=await ce(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:o,nonce:s,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:oi}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new up}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(n){if(ie(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,i,o,s;try{if("email"in e){const{email:a,options:l}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await ws(this.storage,this.storageKey));const{error:d}=await ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:u}=await ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(o=l==null?void 0:l.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(s=l==null?void 0:l.channel)!==null&&s!==void 0?s:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new Au("You must provide either an email or phone number.")}catch(a){if(ie(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var n,r;try{let i,o;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,o=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:s,error:a}=await ce(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:i,xform:oi});if(a)throw a;if(!s)throw new Error("An error occurred on token verification.");const l=s.session,c=s.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(ie(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var n,r,i;try{let o=null,s=null;return this.flowType==="pkce"&&([o,s]=await ws(this.storage,this.storageKey)),await ce(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:s}),headers:this.headers,xform:IN})}catch(o){if(ie(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new ii;const{error:i}=await ce(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(ie(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:o}=e,{error:s}=await ce(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:s}}else if("phone"in e){const{phone:r,type:i,options:o}=e,{data:s,error:a}=await ce(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:s==null?void 0:s.message_id},error:a}}throw new Au("You must provide either an email or phone number and a type")}catch(n){if(ie(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Pu(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<cp:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let s=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,c,u)=>(!s&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),s=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,u))})}return{data:{session:e},error:null}}const{session:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:mi}):await this._useSession(async n=>{var r,i,o;const{data:s,error:a}=n;if(a)throw a;return!(!((r=s.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ii}:await ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0,xform:mi})})}catch(n){if(ie(n))return RN(n)&&(await this._removeSession(),await Mu(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:o}=r;if(o)throw o;if(!i.session)throw new ii;const s=i.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await ws(this.storage,this.storageKey));const{data:c,error:u}=await ce(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:s.access_token,xform:mi});if(u)throw u;return s.user=c.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),{data:{user:s.user},error:null}})}catch(r){if(ie(r))return{data:{user:null},error:r};throw r}}_decodeJWT(e){return aw(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ii;const n=Date.now()/1e3;let r=n,i=!0,o=null;const s=aw(e.access_token);if(s.exp&&(r=s.exp,i=r<=n),i){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};o=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;o={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(n){if(ie(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:s,error:a}=n;if(a)throw a;e=(r=s.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new ii;const{session:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(ie(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!or())throw new Du("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Du(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new lw("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Du("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new lw("No code detected.");const{data:w,error:S}=await this._exchangeCodeForSession(e.code);if(S)throw S;const b=new URL(window.location.href);return b.searchParams.delete("code"),window.history.replaceState(window.history.state,"",b.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:o,refresh_token:s,expires_in:a,expires_at:l,token_type:c}=e;if(!o||!a||!s||!c)throw new Du("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(a);let f=u+d;l&&(f=parseInt(l));const h=f-u;h*1e3<=Ps&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${d}s`);const p=f-d;u-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,f,u):u-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,f,u);const{data:g,error:x}=await this._getUser(o);if(x)throw x;const v={provider_token:r,provider_refresh_token:i,access_token:o,expires_in:d,expires_at:f,refresh_token:s,token_type:c,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:v,redirectType:e.type},error:null}}catch(r){if(ie(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Pu(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return{error:o};const s=(r=i.session)===null||r===void 0?void 0:r.access_token;if(s){const{error:a}=await this.admin.signOut(s,e);if(a&&!(_N(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await Mu(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=hN(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:o},error:s}=n;if(s)throw s;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await ws(this.storage,this.storageKey,!0));try{return await ce(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(ie(o))return{data:null,error:o};throw o}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(ie(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:i}=await this._useSession(async o=>{var s,a,l,c,u;const{data:d,error:f}=o;if(f)throw f;const h=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await ce(this.fetch,"GET",h,{headers:this.headers,jwt:(u=(c=d.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(i)throw i;return or()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(ie(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:o,error:s}=n;if(s)throw s;return await ce(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(ie(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await vN(async i=>(i>0&&await yN(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await ce(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:oi})),(i,o)=>{const s=200*Math.pow(2,i);return o&&dp(o)&&Date.now()+s-r<Ps})}catch(r){if(this._debug(n,"error",r),ie(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),or()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await Pu(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const i=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<cp;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${cp}s`),i){if(this.autoRefreshToken&&r.refresh_token){const{error:o}=await this._callRefreshToken(r.refresh_token);o&&(console.error(o),dp(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new ii;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new qf;const{data:o,error:s}=await this._refreshAccessToken(e);if(s)throw s;if(!o.session)throw new ii;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const a={session:o.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(o){if(this._debug(i,"error",o),ie(o)){const s={session:null,error:o};return dp(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(s),s}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const o=[],s=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(l){o.push(l)}});if(await Promise.all(s),o.length>0){for(let a=0;a<o.length;a+=1)console.error(o[a]);throw o[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await zk(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Mu(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&or()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ps);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/Ps);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Ps}ms, refresh threshold is ${gg} ticks`),i<=gg&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Vk)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!or()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,s]=await ws(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(s)}`});i.push(a.toString())}if(r!=null&&r.queryParams){const o=new URLSearchParams(r.queryParams);i.push(o.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;return o?{data:null,error:o}:await ce(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(ie(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:o,error:s}=n;if(s)return{data:null,error:s};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:c}=await ce(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(n){if(ie(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return{data:null,error:o};const{data:s,error:a}=await ce(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+s.expires_in},s)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",s),{data:s,error:a})})}catch(n){if(ie(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;return o?{data:null,error:o}:await ce(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(ie(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],i=r.filter(s=>s.factor_type==="totp"&&s.status==="verified"),o=r.filter(s=>s.factor_type==="phone"&&s.status==="verified");return{data:{all:r,totp:i,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:i},error:o}=e;if(o)return{data:null,error:o};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const s=this._decodeJWT(i.access_token);let a=null;s.aal&&(a=s.aal);let l=a;((r=(n=i.user.factors)===null||n===void 0?void 0:n.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=s.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}}uc.nextInstanceID=0;const WN=uc;class KN extends WN{constructor(e){super(e)}}var qN=globalThis&&globalThis.__awaiter||function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{c(r.next(u))}catch(d){s(d)}}function l(u){try{c(r.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};class GN{constructor(e,n,r){var i,o,s;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const a=aN(e);this.realtimeUrl=`${a}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${a}/auth/v1`,this.storageUrl=`${a}/storage/v1`,this.functionsUrl=`${a}/functions/v1`;const l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,c={db:ZI,realtime:tN,auth:Object.assign(Object.assign({},eN),{storageKey:l}),global:XI},u=lN(r??{},c);this.storageKey=(i=u.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(o=u.global.headers)!==null&&o!==void 0?o:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(d,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((s=u.auth)!==null&&s!==void 0?s:{},this.headers,u.global.fetch),this.fetch=oN(n,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new wI(`${a}/rest/v1`,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),u.accessToken||this._listenForAuthEvents()}get functions(){return new YD(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new JI(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return qN(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,storageKey:o,flowType:s,lock:a,debug:l},c,u){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new KN({url:this.authUrl,headers:Object.assign(Object.assign({},d),c),storageKey:o,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,flowType:s,lock:a,debug:l,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new NI(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const JN=(t,e,n)=>new GN(t,e,n);function YN(){const t="production";return{apiUrl:"https://api.eastmedical.ai",wsUrl:{}.VITE_WS_URL||"ws://localhost:3000",supabaseUrl:"https://apnxgktdaiqoesqyseiz.supabase.co",supabaseAnonKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFwbnhna3RkYWlxb2VzcXlzZWl6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDExMzQxNjEsImV4cCI6MjA1NjcxMDE2MX0.XhGhD7ESMUFhZso3wY_ee_WHGWde5v748qFDAhgSQ04",environment:t}}const Wi=YN(),Xo=JN(Wi.supabaseUrl,Wi.supabaseAnonKey,{realtime:{params:{eventsPerSecond:10}},auth:{persistSession:!0,autoRefreshToken:!0}});function He(){return Xo}const Hk=y.createContext(void 0);function QN({children:t}){const e=He(),[n,r]=y.useState(null),[i,o]=y.useState(!0),s=Bf();y.useEffect(()=>{e.auth.getSession().then(({data:{session:d}})=>{r((d==null?void 0:d.user)??null),o(!1)});const{data:{subscription:u}}=e.auth.onAuthStateChange((d,f)=>{r((f==null?void 0:f.user)??null),d==="SIGNED_OUT"&&s.clear()});return()=>{u.unsubscribe()}},[e,s]);const c={user:n,loading:i,signIn:async(u,d)=>{const{data:f,error:h}=await e.auth.signInWithPassword({email:u,password:d});if(h)throw h;return f},signOut:async()=>{const{error:u}=await e.auth.signOut();if(u)throw u;s.clear()}};return m.jsx(Hk.Provider,{value:c,children:t})}const Iu=(...t)=>{};function XN({visitId:t,onMessage:e}){const[n,r]=y.useState([]),i=y.useRef(!1),o=y.useRef(null),s=y.useCallback(async()=>{if(!t||t==="")return;const{data:a,error:l}=await Xo.from("notes").select("*").eq("visit_id",t).order("created_at",{ascending:!0});l||a&&(Iu(`Fetched ${a.length} notes`),r(a),i.current=!0,a.forEach(c=>e==null?void 0:e(c)))},[t,e]);return y.useEffect(()=>{if(!t||t===""){r([]),i.current=!1;return}i.current||s(),o.current&&(o.current.unsubscribe(),o.current=null);const a=Xo.channel(`notes_list_${t}`).on("postgres_changes",{event:"*",schema:"public",table:"notes",filter:`visit_id=eq.${t}`},l=>{switch(Iu("Received realtime event:",l.eventType,l),l.eventType){case qn.INSERT:{const c=l.new;r(u=>{if(u.some(f=>f.id===c.id))return u;const d=[...u,c].sort((f,h)=>new Date(f.created_at).getTime()-new Date(h.created_at).getTime());return e==null||e(c),d});break}case qn.UPDATE:{const c=l.new;r(u=>{const d=u.map(f=>f.id===c.id?c:f);return JSON.stringify(d)===JSON.stringify(u)?u:(e==null||e(c),d)});break}case qn.DELETE:{const c=l.old;r(u=>{const d=u.filter(f=>f.id!==c.id);return d.length,u.length,d});break}default:Iu("Unhandled event type:",l.eventType);break}}).subscribe(l=>{});return o.current=a,()=>{a.unsubscribe(),o.current=null}},[t,s,e]),y.useEffect(()=>{Iu("Notes state updated:",n.length,"notes")},[n]),n}const ei={container:{display:"flex",gap:"24px",height:"100%"},transcriptPanel:{flex:1,display:"flex",flexDirection:"column",backgroundColor:"white",borderRadius:"6px",border:"1px solid #e5e7eb",padding:"16px",overflow:"auto"},contextPanel:{flex:1,display:"flex",flexDirection:"column",backgroundColor:"white",borderRadius:"6px",border:"1px solid #e5e7eb",padding:"16px",overflow:"auto"},text:{fontSize:"16px",color:"#374151",lineHeight:"1.5",whiteSpace:"pre-wrap",margin:0},contentContainer:{display:"flex",flexDirection:"column",height:"100%"},contextTitle:{fontSize:"18px",fontWeight:600,color:"#111827",marginBottom:"12px"},contextContent:{fontSize:"16px",lineHeight:"1.5",color:"#374151",whiteSpace:"pre-wrap",flex:1}};function ZN({transcription:t="",placeholder:e="Your transcription will appear here as you speak...",isTranscribing:n,visit:r}){const[i,o]=y.useState(""),s=y.useRef([]),a=y.useRef(null),l=y.useRef(0),c=y.useRef(t),d=XN({visitId:(r==null?void 0:r.id)||"",onMessage:y.useCallback(x=>{console.log("[LiveTranscriptionDisplay] Received context note update:",x)},[])}).filter(x=>x.type==="ai_context").sort((x,v)=>new Date(v.created_at).getTime()-new Date(x.created_at).getTime())[0],f=y.useCallback(()=>{a.current&&(window.clearTimeout(a.current),a.current=null)},[]);y.useEffect(()=>{o(""),s.current=[],l.current=0,c.current="",f()},[r==null?void 0:r.id,f]);const h=y.useCallback((x,v)=>{const w=100+Math.random()*100,S=Math.min(x.length*10,100),b=/[,.!?]$/.test(x)?200:0,C=Math.max(.7,1-v/200);return(w+S+b)*C},[]),p=y.useCallback(()=>{const x=s.current;if(x.length>0){const v=x[0];if(s.current=x.slice(1),l.current+=1,o(w=>{const S=w.length>0&&!/[\s\u4e00-\u9fff]$/.test(w)&&!/^[\u4e00-\u9fff]/.test(v);return w+(S?" ":"")+v}),s.current.length>0){const w=h(v,l.current);f(),a.current=window.setTimeout(p,w)}else f()}},[h,f]),g=y.useCallback(x=>{const w=x.replace(/([a-zA-Z0-9])([\s]+)([a-zA-Z0-9])/g,"$1$3").split(/\s+/).filter(Boolean),S=[];return w.forEach(b=>{const C=b.split(new RegExp("(?<=[\\u4e00-\\u9fff])|(?=[\\u4e00-\\u9fff])")).filter(Boolean).map(k=>k.replace(/\u200B/g," "));S.push(...C)}),S},[]);return y.useEffect(()=>{if(!n){o(t),f();return}if(t===c.current)return;if(c.current=t,!t){console.log("[LiveTranscriptionDisplay] Resetting display - no transcription"),o(""),s.current=[],l.current=0,f();return}const x=g(t);if(x.length<l.current){console.log("[LiveTranscriptionDisplay] Reset detected"),f(),o(t),s.current=[],l.current=x.length;return}if(x.length>l.current){console.log("[LiveTranscriptionDisplay] New words detected:",{newWordsCount:x.length-l.current});const v=x.slice(l.current);s.current=v,a.current||p()}},[t,n,f,g,p]),y.useEffect(()=>()=>{f()},[f]),m.jsxs("div",{style:ei.container,children:[m.jsxs("div",{style:ei.transcriptPanel,children:[m.jsx("div",{style:ei.contextTitle,children:"Transcript"}),m.jsx("div",{style:ei.contentContainer,children:m.jsx("p",{style:ei.text,children:i||t||e})})]}),m.jsxs("div",{style:ei.contextPanel,children:[m.jsx("div",{style:ei.contextTitle,children:"Context"}),m.jsx("div",{style:ei.contextContent,children:(d==null?void 0:d.content)||"No context available yet..."})]})]})}const wt={modalOverlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},modalContent:{backgroundColor:"white",padding:"24px",borderRadius:"8px",width:"90%",maxWidth:"600px",maxHeight:"80vh",display:"flex",flexDirection:"column"},header:{marginBottom:"16px"},title:{fontSize:"18px",fontWeight:"600",color:"#111827",marginBottom:"8px"},description:{fontSize:"14px",color:"#6b7280"},templateList:{overflowY:"auto",flex:1,marginBottom:"16px",padding:"8px 0"},templateItem:{padding:"12px 16px",borderRadius:"6px",cursor:"pointer",transition:"all 0.2s ease",marginBottom:"8px",border:"1px solid #e5e7eb",minHeight:"48px",display:"flex","&:hover":{backgroundColor:"#f3f4f6"}},templateName:{fontSize:"16px",fontWeight:"500",color:"#111827",marginBottom:"4px"},templateDescription:{fontSize:"14px",color:"#6b7280"},footer:{display:"flex",justifyContent:"flex-end",gap:"8px",borderTop:"1px solid #e5e7eb",paddingTop:"16px"},button:{padding:"8px 16px",borderRadius:"6px",border:"none",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"all 0.2s ease"},cancelButton:{backgroundColor:"#f3f4f6",color:"#374151","&:hover":{backgroundColor:"#e5e7eb"}},generateButton:{backgroundColor:"#3b82f6",color:"white","&:hover":{backgroundColor:"#2563eb"}},disabledButton:{opacity:.5,cursor:"not-allowed","&:hover":{backgroundColor:"#3b82f6"}}};function e2({isOpen:t,onClose:e,onGenerate:n,existingTemplateIds:r=[]}){const[i,o]=y.useState([]),[s,a]=y.useState(null),[l,c]=y.useState(!0),u=He();return y.useEffect(()=>{t&&(async()=>{try{const{data:f,error:h}=await u.from("template_library").select("*").order("name");if(h)throw h;const p=(f==null?void 0:f.filter(g=>!r.includes(g.id)))||[];console.log("Available templates:",p),o(p)}catch(f){console.error("Error fetching templates:",f)}finally{c(!1)}})()},[t,u,r]),t?m.jsx("div",{style:wt.modalOverlay,onClick:e,children:m.jsxs("div",{style:wt.modalContent,onClick:d=>d.stopPropagation(),children:[m.jsxs("div",{style:wt.header,children:[m.jsx("h2",{style:wt.title,children:"Select Template"}),m.jsx("p",{style:wt.description,children:"Choose a template to generate a new note"})]}),m.jsx("div",{style:wt.templateList,children:l?m.jsx("div",{children:"Loading templates..."}):i.length===0?m.jsx("div",{children:"No templates available"}):i.map(d=>m.jsxs("div",{style:{...wt.templateItem,...(s==null?void 0:s.id)===d.id?{backgroundColor:"#f3f4f6",borderColor:"#3b82f6"}:{}},onClick:()=>a(d),children:[m.jsx("div",{style:wt.templateName,children:d.name}),d.description&&m.jsx("div",{style:wt.templateDescription,children:d.description})]},d.id))}),m.jsxs("div",{style:wt.footer,children:[m.jsx("button",{style:{...wt.button,...wt.cancelButton},onClick:e,children:"Cancel"}),m.jsx("button",{style:{...wt.button,...wt.generateButton,...!s||l?wt.disabledButton:{}},onClick:()=>s&&n(s),disabled:!s||l,children:"Generate Note"})]})]})}):null}function nt(t){this.content=t}nt.prototype={constructor:nt,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),o=r.content.slice();return i==-1?o.push(n||t,e):(o[i+1]=e,n&&(o[i]=n)),new nt(o)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new nt(n)},addToStart:function(t,e){return new nt([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new nt(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),o=r.find(t);return i.splice(o==-1?i.length:o,0,e,n),new nt(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=nt.from(t),t.size?new nt(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=nt.from(t),t.size?new nt(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=nt.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};nt.from=function(t){if(t instanceof nt)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new nt(e)};function Wk(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),o=e.child(r);if(i==o){n+=i.nodeSize;continue}if(!i.sameMarkup(o))return n;if(i.isText&&i.text!=o.text){for(let s=0;i.text[s]==o.text[s];s++)n++;return n}if(i.content.size||o.content.size){let s=Wk(i.content,o.content,n+1);if(s!=null)return s}n+=i.nodeSize}}function Kk(t,e,n,r){for(let i=t.childCount,o=e.childCount;;){if(i==0||o==0)return i==o?null:{a:n,b:r};let s=t.child(--i),a=e.child(--o),l=s.nodeSize;if(s==a){n-=l,r-=l;continue}if(!s.sameMarkup(a))return{a:n,b:r};if(s.isText&&s.text!=a.text){let c=0,u=Math.min(s.text.length,a.text.length);for(;c<u&&s.text[s.text.length-c-1]==a.text[a.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(s.content.size||a.content.size){let c=Kk(s.content,a.content,n-1,r-1);if(c)return c}n-=l,r-=l}}class N{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,o){for(let s=0,a=0;a<n;s++){let l=this.content[s],c=a+l.nodeSize;if(c>e&&r(l,i+a,o||null,s)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,n-u),r,i+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let o="",s=!0;return this.nodesBetween(e,n,(a,l)=>{let c=a.isText?a.text.slice(Math.max(e,l)-l,n-l):a.isLeaf?i?typeof i=="function"?i(a):i:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&r&&(s?s=!1:o+=r),o+=c},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),o=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),o=1);o<e.content.length;o++)i.push(e.content[o]);return new N(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let o=0,s=0;s<n;o++){let a=this.content[o],l=s+a.nodeSize;l>e&&((s<e||l>n)&&(a.isText?a=a.cut(Math.max(0,e-s),Math.min(a.text.length,n-s)):a=a.cut(Math.max(0,e-s-1),Math.min(a.content.size,n-s-1))),r.push(a),i+=a.nodeSize),s=l}return new N(r,i)}cutByIndex(e,n){return e==n?N.empty:e==0&&n==this.content.length?this:new N(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),o=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new N(i,o)}addToStart(e){return new N([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new N(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return Wk(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return Kk(this,e,n,r)}findIndex(e,n=-1){if(e==0)return Nu(0,e);if(e==this.size)return Nu(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let o=this.child(r),s=i+o.nodeSize;if(s>=e)return s==e||n>0?Nu(r+1,s):Nu(r,i);i=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return N.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new N(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return N.empty;let n,r=0;for(let i=0;i<e.length;i++){let o=e[i];r+=o.nodeSize,i&&o.isText&&e[i-1].sameMarkup(o)?(n||(n=e.slice(0,i)),n[n.length-1]=o.withText(n[n.length-1].text+o.text)):n&&n.push(o)}return new N(n||e,r)}static from(e){if(!e)return N.empty;if(e instanceof N)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new N([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}N.empty=new N([],0);const fp={index:0,offset:0};function Nu(t,e){return fp.index=t,fp.offset=e,fp}function Yd(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!Yd(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!Yd(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let ge=class xg{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let o=e[i];if(this.eq(o))return e;if(this.type.excludes(o.type))n||(n=e.slice(0,i));else{if(o.type.excludes(this.type))return e;!r&&o.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(o)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Yd(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return xg.none;if(e instanceof xg)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};ge.none=[];class Qd extends Error{}class V{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=Gk(this.content,e+this.openStart,n);return r&&new V(r,this.openStart,this.openEnd)}removeBetween(e,n){return new V(qk(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return V.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new V(N.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let o=e.firstChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=e.lastChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.lastChild)i++;return new V(e,r,i)}}V.empty=new V(N.empty,0,0);function qk(t,e,n){let{index:r,offset:i}=t.findIndex(e),o=t.maybeChild(r),{index:s,offset:a}=t.findIndex(n);if(i==e||o.isText){if(a!=n&&!t.child(s).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=s)throw new RangeError("Removing non-flat range");return t.replaceChild(r,o.copy(qk(o.content,e-i-1,n-i-1)))}function Gk(t,e,n,r){let{index:i,offset:o}=t.findIndex(e),s=t.maybeChild(i);if(o==e||s.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));let a=Gk(s.content,e-o-1,n);return a&&t.replaceChild(i,s.copy(a))}function t2(t,e,n){if(n.openStart>t.depth)throw new Qd("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new Qd("Inconsistent open depths");return Jk(t,e,n,0)}function Jk(t,e,n,r){let i=t.index(r),o=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let s=Jk(t,e,n,r+1);return o.copy(o.content.replaceChild(i,s))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let s=t.parent,a=s.content;return Fo(s,a.cut(0,t.parentOffset).append(n.content).append(a.cut(e.parentOffset)))}else{let{start:s,end:a}=n2(n,t);return Fo(o,Qk(t,s,a,e,r))}else return Fo(o,Xd(t,e,r))}function Yk(t,e){if(!e.type.compatibleContent(t.type))throw new Qd("Cannot join "+e.type.name+" onto "+t.type.name)}function wg(t,e,n){let r=t.node(n);return Yk(r,e.node(n)),r}function $o(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function Ll(t,e,n,r){let i=(e||t).node(n),o=0,s=e?e.index(n):i.childCount;t&&(o=t.index(n),t.depth>n?o++:t.textOffset&&($o(t.nodeAfter,r),o++));for(let a=o;a<s;a++)$o(i.child(a),r);e&&e.depth==n&&e.textOffset&&$o(e.nodeBefore,r)}function Fo(t,e){return t.type.checkContent(e),t.copy(e)}function Qk(t,e,n,r,i){let o=t.depth>i&&wg(t,e,i+1),s=r.depth>i&&wg(n,r,i+1),a=[];return Ll(null,t,i,a),o&&s&&e.index(i)==n.index(i)?(Yk(o,s),$o(Fo(o,Qk(t,e,n,r,i+1)),a)):(o&&$o(Fo(o,Xd(t,e,i+1)),a),Ll(e,n,i,a),s&&$o(Fo(s,Xd(n,r,i+1)),a)),Ll(r,null,i,a),new N(a)}function Xd(t,e,n){let r=[];if(Ll(null,t,n,r),t.depth>n){let i=wg(t,e,n+1);$o(Fo(i,Xd(t,e,n+1)),r)}return Ll(e,null,n,r),new N(r)}function n2(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let o=n-1;o>=0;o--)i=e.node(o).copy(N.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class dc{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let o=0;o<e;o++)i+=r.child(o).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return ge.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let a=r;r=i,i=a}let o=r.marks;for(var s=0;s<o.length;s++)o[s].type.spec.inclusive===!1&&(!i||!o[s].isInSet(i.marks))&&(o=o[s--].removeFromSet(o));return o}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!i||!r[o].isInSet(i.marks))&&(r=r[o--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new Zd(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,o=n;for(let s=e;;){let{index:a,offset:l}=s.content.findIndex(o),c=o-l;if(r.push(s,a,i+l),!c||(s=s.child(a),s.isText))break;o=c-1,i+=l+1}return new dc(n,r,o)}static resolveCached(e,n){let r=pw.get(e);if(r)for(let o=0;o<r.elts.length;o++){let s=r.elts[o];if(s.pos==n)return s}else pw.set(e,r=new r2);let i=r.elts[r.i]=dc.resolve(e,n);return r.i=(r.i+1)%i2,i}}class r2{constructor(){this.elts=[],this.i=0}}const i2=12,pw=new WeakMap;class Zd{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const o2=Object.create(null);let Li=class bg{constructor(e,n,r,i=ge.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||N.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&Yd(this.attrs,n||e.defaultAttrs||o2)&&ge.sameSet(this.marks,r||ge.none)}copy(e=null){return e==this.content?this:new bg(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new bg(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return V.empty;let i=this.resolve(e),o=this.resolve(n),s=r?0:i.sharedDepth(n),a=i.start(s),c=i.node(s).content.cut(i.pos-a,o.pos-a);return new V(c,i.depth-s,o.depth-s)}replace(e,n,r){return t2(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return dc.resolveCached(this,e)}resolveNoCache(e){return dc.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,o=>(r.isInSet(o.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),Xk(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=N.empty,i=0,o=r.childCount){let s=this.contentMatchAt(e).matchFragment(r,i,o),a=s&&s.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=i;l<o;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let o=this.contentMatchAt(e).matchType(r),s=o&&o.matchFragment(this.content,n);return s?s.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=ge.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!ge.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=N.fromJSON(e,n.content),o=e.nodeType(n.type).create(n.attrs,i,r);return o.type.checkAttrs(o.attrs),o}};Li.prototype.text=void 0;class ef extends Li{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Xk(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new ef(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new ef(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function Xk(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class Zo{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new s2(e,n);if(r.next==null)return Zo.empty;let i=Zk(r);r.next&&r.err("Unexpected trailing text");let o=h2(f2(i));return p2(o,r),o}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let o=n;i&&o<r;o++)i=i.matchType(e.child(o).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function o(s,a){let l=s.matchFragment(e,r);if(l&&(!n||l.validEnd))return N.from(a.map(c=>c.createAndFill()));for(let c=0;c<s.next.length;c++){let{type:u,next:d}=s.next[c];if(!(u.isText||u.hasRequiredAttrs())&&i.indexOf(d)==-1){i.push(d);let f=o(d,a.concat(u));if(f)return f}}return null}return o(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),o=i.match;if(o.matchType(e)){let s=[];for(let a=i;a.type;a=a.via)s.push(a.type);return s.reverse()}for(let s=0;s<o.next.length;s++){let{type:a,next:l}=o.next[s];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!i.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:i}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let o=i+(r.validEnd?"*":" ")+" ";for(let s=0;s<r.next.length;s++)o+=(s?", ":"")+r.next[s].type.name+"->"+e.indexOf(r.next[s].next);return o}).join(`
`)}}Zo.empty=new Zo(!0);class s2{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function Zk(t){let e=[];do e.push(a2(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function a2(t){let e=[];do e.push(l2(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function l2(t){let e=d2(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=c2(t,e);else break;return e}function mw(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function c2(t,e){let n=mw(t),r=n;return t.eat(",")&&(t.next!="}"?r=mw(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function u2(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let o in n){let s=n[o];s.isInGroup(e)&&i.push(s)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function d2(t){if(t.eat("(")){let e=Zk(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=u2(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function f2(t){let e=[[]];return i(o(t,0),n()),e;function n(){return e.push([])-1}function r(s,a,l){let c={term:l,to:a};return e[s].push(c),c}function i(s,a){s.forEach(l=>l.to=a)}function o(s,a){if(s.type=="choice")return s.exprs.reduce((l,c)=>l.concat(o(c,a)),[]);if(s.type=="seq")for(let l=0;;l++){let c=o(s.exprs[l],a);if(l==s.exprs.length-1)return c;i(c,a=n())}else if(s.type=="star"){let l=n();return r(a,l),i(o(s.expr,l),l),[r(l)]}else if(s.type=="plus"){let l=n();return i(o(s.expr,a),l),i(o(s.expr,l),l),[r(l)]}else{if(s.type=="opt")return[r(a)].concat(o(s.expr,a));if(s.type=="range"){let l=a;for(let c=0;c<s.min;c++){let u=n();i(o(s.expr,l),u),l=u}if(s.max==-1)i(o(s.expr,l),l);else for(let c=s.min;c<s.max;c++){let u=n();r(l,u),i(o(s.expr,l),u),l=u}return[r(l)]}else{if(s.type=="name")return[r(a,void 0,s.value)];throw new Error("Unknown expr type")}}}}function eE(t,e){return e-t}function gw(t,e){let n=[];return r(e),n.sort(eE);function r(i){let o=t[i];if(o.length==1&&!o[0].term)return r(o[0].to);n.push(i);for(let s=0;s<o.length;s++){let{term:a,to:l}=o[s];!a&&n.indexOf(l)==-1&&r(l)}}}function h2(t){let e=Object.create(null);return n(gw(t,0));function n(r){let i=[];r.forEach(s=>{t[s].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let u=0;u<i.length;u++)i[u][0]==a&&(c=i[u][1]);gw(t,l).forEach(u=>{c||i.push([a,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let o=e[r.join(",")]=new Zo(r.indexOf(t.length-1)>-1);for(let s=0;s<i.length;s++){let a=i[s][1].sort(eE);o.next.push({type:i[s][0],next:e[a.join(",")]||n(a)})}return o}}function p2(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],o=!i.validEnd,s=[];for(let a=0;a<i.next.length;a++){let{type:l,next:c}=i.next[a];s.push(l.name),o&&!(l.isText||l.hasRequiredAttrs())&&(o=!1),r.indexOf(c)==-1&&r.push(c)}o&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function tE(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function nE(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let o=t[r];if(o.hasDefault)i=o.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function rE(t,e,n,r){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in t){let o=t[i];o.validate&&o.validate(e[i])}}function iE(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new g2(t,r,e[r]);return n}let yw=class oE{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=iE(e,r.attrs),this.defaultAttrs=tE(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Zo.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:nE(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Li(this,this.computeAttrs(e),N.from(n),ge.setFrom(r))}createChecked(e=null,n,r){return n=N.from(n),this.checkContent(n),new Li(this,this.computeAttrs(e),n,ge.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=N.from(n),n.size){let s=this.contentMatch.fillBefore(n);if(!s)return null;n=s.append(n)}let i=this.contentMatch.matchFragment(n),o=i&&i.fillBefore(N.empty,!0);return o?new Li(this,e,n.append(o),ge.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){rE(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:ge.none:e}static compile(e,n){let r=Object.create(null);e.forEach((o,s)=>r[o]=new oE(o,n,s));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function m2(t,e,n){let r=n.split("|");return i=>{let o=i===null?"null":typeof i;if(r.indexOf(o)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${o}`)}}class g2{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?m2(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class Gf{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=iE(e,i.attrs),this.excluded=null;let o=tE(this.attrs);this.instance=o?new ge(this,o):null}create(e=null){return!e&&this.instance?this.instance:new ge(this,nE(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((o,s)=>r[o]=new Gf(o,i++,n,s)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){rE(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class sE{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=nt.from(e.nodes),n.marks=nt.from(e.marks||{}),this.nodes=yw.compile(this.spec.nodes,this),this.marks=Gf.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let o=this.nodes[i],s=o.spec.content||"",a=o.spec.marks;if(o.contentMatch=r[s]||(r[s]=Zo.parse(s,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=a=="_"?null:a?vw(this,a.split(" ")):a==""||!o.inlineContent?[]:null}for(let i in this.marks){let o=this.marks[i],s=o.spec.excludes;o.excluded=s==null?[o]:s==""?[]:vw(this,s.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof yw){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new ef(r,r.defaultAttrs,e,ge.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeFromJSON(e){return Li.fromJSON(this,e)}markFromJSON(e){return ge.fromJSON(this,e)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function vw(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],o=t.marks[i],s=o;if(o)n.push(o);else for(let a in t.marks){let l=t.marks[a];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&n.push(s=l)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function y2(t){return t.tag!=null}function v2(t){return t.style!=null}class $i{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(y2(i))this.tags.push(i);else if(v2(i)){let o=/[^=]*/.exec(i.style)[0];r.indexOf(o)<0&&r.push(o),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let o=e.nodes[i.node];return o.contentMatch.matchType(o)})}parse(e,n={}){let r=new ww(this,n,!1);return r.addAll(e,ge.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new ww(this,n,!0);return r.addAll(e,ge.none,n.from,n.to),V.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let o=this.tags[i];if(b2(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||n.matchesContext(o.context))){if(o.getAttrs){let s=o.getAttrs(e);if(s===!1)continue;o.attrs=s||void 0}return o}}}matchStyle(e,n,r,i){for(let o=i?this.styles.indexOf(i)+1:0;o<this.styles.length;o++){let s=this.styles[o],a=s.style;if(!(a.indexOf(e)!=0||s.context&&!r.matchesContext(s.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=n))){if(s.getAttrs){let l=s.getAttrs(n);if(l===!1)continue;s.attrs=l||void 0}return s}}}static schemaRules(e){let n=[];function r(i){let o=i.priority==null?50:i.priority,s=0;for(;s<n.length;s++){let a=n[s];if((a.priority==null?50:a.priority)<o)break}n.splice(s,0,i)}for(let i in e.marks){let o=e.marks[i].spec.parseDOM;o&&o.forEach(s=>{r(s=bw(s)),s.mark||s.ignore||s.clearMark||(s.mark=i)})}for(let i in e.nodes){let o=e.nodes[i].spec.parseDOM;o&&o.forEach(s=>{r(s=bw(s)),s.node||s.ignore||s.mark||(s.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new $i(e,$i.schemaRules(e)))}}const aE={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},x2={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},lE={ol:!0,ul:!0},fc=1,Sg=2,$l=4;function xw(t,e,n){return e!=null?(e?fc:0)|(e==="full"?Sg:0):t&&t.whitespace=="pre"?fc|Sg:n&~$l}class ju{constructor(e,n,r,i,o,s){this.type=e,this.attrs=n,this.marks=r,this.solid=i,this.options=s,this.content=[],this.activeMarks=ge.none,this.match=o||(s&$l?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(N.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&fc)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let o=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-i[0].length))}}let n=N.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(N.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!aE.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class ww{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,o,s=xw(null,n.preserveWhitespace,0)|(r?$l:0);i?o=new ju(i.type,i.attrs,ge.none,!0,n.topMatch||i.type.contentMatch,s):r?o=new ju(null,null,ge.none,!0,null,s):o=new ju(e.schema.topNodeType,null,ge.none,!0,null,s),this.nodes=[o],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,i=this.top,o=i.options&Sg?"full":this.localPreserveWS||(i.options&fc)>0;if(o==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(o)o!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let s=i.content[i.content.length-1],a=e.previousSibling;(!s||a&&a.nodeName=="BR"||s.isText&&/[ \t\r\n\u000c]$/.test(s.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let i=this.localPreserveWS,o=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let s=e.nodeName.toLowerCase(),a;lE.hasOwnProperty(s)&&this.parser.normalizeLists&&w2(e);let l=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,r));e:if(l?l.ignore:x2.hasOwnProperty(s))this.findInside(e),this.ignoreFallback(e,n);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(e=l.skip);let c,u=this.needsBlock;if(aE.hasOwnProperty(s))o.content.length&&o.content[0].isInline&&this.open&&(this.open--,o=this.top),c=!0,o.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let d=l&&l.skip?n:this.readStyles(e,n);d&&this.addAll(e,d),c&&this.sync(o),this.needsBlock=u}else{let c=this.readStyles(e,n);c&&this.addElementByRule(e,l,c,l.consuming===!1?a:void 0)}this.localPreserveWS=i}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let o=this.parser.matchedStyles[i],s=r.getPropertyValue(o);if(s)for(let a=void 0;;){let l=this.parser.matchStyle(o,s,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?n=n.filter(c=>!l.clearMark(c)):n=n.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return n}addElementByRule(e,n,r,i){let o,s;if(n.node)if(s=this.parser.schema.nodes[n.node],s.isLeaf)this.insertNode(s.create(n.attrs),r)||this.leafFallback(e,r);else{let l=this.enter(s,n.attrs||null,r,n.preserveWhitespace);l&&(o=!0,r=l)}else{let l=this.parser.schema.marks[n.mark];r=r.concat(l.create(n.attrs))}let a=this.top;if(s&&s.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,r));else{let l=e;typeof n.contentElement=="string"?l=e.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(e):n.contentElement&&(l=n.contentElement),this.findAround(e,l,!0),this.addAll(l,r),this.findAround(e,l,!1)}o&&this.sync(a)&&this.open--}addAll(e,n,r,i){let o=r||0;for(let s=r?e.childNodes[r]:e.firstChild,a=i==null?null:e.childNodes[i];s!=a;s=s.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(s,n);this.findAtPoint(e,o)}findPlace(e,n){let r,i;for(let o=this.open;o>=0;o--){let s=this.nodes[o],a=s.findWrapping(e);if(a&&(!r||r.length>a.length)&&(r=a,i=s,!a.length)||s.solid)break}if(!r)return null;this.sync(i);for(let o=0;o<r.length;o++)n=this.enterInner(r[o],null,n,!1);return n}insertNode(e,n){if(e.isInline&&this.needsBlock&&!this.top.type){let i=this.textblockFromContext();i&&(n=this.enterInner(i,null,n))}let r=this.findPlace(e,n);if(r){this.closeExtra();let i=this.top;i.match&&(i.match=i.match.matchType(e.type));let o=ge.none;for(let s of r.concat(e.marks))(i.type?i.type.allowsMarkType(s.type):Sw(s.type,e.type))&&(o=s.addToSet(o));return i.content.push(e.mark(o)),!0}return!1}enter(e,n,r,i){let o=this.findPlace(e.create(n),r);return o&&(o=this.enterInner(e,n,r,!0,i)),o}enterInner(e,n,r,i=!1,o){this.closeExtra();let s=this.top;s.match=s.match&&s.match.matchType(e);let a=xw(e,o,s.options);s.options&$l&&s.content.length==0&&(a|=$l);let l=ge.none;return r=r.filter(c=>(s.type?s.type.allowsMarkType(c.type):Sw(c.type,e))?(l=c.addToSet(l),!1):!0),this.nodes.push(new ju(e,n,l,i,null,a)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=fc)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(i?0:1),s=(a,l)=>{for(;a>=0;a--){let c=n[a];if(c==""){if(a==n.length-1||a==0)continue;for(;l>=o;l--)if(s(a-1,l))return!0;return!1}else{let u=l>0||l==0&&i?this.nodes[l].type:r&&l>=o?r.node(l-o).type:null;if(!u||u.name!=c&&!u.isInGroup(c))return!1;l--}}return!0};return s(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function w2(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&lE.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function b2(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function bw(t){let e={};for(let n in t)e[n]=t[n];return e}function Sw(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let o=[],s=a=>{o.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||o.indexOf(u)<0&&s(u))return!0}};if(s(i.contentMatch))return!0}}class us{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=hp(n).createDocumentFragment());let i=r,o=[];return e.forEach(s=>{if(o.length||s.marks.length){let a=0,l=0;for(;a<o.length&&l<s.marks.length;){let c=s.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(o[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<o.length;)i=o.pop()[1];for(;l<s.marks.length;){let c=s.marks[l++],u=this.serializeMark(c,s.isInline,n);u&&(o.push([c,i]),i.appendChild(u.dom),i=u.contentDOM||u.dom)}}i.appendChild(this.serializeNodeInner(s,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=pd(hp(n),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let o=this.serializeMark(e.marks[i],e.isInline,n);o&&((o.contentDOM||o.dom).appendChild(r),r=o.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&pd(hp(r),i(e,n),null,e.attrs)}static renderSpec(e,n,r=null,i){return pd(e,n,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new us(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=Cw(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return Cw(e.marks)}}function Cw(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function hp(t){return t.document||window.document}const kw=new WeakMap;function S2(t){let e=kw.get(t);return e===void 0&&kw.set(t,e=C2(t)),e}function C2(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(t),e}function pd(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],o;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(o=S2(r))&&o.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let s=i.indexOf(" ");s>0&&(n=i.slice(0,s),i=i.slice(s+1));let a,l=n?t.createElementNS(n,i):t.createElement(i),c=e[1],u=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){u=2;for(let d in c)if(c[d]!=null){let f=d.indexOf(" ");f>0?l.setAttributeNS(d.slice(0,f),d.slice(f+1),c[d]):l.setAttribute(d,c[d])}}for(let d=u;d<e.length;d++){let f=e[d];if(f===0){if(d<e.length-1||d>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:h,contentDOM:p}=pd(t,f,n,r);if(l.appendChild(h),p){if(a)throw new RangeError("Multiple content holes");a=p}}}return{dom:l,contentDOM:a}}const cE=65535,uE=Math.pow(2,16);function k2(t,e){return t+e*uE}function Ew(t){return t&cE}function E2(t){return(t-(t&cE))/uE}const dE=1,fE=2,md=4,hE=8;class Cg{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&hE)>0}get deletedBefore(){return(this.delInfo&(dE|md))>0}get deletedAfter(){return(this.delInfo&(fE|md))>0}get deletedAcross(){return(this.delInfo&md)>0}}class nn{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&nn.empty)return nn.empty}recover(e){let n=0,r=Ew(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+E2(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,o=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>e)break;let c=this.ranges[a+o],u=this.ranges[a+s],d=l+c;if(e<=d){let f=c?e==l?-1:e==d?1:n:n,h=l+i+(f<0?0:u);if(r)return h;let p=e==(n<0?l:d)?null:k2(a/3,e-l),g=e==l?fE:e==d?dE:md;return(n<0?e!=l:e!=d)&&(g|=hE),new Cg(h,g,p)}i+=u-c}return r?e+i:new Cg(e+i,0,null)}touches(e,n){let r=0,i=Ew(n),o=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let c=this.ranges[a+o],u=l+c;if(e<=u&&a==i*3)return!0;r+=this.ranges[a+s]-c}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,o=0;i<this.ranges.length;i+=3){let s=this.ranges[i],a=s-(this.inverted?o:0),l=s+(this.inverted?0:o),c=this.ranges[i+n],u=this.ranges[i+r];e(a,a+c,l,l+u),o+=u-c}}invert(){return new nn(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?nn.empty:new nn(e<0?[0,-e,0]:[0,0,e])}}nn.empty=new nn([]);class hc{constructor(e,n,r=0,i=e?e.length:0){this.mirror=n,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new hc(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let i=e.getMirror(n);this.appendMap(e._maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e._maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new hc;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let o=this.from;o<this.to;o++){let s=this._maps[o],a=s.mapResult(e,n);if(a.recover!=null){let l=this.getMirror(o);if(l!=null&&l>o&&l<this.to){o=l,e=this._maps[l].recover(a.recover);continue}}i|=a.delInfo,e=a.pos}return r?e:new Cg(e,i,null)}}const pp=Object.create(null);class yt{getMap(){return nn.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=pp[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in pp)throw new RangeError("Duplicate use of step JSON ID "+e);return pp[e]=n,n.prototype.jsonID=e,n}}class Fe{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new Fe(e,null)}static fail(e){return new Fe(null,e)}static fromReplace(e,n,r,i){try{return Fe.ok(e.replace(n,r,i))}catch(o){if(o instanceof Qd)return Fe.fail(o.message);throw o}}}function wv(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let o=t.child(i);o.content.size&&(o=o.copy(wv(o.content,e,o))),o.isInline&&(o=e(o,n,i)),r.push(o)}return N.fromArray(r)}class Ti extends yt{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),o=new V(wv(n.content,(s,a)=>!s.isAtom||!a.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),i),n.openStart,n.openEnd);return Fe.fromReplace(e,this.from,this.to,o)}invert(){return new pr(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Ti(n.pos,r.pos,this.mark)}merge(e){return e instanceof Ti&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Ti(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Ti(n.from,n.to,e.markFromJSON(n.mark))}}yt.jsonID("addMark",Ti);class pr extends yt{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new V(wv(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return Fe.fromReplace(e,this.from,this.to,r)}invert(){return new Ti(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new pr(n.pos,r.pos,this.mark)}merge(e){return e instanceof pr&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new pr(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new pr(n.from,n.to,e.markFromJSON(n.mark))}}yt.jsonID("removeMark",pr);class _i extends yt{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Fe.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Fe.fromReplace(e,this.pos,this.pos+1,new V(N.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new _i(this.pos,n.marks[i]);return new _i(this.pos,this.mark)}}return new Pa(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new _i(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new _i(n.pos,e.markFromJSON(n.mark))}}yt.jsonID("addNodeMark",_i);class Pa extends yt{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Fe.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Fe.fromReplace(e,this.pos,this.pos+1,new V(N.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new _i(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Pa(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Pa(n.pos,e.markFromJSON(n.mark))}}yt.jsonID("removeNodeMark",Pa);class Ge extends yt{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&kg(e,this.from,this.to)?Fe.fail("Structure replace would overwrite content"):Fe.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new nn([this.from,this.to-this.from,this.slice.size])}invert(e){return new Ge(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new Ge(n.pos,Math.max(n.pos,r.pos),this.slice)}merge(e){if(!(e instanceof Ge)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?V.empty:new V(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Ge(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?V.empty:new V(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Ge(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Ge(n.from,n.to,V.fromJSON(e,n.slice),!!n.structure)}}yt.jsonID("replace",Ge);class Ye extends yt{constructor(e,n,r,i,o,s,a=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=s,this.structure=a}apply(e){if(this.structure&&(kg(e,this.from,this.gapFrom)||kg(e,this.gapTo,this.to)))return Fe.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Fe.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Fe.fromReplace(e,this.from,this.to,r):Fe.fail("Content does not fit in gap")}getMap(){return new nn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new Ye(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),o=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||o>r.pos?null:new Ye(n.pos,r.pos,i,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Ye(n.from,n.to,n.gapFrom,n.gapTo,V.fromJSON(e,n.slice),n.insert,!!n.structure)}}yt.jsonID("replaceAround",Ye);function kg(t,e,n){let r=t.resolve(e),i=n-e,o=r.depth;for(;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0){let s=r.node(o).maybeChild(r.indexAfter(o));for(;i>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,i--}}return!1}function T2(t,e,n,r){let i=[],o=[],s,a;t.doc.nodesBetween(e,n,(l,c,u)=>{if(!l.isInline)return;let d=l.marks;if(!r.isInSet(d)&&u.type.allowsMarkType(r.type)){let f=Math.max(c,e),h=Math.min(c+l.nodeSize,n),p=r.addToSet(d);for(let g=0;g<d.length;g++)d[g].isInSet(p)||(s&&s.to==f&&s.mark.eq(d[g])?s.to=h:i.push(s=new pr(f,h,d[g])));a&&a.to==f?a.to=h:o.push(a=new Ti(f,h,r))}}),i.forEach(l=>t.step(l)),o.forEach(l=>t.step(l))}function _2(t,e,n,r){let i=[],o=0;t.doc.nodesBetween(e,n,(s,a)=>{if(!s.isInline)return;o++;let l=null;if(r instanceof Gf){let c=s.marks,u;for(;u=r.isInSet(c);)(l||(l=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(s.marks)&&(l=[r]):l=s.marks;if(l&&l.length){let c=Math.min(a+s.nodeSize,n);for(let u=0;u<l.length;u++){let d=l[u],f;for(let h=0;h<i.length;h++){let p=i[h];p.step==o-1&&d.eq(i[h].style)&&(f=p)}f?(f.to=c,f.step=o):i.push({style:d,from:Math.max(a,e),to:c,step:o})}}}),i.forEach(s=>t.step(new pr(s.from,s.to,s.style)))}function bv(t,e,n,r=n.contentMatch,i=!0){let o=t.doc.nodeAt(e),s=[],a=e+1;for(let l=0;l<o.childCount;l++){let c=o.child(l),u=a+c.nodeSize,d=r.matchType(c.type);if(!d)s.push(new Ge(a,u,V.empty));else{r=d;for(let f=0;f<c.marks.length;f++)n.allowsMarkType(c.marks[f].type)||t.step(new pr(a,u,c.marks[f]));if(i&&c.isText&&n.whitespace!="pre"){let f,h=/\r?\n|\r/g,p;for(;f=h.exec(c.text);)p||(p=new V(N.from(n.schema.text(" ",n.allowedMarks(c.marks))),0,0)),s.push(new Ge(a+f.index,a+f.index+f[0].length,p))}}a=u}if(!r.validEnd){let l=r.fillBefore(N.empty,!0);t.replace(a,a,new V(l,0,0))}for(let l=s.length-1;l>=0;l--)t.step(s[l])}function R2(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function Qa(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let i=t.$from.node(r),o=t.$from.index(r),s=t.$to.indexAfter(r);if(r<t.depth&&i.canReplace(o,s,n))return r;if(r==0||i.type.spec.isolating||!R2(i,o,s))break}return null}function O2(t,e,n){let{$from:r,$to:i,depth:o}=e,s=r.before(o+1),a=i.after(o+1),l=s,c=a,u=N.empty,d=0;for(let p=o,g=!1;p>n;p--)g||r.index(p)>0?(g=!0,u=N.from(r.node(p).copy(u)),d++):l--;let f=N.empty,h=0;for(let p=o,g=!1;p>n;p--)g||i.after(p+1)<i.end(p)?(g=!0,f=N.from(i.node(p).copy(f)),h++):c++;t.step(new Ye(l,c,s,a,new V(u.append(f),d,h),u.size-d,!0))}function Sv(t,e,n=null,r=t){let i=P2(t,e),o=i&&M2(r,e);return o?i.map(Tw).concat({type:e,attrs:n}).concat(o.map(Tw)):null}function Tw(t){return{type:t,attrs:null}}function P2(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.contentMatchAt(r).findWrapping(e);if(!o)return null;let s=o.length?o[0]:e;return n.canReplaceWith(r,i,s)?o:null}function M2(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.child(r),s=e.contentMatch.findWrapping(o.type);if(!s)return null;let l=(s.length?s[s.length-1]:e).contentMatch;for(let c=r;l&&c<i;c++)l=l.matchType(n.child(c).type);return!l||!l.validEnd?null:s}function A2(t,e,n){let r=N.empty;for(let s=n.length-1;s>=0;s--){if(r.size){let a=n[s].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=N.from(n[s].type.create(n[s].attrs,r))}let i=e.start,o=e.end;t.step(new Ye(i,o,i,o,new V(r,0,0),n.length,!0))}function D2(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=t.steps.length;t.doc.nodesBetween(e,n,(s,a)=>{let l=typeof i=="function"?i(s):i;if(s.isTextblock&&!s.hasMarkup(r,l)&&I2(t.doc,t.mapping.slice(o).map(a),r)){let c=null;if(r.schema.linebreakReplacement){let h=r.whitespace=="pre",p=!!r.contentMatch.matchType(r.schema.linebreakReplacement);h&&!p?c=!1:!h&&p&&(c=!0)}c===!1&&mE(t,s,a,o),bv(t,t.mapping.slice(o).map(a,1),r,void 0,c===null);let u=t.mapping.slice(o),d=u.map(a,1),f=u.map(a+s.nodeSize,1);return t.step(new Ye(d,f,d+1,f-1,new V(N.from(r.create(l,null,s.marks)),0,0),1,!0)),c===!0&&pE(t,s,a,o),!1}})}function pE(t,e,n,r){e.forEach((i,o)=>{if(i.isText){let s,a=/\r?\n|\r/g;for(;s=a.exec(i.text);){let l=t.mapping.slice(r).map(n+1+o+s.index);t.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function mE(t,e,n,r){e.forEach((i,o)=>{if(i.type==i.type.schema.linebreakReplacement){let s=t.mapping.slice(r).map(n+1+o);t.replaceWith(s,s+1,e.type.schema.text(`
`))}})}function I2(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function N2(t,e,n,r,i){let o=t.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");n||(n=o.type);let s=n.create(r,null,i||o.marks);if(o.isLeaf)return t.replaceWith(e,e+o.nodeSize,s);if(!n.validContent(o.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new Ye(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new V(N.from(s),0,0),1,!0))}function ra(t,e,n=1,r){let i=t.resolve(e),o=i.depth-n,s=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!s.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,u=n-2;c>o;c--,u--){let d=i.node(c),f=i.index(c);if(d.type.spec.isolating)return!1;let h=d.content.cutByIndex(f,d.childCount),p=r&&r[u+1];p&&(h=h.replaceChild(0,p.type.create(p.attrs)));let g=r&&r[u]||d;if(!d.canReplace(f+1,d.childCount)||!g.type.validContent(h))return!1}let a=i.indexAfter(o),l=r&&r[0];return i.node(o).canReplaceWith(a,a,l?l.type:i.node(o+1).type)}function j2(t,e,n=1,r){let i=t.doc.resolve(e),o=N.empty,s=N.empty;for(let a=i.depth,l=i.depth-n,c=n-1;a>l;a--,c--){o=N.from(i.node(a).copy(o));let u=r&&r[c];s=N.from(u?u.type.create(u.attrs,s):i.node(a).copy(s))}t.step(new Ge(e,e,new V(o.append(s),n,n),!0))}function to(t,e){let n=t.resolve(e),r=n.index();return gE(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function L2(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let i=0;i<e.childCount;i++){let o=e.child(i),s=o.type==r?t.type.schema.nodes.text:o.type;if(n=n.matchType(s),!n||!t.type.allowsMarks(o.marks))return!1}return n.validEnd}function gE(t,e){return!!(t&&e&&!t.isLeaf&&L2(t,e))}function Jf(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let o,s,a=r.index(i);if(i==r.depth?(o=r.nodeBefore,s=r.nodeAfter):n>0?(o=r.node(i+1),a++,s=r.node(i).maybeChild(a)):(o=r.node(i).maybeChild(a-1),s=r.node(i+1)),o&&!o.isTextblock&&gE(o,s)&&r.node(i).canReplace(a,a+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function $2(t,e,n){let r=null,{linebreakReplacement:i}=t.doc.type.schema,o=t.doc.resolve(e-n),s=o.node().type;if(i&&s.inlineContent){let u=s.whitespace=="pre",d=!!s.contentMatch.matchType(i);u&&!d?r=!1:!u&&d&&(r=!0)}let a=t.steps.length;if(r===!1){let u=t.doc.resolve(e+n);mE(t,u.node(),u.before(),a)}s.inlineContent&&bv(t,e+n-1,s,o.node().contentMatchAt(o.index()),r==null);let l=t.mapping.slice(a),c=l.map(e-n);if(t.step(new Ge(c,l.map(e+n,-1),V.empty,!0)),r===!0){let u=t.doc.resolve(c);pE(t,u.node(),u.before(),t.steps.length)}return t}function F2(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let o=r.index(i);if(r.node(i).canReplaceWith(o,o,n))return r.before(i+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let o=r.indexAfter(i);if(r.node(i).canReplaceWith(o,o,n))return r.after(i+1);if(o<r.node(i).childCount)return null}return null}function yE(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let o=0;o<n.openStart;o++)i=i.firstChild.content;for(let o=1;o<=(n.openStart==0&&n.size?2:1);o++)for(let s=r.depth;s>=0;s--){let a=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,l=r.index(s)+(a>0?1:0),c=r.node(s),u=!1;if(o==1)u=c.canReplace(l,l,i);else{let d=c.contentMatchAt(l).findWrapping(i.firstChild.type);u=d&&c.canReplaceWith(l,l,d[0])}if(u)return a==0?r.pos:a<0?r.before(s+1):r.after(s+1)}return null}function Yf(t,e,n=e,r=V.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),o=t.resolve(n);return vE(i,o,r)?new Ge(e,n,r):new B2(i,o,r).fit()}function vE(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class B2{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=N.empty;for(let i=0;i<=e.depth;i++){let o=e.node(i);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=N.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let o=this.placed,s=r.depth,a=i.depth;for(;s&&a&&o.childCount==1;)o=o.firstChild.content,s--,a--;let l=new V(o,s,a);return e>-1?new Ye(r.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new Ge(r.pos,i.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let o=n.firstChild;if(n.childCount>1&&(i=0),o.type.spec.isolating&&i<=r){e=r;break}n=o.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,o=null;r?(o=mp(this.unplaced.content,r-1).firstChild,i=o.content):i=this.unplaced.content;let s=i.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],u,d=null;if(n==1&&(s?c.matchType(s.type)||(d=c.fillBefore(N.from(s),!1)):o&&l.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:a,parent:o,inject:d};if(n==2&&s&&(u=c.findWrapping(s.type)))return{sliceDepth:r,frontierDepth:a,parent:o,wrap:u};if(o&&c.matchType(o.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=mp(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new V(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=mp(e,n);if(i.childCount<=1&&n>0){let o=e.size-n<=n+i.size;this.unplaced=new V(Sl(e,n-1,1),n-1,o?n-1:r)}else this.unplaced=new V(Sl(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:o}){for(;this.depth>n;)this.closeFrontierNode();if(o)for(let g=0;g<o.length;g++)this.openFrontierNode(o[g]);let s=this.unplaced,a=r?r.content:s.content,l=s.openStart-e,c=0,u=[],{match:d,type:f}=this.frontier[n];if(i){for(let g=0;g<i.childCount;g++)u.push(i.child(g));d=d.matchFragment(i)}let h=a.size+e-(s.content.size-s.openEnd);for(;c<a.childCount;){let g=a.child(c),x=d.matchType(g.type);if(!x)break;c++,(c>1||l==0||g.content.size)&&(d=x,u.push(xE(g.mark(f.allowedMarks(g.marks)),c==1?l:0,c==a.childCount?h:-1)))}let p=c==a.childCount;p||(h=-1),this.placed=Cl(this.placed,n,N.from(u)),this.frontier[n].match=d,p&&h<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let g=0,x=a;g<h;g++){let v=x.lastChild;this.frontier.push({type:v.type,match:v.contentMatchAt(v.childCount)}),x=v.content}this.unplaced=p?e==0?V.empty:new V(Sl(s.content,e-1,1),e-1,h<0?s.openEnd:e-1):new V(Sl(s.content,e,c),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!gp(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],o=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),s=gp(e,n,i,r,o);if(s){for(let a=n-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],u=gp(e,a,c,l,!0);if(!u||u.childCount)continue e}return{depth:n,fit:s,move:o?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Cl(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),o=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,o)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=Cl(this.placed,this.depth,N.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(N.empty,!0);n.childCount&&(this.placed=Cl(this.placed,this.frontier.length,n))}}function Sl(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(Sl(t.firstChild.content,e-1,n)))}function Cl(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(Cl(t.lastChild.content,e-1,n)))}function mp(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function xE(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,xE(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(N.empty,!0)))),t.copy(r)}function gp(t,e,n,r,i){let o=t.node(e),s=i?t.indexAfter(e):t.index(e);if(s==o.childCount&&!n.compatibleContent(o.type))return null;let a=r.fillBefore(o.content,!0,s);return a&&!z2(n,o.content,s)?a:null}function z2(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function U2(t){return t.spec.defining||t.spec.definingForContent}function V2(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),o=t.doc.resolve(n);if(vE(i,o,r))return t.step(new Ge(e,n,r));let s=bE(i,t.doc.resolve(n));s[s.length-1]==0&&s.pop();let a=-(i.depth+1);s.unshift(a);for(let f=i.depth,h=i.pos-1;f>0;f--,h--){let p=i.node(f).type.spec;if(p.defining||p.definingAsContext||p.isolating)break;s.indexOf(f)>-1?a=f:i.before(f)==h&&s.splice(1,0,-f)}let l=s.indexOf(a),c=[],u=r.openStart;for(let f=r.content,h=0;;h++){let p=f.firstChild;if(c.push(p),h==r.openStart)break;f=p.content}for(let f=u-1;f>=0;f--){let h=c[f],p=U2(h.type);if(p&&!h.sameMarkup(i.node(Math.abs(a)-1)))u=f;else if(p||!h.type.isTextblock)break}for(let f=r.openStart;f>=0;f--){let h=(f+u+1)%(r.openStart+1),p=c[h];if(p)for(let g=0;g<s.length;g++){let x=s[(g+l)%s.length],v=!0;x<0&&(v=!1,x=-x);let w=i.node(x-1),S=i.index(x-1);if(w.canReplaceWith(S,S,p.type,p.marks))return t.replace(i.before(x),v?o.after(x):n,new V(wE(r.content,0,r.openStart,h),h,r.openEnd))}}let d=t.steps.length;for(let f=s.length-1;f>=0&&(t.replace(e,n,r),!(t.steps.length>d));f--){let h=s[f];h<0||(e=i.before(h),n=o.after(h))}}function wE(t,e,n,r,i){if(e<n){let o=t.firstChild;t=t.replaceChild(0,o.copy(wE(o.content,e+1,n,r,o)))}if(e>r){let o=i.contentMatchAt(0),s=o.fillBefore(t).append(t);t=s.append(o.matchFragment(s).fillBefore(N.empty,!0))}return t}function H2(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=F2(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new V(N.from(r),0,0))}function W2(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),o=bE(r,i);for(let s=0;s<o.length;s++){let a=o[s],l=s==o.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return t.delete(r.start(a),i.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),i.indexAfter(a-1))))return t.delete(r.before(a),i.after(a))}for(let s=1;s<=r.depth&&s<=i.depth;s++)if(e-r.start(s)==r.depth-s&&n>r.end(s)&&i.end(s)-n!=i.depth-s&&r.start(s-1)==i.start(s-1)&&r.node(s-1).canReplace(r.index(s-1),i.index(s-1)))return t.delete(r.before(s),n);t.delete(e,n)}function bE(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let o=t.start(i);if(o<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(o==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==o-1)&&n.push(i)}return n}class ia extends yt{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return Fe.fail("No node at attribute step's position");let r=Object.create(null);for(let o in n.attrs)r[o]=n.attrs[o];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return Fe.fromReplace(e,this.pos,this.pos+1,new V(N.from(i),0,n.isLeaf?0:1))}getMap(){return nn.empty}invert(e){return new ia(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new ia(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new ia(n.pos,n.attr,n.value)}}yt.jsonID("attr",ia);class pc extends yt{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return Fe.ok(r)}getMap(){return nn.empty}invert(e){return new pc(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new pc(n.attr,n.value)}}yt.jsonID("docAttr",pc);let Ma=class extends Error{};Ma=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};Ma.prototype=Object.create(Error.prototype);Ma.prototype.constructor=Ma;Ma.prototype.name="TransformError";class K2{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new hc}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new Ma(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=V.empty){let i=Yf(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new V(N.from(r),0,0))}delete(e,n){return this.replace(e,n,V.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return V2(this,e,n,r),this}replaceRangeWith(e,n,r){return H2(this,e,n,r),this}deleteRange(e,n){return W2(this,e,n),this}lift(e,n){return O2(this,e,n),this}join(e,n=1){return $2(this,e,n),this}wrap(e,n){return A2(this,e,n),this}setBlockType(e,n=e,r,i=null){return D2(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return N2(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new ia(e,n,r)),this}setDocAttribute(e,n){return this.step(new pc(e,n)),this}addNodeMark(e,n){return this.step(new _i(e,n)),this}removeNodeMark(e,n){if(!(n instanceof ge)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n=n.isInSet(r.marks),!n)return this}return this.step(new Pa(e,n)),this}split(e,n=1,r){return j2(this,e,n,r),this}addMark(e,n,r){return T2(this,e,n,r),this}removeMark(e,n,r){return _2(this,e,n,r),this}clearIncompatible(e,n,r){return bv(this,e,n,r),this}}const yp=Object.create(null);class re{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new q2(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=V.empty){let r=n.content.lastChild,i=null;for(let a=0;a<n.openEnd;a++)i=r,r=r.lastChild;let o=e.steps.length,s=this.ranges;for(let a=0;a<s.length;a++){let{$from:l,$to:c}=s[a],u=e.mapping.slice(o);e.replaceRange(u.map(l.pos),u.map(c.pos),a?V.empty:n),a==0&&Ow(e,o,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){let{$from:s,$to:a}=i[o],l=e.mapping.slice(r),c=l.map(s.pos),u=l.map(a.pos);o?e.deleteRange(c,u):(e.replaceRangeWith(c,u,n),Ow(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new ne(e):Ms(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let o=e.depth-1;o>=0;o--){let s=n<0?Ms(e.node(0),e.node(o),e.before(o+1),e.index(o),n,r):Ms(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,n,r);if(s)return s}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new Sn(e.node(0))}static atStart(e){return Ms(e,e,0,0,1)||new Sn(e)}static atEnd(e){return Ms(e,e,e.content.size,e.childCount,-1)||new Sn(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=yp[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in yp)throw new RangeError("Duplicate use of selection JSON ID "+e);return yp[e]=n,n.prototype.jsonID=e,n}getBookmark(){return ne.between(this.$anchor,this.$head).getBookmark()}}re.prototype.visible=!0;class q2{constructor(e,n){this.$from=e,this.$to=n}}let _w=!1;function Rw(t){!_w&&!t.parent.inlineContent&&(_w=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class ne extends re{constructor(e,n=e){Rw(e),Rw(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return re.near(r);let i=e.resolve(n.map(this.anchor));return new ne(i.parent.inlineContent?i:r,r)}replace(e,n=V.empty){if(super.replace(e,n),n==V.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof ne&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Qf(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new ne(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let o=re.findFrom(n,r,!0)||re.findFrom(n,-r,!0);if(o)n=o.$head;else return re.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(re.findFrom(e,-r,!0)||re.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new ne(e,n)}}re.jsonID("text",ne);class Qf{constructor(e,n){this.anchor=e,this.head=n}map(e){return new Qf(e.map(this.anchor),e.map(this.head))}resolve(e){return ne.between(e.resolve(this.anchor),e.resolve(this.head))}}class Q extends re{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),o=e.resolve(i);return r?re.near(o):new Q(o)}content(){return new V(N.from(this.node),0,0)}eq(e){return e instanceof Q&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Cv(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Q(e.resolve(n.anchor))}static create(e,n){return new Q(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Q.prototype.visible=!1;re.jsonID("node",Q);class Cv{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new Qf(r,r):new Cv(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&Q.isSelectable(r)?new Q(n):re.near(n)}}class Sn extends re{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=V.empty){if(n==V.empty){e.delete(0,e.doc.content.size);let r=re.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new Sn(e)}map(e){return new Sn(e)}eq(e){return e instanceof Sn}getBookmark(){return G2}}re.jsonID("all",Sn);const G2={map(){return this},resolve(t){return new Sn(t)}};function Ms(t,e,n,r,i,o=!1){if(e.inlineContent)return ne.create(t,n);for(let s=r-(i>0?0:1);i>0?s<e.childCount:s>=0;s+=i){let a=e.child(s);if(a.isAtom){if(!o&&Q.isSelectable(a))return Q.create(t,n-(i<0?a.nodeSize:0))}else{let l=Ms(t,a,n+i,i<0?a.childCount:0,i,o);if(l)return l}n+=a.nodeSize*i}return null}function Ow(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof Ge||i instanceof Ye))return;let o=t.mapping.maps[r],s;o.forEach((a,l,c,u)=>{s==null&&(s=u)}),t.setSelection(re.near(t.doc.resolve(s),n))}const Pw=1,Lu=2,Mw=4;class J2 extends K2{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Pw)&~Lu,this.storedMarks=null,this}get selectionSet(){return(this.updated&Pw)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Lu,this}ensureMarks(e){return ge.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Lu)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~Lu,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||ge.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!e)return this.deleteRange(n,r);let o=this.storedMarks;if(!o){let s=this.doc.resolve(n);o=r==n?s.marks():s.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,o)),this.selection.empty||this.setSelection(re.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=Mw,this}get scrolledIntoView(){return(this.updated&Mw)>0}}function Aw(t,e){return!e||!t?t:t.bind(e)}class kl{constructor(e,n,r){this.name=e,this.init=Aw(n.init,r),this.apply=Aw(n.apply,r)}}const Y2=[new kl("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new kl("selection",{init(t,e){return t.selection||re.atStart(e.doc)},apply(t){return t.selection}}),new kl("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new kl("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class vp{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Y2.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new kl(r.key,r.spec.state,r))})}}class qs{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let o=!1;for(let s=0;s<this.config.plugins.length;s++){let a=this.config.plugins[s];if(a.spec.appendTransaction){let l=i?i[s].n:0,c=i?i[s].state:this,u=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,c,r);if(u&&r.filterTransaction(u,s)){if(u.setMeta("appendedTransaction",e),!i){i=[];for(let d=0;d<this.config.plugins.length;d++)i.push(d<s?{state:r,n:n.length}:{state:this,n:0})}n.push(u),r=r.applyInner(u),o=!0}i&&(i[s]={state:r,n:n.length})}}if(!o)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new qs(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let o=r[i];n[o.name]=o.apply(e,this[o.name],this,n)}return n}get tr(){return new J2(this)}static create(e){let n=new vp(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new qs(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new vp(this.schema,e.plugins),r=n.fields,i=new qs(n);for(let o=0;o<r.length;o++){let s=r[o].name;i[s]=this.hasOwnProperty(s)?this[s]:r[o].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],o=i.spec.state;o&&o.toJSON&&(n[r]=o.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new vp(e.schema,e.plugins),o=new qs(i);return i.fields.forEach(s=>{if(s.name=="doc")o.doc=Li.fromJSON(e.schema,n.doc);else if(s.name=="selection")o.selection=re.fromJSON(o.doc,n.selection);else if(s.name=="storedMarks")n.storedMarks&&(o.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],c=l.spec.state;if(l.key==s.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){o[s.name]=c.fromJSON.call(l,e,n[a],o);return}}o[s.name]=s.init(e,o)}}),o}}function SE(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=SE(i,e,{})),n[r]=i}return n}class lt{constructor(e){this.spec=e,this.props={},e.props&&SE(e.props,this,this.props),this.key=e.key?e.key.key:CE("plugin")}getState(e){return e[this.key]}}const xp=Object.create(null);function CE(t){return t in xp?t+"$"+ ++xp[t]:(xp[t]=0,t+"$")}class dn{constructor(e="key"){this.key=CE(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const it=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Aa=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let Eg=null;const Ar=function(t,e,n){let r=Eg||(Eg=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},Q2=function(){Eg=null},es=function(t,e,n,r){return n&&(Dw(t,e,n,r,-1)||Dw(t,e,n,r,1))},X2=/^(img|br|input|textarea|hr)$/i;function Dw(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:xn(t))){let o=t.parentNode;if(!o||o.nodeType!=1||Jc(t)||X2.test(t.nodeName)||t.contentEditable=="false")return!1;e=it(t)+(i<0?0:1),t=o}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.contentEditable=="false")return!1;e=i<0?xn(t):0}else return!1}}function xn(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Z2(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=xn(t)}else if(t.parentNode&&!Jc(t))e=it(t),t=t.parentNode;else return null}}function ej(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!Jc(t))e=it(t)+1,t=t.parentNode;else return null}}function tj(t,e,n){for(let r=e==0,i=e==xn(t);r||i;){if(t==n)return!0;let o=it(t);if(t=t.parentNode,!t)return!1;r=r&&o==0,i=i&&o==xn(t)}}function Jc(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const Xf=function(t){return t.focusNode&&es(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function xo(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function nj(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function rj(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(xn(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(xn(r.startContainer),r.startOffset)}}}const xr=typeof navigator<"u"?navigator:null,Iw=typeof document<"u"?document:null,no=xr&&xr.userAgent||"",Tg=/Edge\/(\d+)/.exec(no),kE=/MSIE \d/.exec(no),_g=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(no),Gt=!!(kE||_g||Tg),Fi=kE?document.documentMode:_g?+_g[1]:Tg?+Tg[1]:0,Jn=!Gt&&/gecko\/(\d+)/i.test(no);Jn&&+(/Firefox\/(\d+)/.exec(no)||[0,0])[1];const Rg=!Gt&&/Chrome\/(\d+)/.exec(no),mt=!!Rg,EE=Rg?+Rg[1]:0,_t=!Gt&&!!xr&&/Apple Computer/.test(xr.vendor),Da=_t&&(/Mobile\/\w+/.test(no)||!!xr&&xr.maxTouchPoints>2),gn=Da||(xr?/Mac/.test(xr.platform):!1),ij=xr?/Win/.test(xr.platform):!1,$r=/Android \d/.test(no),Yc=!!Iw&&"webkitFontSmoothing"in Iw.documentElement.style,oj=Yc?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function sj(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Rr(t,e){return typeof t=="number"?t:t[e]}function aj(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function Nw(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,o=t.dom.ownerDocument;for(let s=n||t.dom;s;){if(s.nodeType!=1){s=Aa(s);continue}let a=s,l=a==o.body,c=l?sj(o):aj(a),u=0,d=0;if(e.top<c.top+Rr(r,"top")?d=-(c.top-e.top+Rr(i,"top")):e.bottom>c.bottom-Rr(r,"bottom")&&(d=e.bottom-e.top>c.bottom-c.top?e.top+Rr(i,"top")-c.top:e.bottom-c.bottom+Rr(i,"bottom")),e.left<c.left+Rr(r,"left")?u=-(c.left-e.left+Rr(i,"left")):e.right>c.right-Rr(r,"right")&&(u=e.right-c.right+Rr(i,"right")),u||d)if(l)o.defaultView.scrollBy(u,d);else{let h=a.scrollLeft,p=a.scrollTop;d&&(a.scrollTop+=d),u&&(a.scrollLeft+=u);let g=a.scrollLeft-h,x=a.scrollTop-p;e={left:e.left-g,top:e.top-x,right:e.right-g,bottom:e.bottom-x}}let f=l?"fixed":getComputedStyle(s).position;if(/^(fixed|sticky)$/.test(f))break;s=f=="absolute"?s.offsetParent:Aa(s)}}function lj(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let o=(e.left+e.right)/2,s=n+1;s<Math.min(innerHeight,e.bottom);s+=5){let a=t.root.elementFromPoint(o,s);if(!a||a==t.dom||!t.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=n-20){r=a,i=l.top;break}}return{refDOM:r,refTop:i,stack:TE(t.dom)}}function TE(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=Aa(r));return e}function cj({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;_E(n,r==0?0:r-e)}function _E(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:o}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=o&&(r.scrollLeft=o)}}let Ss=null;function uj(t){if(t.setActive)return t.setActive();if(Ss)return t.focus(Ss);let e=TE(t);t.focus(Ss==null?{get preventScroll(){return Ss={preventScroll:!0},!0}}:void 0),Ss||(Ss=!1,_E(e,0))}function RE(t,e){let n,r=2e8,i,o=0,s=e.top,a=e.top,l,c;for(let u=t.firstChild,d=0;u;u=u.nextSibling,d++){let f;if(u.nodeType==1)f=u.getClientRects();else if(u.nodeType==3)f=Ar(u).getClientRects();else continue;for(let h=0;h<f.length;h++){let p=f[h];if(p.top<=s&&p.bottom>=a){s=Math.max(p.bottom,s),a=Math.min(p.top,a);let g=p.left>e.left?p.left-e.left:p.right<e.left?e.left-p.right:0;if(g<r){n=u,r=g,i=g&&n.nodeType==3?{left:p.right<e.left?p.right:p.left,top:e.top}:e,u.nodeType==1&&g&&(o=d+(e.left>=(p.left+p.right)/2?1:0));continue}}else p.top>e.top&&!l&&p.left<=e.left&&p.right>=e.left&&(l=u,c={left:Math.max(p.left,Math.min(p.right,e.left)),top:p.top});!n&&(e.left>=p.right&&e.top>=p.top||e.left>=p.left&&e.top>=p.bottom)&&(o=d+1)}}return!n&&l&&(n=l,i=c,r=0),n&&n.nodeType==3?dj(n,i):!n||r&&n.nodeType==1?{node:t,offset:o}:RE(n,i)}function dj(t,e){let n=t.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(t,i+1),r.setStart(t,i);let o=si(r,1);if(o.top!=o.bottom&&kv(e,o))return{node:t,offset:i+(e.left>=(o.left+o.right)/2?1:0)}}return{node:t,offset:0}}function kv(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function fj(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function hj(t,e,n){let{node:r,offset:i}=RE(e,n),o=-1;if(r.nodeType==1&&!r.firstChild){let s=r.getBoundingClientRect();o=s.left!=s.right&&n.left>(s.left+s.right)/2?1:-1}return t.docView.posFromDOM(r,i,o)}function pj(t,e,n,r){let i=-1;for(let o=e,s=!1;o!=t.dom;){let a=t.docView.nearestDesc(o,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&(!s&&l.left>r.left||l.top>r.top?i=a.posBefore:(!s&&l.right<r.left||l.bottom<r.top)&&(i=a.posAfter),s=!0),!a.contentDOM&&i<0&&!a.node.isText))return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;o=a.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function OE(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),o=i;;){let s=t.childNodes[o];if(s.nodeType==1){let a=s.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(kv(e,c))return OE(s,e,c)}}if((o=(o+1)%r)==i)break}return t}function mj(t,e){let n=t.dom.ownerDocument,r,i=0,o=rj(n,e.left,e.top);o&&({node:r,offset:i}=o);let s=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),a;if(!s||!t.dom.contains(s.nodeType!=1?s.parentNode:s)){let c=t.dom.getBoundingClientRect();if(!kv(e,c)||(s=OE(t.dom,e,c),!s))return null}if(_t)for(let c=s;r&&c;c=Aa(c))c.draggable&&(r=void 0);if(s=fj(s,e),r){if(Jn&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let u=r.childNodes[i],d;u.nodeName=="IMG"&&(d=u.getBoundingClientRect()).right<=e.left&&d.bottom>e.top&&i++}let c;Yc&&i&&r.nodeType==1&&(c=r.childNodes[i-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&i--,r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(a=pj(t,r,i,e))}a==null&&(a=hj(t,s,e));let l=t.docView.nearestDesc(s,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function jw(t){return t.top<t.bottom||t.left<t.right}function si(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(jw(r))return r}return Array.prototype.find.call(n,jw)||t.getBoundingClientRect()}const gj=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function PE(t,e,n){let{node:r,offset:i,atom:o}=t.docView.domFromPos(e,n<0?-1:1),s=Yc||Jn;if(r.nodeType==3)if(s&&(gj.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let l=si(Ar(r,i,i),n);if(Jn&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let c=si(Ar(r,i-1,i-1),-1);if(c.top==l.top){let u=si(Ar(r,i,i+1),-1);if(u.top!=l.top)return hl(u,u.left<c.left)}}return l}else{let l=i,c=i,u=n<0?1:-1;return n<0&&!i?(c++,u=-1):n>=0&&i==r.nodeValue.length?(l--,u=1):n<0?l--:c++,hl(si(Ar(r,l,c),u),u<0)}if(!t.state.doc.resolve(e-(o||0)).parent.inlineContent){if(o==null&&i&&(n<0||i==xn(r))){let l=r.childNodes[i-1];if(l.nodeType==1)return wp(l.getBoundingClientRect(),!1)}if(o==null&&i<xn(r)){let l=r.childNodes[i];if(l.nodeType==1)return wp(l.getBoundingClientRect(),!0)}return wp(r.getBoundingClientRect(),n>=0)}if(o==null&&i&&(n<0||i==xn(r))){let l=r.childNodes[i-1],c=l.nodeType==3?Ar(l,xn(l)-(s?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return hl(si(c,1),!1)}if(o==null&&i<xn(r)){let l=r.childNodes[i];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?Ar(l,0,s?0:1):l.nodeType==1?l:null:null;if(c)return hl(si(c,-1),!0)}return hl(si(r.nodeType==3?Ar(r):r,-n),n>=0)}function hl(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function wp(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function ME(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function yj(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return ME(t,e,()=>{let{node:o}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(o,!0);if(!a)break;if(a.node.isBlock){o=a.contentDOM||a.dom;break}o=a.dom.parentNode}let s=PE(t,i.pos,1);for(let a=o.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=Ar(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let u=l[c];if(u.bottom>u.top+1&&(n=="up"?s.top-u.top>(u.bottom-s.top)*2:u.bottom-s.bottom>(s.bottom-u.top)*2))return!1}}return!0})}const vj=/[\u0590-\u08ac]/;function xj(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,o=!i,s=i==r.parent.content.size,a=t.domSelection();return a?!vj.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?o:s:ME(t,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:u,anchorOffset:d}=t.domSelectionRange(),f=a.caretBidiLevel;a.modify("move",n,"character");let h=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:p,focusOffset:g}=t.domSelectionRange(),x=p&&!h.contains(p.nodeType==1?p:p.parentNode)||l==p&&c==g;try{a.collapse(u,d),l&&(l!=u||c!=d)&&a.extend&&a.extend(l,c)}catch{}return f!=null&&(a.caretBidiLevel=f),x}):r.pos==r.start()||r.pos==r.end()}let Lw=null,$w=null,Fw=!1;function wj(t,e,n){return Lw==e&&$w==n?Fw:(Lw=e,$w=n,Fw=n=="up"||n=="down"?yj(t,e,n):xj(t,e,n))}const Cn=0,Bw=1,Eo=2,wr=3;class Qc{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=Cn,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let o,s;if(e==this.contentDOM)o=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&!((s=o.pmViewDesc)&&s.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(s)+s.size:this.posAtStart}else{let o,s;if(e==this.contentDOM)o=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&!((s=o.pmViewDesc)&&s.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(s):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>it(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!1;break}if(o.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!0;break}if(o.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let o=this.getDesc(i),s;if(o&&(!n||o.node))if(r&&(s=o.nodeDOM)&&!(s.nodeType==1?s.contains(e.nodeType==1?e:e.parentNode):s==e))r=!1;else return o}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let o=this.getDesc(i);if(o)return o.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],o=r+i.size;if(r==e&&o!=r){for(;!i.border&&i.children.length;)for(let s=0;s<i.children.length;s++){let a=i.children[s];if(a.size){i=a;break}}return i}if(e<o)return i.descAt(e-r-i.border);r=o}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let o=0;r<this.children.length;r++){let s=this.children[r],a=o+s.size;if(a>e||s instanceof DE){i=e-o;break}o=a}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let o;r&&!(o=this.children[r-1]).size&&o instanceof AE&&o.side>=0;r--);if(n<=0){let o,s=!0;for(;o=r?this.children[r-1]:null,!(!o||o.dom.parentNode==this.contentDOM);r--,s=!1);return o&&n&&s&&!o.border&&!o.domAtom?o.domFromPos(o.size,n):{node:this.contentDOM,offset:o?it(o.dom)+1:0}}else{let o,s=!0;for(;o=r<this.children.length?this.children[r]:null,!(!o||o.dom.parentNode==this.contentDOM);r++,s=!1);return o&&s&&!o.border&&!o.domAtom?o.domFromPos(0,n):{node:this.contentDOM,offset:o?it(o.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,o=-1;for(let s=r,a=0;;a++){let l=this.children[a],c=s+l.size;if(i==-1&&e<=c){let u=s+l.border;if(e>=u&&n<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,n,u);e=s;for(let d=a;d>0;d--){let f=this.children[d-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){i=it(f.dom)+1;break}e-=f.size}i==-1&&(i=0)}if(i>-1&&(c>n||a==this.children.length-1)){n=c;for(let u=a+1;u<this.children.length;u++){let d=this.children[u];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){o=it(d.dom);break}n+=d.size}o==-1&&(o=this.contentDOM.childNodes.length);break}s=c}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let o=Math.min(e,n),s=Math.max(e,n);for(let h=0,p=0;h<this.children.length;h++){let g=this.children[h],x=p+g.size;if(o>p&&s<x)return g.setSelection(e-p-g.border,n-p-g.border,r,i);p=x}let a=this.domFromPos(e,e?-1:1),l=n==e?a:this.domFromPos(n,n?-1:1),c=r.root.getSelection(),u=r.domSelectionRange(),d=!1;if((Jn||_t)&&e==n){let{node:h,offset:p}=a;if(h.nodeType==3){if(d=!!(p&&h.nodeValue[p-1]==`
`),d&&p==h.nodeValue.length)for(let g=h,x;g;g=g.parentNode){if(x=g.nextSibling){x.nodeName=="BR"&&(a=l={node:x.parentNode,offset:it(x)+1});break}let v=g.pmViewDesc;if(v&&v.node&&v.node.isBlock)break}}else{let g=h.childNodes[p-1];d=g&&(g.nodeName=="BR"||g.contentEditable=="false")}}if(Jn&&u.focusNode&&u.focusNode!=l.node&&u.focusNode.nodeType==1){let h=u.focusNode.childNodes[u.focusOffset];h&&h.contentEditable=="false"&&(i=!0)}if(!(i||d&&_t)&&es(a.node,a.offset,u.anchorNode,u.anchorOffset)&&es(l.node,l.offset,u.focusNode,u.focusOffset))return;let f=!1;if((c.extend||e==n)&&!d){c.collapse(a.node,a.offset);try{e!=n&&c.extend(l.node,l.offset),f=!0}catch{}}if(!f){if(e>n){let p=a;a=l,l=p}let h=document.createRange();h.setEnd(l.node,l.offset),h.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(h)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let o=this.children[i],s=r+o.size;if(r==s?e<=s&&n>=r:e<s&&n>r){let a=r+o.border,l=s-o.border;if(e>=a&&n<=l){this.dirty=e==r||n==s?Eo:Bw,e==a&&n==l&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=wr:o.markDirty(e-a,n-a);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?Eo:wr}r=s}this.dirty=Eo}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?Eo:Bw;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class AE extends Qc{constructor(e,n,r,i){let o,s=n.type.toDOM;if(typeof s=="function"&&(s=s(r,()=>{if(!o)return i;if(o.parent)return o.parent.posBeforeChild(o)})),!n.type.spec.raw){if(s.nodeType!=1){let a=document.createElement("span");a.appendChild(s),s=a}s.contentEditable="false",s.classList.add("ProseMirror-widget")}super(e,[],s,null),this.widget=n,this.widget=n,o=this}matchesWidget(e){return this.dirty==Cn&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class bj extends Qc{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class ts extends Qc{constructor(e,n,r,i,o){super(e,[],r,i),this.mark=n,this.spec=o}static create(e,n,r,i){let o=i.nodeViews[n.type.name],s=o&&o(n,i,r);return(!s||!s.dom)&&(s=us.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new ts(e,n,s.dom,s.contentDOM||s.dom,s)}parseRule(){return this.dirty&wr||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=wr&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=Cn){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Cn}}slice(e,n,r){let i=ts.create(this.parent,this.mark,!0,r),o=this.children,s=this.size;n<s&&(o=Pg(o,n,s,r)),e>0&&(o=Pg(o,0,e,r));for(let a=0;a<o.length;a++)o[a].parent=i;return i.children=o,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Bi extends Qc{constructor(e,n,r,i,o,s,a,l,c){super(e,[],o,s),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=a}static create(e,n,r,i,o,s){let a=o.nodeViews[n.type.name],l,c=a&&a(n,o,()=>{if(!l)return s;if(l.parent)return l.parent.posBeforeChild(l)},r,i),u=c&&c.dom,d=c&&c.contentDOM;if(n.isText){if(!u)u=document.createTextNode(n.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:d}=us.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!d&&!n.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),n.type.spec.draggable&&(u.draggable=!0));let f=u;return u=jE(u,r,n),c?l=new Sj(e,n,r,i,u,d||null,f,c,o,s+1):n.isText?new Zf(e,n,r,i,u,f,o):new Bi(e,n,r,i,u,d||null,f,o,s+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>N.empty)}return e}matchesNode(e,n,r){return this.dirty==Cn&&e.eq(this.node)&&tf(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,o=e.composing?this.localCompositionInfo(e,n):null,s=o&&o.pos>-1?o:null,a=o&&o.pos<0,l=new kj(this,s&&s.node,e);_j(this.node,this.innerDeco,(c,u,d)=>{c.spec.marks?l.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!d&&l.syncToMarks(u==this.node.childCount?ge.none:this.node.child(u).marks,r,e),l.placeWidget(c,e,i)},(c,u,d,f)=>{l.syncToMarks(c.marks,r,e);let h;l.findNodeMatch(c,u,d,f)||a&&e.state.selection.from>i&&e.state.selection.to<i+c.nodeSize&&(h=l.findIndexWithChild(o.node))>-1&&l.updateNodeAt(c,u,d,h,e)||l.updateNextNode(c,u,d,e,f,i)||l.addNode(c,u,d,e,i),i+=c.nodeSize}),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==Eo)&&(s&&this.protectLocalComposition(e,s),IE(this.contentDOM,this.children,e),Da&&Rj(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof ne)||r<n||i>n+this.node.content.size)return null;let o=e.input.compositionNode;if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let s=o.nodeValue,a=Oj(this.node.content,s,r-n,i-n);return a<0?null:{node:o,pos:a,text:s}}else return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let o=n;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let s=new bj(this,o,n,i);e.input.compositionNodes.push(s),this.children=Pg(this.children,r,r+i.length,e,s)}update(e,n,r,i){return this.dirty==wr||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Cn}updateOuterDeco(e){if(tf(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=NE(this.dom,this.nodeDOM,Og(this.outerDeco,this.node,n),Og(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function zw(t,e,n,r,i){jE(r,e,t);let o=new Bi(void 0,t,e,n,r,r,r,i,0);return o.contentDOM&&o.updateChildren(i,0),o}class Zf extends Bi{constructor(e,n,r,i,o,s,a){super(e,n,r,i,o,null,s,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==wr||this.dirty!=Cn&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=Cn||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=Cn,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),o=document.createTextNode(i.text);return new Zf(this.parent,i,this.outerDeco,this.innerDeco,o,o,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=wr)}get domAtom(){return!1}isText(e){return this.node.text==e}}class DE extends Qc{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Cn&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class Sj extends Bi{constructor(e,n,r,i,o,s,a,l,c,u){super(e,n,r,i,o,s,a,c,u),this.spec=l}update(e,n,r,i){if(this.dirty==wr)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let o=this.spec.update(e,n,r);return o&&this.updateInner(e,n,r,i),o}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function IE(t,e,n){let r=t.firstChild,i=!1;for(let o=0;o<e.length;o++){let s=e[o],a=s.dom;if(a.parentNode==t){for(;a!=r;)r=Uw(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(a,r);if(s instanceof ts){let l=r?r.previousSibling:t.lastChild;IE(s.contentDOM,s.children,n),r=l?l.nextSibling:t.firstChild}}for(;r;)r=Uw(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const Fl=function(t){t&&(this.nodeName=t)};Fl.prototype=Object.create(null);const To=[new Fl];function Og(t,e,n){if(t.length==0)return To;let r=n?To[0]:new Fl,i=[r];for(let o=0;o<t.length;o++){let s=t[o].type.attrs;if(s){s.nodeName&&i.push(r=new Fl(s.nodeName));for(let a in s){let l=s[a];l!=null&&(n&&i.length==1&&i.push(r=new Fl(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return i}function NE(t,e,n,r){if(n==To&&r==To)return e;let i=e;for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(o){let l;a&&a.nodeName==s.nodeName&&i!=t&&(l=i.parentNode)&&l.nodeName.toLowerCase()==s.nodeName||(l=document.createElement(s.nodeName),l.pmIsDeco=!0,l.appendChild(i),a=To[0]),i=l}Cj(i,a||To[0],s)}return i}function Cj(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let o=0;o<r.length;o++)i.indexOf(r[o])==-1&&t.classList.remove(r[o]);for(let o=0;o<i.length;o++)r.indexOf(i[o])==-1&&t.classList.add(i[o]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function jE(t,e,n){return NE(t,t,To,Og(e,n,t.nodeType!=1))}function tf(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function Uw(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class kj{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=Ej(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let i=0,o=this.stack.length>>1,s=Math.min(o,e.length);for(;i<s&&(i==o-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<o;)this.destroyRest(),this.top.dirty=Cn,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[o])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=ts.create(this.top,e[o],n,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,o++}}findNodeMatch(e,n,r,i){let o=-1,s;if(i>=this.preMatch.index&&(s=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&s.matchesNode(e,n,r))o=this.top.children.indexOf(s,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,n,r)&&!this.preMatch.matched.has(c)){o=a;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(e,n,r,i,o){let s=this.top.children[i];return s.dirty==wr&&s.dom==s.contentDOM&&(s.dirty=Eo),s.update(e,n,r,o)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,o,s){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof Bi){let c=this.preMatch.matched.get(l);if(c!=null&&c!=o)return!1;let u=l.dom,d,f=this.isLocked(u)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=wr&&tf(n,l.outerDeco));if(!f&&l.update(e,n,r,i))return this.destroyBetween(this.index,a),l.dom!=u&&(this.changed=!0),this.index++,!0;if(!f&&(d=this.recreateWrapper(l,e,n,r,i,s)))return this.destroyBetween(this.index,a),this.top.children[this.index]=d,d.contentDOM&&(d.dirty=Eo,d.updateChildren(i,s+1),d.dirty=Cn),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,i,o,s){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!tf(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let a=Bi.create(this.top,n,r,i,o,s);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,n,r,i,o){let s=Bi.create(this.top,e,n,r,i,o);s.contentDOM&&s.updateChildren(i,o+1),this.top.children.splice(this.index++,0,s),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let o=new AE(this.top,e,n,r);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof ts;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof Zf)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((_t||mt)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new DE(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function Ej(t,e){let n=e,r=n.children.length,i=t.childCount,o=new Map,s=[];e:for(;i>0;){let a;for(;;)if(r){let c=n.children[r-1];if(c instanceof ts)n=c,r=c.children.length;else{a=c,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=t.child(i-1))break;--i,o.set(a,i),s.push(a)}}return{index:i,matched:o,matches:s.reverse()}}function Tj(t,e){return t.type.side-e.type.side}function _j(t,e,n,r){let i=e.locals(t),o=0;if(i.length==0){for(let c=0;c<t.childCount;c++){let u=t.child(c);r(u,i,e.forChild(o,u),c),o+=u.nodeSize}return}let s=0,a=[],l=null;for(let c=0;;){let u,d;for(;s<i.length&&i[s].to==o;){let x=i[s++];x.widget&&(u?(d||(d=[u])).push(x):u=x)}if(u)if(d){d.sort(Tj);for(let x=0;x<d.length;x++)n(d[x],c,!!l)}else n(u,c,!!l);let f,h;if(l)h=-1,f=l,l=null;else if(c<t.childCount)h=c,f=t.child(c++);else break;for(let x=0;x<a.length;x++)a[x].to<=o&&a.splice(x--,1);for(;s<i.length&&i[s].from<=o&&i[s].to>o;)a.push(i[s++]);let p=o+f.nodeSize;if(f.isText){let x=p;s<i.length&&i[s].from<x&&(x=i[s].from);for(let v=0;v<a.length;v++)a[v].to<x&&(x=a[v].to);x<p&&(l=f.cut(x-o),f=f.cut(0,x-o),p=x,h=-1)}else for(;s<i.length&&i[s].to<p;)s++;let g=f.isInline&&!f.isLeaf?a.filter(x=>!x.inline):a.slice();r(f,g,e.forChild(o,f),h),o=p}}function Rj(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function Oj(t,e,n,r){for(let i=0,o=0;i<t.childCount&&o<=r;){let s=t.child(i++),a=o;if(o+=s.nodeSize,!s.isText)continue;let l=s.text;for(;i<t.childCount;){let c=t.child(i++);if(o+=c.nodeSize,!c.isText)break;l+=c.text}if(o>=n){if(o>=r&&l.slice(r-e.length-a,r-a)==e)return r-e.length;let c=a<r?l.lastIndexOf(e,r-a-1):-1;if(c>=0&&c+e.length+a>=n)return a+c;if(n==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function Pg(t,e,n,r,i){let o=[];for(let s=0,a=0;s<t.length;s++){let l=t[s],c=a,u=a+=l.size;c>=n||u<=e?o.push(l):(c<e&&o.push(l.slice(0,e-c,r)),i&&(o.push(i),i=void 0),u>n&&o.push(l.slice(n-c,l.size,r)))}return o}function Ev(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),o=i&&i.size==0,s=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(s<0)return null;let a=r.resolve(s),l,c;if(Xf(n)){for(l=s;i&&!i.node;)i=i.parent;let d=i.node;if(i&&d.isAtom&&Q.isSelectable(d)&&i.parent&&!(d.isInline&&tj(n.focusNode,n.focusOffset,i.dom))){let f=i.posBefore;c=new Q(s==f?a:r.resolve(f))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let d=s,f=s;for(let h=0;h<n.rangeCount;h++){let p=n.getRangeAt(h);d=Math.min(d,t.docView.posFromDOM(p.startContainer,p.startOffset,1)),f=Math.max(f,t.docView.posFromDOM(p.endContainer,p.endOffset,-1))}if(d<0)return null;[l,s]=f==t.state.selection.anchor?[f,d]:[d,f],a=r.resolve(s)}else l=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(l<0)return null}let u=r.resolve(l);if(!c){let d=e=="pointer"||t.state.selection.head<a.pos&&!o?1:-1;c=Tv(t,u,a,d)}return c}function LE(t){return t.editable?t.hasFocus():FE(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Ur(t,e=!1){let n=t.state.selection;if($E(t,n),!!LE(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&mt){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&es(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)Mj(t);else{let{anchor:r,head:i}=n,o,s;Vw&&!(n instanceof ne)&&(n.$from.parent.inlineContent||(o=Hw(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(s=Hw(t,n.to))),t.docView.setSelection(r,i,t,e),Vw&&(o&&Ww(o),s&&Ww(s)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&Pj(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const Vw=_t||mt&&EE<63;function Hw(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,o=r?n.childNodes[r-1]:null;if(_t&&i&&i.contentEditable=="false")return bp(i);if((!i||i.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(i)return bp(i);if(o)return bp(o)}}function bp(t){return t.contentEditable="true",_t&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function Ww(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function Pj(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!LE(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function Mj(t){let e=t.domSelection(),n=document.createRange();if(!e)return;let r=t.cursorWrapper.dom,i=r.nodeName=="IMG";i?n.setStart(r.parentNode,it(r)+1):n.setStart(r,0),n.collapse(!0),e.removeAllRanges(),e.addRange(n),!i&&!t.state.selection.visible&&Gt&&Fi<=11&&(r.disabled=!0,r.disabled=!1)}function $E(t,e){if(e instanceof Q){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(Kw(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else Kw(t)}function Kw(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function Tv(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||ne.between(e,n,r)}function qw(t){return t.editable&&!t.hasFocus()?!1:FE(t)}function FE(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function Aj(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return es(e.node,e.offset,n.anchorNode,n.anchorOffset)}function Mg(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),o=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return o&&re.findFrom(o,e)}function di(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function Gw(t,e,n){let r=t.state.selection;if(r instanceof ne)if(n.indexOf("s")>-1){let{$head:i}=r,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let s=t.state.doc.resolve(i.pos+o.nodeSize*(e<0?-1:1));return di(t,new ne(r.$anchor,s))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=Mg(t.state,e);return i&&i instanceof Q?di(t,i):!1}else if(!(gn&&n.indexOf("m")>-1)){let i=r.$head,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,s;if(!o||o.isText)return!1;let a=e<0?i.pos-o.nodeSize:i.pos;return o.isAtom||(s=t.docView.descAt(a))&&!s.contentDOM?Q.isSelectable(o)?di(t,new Q(e<0?t.state.doc.resolve(i.pos-o.nodeSize):i)):Yc?di(t,new ne(t.state.doc.resolve(e<0?a:a+o.nodeSize))):!1:!1}}else return!1;else{if(r instanceof Q&&r.node.isInline)return di(t,new ne(e>0?r.$to:r.$from));{let i=Mg(t.state,e);return i?di(t,i):!1}}}function nf(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Bl(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function Cs(t,e){return e<0?Dj(t):Ij(t)}function Dj(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,o,s=!1;for(Jn&&n.nodeType==1&&r<nf(n)&&Bl(n.childNodes[r],-1)&&(s=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(Bl(a,-1))i=n,o=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(BE(n))break;{let a=n.previousSibling;for(;a&&Bl(a,-1);)i=n.parentNode,o=it(a),a=a.previousSibling;if(a)n=a,r=nf(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}s?Ag(t,n,r):i&&Ag(t,i,o)}function Ij(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=nf(n),o,s;for(;;)if(r<i){if(n.nodeType!=1)break;let a=n.childNodes[r];if(Bl(a,1))o=n,s=++r;else break}else{if(BE(n))break;{let a=n.nextSibling;for(;a&&Bl(a,1);)o=a.parentNode,s=it(a)+1,a=a.nextSibling;if(a)n=a,r=0,i=nf(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}o&&Ag(t,o,s)}function BE(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function Nj(t,e){for(;t&&e==t.childNodes.length&&!Jc(t);)e=it(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function jj(t,e){for(;t&&!e&&!Jc(t);)e=it(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function Ag(t,e,n){if(e.nodeType!=3){let o,s;(s=Nj(e,n))?(e=s,n=0):(o=jj(e,n))&&(e=o,n=o.nodeValue.length)}let r=t.domSelection();if(!r)return;if(Xf(r)){let o=document.createRange();o.setEnd(e,n),o.setStart(e,n),r.removeAllRanges(),r.addRange(o)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&Ur(t)},50)}function Jw(t,e){let n=t.state.doc.resolve(e);if(!(mt||ij)&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let o=t.coordsAtPos(e-1),s=(o.top+o.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(o.left-i.left)>1)return o.left<i.left?"ltr":"rtl"}if(e<n.end()){let o=t.coordsAtPos(e+1),s=(o.top+o.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(o.left-i.left)>1)return o.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function Yw(t,e,n){let r=t.state.selection;if(r instanceof ne&&!r.empty||n.indexOf("s")>-1||gn&&n.indexOf("m")>-1)return!1;let{$from:i,$to:o}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let s=Mg(t.state,e);if(s&&s instanceof Q)return di(t,s)}if(!i.parent.inlineContent){let s=e<0?i:o,a=r instanceof Sn?re.near(s,e):re.findFrom(s,e);return a?di(t,a):!1}return!1}function Qw(t,e){if(!(t.state.selection instanceof ne))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let o=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(o&&!o.isText){let s=t.state.tr;return e<0?s.delete(n.pos-o.nodeSize,n.pos):s.delete(n.pos,n.pos+o.nodeSize),t.dispatch(s),!0}return!1}function Xw(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function Lj(t){if(!_t||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;Xw(t,r,"true"),setTimeout(()=>Xw(t,r,"false"),20)}return!1}function $j(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function Fj(t,e){let n=e.keyCode,r=$j(e);if(n==8||gn&&n==72&&r=="c")return Qw(t,-1)||Cs(t,-1);if(n==46&&!e.shiftKey||gn&&n==68&&r=="c")return Qw(t,1)||Cs(t,1);if(n==13||n==27)return!0;if(n==37||gn&&n==66&&r=="c"){let i=n==37?Jw(t,t.state.selection.from)=="ltr"?-1:1:-1;return Gw(t,i,r)||Cs(t,i)}else if(n==39||gn&&n==70&&r=="c"){let i=n==39?Jw(t,t.state.selection.from)=="ltr"?1:-1:1;return Gw(t,i,r)||Cs(t,i)}else{if(n==38||gn&&n==80&&r=="c")return Yw(t,-1,r)||Cs(t,-1);if(n==40||gn&&n==78&&r=="c")return Lj(t)||Yw(t,1,r)||Cs(t,1);if(r==(gn?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function _v(t,e){t.someProp("transformCopied",h=>{e=h(e,t)});let n=[],{content:r,openStart:i,openEnd:o}=e;for(;i>1&&o>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,o--;let h=r.firstChild;n.push(h.type.name,h.attrs!=h.type.defaultAttrs?h.attrs:null),r=h.content}let s=t.someProp("clipboardSerializer")||us.fromSchema(t.state.schema),a=KE(),l=a.createElement("div");l.appendChild(s.serializeFragment(r,{document:a}));let c=l.firstChild,u,d=0;for(;c&&c.nodeType==1&&(u=WE[c.nodeName.toLowerCase()]);){for(let h=u.length-1;h>=0;h--){let p=a.createElement(u[h]);for(;l.firstChild;)p.appendChild(l.firstChild);l.appendChild(p),d++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${i} ${o}${d?` -${d}`:""} ${JSON.stringify(n)}`);let f=t.someProp("clipboardTextSerializer",h=>h(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:f,slice:e}}function zE(t,e,n,r,i){let o=i.parent.type.spec.code,s,a;if(!n&&!e)return null;let l=e&&(r||o||!n);if(l){if(t.someProp("transformPastedText",f=>{e=f(e,o||r,t)}),o)return e?new V(N.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):V.empty;let d=t.someProp("clipboardTextParser",f=>f(e,i,r,t));if(d)a=d;else{let f=i.marks(),{schema:h}=t.state,p=us.fromSchema(h);s=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(g=>{let x=s.appendChild(document.createElement("p"));g&&x.appendChild(p.serializeNode(h.text(g,f)))})}}else t.someProp("transformPastedHTML",d=>{n=d(n,t)}),s=Vj(n),Yc&&Hj(s);let c=s&&s.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let d=+u[3];d>0;d--){let f=s.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;s=f}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||$i.fromSchema(t.state.schema)).parseSlice(s,{preserveWhitespace:!!(l||u),context:i,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!Bj.test(f.parentNode.nodeName)?{ignore:!0}:null}})),u)a=Wj(Zw(a,+u[1],+u[2]),u[4]);else if(a=V.maxOpen(zj(a.content,i),!0),a.openStart||a.openEnd){let d=0,f=0;for(let h=a.content.firstChild;d<a.openStart&&!h.type.spec.isolating;d++,h=h.firstChild);for(let h=a.content.lastChild;f<a.openEnd&&!h.type.spec.isolating;f++,h=h.lastChild);a=Zw(a,d,f)}return t.someProp("transformPasted",d=>{a=d(a,t)}),a}const Bj=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function zj(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),o,s=[];if(t.forEach(a=>{if(!s)return;let l=i.findWrapping(a.type),c;if(!l)return s=null;if(c=s.length&&o.length&&VE(l,o,a,s[s.length-1],0))s[s.length-1]=c;else{s.length&&(s[s.length-1]=HE(s[s.length-1],o.length));let u=UE(a,l);s.push(u),i=i.matchType(u.type),o=l}}),s)return N.from(s)}return t}function UE(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,N.from(t));return t}function VE(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let o=VE(t,e,n,r.lastChild,i+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(N.from(UE(n,t,i+1))))}}function HE(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,HE(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(N.empty,!0);return t.copy(n.append(r))}function Dg(t,e,n,r,i,o){let s=e<0?t.firstChild:t.lastChild,a=s.content;return t.childCount>1&&(o=0),i<r-1&&(a=Dg(a,e,n,r,i+1,o)),i>=n&&(a=e<0?s.contentMatchAt(0).fillBefore(a,o<=i).append(a):a.append(s.contentMatchAt(s.childCount).fillBefore(N.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,s.copy(a))}function Zw(t,e,n){return e<t.openStart&&(t=new V(Dg(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new V(Dg(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const WE={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let eb=null;function KE(){return eb||(eb=document.implementation.createHTMLDocument("title"))}let Sp=null;function Uj(t){let e=window.trustedTypes;return e?(Sp||(Sp=e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),Sp.createHTML(t)):t}function Vj(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=KE().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&WE[r[1].toLowerCase()])&&(t=i.map(o=>"<"+o+">").join("")+t+i.map(o=>"</"+o+">").reverse().join("")),n.innerHTML=Uj(t),i)for(let o=0;o<i.length;o++)n=n.querySelector(i[o])||n;return n}function Hj(t){let e=t.querySelectorAll(mt?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function Wj(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:o,openEnd:s}=t;for(let a=r.length-2;a>=0;a-=2){let l=n.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;i=N.from(l.create(r[a+1],i)),o++,s++}return new V(i,o,s)}const Rt={},Ot={},Kj={touchstart:!0,touchmove:!0};class qj{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Gj(t){for(let e in Rt){let n=Rt[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{Yj(t,r)&&!Rv(t,r)&&(t.editable||!(r.type in Ot))&&n(t,r)},Kj[e]?{passive:!0}:void 0)}_t&&t.dom.addEventListener("input",()=>null),Ig(t)}function Ri(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function Jj(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function Ig(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>Rv(t,r))})}function Rv(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function Yj(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function Qj(t,e){!Rv(t,e)&&Rt[e.type]&&(t.editable||!(e.type in Ot))&&Rt[e.type](t,e)}Ot.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!GE(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!($r&&mt&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),Da&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,xo(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||Fj(t,n)?n.preventDefault():Ri(t,"key")};Ot.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Ot.keypress=(t,e)=>{let n=e;if(GE(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||gn&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof ne)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode);!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",o=>o(t,r.$from.pos,r.$to.pos,i))&&t.dispatch(t.state.tr.insertText(i).scrollIntoView()),n.preventDefault()}};function eh(t){return{left:t.clientX,top:t.clientY}}function Xj(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function Ov(t,e,n,r,i){if(r==-1)return!1;let o=t.state.doc.resolve(r);for(let s=o.depth+1;s>0;s--)if(t.someProp(e,a=>s>o.depth?a(t,n,o.nodeAfter,o.before(s),i,!0):a(t,n,o.node(s),o.before(s),i,!1)))return!0;return!1}function oa(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);n=="pointer"&&r.setMeta("pointer",!0),t.dispatch(r)}function Zj(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&Q.isSelectable(r)?(oa(t,new Q(n),"pointer"),!0):!1}function eL(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof Q&&(r=n.node);let o=t.state.doc.resolve(e);for(let s=o.depth+1;s>0;s--){let a=s>o.depth?o.nodeAfter:o.node(s);if(Q.isSelectable(a)){r&&n.$from.depth>0&&s>=n.$from.depth&&o.before(n.$from.depth+1)==n.$from.pos?i=o.before(n.$from.depth):i=o.before(s);break}}return i!=null?(oa(t,Q.create(t.state.doc,i),"pointer"),!0):!1}function tL(t,e,n,r,i){return Ov(t,"handleClickOn",e,n,r)||t.someProp("handleClick",o=>o(t,e,r))||(i?eL(t,n):Zj(t,n))}function nL(t,e,n,r){return Ov(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function rL(t,e,n,r){return Ov(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||iL(t,n,r)}function iL(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(oa(t,ne.create(r,0,r.content.size),"pointer"),!0):!1;let i=r.resolve(e);for(let o=i.depth+1;o>0;o--){let s=o>i.depth?i.nodeAfter:i.node(o),a=i.before(o);if(s.inlineContent)oa(t,ne.create(r,a+1,a+1+s.content.size),"pointer");else if(Q.isSelectable(s))oa(t,Q.create(r,a),"pointer");else continue;return!0}}function Pv(t){return rf(t)}const qE=gn?"metaKey":"ctrlKey";Rt.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=Pv(t),i=Date.now(),o="singleClick";i-t.input.lastClick.time<500&&Xj(n,t.input.lastClick)&&!n[qE]&&(t.input.lastClick.type=="singleClick"?o="doubleClick":t.input.lastClick.type=="doubleClick"&&(o="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:o};let s=t.posAtCoords(eh(n));s&&(o=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new oL(t,s,n,!!r)):(o=="doubleClick"?nL:rL)(t,s.pos,s.inside,n)?n.preventDefault():Ri(t,"pointer"))};class oL{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[qE],this.allowDefault=r.shiftKey;let o,s;if(n.inside>-1)o=e.state.doc.nodeAt(n.inside),s=n.inside;else{let u=e.state.doc.resolve(n.pos);o=u.parent,s=u.depth?u.before():0}const a=i?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&l.dom.nodeType==1?l.dom:null;let{selection:c}=e.state;(r.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||c instanceof Q&&c.from<=s&&c.to>s)&&(this.mightDrag={node:o,pos:s,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Jn&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Ri(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Ur(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(eh(e))),this.updateAllowDefault(e),this.allowDefault||!n?Ri(this.view,"pointer"):tL(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||_t&&this.mightDrag&&!this.mightDrag.node.isAtom||mt&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(oa(this.view,re.near(this.view.state.doc.resolve(n.pos)),"pointer"),e.preventDefault()):Ri(this.view,"pointer")}move(e){this.updateAllowDefault(e),Ri(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Rt.touchstart=t=>{t.input.lastTouch=Date.now(),Pv(t),Ri(t,"pointer")};Rt.touchmove=t=>{t.input.lastTouch=Date.now(),Ri(t,"pointer")};Rt.contextmenu=t=>Pv(t);function GE(t,e){return t.composing?!0:_t&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const sL=$r?5e3:-1;Ot.compositionstart=Ot.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof ne&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),rf(t,!0),t.markCursor=null;else if(rf(t,!e.selection.empty),Jn&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,o=r.focusOffset;i&&i.nodeType==1&&o!=0;){let s=o<0?i.lastChild:i.childNodes[o-1];if(!s)break;if(s.nodeType==3){let a=t.domSelection();a&&a.collapse(s,s.nodeValue.length);break}else i=s,o=-1}}t.input.composing=!0}JE(t,sL)};Ot.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,JE(t,20))};function JE(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>rf(t),e))}function YE(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=lL());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function aL(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=Z2(e.focusNode,e.focusOffset),r=ej(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,o=t.domObserver.lastChangedTextNode;if(n==o||r==o)return o;if(!i||!i.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let s=n.pmViewDesc;if(!(!s||!s.isText(n.nodeValue)))return r}}return n||r}function lL(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function rf(t,e=!1){if(!($r&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),YE(t),e||t.docView&&t.docView.dirty){let n=Ev(t);return n&&!n.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!t.state.selection.empty?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function cL(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const mc=Gt&&Fi<15||Da&&oj<604;Rt.copy=Ot.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let o=mc?null:n.clipboardData,s=r.content(),{dom:a,text:l}=_v(t,s);o?(n.preventDefault(),o.clearData(),o.setData("text/html",a.innerHTML),o.setData("text/plain",l)):cL(t,a),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function uL(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function dL(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?gc(t,r.value,null,i,e):gc(t,r.textContent,r.innerHTML,i,e)},50)}function gc(t,e,n,r,i){let o=zE(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,i,o||V.empty)))return!0;if(!o)return!1;let s=uL(o),a=s?t.state.tr.replaceSelectionWith(s,r):t.state.tr.replaceSelection(o);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function QE(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Ot.paste=(t,e)=>{let n=e;if(t.composing&&!$r)return;let r=mc?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&gc(t,QE(r),r.getData("text/html"),i,n)?n.preventDefault():dL(t,n)};class XE{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const ZE=gn?"altKey":"ctrlKey";Rt.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,o=i.empty?null:t.posAtCoords(eh(n)),s;if(!(o&&o.pos>=i.from&&o.pos<=(i instanceof Q?i.to-1:i.to))){if(r&&r.mightDrag)s=Q.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let d=t.docView.nearestDesc(n.target,!0);d&&d.node.type.spec.draggable&&d!=t.docView&&(s=Q.create(t.state.doc,d.posBefore))}}let a=(s||t.state.selection).content(),{dom:l,text:c,slice:u}=_v(t,a);(!n.dataTransfer.files.length||!mt||EE>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(mc?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",mc||n.dataTransfer.setData("text/plain",c),t.dragging=new XE(u,!n[ZE],s)};Rt.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Ot.dragover=Ot.dragenter=(t,e)=>e.preventDefault();Ot.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let i=t.posAtCoords(eh(n));if(!i)return;let o=t.state.doc.resolve(i.pos),s=r&&r.slice;s?t.someProp("transformPasted",p=>{s=p(s,t)}):s=zE(t,QE(n.dataTransfer),mc?null:n.dataTransfer.getData("text/html"),!1,o);let a=!!(r&&!n[ZE]);if(t.someProp("handleDrop",p=>p(t,n,s||V.empty,a))){n.preventDefault();return}if(!s)return;n.preventDefault();let l=s?yE(t.state.doc,o.pos,s):o.pos;l==null&&(l=o.pos);let c=t.state.tr;if(a){let{node:p}=r;p?p.replace(c):c.deleteSelection()}let u=c.mapping.map(l),d=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,f=c.doc;if(d?c.replaceRangeWith(u,u,s.content.firstChild):c.replaceRange(u,u,s),c.doc.eq(f))return;let h=c.doc.resolve(u);if(d&&Q.isSelectable(s.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(s.content.firstChild))c.setSelection(new Q(h));else{let p=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((g,x,v,w)=>p=w),c.setSelection(Tv(t,h,c.doc.resolve(p)))}t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))};Rt.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Ur(t)},20))};Rt.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};Rt.beforeinput=(t,e)=>{if(mt&&$r&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",o=>o(t,xo(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in Ot)Rt[t]=Ot[t];function yc(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class of{constructor(e,n){this.toDOM=e,this.spec=n||Bo,this.side=this.spec.side||0}map(e,n,r,i){let{pos:o,deleted:s}=e.mapResult(n.from+i,this.side<0?-1:1);return s?null:new Ht(o-r,o-r,this)}valid(){return!0}eq(e){return this==e||e instanceof of&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&yc(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class zi{constructor(e,n){this.attrs=e,this.spec=n||Bo}map(e,n,r,i){let o=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,s=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return o>=s?null:new Ht(o,s,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof zi&&yc(this.attrs,e.attrs)&&yc(this.spec,e.spec)}static is(e){return e.type instanceof zi}destroy(){}}class Mv{constructor(e,n){this.attrs=e,this.spec=n||Bo}map(e,n,r,i){let o=e.mapResult(n.from+i,1);if(o.deleted)return null;let s=e.mapResult(n.to+i,-1);return s.deleted||s.pos<=o.pos?null:new Ht(o.pos-r,s.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),o;return i==n.from&&!(o=e.child(r)).isText&&i+o.nodeSize==n.to}eq(e){return this==e||e instanceof Mv&&yc(this.attrs,e.attrs)&&yc(this.spec,e.spec)}destroy(){}}class Ht{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new Ht(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new Ht(e,e,new of(n,r))}static inline(e,n,r,i){return new Ht(e,n,new zi(r,i))}static node(e,n,r,i){return new Ht(e,n,new Mv(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof zi}get widget(){return this.type instanceof of}}const As=[],Bo={};class je{constructor(e,n){this.local=e.length?e:As,this.children=n.length?n:As}static create(e,n){return n.length?sf(n,e,0,Bo):ht}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,o){for(let s=0;s<this.local.length;s++){let a=this.local[s];a.from<=n&&a.to>=e&&(!o||o(a.spec))&&r.push(a.copy(a.from+i,a.to+i))}for(let s=0;s<this.children.length;s+=3)if(this.children[s]<n&&this.children[s+1]>e){let a=this.children[s]+1;this.children[s+2].findInner(e-a,n-a,r,i+a,o)}}map(e,n,r){return this==ht||e.maps.length==0?this:this.mapInner(e,n,0,0,r||Bo)}mapInner(e,n,r,i,o){let s;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,i);l&&l.type.valid(n,l)?(s||(s=[])).push(l):o.onRemove&&o.onRemove(this.local[a].spec)}return this.children.length?fL(this.children,s||[],e,n,r,i,o):s?new je(s.sort(zo),As):ht}add(e,n){return n.length?this==ht?je.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,o=0;e.forEach((a,l)=>{let c=l+r,u;if(u=tT(n,a,c)){for(i||(i=this.children.slice());o<i.length&&i[o]<l;)o+=3;i[o]==l?i[o+2]=i[o+2].addInner(a,u,c+1):i.splice(o,0,l,l+a.nodeSize,sf(u,a,c+1,Bo)),o+=3}});let s=eT(o?nT(n):n,-r);for(let a=0;a<s.length;a++)s[a].type.valid(e,s[a])||s.splice(a--,1);return new je(s.length?this.local.concat(s).sort(zo):this.local,i||this.children)}remove(e){return e.length==0||this==ht?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let o=0;o<r.length;o+=3){let s,a=r[o]+n,l=r[o+1]+n;for(let u=0,d;u<e.length;u++)(d=e[u])&&d.from>a&&d.to<l&&(e[u]=null,(s||(s=[])).push(d));if(!s)continue;r==this.children&&(r=this.children.slice());let c=r[o+2].removeInner(s,a+1);c!=ht?r[o+2]=c:(r.splice(o,3),o-=3)}if(i.length){for(let o=0,s;o<e.length;o++)if(s=e[o])for(let a=0;a<i.length;a++)i[a].eq(s,n)&&(i==this.local&&(i=this.local.slice()),i.splice(a--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new je(i,r):ht}forChild(e,n){if(this==ht)return this;if(n.isLeaf)return je.empty;let r,i;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let o=e+1,s=o+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<s&&l.to>o&&l.type instanceof zi){let c=Math.max(o,l.from)-o,u=Math.min(s,l.to)-o;c<u&&(i||(i=[])).push(l.copy(c,u))}}if(i){let a=new je(i.sort(zo),As);return r?new gi([a,r]):a}return r||ht}eq(e){if(this==e)return!0;if(!(e instanceof je)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return Av(this.localsInner(e))}localsInner(e){if(this==ht)return As;if(e.inlineContent||!this.local.some(zi.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof zi||n.push(this.local[r]);return n}forEachSet(e){e(this)}}je.empty=new je([],[]);je.removeOverlap=Av;const ht=je.empty;class gi{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,Bo));return gi.from(r)}forChild(e,n){if(n.isLeaf)return je.empty;let r=[];for(let i=0;i<this.members.length;i++){let o=this.members[i].forChild(e,n);o!=ht&&(o instanceof gi?r=r.concat(o.members):r.push(o))}return gi.from(r)}eq(e){if(!(e instanceof gi)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let o=this.members[i].localsInner(e);if(o.length)if(!n)n=o;else{r&&(n=n.slice(),r=!1);for(let s=0;s<o.length;s++)n.push(o[s])}}return n?Av(r?n:n.sort(zo)):As}static from(e){switch(e.length){case 0:return ht;case 1:return e[0];default:return new gi(e.every(n=>n instanceof je)?e:e.reduce((n,r)=>n.concat(r instanceof je?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function fL(t,e,n,r,i,o,s){let a=t.slice();for(let c=0,u=o;c<n.maps.length;c++){let d=0;n.maps[c].forEach((f,h,p,g)=>{let x=g-p-(h-f);for(let v=0;v<a.length;v+=3){let w=a[v+1];if(w<0||f>w+u-d)continue;let S=a[v]+u-d;h>=S?a[v+1]=f<=S?-2:-1:f>=u&&x&&(a[v]+=x,a[v+1]+=x)}d+=x}),u=n.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let u=n.map(t[c]+o),d=u-i;if(d<0||d>=r.content.size){l=!0;continue}let f=n.map(t[c+1]+o,-1),h=f-i,{index:p,offset:g}=r.content.findIndex(d),x=r.maybeChild(p);if(x&&g==d&&g+x.nodeSize==h){let v=a[c+2].mapInner(n,x,u+1,t[c]+o+1,s);v!=ht?(a[c]=d,a[c+1]=h,a[c+2]=v):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=hL(a,t,e,n,i,o,s),u=sf(c,r,0,s);e=u.local;for(let d=0;d<a.length;d+=3)a[d+1]<0&&(a.splice(d,3),d-=3);for(let d=0,f=0;d<u.children.length;d+=3){let h=u.children[d];for(;f<a.length&&a[f]<h;)f+=3;a.splice(f,0,u.children[d],u.children[d+1],u.children[d+2])}}return new je(e.sort(zo),a)}function eT(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new Ht(i.from+e,i.to+e,i.type))}return n}function hL(t,e,n,r,i,o,s){function a(l,c){for(let u=0;u<l.local.length;u++){let d=l.local[u].map(r,i,c);d?n.push(d):s.onRemove&&s.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&a(t[l+2],e[l]+o+1);return n}function tT(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let o=0,s;o<t.length;o++)(s=t[o])&&s.from>n&&s.to<r&&((i||(i=[])).push(s),t[o]=null);return i}function nT(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function sf(t,e,n,r){let i=[],o=!1;e.forEach((a,l)=>{let c=tT(t,a,l+n);if(c){o=!0;let u=sf(c,a,n+l+1,r);u!=ht&&i.push(l,l+a.nodeSize,u)}});let s=eT(o?nT(t):t,-n).sort(zo);for(let a=0;a<s.length;a++)s[a].type.valid(e,s[a])||(r.onRemove&&r.onRemove(s[a].spec),s.splice(a--,1));return s.length||i.length?new je(s,i):ht}function zo(t,e){return t.from-e.from||t.to-e.to}function Av(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let o=e[i];if(o.from==r.from){o.to!=r.to&&(e==t&&(e=t.slice()),e[i]=o.copy(o.from,r.to),tb(e,i+1,o.copy(r.to,o.to)));continue}else{o.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,o.from),tb(e,i,r.copy(o.from,r.to)));break}}}return e}function tb(t,e,n){for(;e<t.length&&zo(n,t[e])>0;)e++;t.splice(e,0,n)}function Cp(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=ht&&e.push(r)}),t.cursorWrapper&&e.push(je.create(t.state.doc,[t.cursorWrapper.deco])),gi.from(e)}const pL={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},mL=Gt&&Fi<=11;class gL{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class yL{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new gL,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);Gt&&Fi<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),mL&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,pL)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(qw(this.view)){if(this.suppressingSelectionUpdates)return Ur(this.view);if(Gt&&Fi<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&es(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let o=e.focusNode;o;o=Aa(o))n.add(o);for(let o=e.anchorNode;o;o=Aa(o))if(n.has(o)){r=o;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&qw(e)&&!this.ignoreSelectionChange(r),o=-1,s=-1,a=!1,l=[];if(e.editable)for(let u=0;u<n.length;u++){let d=this.registerMutation(n[u],l);d&&(o=o<0?d.from:Math.min(d.from,o),s=s<0?d.to:Math.max(d.to,s),d.typeOver&&(a=!0))}if(Jn&&l.length){let u=l.filter(d=>d.nodeName=="BR");if(u.length==2){let[d,f]=u;d.parentNode&&d.parentNode.parentNode==f.parentNode?f.remove():d.remove()}else{let{focusNode:d}=this.currentSelection;for(let f of u){let h=f.parentNode;h&&h.nodeName=="LI"&&(!d||wL(e,d)!=h)&&f.remove()}}}let c=null;o<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Xf(r)&&(c=Ev(e))&&c.eq(re.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Ur(e),this.currentSelection.set(r),e.scrollToSelection()):(o>-1||i)&&(o>-1&&(e.docView.markDirty(o,s),vL(e)),this.handleDOMChange(o,s,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Ur(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++){let d=e.addedNodes[u];n.push(d),d.nodeType==3&&(this.lastChangedTextNode=d)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,o=e.nextSibling;if(Gt&&Fi<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:d,nextSibling:f}=e.addedNodes[u];(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(i=d),(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(o=f)}let s=i&&i.parentNode==e.target?it(i)+1:0,a=r.localPosFromDOM(e.target,s,-1),l=o&&o.parentNode==e.target?it(o):e.target.childNodes.length,c=r.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let nb=new WeakMap,rb=!1;function vL(t){if(!nb.has(t)&&(nb.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=Jn,rb)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),rb=!0}}function ib(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,o=e.endOffset,s=t.domAtPos(t.state.selection.anchor);return es(s.node,s.offset,i,o)&&([n,r,i,o]=[i,o,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:o}}function xL(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return ib(t,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?ib(t,n):null}function wL(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function bL(t,e,n){let{node:r,fromOffset:i,toOffset:o,from:s,to:a}=t.docView.parseRange(e,n),l=t.domSelectionRange(),c,u=l.anchorNode;if(u&&t.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:l.anchorOffset}],Xf(l)||c.push({node:l.focusNode,offset:l.focusOffset})),mt&&t.input.lastKeyCode===8)for(let x=o;x>i;x--){let v=r.childNodes[x-1],w=v.pmViewDesc;if(v.nodeName=="BR"&&!w){o=x;break}if(!w||w.size)break}let d=t.state.doc,f=t.someProp("domParser")||$i.fromSchema(t.state.schema),h=d.resolve(s),p=null,g=f.parse(r,{topNode:h.parent,topMatch:h.parent.contentMatchAt(h.index()),topOpen:!0,from:i,to:o,preserveWhitespace:h.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:SL,context:h});if(c&&c[0].pos!=null){let x=c[0].pos,v=c[1]&&c[1].pos;v==null&&(v=x),p={anchor:x+s,head:v+s}}return{doc:g,sel:p,from:s,to:a}}function SL(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(_t&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||_t&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const CL=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function kL(t,e,n,r,i){let o=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let O=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,T=Ev(t,O);if(T&&!t.state.selection.eq(T)){if(mt&&$r&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",j=>j(t,xo(13,"Enter"))))return;let D=t.state.tr.setSelection(T);O=="pointer"?D.setMeta("pointer",!0):O=="key"&&D.scrollIntoView(),o&&D.setMeta("composition",o),t.dispatch(D)}return}let s=t.state.doc.resolve(e),a=s.sharedDepth(n);e=s.before(a+1),n=t.state.doc.resolve(n).after(a+1);let l=t.state.selection,c=bL(t,e,n),u=t.state.doc,d=u.slice(c.from,c.to),f,h;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(f=t.state.selection.to,h="end"):(f=t.state.selection.from,h="start"),t.input.lastKeyCode=null;let p=_L(d.content,c.doc.content,c.from,f,h);if(p&&t.input.domChangeCount++,(Da&&t.input.lastIOSEnter>Date.now()-225||$r)&&i.some(O=>O.nodeType==1&&!CL.test(O.nodeName))&&(!p||p.endA>=p.endB)&&t.someProp("handleKeyDown",O=>O(t,xo(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!p)if(r&&l instanceof ne&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))p={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let O=ob(t,t.state.doc,c.sel);if(O&&!O.eq(t.state.selection)){let T=t.state.tr.setSelection(O);o&&T.setMeta("composition",o),t.dispatch(T)}}return}t.state.selection.from<t.state.selection.to&&p.start==p.endB&&t.state.selection instanceof ne&&(p.start>t.state.selection.from&&p.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?p.start=t.state.selection.from:p.endA<t.state.selection.to&&p.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(p.endB+=t.state.selection.to-p.endA,p.endA=t.state.selection.to)),Gt&&Fi<=11&&p.endB==p.start+1&&p.endA==p.start&&p.start>c.from&&c.doc.textBetween(p.start-c.from-1,p.start-c.from+1)==" "&&(p.start--,p.endA--,p.endB--);let g=c.doc.resolveNoCache(p.start-c.from),x=c.doc.resolveNoCache(p.endB-c.from),v=u.resolve(p.start),w=g.sameParent(x)&&g.parent.inlineContent&&v.end()>=p.endA,S;if((Da&&t.input.lastIOSEnter>Date.now()-225&&(!w||i.some(O=>O.nodeName=="DIV"||O.nodeName=="P"))||!w&&g.pos<c.doc.content.size&&!g.sameParent(x)&&(S=re.findFrom(c.doc.resolve(g.pos+1),1,!0))&&S.head==x.pos)&&t.someProp("handleKeyDown",O=>O(t,xo(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>p.start&&TL(u,p.start,p.endA,g,x)&&t.someProp("handleKeyDown",O=>O(t,xo(8,"Backspace")))){$r&&mt&&t.domObserver.suppressSelectionUpdates();return}mt&&p.endB==p.start&&(t.input.lastChromeDelete=Date.now()),$r&&!w&&g.start()!=x.start()&&x.parentOffset==0&&g.depth==x.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==p.endA&&(p.endB-=2,x=c.doc.resolveNoCache(p.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(O){return O(t,xo(13,"Enter"))})},20));let b=p.start,C=p.endA,k,E,_;if(w){if(g.pos==x.pos)Gt&&Fi<=11&&g.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>Ur(t),20)),k=t.state.tr.delete(b,C),E=u.resolve(p.start).marksAcross(u.resolve(p.endA));else if(p.endA==p.endB&&(_=EL(g.parent.content.cut(g.parentOffset,x.parentOffset),v.parent.content.cut(v.parentOffset,p.endA-v.start()))))k=t.state.tr,_.type=="add"?k.addMark(b,C,_.mark):k.removeMark(b,C,_.mark);else if(g.parent.child(g.index()).isText&&g.index()==x.index()-(x.textOffset?0:1)){let O=g.parent.textBetween(g.parentOffset,x.parentOffset);if(t.someProp("handleTextInput",T=>T(t,b,C,O)))return;k=t.state.tr.insertText(O,b,C)}}if(k||(k=t.state.tr.replace(b,C,c.doc.slice(p.start-c.from,p.endB-c.from))),c.sel){let O=ob(t,k.doc,c.sel);O&&!(mt&&t.composing&&O.empty&&(p.start!=p.endB||t.input.lastChromeDelete<Date.now()-100)&&(O.head==b||O.head==k.mapping.map(C)-1)||Gt&&O.empty&&O.head==b)&&k.setSelection(O)}E&&k.ensureMarks(E),o&&k.setMeta("composition",o),t.dispatch(k.scrollIntoView())}function ob(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:Tv(t,e.resolve(n.anchor),e.resolve(n.head))}function EL(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,o=r,s,a,l;for(let u=0;u<r.length;u++)i=r[u].removeFromSet(i);for(let u=0;u<n.length;u++)o=n[u].removeFromSet(o);if(i.length==1&&o.length==0)a=i[0],s="add",l=u=>u.mark(a.addToSet(u.marks));else if(i.length==0&&o.length==1)a=o[0],s="remove",l=u=>u.mark(a.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(l(e.child(u)));if(N.from(c).eq(t))return{mark:a,type:s}}function TL(t,e,n,r,i){if(n-e<=i.pos-r.pos||kp(r,!0,!1)<i.pos)return!1;let o=t.resolve(e);if(!r.parent.isTextblock){let a=o.nodeAfter;return a!=null&&n==e+a.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let s=t.resolve(kp(o,!0,!0));return!s.parent.isTextblock||s.pos>n||kp(s,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(s.parent.content)}function kp(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let o=t.node(r).maybeChild(t.indexAfter(r));for(;o&&!o.isLeaf;)o=o.firstChild,i++}return i}function _L(t,e,n,r,i){let o=t.findDiffStart(e,n);if(o==null)return null;let{a:s,b:a}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let l=Math.max(0,o-Math.min(s,a));r-=s+l-o}if(s<o&&t.size<e.size){let l=r<=o&&r>=s?o-r:0;o-=l,o&&o<e.size&&sb(e.textBetween(o-1,o+1))&&(o+=l?1:-1),a=o+(a-s),s=o}else if(a<o){let l=r<=o&&r>=a?o-r:0;o-=l,o&&o<t.size&&sb(t.textBetween(o-1,o+1))&&(o+=l?1:-1),s=o+(s-a),a=o}return{start:o,endA:s,endB:a}}function sb(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class RL{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new qj,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(db),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=cb(this),lb(this),this.nodeViews=ub(this),this.docView=zw(this.state.doc,ab(this),Cp(this),this.dom,this),this.domObserver=new yL(this,(r,i,o,s)=>kL(this,r,i,o,s)),this.domObserver.start(),Gj(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Ig(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(db),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let i=this.state,o=!1,s=!1;e.storedMarks&&this.composing&&(YE(this),s=!0),this.state=e;let a=i.plugins!=e.plugins||this._props.plugins!=n.plugins;if(a||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let h=ub(this);PL(h,this.nodeViews)&&(this.nodeViews=h,o=!0)}(a||n.handleDOMEvents!=this._props.handleDOMEvents)&&Ig(this),this.editable=cb(this),lb(this);let l=Cp(this),c=ab(this),u=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",d=o||!this.docView.matchesNode(e.doc,c,l);(d||!e.selection.eq(i.selection))&&(s=!0);let f=u=="preserve"&&s&&this.dom.style.overflowAnchor==null&&lj(this);if(s){this.domObserver.stop();let h=d&&(Gt||mt)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&OL(i.selection,e.selection);if(d){let p=mt?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=aL(this)),(o||!this.docView.update(e.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=zw(e.doc,c,l,this.dom,this)),p&&!this.trackWrites&&(h=!0)}h||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&Aj(this))?Ur(this,h):($E(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():f&&cj(f)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof Q){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&Nw(this,n.getBoundingClientRect(),e)}else Nw(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let o=r.from+(this.state.doc.content.size-n.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==r.node&&(i=o)}this.dragging=new XE(e.slice,e.move,i<0?void 0:Q.create(this.state.doc,i))}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let s=0;s<this.directPlugins.length;s++){let a=this.directPlugins[s].props[e];if(a!=null&&(i=n?n(a):a))return i}let o=this.state.plugins;if(o)for(let s=0;s<o.length;s++){let a=o[s].props[e];if(a!=null&&(i=n?n(a):a))return i}}hasFocus(){if(Gt){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&uj(this.dom),Ur(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return mj(this,e)}coordsAtPos(e,n=1){return PE(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return wj(this,n||this.state,e)}pasteHTML(e,n){return gc(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return gc(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return _v(this,e)}destroy(){this.docView&&(Jj(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Cp(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,Q2())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return Qj(this,e)}dispatch(e){let n=this._props.dispatchTransaction;n?n.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?_t&&this.root.nodeType===11&&nj(this.dom.ownerDocument)==this.dom&&xL(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function ab(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[Ht.node(0,t.state.doc.content.size,e)]}function lb(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:Ht.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function cb(t){return!t.someProp("editable",e=>e(t.state)===!1)}function OL(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function ub(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function PL(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function db(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Ki={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},af={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},ML=typeof navigator<"u"&&/Mac/.test(navigator.platform),AL=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var ot=0;ot<10;ot++)Ki[48+ot]=Ki[96+ot]=String(ot);for(var ot=1;ot<=24;ot++)Ki[ot+111]="F"+ot;for(var ot=65;ot<=90;ot++)Ki[ot]=String.fromCharCode(ot+32),af[ot]=String.fromCharCode(ot);for(var Ep in Ki)af.hasOwnProperty(Ep)||(af[Ep]=Ki[Ep]);function DL(t){var e=ML&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||AL&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?af:Ki)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const IL=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function NL(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,o,s;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))o=!0;else if(/^mod$/i.test(l))IL?s=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),s&&(n="Meta-"+n),o&&(n="Shift-"+n),n}function jL(t){let e=Object.create(null);for(let n in t)e[NL(n)]=t[n];return e}function Tp(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function LL(t){return new lt({props:{handleKeyDown:rT(t)}})}function rT(t){let e=jL(t);return function(n,r){let i=DL(r),o,s=e[Tp(i,r)];if(s&&s(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let a=e[Tp(i,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.shiftKey||r.altKey||r.metaKey||i.charCodeAt(0)>127)&&(o=Ki[r.keyCode])&&o!=i){let a=e[Tp(o,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}const $L=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function iT(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const FL=(t,e,n)=>{let r=iT(t,n);if(!r)return!1;let i=Dv(r);if(!i){let s=r.blockRange(),a=s&&Qa(s);return a==null?!1:(e&&e(t.tr.lift(s,a).scrollIntoView()),!0)}let o=i.nodeBefore;if(lT(t,i,e,-1))return!0;if(r.parent.content.size==0&&(Ia(o,"end")||Q.isSelectable(o)))for(let s=r.depth;;s--){let a=Yf(t.doc,r.before(s),r.after(s),V.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=t.tr.step(a);l.setSelection(Ia(o,"end")?re.findFrom(l.doc.resolve(l.mapping.map(i.pos,-1)),-1):Q.create(l.doc,i.pos-o.nodeSize)),e(l.scrollIntoView())}return!0}if(s==1||r.node(s-1).childCount>1)break}return o.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-o.nodeSize,i.pos).scrollIntoView()),!0):!1},BL=(t,e,n)=>{let r=iT(t,n);if(!r)return!1;let i=Dv(r);return i?oT(t,i,e):!1},zL=(t,e,n)=>{let r=sT(t,n);if(!r)return!1;let i=Iv(r);return i?oT(t,i,e):!1};function oT(t,e,n){let r=e.nodeBefore,i=r,o=e.pos-1;for(;!i.isTextblock;o--){if(i.type.spec.isolating)return!1;let u=i.lastChild;if(!u)return!1;i=u}let s=e.nodeAfter,a=s,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let u=a.firstChild;if(!u)return!1;a=u}let c=Yf(t.doc,o,l,V.empty);if(!c||c.from!=o||c instanceof Ge&&c.slice.size>=l-o)return!1;if(n){let u=t.tr.step(c);u.setSelection(ne.create(u.doc,o)),n(u.scrollIntoView())}return!0}function Ia(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const UL=(t,e,n)=>{let{$head:r,empty:i}=t.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;o=Dv(r)}let s=o&&o.nodeBefore;return!s||!Q.isSelectable(s)?!1:(e&&e(t.tr.setSelection(Q.create(t.doc,o.pos-s.nodeSize)).scrollIntoView()),!0)};function Dv(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function sT(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const VL=(t,e,n)=>{let r=sT(t,n);if(!r)return!1;let i=Iv(r);if(!i)return!1;let o=i.nodeAfter;if(lT(t,i,e,1))return!0;if(r.parent.content.size==0&&(Ia(o,"start")||Q.isSelectable(o))){let s=Yf(t.doc,r.before(),r.after(),V.empty);if(s&&s.slice.size<s.to-s.from){if(e){let a=t.tr.step(s);a.setSelection(Ia(o,"start")?re.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):Q.create(a.doc,a.mapping.map(i.pos))),e(a.scrollIntoView())}return!0}}return o.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+o.nodeSize).scrollIntoView()),!0):!1},HL=(t,e,n)=>{let{$head:r,empty:i}=t.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;o=Iv(r)}let s=o&&o.nodeAfter;return!s||!Q.isSelectable(s)?!1:(e&&e(t.tr.setSelection(Q.create(t.doc,o.pos)).scrollIntoView()),!0)};function Iv(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const WL=(t,e)=>{let n=t.selection,r=n instanceof Q,i;if(r){if(n.node.isTextblock||!to(t.doc,n.from))return!1;i=n.from}else if(i=Jf(t.doc,n.from,-1),i==null)return!1;if(e){let o=t.tr.join(i);r&&o.setSelection(Q.create(o.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(o.scrollIntoView())}return!0},KL=(t,e)=>{let n=t.selection,r;if(n instanceof Q){if(n.node.isTextblock||!to(t.doc,n.to))return!1;r=n.to}else if(r=Jf(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},qL=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),o=i&&Qa(i);return o==null?!1:(e&&e(t.tr.lift(i,o).scrollIntoView()),!0)},GL=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function aT(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const JL=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),o=n.indexAfter(-1),s=aT(i.contentMatchAt(o));if(!s||!i.canReplaceWith(o,o,s))return!1;if(e){let a=n.after(),l=t.tr.replaceWith(a,a,s.createAndFill());l.setSelection(re.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},YL=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof Sn||r.parent.inlineContent||i.parent.inlineContent)return!1;let o=aT(i.parent.contentMatchAt(i.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let s=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,a=t.tr.insert(s,o.createAndFill());a.setSelection(ne.create(a.doc,s+1)),e(a.scrollIntoView())}return!0},QL=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let o=n.before();if(ra(t.doc,o))return e&&e(t.tr.split(o).scrollIntoView()),!0}let r=n.blockRange(),i=r&&Qa(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)},XL=(t,e)=>{let{$from:n,to:r}=t.selection,i,o=n.sharedDepth(r);return o==0?!1:(i=n.before(o),e&&e(t.tr.setSelection(Q.create(t.doc,i))),!0)};function ZL(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,o=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(o-1,o)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(i.isTextblock||to(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function lT(t,e,n,r){let i=e.nodeBefore,o=e.nodeAfter,s,a,l=i.type.spec.isolating||o.type.spec.isolating;if(!l&&ZL(t,e,n))return!0;let c=!l&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(s=(a=i.contentMatchAt(i.childCount)).findWrapping(o.type))&&a.matchType(s[0]||o.type).validEnd){if(n){let h=e.pos+o.nodeSize,p=N.empty;for(let v=s.length-1;v>=0;v--)p=N.from(s[v].create(null,p));p=N.from(i.copy(p));let g=t.tr.step(new Ye(e.pos-1,h,e.pos,h,new V(p,1,0),s.length,!0)),x=g.doc.resolve(h+2*s.length);x.nodeAfter&&x.nodeAfter.type==i.type&&to(g.doc,x.pos)&&g.join(x.pos),n(g.scrollIntoView())}return!0}let u=o.type.spec.isolating||r>0&&l?null:re.findFrom(e,1),d=u&&u.$from.blockRange(u.$to),f=d&&Qa(d);if(f!=null&&f>=e.depth)return n&&n(t.tr.lift(d,f).scrollIntoView()),!0;if(c&&Ia(o,"start",!0)&&Ia(i,"end")){let h=i,p=[];for(;p.push(h),!h.isTextblock;)h=h.lastChild;let g=o,x=1;for(;!g.isTextblock;g=g.firstChild)x++;if(h.canReplace(h.childCount,h.childCount,g.content)){if(n){let v=N.empty;for(let S=p.length-1;S>=0;S--)v=N.from(p[S].copy(v));let w=t.tr.step(new Ye(e.pos-p.length,e.pos+o.nodeSize,e.pos+x,e.pos+o.nodeSize-x,new V(v,p.length,0),0,!0));n(w.scrollIntoView())}return!0}}return!1}function cT(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,o=i.depth;for(;i.node(o).isInline;){if(!o)return!1;o--}return i.node(o).isTextblock?(n&&n(e.tr.setSelection(ne.create(e.doc,t<0?i.start(o):i.end(o)))),!0):!1}}const e$=cT(-1),t$=cT(1);function n$(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,s=i.blockRange(o),a=s&&Sv(s,t,e);return a?(r&&r(n.tr.wrap(s,a).scrollIntoView()),!0):!1}}function fb(t,e=null){return function(n,r){let i=!1;for(let o=0;o<n.selection.ranges.length&&!i;o++){let{$from:{pos:s},$to:{pos:a}}=n.selection.ranges[o];n.doc.nodesBetween(s,a,(l,c)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)i=!0;else{let u=n.doc.resolve(c),d=u.index();i=u.parent.canReplaceWith(d,d+1,t)}})}if(!i)return!1;if(r){let o=n.tr;for(let s=0;s<n.selection.ranges.length;s++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[s];o.setBlockType(a,l,t,e)}r(o.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function r$(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,s=i.blockRange(o);if(!s)return!1;let a=r?n.tr:null;return i$(a,s,t,e)?(r&&r(a.scrollIntoView()),!0):!1}}function i$(t,e,n,r=null){let i=!1,o=e,s=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let l=s.resolve(e.start-2);o=new Zd(l,l,e.depth),e.endIndex<e.parent.childCount&&(e=new Zd(e.$from,s.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let a=Sv(o,n,r,e);return a?(t&&o$(t,e,a,i,n),!0):!1}function o$(t,e,n,r,i){let o=N.empty;for(let u=n.length-1;u>=0;u--)o=N.from(n[u].type.create(n[u].attrs,o));t.step(new Ye(e.start-(r?2:0),e.end,e.start,e.end,new V(o,0,0),n.length,!0));let s=0;for(let u=0;u<n.length;u++)n[u].type==i&&(s=u+1);let a=n.length-s,l=e.start+n.length-(r?2:0),c=e.parent;for(let u=e.startIndex,d=e.endIndex,f=!0;u<d;u++,f=!1)!f&&ra(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=c.child(u).nodeSize;return t}function s$(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,s=>s.childCount>0&&s.firstChild.type==t);return o?n?r.node(o.depth-1).type==t?a$(e,n,t,o):l$(e,n,o):!0:!1}}function a$(t,e,n,r){let i=t.tr,o=r.end,s=r.$to.end(r.depth);o<s&&(i.step(new Ye(o-1,s,o,s,new V(N.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Zd(i.doc.resolve(r.$from.pos),i.doc.resolve(s),r.depth));const a=Qa(r);if(a==null)return!1;i.lift(r,a);let l=i.doc.resolve(i.mapping.map(o,-1)-1);return to(i.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&i.join(l.pos),e(i.scrollIntoView()),!0}function l$(t,e,n){let r=t.tr,i=n.parent;for(let h=n.end,p=n.endIndex-1,g=n.startIndex;p>g;p--)h-=i.child(p).nodeSize,r.delete(h-1,h+1);let o=r.doc.resolve(n.start),s=o.nodeAfter;if(r.mapping.map(n.end)!=n.start+o.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==i.childCount,c=o.node(-1),u=o.index(-1);if(!c.canReplace(u+(a?0:1),u+1,s.content.append(l?N.empty:N.from(i))))return!1;let d=o.pos,f=d+s.nodeSize;return r.step(new Ye(d-(a?1:0),f+(l?1:0),d+1,f-1,new V((a?N.empty:N.from(i.copy(N.empty))).append(l?N.empty:N.from(i.copy(N.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function c$(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,c=>c.childCount>0&&c.firstChild.type==t);if(!o)return!1;let s=o.startIndex;if(s==0)return!1;let a=o.parent,l=a.child(s-1);if(l.type!=t)return!1;if(n){let c=l.lastChild&&l.lastChild.type==a.type,u=N.from(c?t.create():null),d=new V(N.from(t.create(null,N.from(a.type.create(null,u)))),c?3:1,0),f=o.start,h=o.end;n(e.tr.step(new Ye(f-(c?3:1),h,f,h,d,1,!0)).scrollIntoView())}return!0}}function th(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:o}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return o},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,o=n.storedMarks,n}}}class nh{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:r}=this,{view:i}=n,{tr:o}=r,s=this.buildProps(o);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...u)=>{const d=l(...u)(s);return!o.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(o),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:r,editor:i,state:o}=this,{view:s}=i,a=[],l=!!e,c=e||o.tr,u=()=>(!l&&n&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(c),a.every(f=>f===!0)),d={...Object.fromEntries(Object.entries(r).map(([f,h])=>[f,(...g)=>{const x=this.buildProps(c,n),v=h(...g)(x);return a.push(v),d}])),run:u};return d}createCan(e){const{rawCommands:n,state:r}=this,i=!1,o=e||r.tr,s=this.buildProps(o,i);return{...Object.fromEntries(Object.entries(n).map(([l,c])=>[l,(...u)=>c(...u)({...s,dispatch:void 0})])),chain:()=>this.createChain(o,i)}}buildProps(e,n=!0){const{rawCommands:r,editor:i,state:o}=this,{view:s}=i,a={tr:e,editor:i,view:s,state:th({state:o,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e,n),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...u)=>c(...u)(a)]))}};return a}}class u${constructor(){this.callbacks={}}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),this}emit(e,...n){const r=this.callbacks[e];return r&&r.forEach(i=>i.apply(this,n)),this}off(e,n){const r=this.callbacks[e];return r&&(n?this.callbacks[e]=r.filter(i=>i!==n):delete this.callbacks[e]),this}once(e,n){const r=(...i)=>{this.off(e,r),n.apply(this,i)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}}function q(t,e,n){return t.config[e]===void 0&&t.parent?q(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?q(t.parent,e,n):null}):t.config[e]}function rh(t){const e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function uT(t){const e=[],{nodeExtensions:n,markExtensions:r}=rh(t),i=[...n,...r],o={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(s=>{const a={name:s.name,options:s.options,storage:s.storage,extensions:i},l=q(s,"addGlobalAttributes",a);if(!l)return;l().forEach(u=>{u.types.forEach(d=>{Object.entries(u.attributes).forEach(([f,h])=>{e.push({type:d,name:f,attribute:{...o,...h}})})})})}),i.forEach(s=>{const a={name:s.name,options:s.options,storage:s.storage},l=q(s,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([u,d])=>{const f={...o,...d};typeof(f==null?void 0:f.default)=="function"&&(f.default=f.default()),f!=null&&f.isRequired&&(f==null?void 0:f.default)===void 0&&delete f.default,e.push({type:s.name,name:u,attribute:f})})}),e}function Xe(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function Pt(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([i,o])=>{if(!r[i]){r[i]=o;return}if(i==="class"){const a=o?String(o).split(" "):[],l=r[i]?r[i].split(" "):[],c=a.filter(u=>!l.includes(u));r[i]=[...l,...c].join(" ")}else if(i==="style"){const a=o?o.split(";").map(u=>u.trim()).filter(Boolean):[],l=r[i]?r[i].split(";").map(u=>u.trim()).filter(Boolean):[],c=new Map;l.forEach(u=>{const[d,f]=u.split(":").map(h=>h.trim());c.set(d,f)}),a.forEach(u=>{const[d,f]=u.split(":").map(h=>h.trim());c.set(d,f)}),r[i]=Array.from(c.entries()).map(([u,d])=>`${u}: ${d}`).join("; ")}else r[i]=o}),r},{})}function Ng(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>Pt(n,r),{})}function dT(t){return typeof t=="function"}function oe(t,e=void 0,...n){return dT(t)?e?t.bind(e)(...n):t(...n):t}function d$(t={}){return Object.keys(t).length===0&&t.constructor===Object}function f$(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function hb(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const i=e.reduce((o,s)=>{const a=s.attribute.parseHTML?s.attribute.parseHTML(n):f$(n.getAttribute(s.name));return a==null?o:{...o,[s.name]:a}},{});return{...r,...i}}}}function pb(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&d$(n)?!1:n!=null))}function h$(t,e){var n;const r=uT(t),{nodeExtensions:i,markExtensions:o}=rh(t),s=(n=i.find(c=>q(c,"topNode")))===null||n===void 0?void 0:n.name,a=Object.fromEntries(i.map(c=>{const u=r.filter(v=>v.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},f=t.reduce((v,w)=>{const S=q(w,"extendNodeSchema",d);return{...v,...S?S(c):{}}},{}),h=pb({...f,content:oe(q(c,"content",d)),marks:oe(q(c,"marks",d)),group:oe(q(c,"group",d)),inline:oe(q(c,"inline",d)),atom:oe(q(c,"atom",d)),selectable:oe(q(c,"selectable",d)),draggable:oe(q(c,"draggable",d)),code:oe(q(c,"code",d)),whitespace:oe(q(c,"whitespace",d)),linebreakReplacement:oe(q(c,"linebreakReplacement",d)),defining:oe(q(c,"defining",d)),isolating:oe(q(c,"isolating",d)),attrs:Object.fromEntries(u.map(v=>{var w;return[v.name,{default:(w=v==null?void 0:v.attribute)===null||w===void 0?void 0:w.default}]}))}),p=oe(q(c,"parseHTML",d));p&&(h.parseDOM=p.map(v=>hb(v,u)));const g=q(c,"renderHTML",d);g&&(h.toDOM=v=>g({node:v,HTMLAttributes:Ng(v,u)}));const x=q(c,"renderText",d);return x&&(h.toText=x),[c.name,h]})),l=Object.fromEntries(o.map(c=>{const u=r.filter(x=>x.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},f=t.reduce((x,v)=>{const w=q(v,"extendMarkSchema",d);return{...x,...w?w(c):{}}},{}),h=pb({...f,inclusive:oe(q(c,"inclusive",d)),excludes:oe(q(c,"excludes",d)),group:oe(q(c,"group",d)),spanning:oe(q(c,"spanning",d)),code:oe(q(c,"code",d)),attrs:Object.fromEntries(u.map(x=>{var v;return[x.name,{default:(v=x==null?void 0:x.attribute)===null||v===void 0?void 0:v.default}]}))}),p=oe(q(c,"parseHTML",d));p&&(h.parseDOM=p.map(x=>hb(x,u)));const g=q(c,"renderHTML",d);return g&&(h.toDOM=x=>g({mark:x,HTMLAttributes:Ng(x,u)})),[c.name,h]}));return new sE({topNode:s,nodes:a,marks:l})}function _p(t,e){return e.nodes[t]||e.marks[t]||null}function mb(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function Nv(t,e){const n=us.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}const p$=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(i,o,s,a)=>{var l,c;const u=((c=(l=i.type.spec).toText)===null||c===void 0?void 0:c.call(l,{node:i,pos:o,parent:s,index:a}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?u:u.slice(0,Math.max(0,r-o))}),n};function jv(t){return Object.prototype.toString.call(t)==="[object RegExp]"}class ih{constructor(e){this.find=e.find,this.handler=e.handler}}const m$=(t,e)=>{if(jv(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function $u(t){var e;const{editor:n,from:r,to:i,text:o,rules:s,plugin:a}=t,{view:l}=n;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||!((e=c.nodeBefore||c.nodeAfter)===null||e===void 0)&&e.marks.find(f=>f.type.spec.code))return!1;let u=!1;const d=p$(c)+o;return s.forEach(f=>{if(u)return;const h=m$(d,f.find);if(!h)return;const p=l.state.tr,g=th({state:l.state,transaction:p}),x={from:r-(h[0].length-o.length),to:i},{commands:v,chain:w,can:S}=new nh({editor:n,state:g});f.handler({state:g,range:x,match:h,commands:v,chain:w,can:S})===null||!p.steps.length||(p.setMeta(a,{transform:p,from:r,to:i,text:o}),l.dispatch(p),u=!0)}),u}function g$(t){const{editor:e,rules:n}=t,r=new lt({state:{init(){return null},apply(i,o,s){const a=i.getMeta(r);if(a)return a;const l=i.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:u}=l;typeof u=="string"?u=u:u=Nv(N.from(u),s.schema);const{from:d}=l,f=d+u.length;$u({editor:e,from:d,to:f,text:u,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:o}},props:{handleTextInput(i,o,s,a){return $u({editor:e,from:o,to:s,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:o}=i.state.selection;o&&$u({editor:e,from:o.pos,to:o.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,o){if(o.key!=="Enter")return!1;const{$cursor:s}=i.state.selection;return s?$u({editor:e,from:s.pos,to:s.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function y$(t){return Object.prototype.toString.call(t).slice(8,-1)}function Fu(t){return y$(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function oh(t,e){const n={...t};return Fu(t)&&Fu(e)&&Object.keys(e).forEach(r=>{Fu(e[r])&&Fu(t[r])?n[r]=oh(t[r],e[r]):n[r]=e[r]}),n}class qi{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=oe(q(this,"addOptions",{name:this.name}))),this.storage=oe(q(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new qi(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>oh(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new qi(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=oe(q(n,"addOptions",{name:n.name})),n.storage=oe(q(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const s=i.marks();if(!!!s.find(c=>(c==null?void 0:c.type.name)===n.name))return!1;const l=s.find(c=>(c==null?void 0:c.type.name)===n.name);return l&&r.removeStoredMark(l),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}}function v$(t){return typeof t=="number"}class x${constructor(e){this.find=e.find,this.handler=e.handler}}const w$=(t,e,n)=>{if(jv(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(i=>{const o=[i.text];return o.index=i.index,o.input=t,o.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),o.push(i.replaceWith)),o}):[]};function b$(t){const{editor:e,state:n,from:r,to:i,rule:o,pasteEvent:s,dropEvent:a}=t,{commands:l,chain:c,can:u}=new nh({editor:e,state:n}),d=[];return n.doc.nodesBetween(r,i,(h,p)=>{if(!h.isTextblock||h.type.spec.code)return;const g=Math.max(r,p),x=Math.min(i,p+h.content.size),v=h.textBetween(g-p,x-p,void 0,"");w$(v,o.find,s).forEach(S=>{if(S.index===void 0)return;const b=g+S.index+1,C=b+S[0].length,k={from:n.tr.mapping.map(b),to:n.tr.mapping.map(C)},E=o.handler({state:n,range:k,match:S,commands:l,chain:c,can:u,pasteEvent:s,dropEvent:a});d.push(E)})}),d.every(h=>h!==null)}let Bu=null;const S$=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)===null||e===void 0||e.setData("text/html",t),n};function C$(t){const{editor:e,rules:n}=t;let r=null,i=!1,o=!1,s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const l=({state:u,from:d,to:f,rule:h,pasteEvt:p})=>{const g=u.tr,x=th({state:u,transaction:g});if(!(!b$({editor:e,state:x,from:Math.max(d-1,0),to:f.b-1,rule:h,pasteEvent:p,dropEvent:a})||!g.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,g}};return n.map(u=>new lt({view(d){const f=p=>{var g;r=!((g=d.dom.parentElement)===null||g===void 0)&&g.contains(p.target)?d.dom.parentElement:null,r&&(Bu=e)},h=()=>{Bu&&(Bu=null)};return window.addEventListener("dragstart",f),window.addEventListener("dragend",h),{destroy(){window.removeEventListener("dragstart",f),window.removeEventListener("dragend",h)}}},props:{handleDOMEvents:{drop:(d,f)=>{if(o=r===d.dom.parentElement,a=f,!o){const h=Bu;h&&setTimeout(()=>{const p=h.state.selection;p&&h.commands.deleteRange({from:p.from,to:p.to})},10)}return!1},paste:(d,f)=>{var h;const p=(h=f.clipboardData)===null||h===void 0?void 0:h.getData("text/html");return s=f,i=!!(p!=null&&p.includes("data-pm-slice")),!1}}},appendTransaction:(d,f,h)=>{const p=d[0],g=p.getMeta("uiEvent")==="paste"&&!i,x=p.getMeta("uiEvent")==="drop"&&!o,v=p.getMeta("applyPasteRules"),w=!!v;if(!g&&!x&&!w)return;if(w){let{text:C}=v;typeof C=="string"?C=C:C=Nv(N.from(C),h.schema);const{from:k}=v,E=k+C.length,_=S$(C);return l({rule:u,state:h,from:k,to:{b:E},pasteEvt:_})}const S=f.doc.content.findDiffStart(h.doc.content),b=f.doc.content.findDiffEnd(h.doc.content);if(!(!v$(S)||!b||S===b.b))return l({rule:u,state:h,from:S,to:b,pasteEvt:s})}}))}function k$(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}class Gs{constructor(e,n){this.splittableMarks=[],this.editor=n,this.extensions=Gs.resolve(e),this.schema=h$(this.extensions,n),this.setupExtensions()}static resolve(e){const n=Gs.sort(Gs.flatten(e)),r=k$(n.map(i=>i.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),n}static flatten(e){return e.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},i=q(n,"addExtensions",r);return i?[n,...this.flatten(i())]:n}).flat(10)}static sort(e){return e.sort((r,i)=>{const o=q(r,"priority")||100,s=q(i,"priority")||100;return o>s?-1:o<s?1:0})}get commands(){return this.extensions.reduce((e,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:_p(n.name,this.schema)},i=q(n,"addCommands",r);return i?{...e,...i()}:e},{})}get plugins(){const{editor:e}=this,n=Gs.sort([...this.extensions].reverse()),r=[],i=[],o=n.map(s=>{const a={name:s.name,options:s.options,storage:s.storage,editor:e,type:_p(s.name,this.schema)},l=[],c=q(s,"addKeyboardShortcuts",a);let u={};if(s.type==="mark"&&q(s,"exitable",a)&&(u.ArrowRight=()=>qi.handleExit({editor:e,mark:s})),c){const g=Object.fromEntries(Object.entries(c()).map(([x,v])=>[x,()=>v({editor:e})]));u={...u,...g}}const d=LL(u);l.push(d);const f=q(s,"addInputRules",a);mb(s,e.options.enableInputRules)&&f&&r.push(...f());const h=q(s,"addPasteRules",a);mb(s,e.options.enablePasteRules)&&h&&i.push(...h());const p=q(s,"addProseMirrorPlugins",a);if(p){const g=p();l.push(...g)}return l}).flat();return[g$({editor:e,rules:r}),...C$({editor:e,rules:i}),...o]}get attributes(){return uT(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:n}=rh(this.extensions);return Object.fromEntries(n.filter(r=>!!q(r,"addNodeView")).map(r=>{const i=this.attributes.filter(l=>l.type===r.name),o={name:r.name,options:r.options,storage:r.storage,editor:e,type:Xe(r.name,this.schema)},s=q(r,"addNodeView",o);if(!s)return[];const a=(l,c,u,d,f)=>{const h=Ng(l,i);return s()({node:l,view:c,getPos:u,decorations:d,innerDecorations:f,editor:e,extension:r,HTMLAttributes:h})};return[r.name,a]}))}setupExtensions(){this.extensions.forEach(e=>{var n;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:_p(e.name,this.schema)};e.type==="mark"&&(!((n=oe(q(e,"keepOnSplit",r)))!==null&&n!==void 0)||n)&&this.splittableMarks.push(e.name);const i=q(e,"onBeforeCreate",r),o=q(e,"onCreate",r),s=q(e,"onUpdate",r),a=q(e,"onSelectionUpdate",r),l=q(e,"onTransaction",r),c=q(e,"onFocus",r),u=q(e,"onBlur",r),d=q(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),o&&this.editor.on("create",o),s&&this.editor.on("update",s),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),c&&this.editor.on("focus",c),u&&this.editor.on("blur",u),d&&this.editor.on("destroy",d)})}}class Ze{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=oe(q(this,"addOptions",{name:this.name}))),this.storage=oe(q(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Ze(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>oh(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new Ze({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=oe(q(n,"addOptions",{name:n.name})),n.storage=oe(q(n,"addStorage",{name:n.name,options:n.options})),n}}function fT(t,e,n){const{from:r,to:i}=e,{blockSeparator:o=`

`,textSerializers:s={}}=n||{};let a="";return t.nodesBetween(r,i,(l,c,u,d)=>{var f;l.isBlock&&c>r&&(a+=o);const h=s==null?void 0:s[l.type.name];if(h)return u&&(a+=h({node:l,pos:c,parent:u,index:d,range:e})),!1;l.isText&&(a+=(f=l==null?void 0:l.text)===null||f===void 0?void 0:f.slice(Math.max(r,c)-c,i-c))}),a}function hT(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}const E$=Ze.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new lt({key:new dn("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:o}=i,s=Math.min(...o.map(u=>u.$from.pos)),a=Math.max(...o.map(u=>u.$to.pos)),l=hT(n);return fT(r,{from:s,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),T$=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),_$=(t=!1)=>({commands:e})=>e.setContent("",t),R$=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:o,$to:s})=>{t.doc.nodesBetween(o.pos,s.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=e,d=c.resolve(u.map(l)),f=c.resolve(u.map(l+a.nodeSize)),h=d.blockRange(f);if(!h)return;const p=Qa(h);if(a.type.isTextblock){const{defaultType:g}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(h.start,g)}(p||p===0)&&e.lift(h,p)})}),!0},O$=t=>e=>t(e),P$=()=>({state:t,dispatch:e})=>YL(t,e),M$=(t,e)=>({editor:n,tr:r})=>{const{state:i}=n,o=i.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const s=r.mapping.map(e);return r.insert(s,o.content),r.setSelection(new ne(r.doc.resolve(s-1))),!0},A$=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let o=i.depth;o>0;o-=1)if(i.node(o).type===r.type){if(e){const a=i.before(o),l=i.after(o);t.delete(a,l).scrollIntoView()}return!0}return!1},D$=t=>({tr:e,state:n,dispatch:r})=>{const i=Xe(t,n.schema),o=e.selection.$anchor;for(let s=o.depth;s>0;s-=1)if(o.node(s).type===i){if(r){const l=o.before(s),c=o.after(s);e.delete(l,c).scrollIntoView()}return!0}return!1},I$=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},N$=()=>({state:t,dispatch:e})=>$L(t,e),j$=()=>({commands:t})=>t.keyboardShortcut("Enter"),L$=()=>({state:t,dispatch:e})=>JL(t,e);function lf(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:jv(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function pT(t,e,n={}){return t.find(r=>r.type===e&&lf(Object.fromEntries(Object.keys(n).map(i=>[i,r.attrs[i]])),n))}function gb(t,e,n={}){return!!pT(t,e,n)}function Lv(t,e,n){var r;if(!t||!e)return;let i=t.parent.childAfter(t.parentOffset);if((!i.node||!i.node.marks.some(u=>u.type===e))&&(i=t.parent.childBefore(t.parentOffset)),!i.node||!i.node.marks.some(u=>u.type===e)||(n=n||((r=i.node.marks[0])===null||r===void 0?void 0:r.attrs),!pT([...i.node.marks],e,n)))return;let s=i.index,a=t.start()+i.offset,l=s+1,c=a+i.node.nodeSize;for(;s>0&&gb([...t.parent.child(s-1).marks],e,n);)s-=1,a-=t.parent.child(s).nodeSize;for(;l<t.parent.childCount&&gb([...t.parent.child(l).marks],e,n);)c+=t.parent.child(l).nodeSize,l+=1;return{from:a,to:c}}function ro(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const $$=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const o=ro(t,r.schema),{doc:s,selection:a}=n,{$from:l,from:c,to:u}=a;if(i){const d=Lv(l,o,e);if(d&&d.from<=c&&d.to>=u){const f=ne.create(s,d.from,d.to);n.setSelection(f)}}return!0},F$=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function $v(t){return t instanceof ne}function Fr(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function mT(t,e=null){if(!e)return null;const n=re.atStart(t),r=re.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const i=n.from,o=r.to;return e==="all"?ne.create(t,Fr(0,i,o),Fr(t.content.size,i,o)):ne.create(t,Fr(e,i,o),Fr(e,i,o))}function B$(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function Fv(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const z$=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:o})=>{e={scrollIntoView:!0,...e};const s=()=>{(Fv()||B$())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(o&&t===null&&!$v(n.state.selection))return s(),!0;const a=mT(i.doc,t)||n.state.selection,l=n.state.selection.eq(a);return o&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),s()),!0},U$=(t,e)=>n=>t.every((r,i)=>e(r,{...n,index:i})),V$=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),gT=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&gT(r)}return t};function zu(t){const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return gT(n)}function cf(t,e,n){if(t instanceof Li||t instanceof N)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,i=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return N.fromArray(t.map(a=>e.nodeFromJSON(a)));const s=e.nodeFromJSON(t);return n.errorOnInvalidContent&&s.check(),s}catch(o){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:o});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",o),cf("",e,n)}if(i){if(n.errorOnInvalidContent){let s=!1,a="";const l=new sE({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(s=!0,a=typeof c=="string"?c:c.outerHTML,null)}]}})});if(n.slice?$i.fromSchema(l).parseSlice(zu(t),n.parseOptions):$i.fromSchema(l).parse(zu(t),n.parseOptions),n.errorOnInvalidContent&&s)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const o=$i.fromSchema(e);return n.slice?o.parseSlice(zu(t),n.parseOptions).content:o.parse(zu(t),n.parseOptions)}return cf("",e,n)}function H$(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof Ge||i instanceof Ye))return;const o=t.mapping.maps[r];let s=0;o.forEach((a,l,c,u)=>{s===0&&(s=u)}),t.setSelection(re.near(t.doc.resolve(s),n))}const W$=t=>!("type"in t),K$=(t,e,n)=>({tr:r,dispatch:i,editor:o})=>{var s;if(i){n={parseOptions:o.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let a;try{a=cf(e,o.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions},errorOnInvalidContent:(s=n.errorOnInvalidContent)!==null&&s!==void 0?s:o.options.enableContentCheck})}catch(p){return o.emit("contentError",{editor:o,error:p,disableCollaboration:()=>{o.storage.collaboration&&(o.storage.collaboration.isDisabled=!0)}}),!1}let{from:l,to:c}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},u=!0,d=!0;if((W$(a)?a:[a]).forEach(p=>{p.check(),u=u?p.isText&&p.marks.length===0:!1,d=d?p.isBlock:!1}),l===c&&d){const{parent:p}=r.doc.resolve(l);p.isTextblock&&!p.type.spec.code&&!p.childCount&&(l-=1,c+=1)}let h;if(u){if(Array.isArray(e))h=e.map(p=>p.text||"").join("");else if(e instanceof N){let p="";e.forEach(g=>{g.text&&(p+=g.text)}),h=p}else typeof e=="object"&&e&&e.text?h=e.text:h=e;r.insertText(h,l,c)}else h=a,r.replaceWith(l,c,h);n.updateSelection&&H$(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:l,text:h}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:l,text:h})}return!0},q$=()=>({state:t,dispatch:e})=>WL(t,e),G$=()=>({state:t,dispatch:e})=>KL(t,e),J$=()=>({state:t,dispatch:e})=>FL(t,e),Y$=()=>({state:t,dispatch:e})=>VL(t,e),Q$=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Jf(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},X$=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Jf(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},Z$=()=>({state:t,dispatch:e})=>BL(t,e),e3=()=>({state:t,dispatch:e})=>zL(t,e);function yT(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function t3(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,i,o,s;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))o=!0;else if(/^mod$/i.test(l))Fv()||yT()?s=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),s&&(n=`Meta-${n}`),o&&(n=`Shift-${n}`),n}const n3=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const o=t3(t).split(/-(?!$)/),s=o.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:s==="Space"?" ":s,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,a))});return l==null||l.steps.forEach(c=>{const u=c.map(r.mapping);u&&i&&r.maybeStep(u)}),!0};function vc(t,e,n={}){const{from:r,to:i,empty:o}=t.selection,s=e?Xe(e,t.schema):null,a=[];t.doc.nodesBetween(r,i,(d,f)=>{if(d.isText)return;const h=Math.max(r,f),p=Math.min(i,f+d.nodeSize);a.push({node:d,from:h,to:p})});const l=i-r,c=a.filter(d=>s?s.name===d.node.type.name:!0).filter(d=>lf(d.node.attrs,n,{strict:!1}));return o?!!c.length:c.reduce((d,f)=>d+f.to-f.from,0)>=l}const r3=(t,e={})=>({state:n,dispatch:r})=>{const i=Xe(t,n.schema);return vc(n,i,e)?qL(n,r):!1},i3=()=>({state:t,dispatch:e})=>QL(t,e),o3=t=>({state:e,dispatch:n})=>{const r=Xe(t,e.schema);return s$(r)(e,n)},s3=()=>({state:t,dispatch:e})=>GL(t,e);function sh(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function yb(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}const a3=(t,e)=>({tr:n,state:r,dispatch:i})=>{let o=null,s=null;const a=sh(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(o=Xe(t,r.schema)),a==="mark"&&(s=ro(t,r.schema)),i&&n.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{o&&o===c.type&&n.setNodeMarkup(u,void 0,yb(c.attrs,e)),s&&c.marks.length&&c.marks.forEach(d=>{s===d.type&&n.addMark(u,u+c.nodeSize,s.create(yb(d.attrs,e)))})})}),!0):!1},l3=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),c3=()=>({tr:t,dispatch:e})=>{if(e){const n=new Sn(t.doc);t.setSelection(n)}return!0},u3=()=>({state:t,dispatch:e})=>UL(t,e),d3=()=>({state:t,dispatch:e})=>HL(t,e),f3=()=>({state:t,dispatch:e})=>XL(t,e),h3=()=>({state:t,dispatch:e})=>t$(t,e),p3=()=>({state:t,dispatch:e})=>e$(t,e);function jg(t,e,n={},r={}){return cf(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}const m3=(t,e=!1,n={},r={})=>({editor:i,tr:o,dispatch:s,commands:a})=>{var l,c;const{doc:u}=o;if(n.preserveWhitespace!=="full"){const d=jg(t,i.schema,n,{errorOnInvalidContent:(l=r.errorOnInvalidContent)!==null&&l!==void 0?l:i.options.enableContentCheck});return s&&o.replaceWith(0,u.content.size,d).setMeta("preventUpdate",!e),!0}return s&&o.setMeta("preventUpdate",!e),a.insertContentAt({from:0,to:u.content.size},t,{parseOptions:n,errorOnInvalidContent:(c=r.errorOnInvalidContent)!==null&&c!==void 0?c:i.options.enableContentCheck})};function vT(t,e){const n=ro(e,t.schema),{from:r,to:i,empty:o}=t.selection,s=[];o?(t.storedMarks&&s.push(...t.storedMarks),s.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,l=>{s.push(...l.marks)});const a=s.find(l=>l.type.name===n.name);return a?{...a.attrs}:{}}function g3(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function y3(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function Bv(t){return e=>y3(e.$from,t)}function v3(t,e){const n={from:0,to:t.content.size};return fT(t,n,e)}function x3(t,e){const n=Xe(e,t.schema),{from:r,to:i}=t.selection,o=[];t.doc.nodesBetween(r,i,a=>{o.push(a)});const s=o.reverse().find(a=>a.type.name===n.name);return s?{...s.attrs}:{}}function w3(t,e){const n=sh(typeof e=="string"?e:e.name,t.schema);return n==="node"?x3(t,e):n==="mark"?vT(t,e):{}}function xT(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(i=>{const o=n.resolve(t),s=Lv(o,i.type);s&&r.push({mark:i,...s})}):n.nodesBetween(t,e,(i,o)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(s=>({from:o,to:o+i.nodeSize,mark:s})))}),r}function gd(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=t.find(o=>o.type===e&&o.name===r);return i?i.attribute.keepOnSplit:!1}))}function Lg(t,e,n={}){const{empty:r,ranges:i}=t.selection,o=e?ro(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(d=>o?o.name===d.type.name:!0).find(d=>lf(d.attrs,n,{strict:!1}));let s=0;const a=[];if(i.forEach(({$from:d,$to:f})=>{const h=d.pos,p=f.pos;t.doc.nodesBetween(h,p,(g,x)=>{if(!g.isText&&!g.marks.length)return;const v=Math.max(h,x),w=Math.min(p,x+g.nodeSize),S=w-v;s+=S,a.push(...g.marks.map(b=>({mark:b,from:v,to:w})))})}),s===0)return!1;const l=a.filter(d=>o?o.name===d.mark.type.name:!0).filter(d=>lf(d.mark.attrs,n,{strict:!1})).reduce((d,f)=>d+f.to-f.from,0),c=a.filter(d=>o?d.mark.type!==o&&d.mark.type.excludes(o):!0).reduce((d,f)=>d+f.to-f.from,0);return(l>0?l+c:l)>=s}function b3(t,e,n={}){if(!e)return vc(t,null,n)||Lg(t,null,n);const r=sh(e,t.schema);return r==="node"?vc(t,e,n):r==="mark"?Lg(t,e,n):!1}function vb(t,e){const{nodeExtensions:n}=rh(e),r=n.find(s=>s.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},o=oe(q(r,"group",i));return typeof o!="string"?!1:o.split(" ").includes("list")}function ah(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!==null&&r!==void 0?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let i=!0;return t.content.forEach(o=>{i!==!1&&(ah(o,{ignoreWhitespace:n,checkChildren:e})||(i=!1))}),i}return!1}function wT(t){return t instanceof Q}function S3(t,e,n){const i=t.state.doc.content.size,o=Fr(e,0,i),s=Fr(n,0,i),a=t.coordsAtPos(o),l=t.coordsAtPos(s,-1),c=Math.min(a.top,l.top),u=Math.max(a.bottom,l.bottom),d=Math.min(a.left,l.left),f=Math.max(a.right,l.right),h=f-d,p=u-c,v={top:c,bottom:u,left:d,right:f,width:h,height:p,x:d,y:c};return{...v,toJSON:()=>v}}function C3(t,e,n){var r;const{selection:i}=e;let o=null;if($v(i)&&(o=i.$cursor),o){const a=(r=t.storedMarks)!==null&&r!==void 0?r:o.marks();return!!n.isInSet(a)||!a.some(l=>l.type.excludes(n))}const{ranges:s}=i;return s.some(({$from:a,$to:l})=>{let c=a.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(a.pos,l.pos,(u,d,f)=>{if(c)return!1;if(u.isInline){const h=!f||f.type.allowsMarkType(n),p=!!n.isInSet(u.marks)||!u.marks.some(g=>g.type.excludes(n));c=h&&p}return!c}),c})}const k3=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:o}=n,{empty:s,ranges:a}=o,l=ro(t,r.schema);if(i)if(s){const c=vT(r,l);n.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;r.doc.nodesBetween(u,d,(f,h)=>{const p=Math.max(h,u),g=Math.min(h+f.nodeSize,d);f.marks.find(v=>v.type===l)?f.marks.forEach(v=>{l===v.type&&n.addMark(p,g,l.create({...v.attrs,...e}))}):n.addMark(p,g,l.create(e))})});return C3(r,n,l)},E3=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),T3=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const o=Xe(t,n.schema);let s;return n.selection.$anchor.sameParent(n.selection.$head)&&(s=n.selection.$anchor.parent.attrs),o.isTextblock?i().command(({commands:a})=>fb(o,{...s,...e})(n)?!0:a.clearNodes()).command(({state:a})=>fb(o,{...s,...e})(a,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},_3=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,i=Fr(t,0,r.content.size),o=Q.create(r,i);e.setSelection(o)}return!0},R3=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:i,to:o}=typeof t=="number"?{from:t,to:t}:t,s=ne.atStart(r).from,a=ne.atEnd(r).to,l=Fr(i,s,a),c=Fr(o,s,a),u=ne.create(r,l,c);e.setSelection(u)}return!0},O3=t=>({state:e,dispatch:n})=>{const r=Xe(t,e.schema);return c$(r)(e,n)};function xb(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e==null?void 0:e.includes(i.type.name));t.tr.ensureMarks(r)}}const P3=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{const{selection:o,doc:s}=e,{$from:a,$to:l}=o,c=i.extensionManager.attributes,u=gd(c,a.node().type.name,a.node().attrs);if(o instanceof Q&&o.node.isBlock)return!a.parentOffset||!ra(s,a.pos)?!1:(r&&(t&&xb(n,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const d=l.parentOffset===l.parent.content.size,f=a.depth===0?void 0:g3(a.node(-1).contentMatchAt(a.indexAfter(-1)));let h=d&&f?[{type:f,attrs:u}]:void 0,p=ra(e.doc,e.mapping.map(a.pos),1,h);if(!h&&!p&&ra(e.doc,e.mapping.map(a.pos),1,f?[{type:f}]:void 0)&&(p=!0,h=f?[{type:f,attrs:u}]:void 0),r){if(p&&(o instanceof ne&&e.deleteSelection(),e.split(e.mapping.map(a.pos),1,h),f&&!d&&!a.parentOffset&&a.parent.type!==f)){const g=e.mapping.map(a.before()),x=e.doc.resolve(g);a.node(-1).canReplaceWith(x.index(),x.index()+1,f)&&e.setNodeMarkup(e.mapping.map(a.before()),f)}t&&xb(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return p},M3=(t,e={})=>({tr:n,state:r,dispatch:i,editor:o})=>{var s;const a=Xe(t,r.schema),{$from:l,$to:c}=r.selection,u=r.selection.node;if(u&&u.isBlock||l.depth<2||!l.sameParent(c))return!1;const d=l.node(-1);if(d.type!==a)return!1;const f=o.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(i){let v=N.empty;const w=l.index(-1)?1:l.index(-2)?2:3;for(let _=l.depth-w;_>=l.depth-3;_-=1)v=N.from(l.node(_).copy(v));const S=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,b={...gd(f,l.node().type.name,l.node().attrs),...e},C=((s=a.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(b))||void 0;v=v.append(N.from(a.createAndFill(null,C)||void 0));const k=l.before(l.depth-(w-1));n.replace(k,l.after(-S),new V(v,4-w,0));let E=-1;n.doc.nodesBetween(k,n.doc.content.size,(_,O)=>{if(E>-1)return!1;_.isTextblock&&_.content.size===0&&(E=O+1)}),E>-1&&n.setSelection(ne.near(n.doc.resolve(E))),n.scrollIntoView()}return!0}const h=c.pos===l.end()?d.contentMatchAt(0).defaultType:null,p={...gd(f,d.type.name,d.attrs),...e},g={...gd(f,l.node().type.name,l.node().attrs),...e};n.delete(l.pos,c.pos);const x=h?[{type:a,attrs:p},{type:h,attrs:g}]:[{type:a,attrs:p}];if(!ra(n.doc,l.pos,2))return!1;if(i){const{selection:v,storedMarks:w}=r,{splittableMarks:S}=o.extensionManager,b=w||v.$to.parentOffset&&v.$from.marks();if(n.split(l.pos,2,x).scrollIntoView(),!b||!i)return!0;const C=b.filter(k=>S.includes(k.type.name));n.ensureMarks(C)}return!0},Rp=(t,e)=>{const n=Bv(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&to(t.doc,n.pos)&&t.join(n.pos),!0},Op=(t,e)=>{const n=Bv(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&to(t.doc,r)&&t.join(r),!0},A3=(t,e,n,r={})=>({editor:i,tr:o,state:s,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:d,splittableMarks:f}=i.extensionManager,h=Xe(t,s.schema),p=Xe(e,s.schema),{selection:g,storedMarks:x}=s,{$from:v,$to:w}=g,S=v.blockRange(w),b=x||g.$to.parentOffset&&g.$from.marks();if(!S)return!1;const C=Bv(k=>vb(k.type.name,d))(g);if(S.depth>=1&&C&&S.depth-C.depth<=1){if(C.node.type===h)return c.liftListItem(p);if(vb(C.node.type.name,d)&&h.validContent(C.node.content)&&a)return l().command(()=>(o.setNodeMarkup(C.pos,h),!0)).command(()=>Rp(o,h)).command(()=>Op(o,h)).run()}return!n||!b||!a?l().command(()=>u().wrapInList(h,r)?!0:c.clearNodes()).wrapInList(h,r).command(()=>Rp(o,h)).command(()=>Op(o,h)).run():l().command(()=>{const k=u().wrapInList(h,r),E=b.filter(_=>f.includes(_.type.name));return o.ensureMarks(E),k?!0:c.clearNodes()}).wrapInList(h,r).command(()=>Rp(o,h)).command(()=>Op(o,h)).run()},D3=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:o=!1}=n,s=ro(t,r.schema);return Lg(r,s,e)?i.unsetMark(s,{extendEmptyMarkRange:o}):i.setMark(s,e)},I3=(t,e,n={})=>({state:r,commands:i})=>{const o=Xe(t,r.schema),s=Xe(e,r.schema),a=vc(r,o,n);let l;return r.selection.$anchor.sameParent(r.selection.$head)&&(l=r.selection.$anchor.parent.attrs),a?i.setNode(s,l):i.setNode(o,{...l,...n})},N3=(t,e={})=>({state:n,commands:r})=>{const i=Xe(t,n.schema);return vc(n,i,e)?r.lift(i):r.wrapIn(i,e)},j3=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let o;if(i.spec.isInputRules&&(o=i.getState(t))){if(e){const s=t.tr,a=o.transform;for(let l=a.steps.length-1;l>=0;l-=1)s.step(a.steps[l].invert(a.docs[l]));if(o.text){const l=s.doc.resolve(o.from).marks();s.replaceWith(o.from,o.to,t.schema.text(o.text,l))}else s.delete(o.from,o.to)}return!0}}return!1},L3=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(o=>{t.removeMark(o.$from.pos,o.$to.pos)}),!0},$3=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var o;const{extendEmptyMarkRange:s=!1}=e,{selection:a}=n,l=ro(t,r.schema),{$from:c,empty:u,ranges:d}=a;if(!i)return!0;if(u&&s){let{from:f,to:h}=a;const p=(o=c.marks().find(x=>x.type===l))===null||o===void 0?void 0:o.attrs,g=Lv(c,l,p);g&&(f=g.from,h=g.to),n.removeMark(f,h,l)}else d.forEach(f=>{n.removeMark(f.$from.pos,f.$to.pos,l)});return n.removeStoredMark(l),!0},F3=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let o=null,s=null;const a=sh(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(o=Xe(t,r.schema)),a==="mark"&&(s=ro(t,r.schema)),i&&n.selection.ranges.forEach(l=>{const c=l.$from.pos,u=l.$to.pos;let d,f,h,p;n.selection.empty?r.doc.nodesBetween(c,u,(g,x)=>{o&&o===g.type&&(h=Math.max(x,c),p=Math.min(x+g.nodeSize,u),d=x,f=g)}):r.doc.nodesBetween(c,u,(g,x)=>{x<c&&o&&o===g.type&&(h=Math.max(x,c),p=Math.min(x+g.nodeSize,u),d=x,f=g),x>=c&&x<=u&&(o&&o===g.type&&n.setNodeMarkup(x,void 0,{...g.attrs,...e}),s&&g.marks.length&&g.marks.forEach(v=>{if(s===v.type){const w=Math.max(x,c),S=Math.min(x+g.nodeSize,u);n.addMark(w,S,s.create({...v.attrs,...e}))}}))}),f&&(d!==void 0&&n.setNodeMarkup(d,void 0,{...f.attrs,...e}),s&&f.marks.length&&f.marks.forEach(g=>{s===g.type&&n.addMark(h,p,s.create({...g.attrs,...e}))}))}),!0):!1},B3=(t,e={})=>({state:n,dispatch:r})=>{const i=Xe(t,n.schema);return n$(i,e)(n,r)},z3=(t,e={})=>({state:n,dispatch:r})=>{const i=Xe(t,n.schema);return r$(i,e)(n,r)};var U3=Object.freeze({__proto__:null,blur:T$,clearContent:_$,clearNodes:R$,command:O$,createParagraphNear:P$,cut:M$,deleteCurrentNode:A$,deleteNode:D$,deleteRange:I$,deleteSelection:N$,enter:j$,exitCode:L$,extendMarkRange:$$,first:F$,focus:z$,forEach:U$,insertContent:V$,insertContentAt:K$,joinBackward:J$,joinDown:G$,joinForward:Y$,joinItemBackward:Q$,joinItemForward:X$,joinTextblockBackward:Z$,joinTextblockForward:e3,joinUp:q$,keyboardShortcut:n3,lift:r3,liftEmptyBlock:i3,liftListItem:o3,newlineInCode:s3,resetAttributes:a3,scrollIntoView:l3,selectAll:c3,selectNodeBackward:u3,selectNodeForward:d3,selectParentNode:f3,selectTextblockEnd:h3,selectTextblockStart:p3,setContent:m3,setMark:k3,setMeta:E3,setNode:T3,setNodeSelection:_3,setTextSelection:R3,sinkListItem:O3,splitBlock:P3,splitListItem:M3,toggleList:A3,toggleMark:D3,toggleNode:I3,toggleWrap:N3,undoInputRule:j3,unsetAllMarks:L3,unsetMark:$3,updateAttributes:F3,wrapIn:B3,wrapInList:z3});const V3=Ze.create({name:"commands",addCommands(){return{...U3}}}),H3=Ze.create({name:"drop",addProseMirrorPlugins(){return[new lt({key:new dn("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),W3=Ze.create({name:"editable",addProseMirrorPlugins(){return[new lt({key:new dn("editable"),props:{editable:()=>this.editor.options.editable}})]}}),K3=Ze.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new lt({key:new dn("focusEvents"),props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),q3=Ze.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:s})=>[()=>s.undoInputRule(),()=>s.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:d}=l,{pos:f,parent:h}=d,p=d.parent.isTextblock&&f>0?a.doc.resolve(f-1):d,g=p.parent.type.spec.isolating,x=d.pos-d.parentOffset,v=g&&p.parent.childCount===1?x===d.pos:re.atStart(c).from===f;return!u||!h.type.isTextblock||h.textContent.length||!v||v&&d.parent.type.name==="paragraph"?!1:s.clearNodes()}),()=>s.deleteSelection(),()=>s.joinBackward(),()=>s.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:s})=>[()=>s.deleteSelection(),()=>s.deleteCurrentNode(),()=>s.joinForward(),()=>s.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:s})=>[()=>s.newlineInCode(),()=>s.createParagraphNear(),()=>s.liftEmptyBlock(),()=>s.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},o={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Fv()||yT()?o:i},addProseMirrorPlugins(){return[new lt({key:new dn("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(g=>g.getMeta("composition")))return;const r=t.some(g=>g.docChanged)&&!e.doc.eq(n.doc),i=t.some(g=>g.getMeta("preventClearDocument"));if(!r||i)return;const{empty:o,from:s,to:a}=e.selection,l=re.atStart(e.doc).from,c=re.atEnd(e.doc).to;if(o||!(s===l&&a===c)||!ah(n.doc))return;const f=n.tr,h=th({state:n,transaction:f}),{commands:p}=new nh({editor:this.editor,state:h});if(p.clearNodes(),!!f.steps.length)return f}})]}}),G3=Ze.create({name:"paste",addProseMirrorPlugins(){return[new lt({key:new dn("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),J3=Ze.create({name:"tabindex",addProseMirrorPlugins(){return[new lt({key:new dn("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class wo{get name(){return this.node.type.name}constructor(e,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=i}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new wo(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new wo(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new wo(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,o=n.isAtom&&!n.isText,s=this.pos+r+(o?0:1),a=this.resolvedPos.doc.resolve(s);if(!i&&a.depth<=this.depth)return;const l=new wo(a,this.editor,i,i?n:null);i&&(l.actualDepth=this.depth+1),e.push(new wo(a,this.editor,i,i?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(n).length>0){const o=i.node.attrs,s=Object.keys(n);for(let a=0;a<s.length;a+=1){const l=s[a];if(o[l]!==n[l])break}}else r=i;i=i.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const o=Object.keys(n);return this.children.forEach(s=>{r&&i.length>0||(s.node.type.name===e&&o.every(l=>n[l]===s.node.attrs[l])&&i.push(s),!(r&&i.length>0)&&(i=i.concat(s.querySelectorAll(e,n,r))))}),i}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}}const Y3=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function Q3(t,e,n){const r=document.querySelector(`style[data-tiptap-style${n?`-${n}`:""}]`);if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute(`data-tiptap-style${n?`-${n}`:""}`,""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}class X3 extends u${constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:r,moved:i})=>this.options.onDrop(n,r,i)),this.on("paste",({event:n,slice:r})=>this.options.onPaste(n,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=Q3(Y3,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,n=!0){this.setOptions({editable:e}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,n){const r=dT(n)?n(e,[...this.state.plugins]):[...this.state.plugins,e],i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}unregisterPlugin(e){if(this.isDestroyed)return;const n=this.state.plugins;let r=n;if([].concat(e).forEach(o=>{const s=typeof o=="string"?`${o}$`:o.key;r=n.filter(a=>!a.key.startsWith(s))}),n.length===r.length)return;const i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}createExtensionManager(){var e,n;const i=[...this.options.enableCoreExtensions?[W3,E$.configure({blockSeparator:(n=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||n===void 0?void 0:n.blockSeparator}),V3,K3,q3,J3,H3,G3].filter(o=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[o.name]!==!1:!0):[],...this.options.extensions].filter(o=>["extension","node","mark"].includes(o==null?void 0:o.type));this.extensionManager=new Gs(i,this)}createCommandManager(){this.commandManager=new nh({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let n;try{n=jg(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(s){if(!(s instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(s.message))throw s;this.emit("contentError",{editor:this,error:s,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(a=>a.name!=="collaboration"),this.createExtensionManager()}}),n=jg(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=mT(n,this.options.autofocus);this.view=new RL(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:qs.create({doc:n,selection:r||void 0})});const i=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(i),this.createNodeViews(),this.prependClass();const o=this.view.dom;o.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(s=>{var a;return(a=this.capturedTransaction)===null||a===void 0?void 0:a.step(s)});return}const n=this.state.apply(e),r=!this.state.selection.eq(n.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:n}),this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=e.getMeta("focus"),o=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),o&&this.emit("blur",{editor:this,event:o.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return w3(this.state,e)}isActive(e,n){const r=typeof e=="string"?e:null,i=typeof e=="string"?n:e;return b3(this.state,r,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Nv(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:n=`

`,textSerializers:r={}}=e||{};return v3(this.state.doc,{blockSeparator:n,textSerializers:{...hT(this.schema),...r}})}get isEmpty(){return ah(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,n))||null}$nodes(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,n))||null}$pos(e){const n=this.state.doc.resolve(e);return new wo(n,this)}get $doc(){return this.$pos(0)}}function Na(t){return new ih({find:t.find,handler:({state:e,range:n,match:r})=>{const i=oe(t.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:o}=e,s=r[r.length-1],a=r[0];if(s){const l=a.search(/\S/),c=n.from+a.indexOf(s),u=c+s.length;if(xT(n.from,n.to,e.doc).filter(h=>h.mark.type.excluded.find(g=>g===t.type&&g!==h.mark.type)).filter(h=>h.to>c).length)return null;u<n.to&&o.delete(u,n.to),c>n.from&&o.delete(n.from+l,c);const f=n.from+l+s.length;o.addMark(n.from+l,f,t.type.create(i||{})),o.removeStoredMark(t.type)}}})}function Z3(t){return new ih({find:t.find,handler:({state:e,range:n,match:r})=>{const i=oe(t.getAttributes,void 0,r)||{},{tr:o}=e,s=n.from;let a=n.to;const l=t.type.create(i);if(r[1]){const c=r[0].lastIndexOf(r[1]);let u=s+c;u>a?u=a:a=u+r[1].length;const d=r[0][r[0].length-1];o.insertText(d,s+r[0].length-1),o.replaceWith(u,a,l)}else if(r[0]){const c=t.type.isInline?s:s-1;o.insert(c,t.type.create(i)).delete(o.mapping.map(s),o.mapping.map(a))}o.scrollIntoView()}})}function $g(t){return new ih({find:t.find,handler:({state:e,range:n,match:r})=>{const i=e.doc.resolve(n.from),o=oe(t.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,o)}})}function xc(t){return new ih({find:t.find,handler:({state:e,range:n,match:r,chain:i})=>{const o=oe(t.getAttributes,void 0,r)||{},s=e.tr.delete(n.from,n.to),l=s.doc.resolve(n.from).blockRange(),c=l&&Sv(l,t.type,o);if(!c)return null;if(s.wrap(l,c),t.keepMarks&&t.editor){const{selection:d,storedMarks:f}=e,{splittableMarks:h}=t.editor.extensionManager,p=f||d.$to.parentOffset&&d.$from.marks();if(p){const g=p.filter(x=>h.includes(x.type.name));s.ensureMarks(g)}}if(t.keepAttributes){const d=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(d,o).run()}const u=s.doc.resolve(n.from-1).nodeBefore;u&&u.type===t.type&&to(s.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,u))&&s.join(n.from-1)}})}let er=class Fg{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=oe(q(this,"addOptions",{name:this.name}))),this.storage=oe(q(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Fg(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>oh(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new Fg(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=oe(q(n,"addOptions",{name:n.name})),n.storage=oe(q(n,"addStorage",{name:n.name,options:n.options})),n}};function ja(t){return new x$({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:i})=>{const o=oe(t.getAttributes,void 0,r,i);if(o===!1||o===null)return null;const{tr:s}=e,a=r[r.length-1],l=r[0];let c=n.to;if(a){const u=l.search(/\S/),d=n.from+l.indexOf(a),f=d+a.length;if(xT(n.from,n.to,e.doc).filter(p=>p.mark.type.excluded.find(x=>x===t.type&&x!==p.mark.type)).filter(p=>p.to>d).length)return null;f<n.to&&s.delete(f,n.to),d>n.from&&s.delete(n.from+u,d),c=n.from+u+a.length,s.addMark(n.from+u,c,t.type.create(o||{})),s.removeStoredMark(t.type)}}})}function eF(t){return t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}var Jt="top",Pn="bottom",Mn="right",Yt="left",zv="auto",Xc=[Jt,Pn,Mn,Yt],La="start",wc="end",tF="clippingParents",bT="viewport",pl="popper",nF="reference",wb=Xc.reduce(function(t,e){return t.concat([e+"-"+La,e+"-"+wc])},[]),ST=[].concat(Xc,[zv]).reduce(function(t,e){return t.concat([e,e+"-"+La,e+"-"+wc])},[]),rF="beforeRead",iF="read",oF="afterRead",sF="beforeMain",aF="main",lF="afterMain",cF="beforeWrite",uF="write",dF="afterWrite",fF=[rF,iF,oF,sF,aF,lF,cF,uF,dF];function br(t){return t?(t.nodeName||"").toLowerCase():null}function ln(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function ns(t){var e=ln(t).Element;return t instanceof e||t instanceof Element}function kn(t){var e=ln(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function Uv(t){if(typeof ShadowRoot>"u")return!1;var e=ln(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function hF(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},i=e.attributes[n]||{},o=e.elements[n];!kn(o)||!br(o)||(Object.assign(o.style,r),Object.keys(i).forEach(function(s){var a=i[s];a===!1?o.removeAttribute(s):o.setAttribute(s,a===!0?"":a)}))})}function pF(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],o=e.attributes[r]||{},s=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),a=s.reduce(function(l,c){return l[c]="",l},{});!kn(i)||!br(i)||(Object.assign(i.style,a),Object.keys(o).forEach(function(l){i.removeAttribute(l)}))})}}const CT={name:"applyStyles",enabled:!0,phase:"write",fn:hF,effect:pF,requires:["computeStyles"]};function yr(t){return t.split("-")[0]}var Uo=Math.max,uf=Math.min,$a=Math.round;function Bg(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function kT(){return!/^((?!chrome|android).)*safari/i.test(Bg())}function Fa(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),i=1,o=1;e&&kn(t)&&(i=t.offsetWidth>0&&$a(r.width)/t.offsetWidth||1,o=t.offsetHeight>0&&$a(r.height)/t.offsetHeight||1);var s=ns(t)?ln(t):window,a=s.visualViewport,l=!kT()&&n,c=(r.left+(l&&a?a.offsetLeft:0))/i,u=(r.top+(l&&a?a.offsetTop:0))/o,d=r.width/i,f=r.height/o;return{width:d,height:f,top:u,right:c+d,bottom:u+f,left:c,x:c,y:u}}function Vv(t){var e=Fa(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function ET(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&Uv(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function qr(t){return ln(t).getComputedStyle(t)}function mF(t){return["table","td","th"].indexOf(br(t))>=0}function io(t){return((ns(t)?t.ownerDocument:t.document)||window.document).documentElement}function lh(t){return br(t)==="html"?t:t.assignedSlot||t.parentNode||(Uv(t)?t.host:null)||io(t)}function bb(t){return!kn(t)||qr(t).position==="fixed"?null:t.offsetParent}function gF(t){var e=/firefox/i.test(Bg()),n=/Trident/i.test(Bg());if(n&&kn(t)){var r=qr(t);if(r.position==="fixed")return null}var i=lh(t);for(Uv(i)&&(i=i.host);kn(i)&&["html","body"].indexOf(br(i))<0;){var o=qr(i);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||e&&o.willChange==="filter"||e&&o.filter&&o.filter!=="none")return i;i=i.parentNode}return null}function Zc(t){for(var e=ln(t),n=bb(t);n&&mF(n)&&qr(n).position==="static";)n=bb(n);return n&&(br(n)==="html"||br(n)==="body"&&qr(n).position==="static")?e:n||gF(t)||e}function Hv(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function zl(t,e,n){return Uo(t,uf(e,n))}function yF(t,e,n){var r=zl(t,e,n);return r>n?n:r}function TT(){return{top:0,right:0,bottom:0,left:0}}function _T(t){return Object.assign({},TT(),t)}function RT(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var vF=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,_T(typeof e!="number"?e:RT(e,Xc))};function xF(t){var e,n=t.state,r=t.name,i=t.options,o=n.elements.arrow,s=n.modifiersData.popperOffsets,a=yr(n.placement),l=Hv(a),c=[Yt,Mn].indexOf(a)>=0,u=c?"height":"width";if(!(!o||!s)){var d=vF(i.padding,n),f=Vv(o),h=l==="y"?Jt:Yt,p=l==="y"?Pn:Mn,g=n.rects.reference[u]+n.rects.reference[l]-s[l]-n.rects.popper[u],x=s[l]-n.rects.reference[l],v=Zc(o),w=v?l==="y"?v.clientHeight||0:v.clientWidth||0:0,S=g/2-x/2,b=d[h],C=w-f[u]-d[p],k=w/2-f[u]/2+S,E=zl(b,k,C),_=l;n.modifiersData[r]=(e={},e[_]=E,e.centerOffset=E-k,e)}}function wF(t){var e=t.state,n=t.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||ET(e.elements.popper,i)&&(e.elements.arrow=i))}const bF={name:"arrow",enabled:!0,phase:"main",fn:xF,effect:wF,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ba(t){return t.split("-")[1]}var SF={top:"auto",right:"auto",bottom:"auto",left:"auto"};function CF(t,e){var n=t.x,r=t.y,i=e.devicePixelRatio||1;return{x:$a(n*i)/i||0,y:$a(r*i)/i||0}}function Sb(t){var e,n=t.popper,r=t.popperRect,i=t.placement,o=t.variation,s=t.offsets,a=t.position,l=t.gpuAcceleration,c=t.adaptive,u=t.roundOffsets,d=t.isFixed,f=s.x,h=f===void 0?0:f,p=s.y,g=p===void 0?0:p,x=typeof u=="function"?u({x:h,y:g}):{x:h,y:g};h=x.x,g=x.y;var v=s.hasOwnProperty("x"),w=s.hasOwnProperty("y"),S=Yt,b=Jt,C=window;if(c){var k=Zc(n),E="clientHeight",_="clientWidth";if(k===ln(n)&&(k=io(n),qr(k).position!=="static"&&a==="absolute"&&(E="scrollHeight",_="scrollWidth")),k=k,i===Jt||(i===Yt||i===Mn)&&o===wc){b=Pn;var O=d&&k===C&&C.visualViewport?C.visualViewport.height:k[E];g-=O-r.height,g*=l?1:-1}if(i===Yt||(i===Jt||i===Pn)&&o===wc){S=Mn;var T=d&&k===C&&C.visualViewport?C.visualViewport.width:k[_];h-=T-r.width,h*=l?1:-1}}var D=Object.assign({position:a},c&&SF),j=u===!0?CF({x:h,y:g},ln(n)):{x:h,y:g};if(h=j.x,g=j.y,l){var z;return Object.assign({},D,(z={},z[b]=w?"0":"",z[S]=v?"0":"",z.transform=(C.devicePixelRatio||1)<=1?"translate("+h+"px, "+g+"px)":"translate3d("+h+"px, "+g+"px, 0)",z))}return Object.assign({},D,(e={},e[b]=w?g+"px":"",e[S]=v?h+"px":"",e.transform="",e))}function kF(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=r===void 0?!0:r,o=n.adaptive,s=o===void 0?!0:o,a=n.roundOffsets,l=a===void 0?!0:a,c={placement:yr(e.placement),variation:Ba(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Sb(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:s,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Sb(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const EF={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:kF,data:{}};var Uu={passive:!0};function TF(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,o=i===void 0?!0:i,s=r.resize,a=s===void 0?!0:s,l=ln(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&c.forEach(function(u){u.addEventListener("scroll",n.update,Uu)}),a&&l.addEventListener("resize",n.update,Uu),function(){o&&c.forEach(function(u){u.removeEventListener("scroll",n.update,Uu)}),a&&l.removeEventListener("resize",n.update,Uu)}}const _F={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:TF,data:{}};var RF={left:"right",right:"left",bottom:"top",top:"bottom"};function yd(t){return t.replace(/left|right|bottom|top/g,function(e){return RF[e]})}var OF={start:"end",end:"start"};function Cb(t){return t.replace(/start|end/g,function(e){return OF[e]})}function Wv(t){var e=ln(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function Kv(t){return Fa(io(t)).left+Wv(t).scrollLeft}function PF(t,e){var n=ln(t),r=io(t),i=n.visualViewport,o=r.clientWidth,s=r.clientHeight,a=0,l=0;if(i){o=i.width,s=i.height;var c=kT();(c||!c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:o,height:s,x:a+Kv(t),y:l}}function MF(t){var e,n=io(t),r=Wv(t),i=(e=t.ownerDocument)==null?void 0:e.body,o=Uo(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=Uo(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+Kv(t),l=-r.scrollTop;return qr(i||n).direction==="rtl"&&(a+=Uo(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:s,x:a,y:l}}function qv(t){var e=qr(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function OT(t){return["html","body","#document"].indexOf(br(t))>=0?t.ownerDocument.body:kn(t)&&qv(t)?t:OT(lh(t))}function Ul(t,e){var n;e===void 0&&(e=[]);var r=OT(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),o=ln(r),s=i?[o].concat(o.visualViewport||[],qv(r)?r:[]):r,a=e.concat(s);return i?a:a.concat(Ul(lh(s)))}function zg(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function AF(t,e){var n=Fa(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function kb(t,e,n){return e===bT?zg(PF(t,n)):ns(e)?AF(e,n):zg(MF(io(t)))}function DF(t){var e=Ul(lh(t)),n=["absolute","fixed"].indexOf(qr(t).position)>=0,r=n&&kn(t)?Zc(t):t;return ns(r)?e.filter(function(i){return ns(i)&&ET(i,r)&&br(i)!=="body"}):[]}function IF(t,e,n,r){var i=e==="clippingParents"?DF(t):[].concat(e),o=[].concat(i,[n]),s=o[0],a=o.reduce(function(l,c){var u=kb(t,c,r);return l.top=Uo(u.top,l.top),l.right=uf(u.right,l.right),l.bottom=uf(u.bottom,l.bottom),l.left=Uo(u.left,l.left),l},kb(t,s,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function PT(t){var e=t.reference,n=t.element,r=t.placement,i=r?yr(r):null,o=r?Ba(r):null,s=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,l;switch(i){case Jt:l={x:s,y:e.y-n.height};break;case Pn:l={x:s,y:e.y+e.height};break;case Mn:l={x:e.x+e.width,y:a};break;case Yt:l={x:e.x-n.width,y:a};break;default:l={x:e.x,y:e.y}}var c=i?Hv(i):null;if(c!=null){var u=c==="y"?"height":"width";switch(o){case La:l[c]=l[c]-(e[u]/2-n[u]/2);break;case wc:l[c]=l[c]+(e[u]/2-n[u]/2);break}}return l}function bc(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=r===void 0?t.placement:r,o=n.strategy,s=o===void 0?t.strategy:o,a=n.boundary,l=a===void 0?tF:a,c=n.rootBoundary,u=c===void 0?bT:c,d=n.elementContext,f=d===void 0?pl:d,h=n.altBoundary,p=h===void 0?!1:h,g=n.padding,x=g===void 0?0:g,v=_T(typeof x!="number"?x:RT(x,Xc)),w=f===pl?nF:pl,S=t.rects.popper,b=t.elements[p?w:f],C=IF(ns(b)?b:b.contextElement||io(t.elements.popper),l,u,s),k=Fa(t.elements.reference),E=PT({reference:k,element:S,strategy:"absolute",placement:i}),_=zg(Object.assign({},S,E)),O=f===pl?_:k,T={top:C.top-O.top+v.top,bottom:O.bottom-C.bottom+v.bottom,left:C.left-O.left+v.left,right:O.right-C.right+v.right},D=t.modifiersData.offset;if(f===pl&&D){var j=D[i];Object.keys(T).forEach(function(z){var I=[Mn,Pn].indexOf(z)>=0?1:-1,U=[Jt,Pn].indexOf(z)>=0?"y":"x";T[z]+=j[U]*I})}return T}function NF(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=n.boundary,o=n.rootBoundary,s=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?ST:l,u=Ba(r),d=u?a?wb:wb.filter(function(p){return Ba(p)===u}):Xc,f=d.filter(function(p){return c.indexOf(p)>=0});f.length===0&&(f=d);var h=f.reduce(function(p,g){return p[g]=bc(t,{placement:g,boundary:i,rootBoundary:o,padding:s})[yr(g)],p},{});return Object.keys(h).sort(function(p,g){return h[p]-h[g]})}function jF(t){if(yr(t)===zv)return[];var e=yd(t);return[Cb(t),e,Cb(e)]}function LF(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,o=i===void 0?!0:i,s=n.altAxis,a=s===void 0?!0:s,l=n.fallbackPlacements,c=n.padding,u=n.boundary,d=n.rootBoundary,f=n.altBoundary,h=n.flipVariations,p=h===void 0?!0:h,g=n.allowedAutoPlacements,x=e.options.placement,v=yr(x),w=v===x,S=l||(w||!p?[yd(x)]:jF(x)),b=[x].concat(S).reduce(function(fe,Te){return fe.concat(yr(Te)===zv?NF(e,{placement:Te,boundary:u,rootBoundary:d,padding:c,flipVariations:p,allowedAutoPlacements:g}):Te)},[]),C=e.rects.reference,k=e.rects.popper,E=new Map,_=!0,O=b[0],T=0;T<b.length;T++){var D=b[T],j=yr(D),z=Ba(D)===La,I=[Jt,Pn].indexOf(j)>=0,U=I?"width":"height",F=bc(e,{placement:D,boundary:u,rootBoundary:d,altBoundary:f,padding:c}),K=I?z?Mn:Yt:z?Pn:Jt;C[U]>k[U]&&(K=yd(K));var P=yd(K),M=[];if(o&&M.push(F[j]<=0),a&&M.push(F[K]<=0,F[P]<=0),M.every(function(fe){return fe})){O=D,_=!1;break}E.set(D,M)}if(_)for(var L=p?3:1,J=function(Te){var Se=b.find(function(Ne){var vt=E.get(Ne);if(vt)return vt.slice(0,Te).every(function(Be){return Be})});if(Se)return O=Se,"break"},B=L;B>0;B--){var X=J(B);if(X==="break")break}e.placement!==O&&(e.modifiersData[r]._skip=!0,e.placement=O,e.reset=!0)}}const $F={name:"flip",enabled:!0,phase:"main",fn:LF,requiresIfExists:["offset"],data:{_skip:!1}};function Eb(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function Tb(t){return[Jt,Mn,Pn,Yt].some(function(e){return t[e]>=0})}function FF(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,o=e.modifiersData.preventOverflow,s=bc(e,{elementContext:"reference"}),a=bc(e,{altBoundary:!0}),l=Eb(s,r),c=Eb(a,i,o),u=Tb(l),d=Tb(c);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}const BF={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:FF};function zF(t,e,n){var r=yr(t),i=[Yt,Jt].indexOf(r)>=0?-1:1,o=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,s=o[0],a=o[1];return s=s||0,a=(a||0)*i,[Yt,Mn].indexOf(r)>=0?{x:a,y:s}:{x:s,y:a}}function UF(t){var e=t.state,n=t.options,r=t.name,i=n.offset,o=i===void 0?[0,0]:i,s=ST.reduce(function(u,d){return u[d]=zF(d,e.rects,o),u},{}),a=s[e.placement],l=a.x,c=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[r]=s}const VF={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:UF};function HF(t){var e=t.state,n=t.name;e.modifiersData[n]=PT({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const WF={name:"popperOffsets",enabled:!0,phase:"read",fn:HF,data:{}};function KF(t){return t==="x"?"y":"x"}function qF(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,o=i===void 0?!0:i,s=n.altAxis,a=s===void 0?!1:s,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,d=n.padding,f=n.tether,h=f===void 0?!0:f,p=n.tetherOffset,g=p===void 0?0:p,x=bc(e,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),v=yr(e.placement),w=Ba(e.placement),S=!w,b=Hv(v),C=KF(b),k=e.modifiersData.popperOffsets,E=e.rects.reference,_=e.rects.popper,O=typeof g=="function"?g(Object.assign({},e.rects,{placement:e.placement})):g,T=typeof O=="number"?{mainAxis:O,altAxis:O}:Object.assign({mainAxis:0,altAxis:0},O),D=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,j={x:0,y:0};if(k){if(o){var z,I=b==="y"?Jt:Yt,U=b==="y"?Pn:Mn,F=b==="y"?"height":"width",K=k[b],P=K+x[I],M=K-x[U],L=h?-_[F]/2:0,J=w===La?E[F]:_[F],B=w===La?-_[F]:-E[F],X=e.elements.arrow,fe=h&&X?Vv(X):{width:0,height:0},Te=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:TT(),Se=Te[I],Ne=Te[U],vt=zl(0,E[F],fe[F]),Be=S?E[F]/2-L-vt-Se-T.mainAxis:J-vt-Se-T.mainAxis,jt=S?-E[F]/2+L+vt+Ne+T.mainAxis:B+vt+Ne+T.mainAxis,Er=e.elements.arrow&&Zc(e.elements.arrow),oo=Er?b==="y"?Er.clientTop||0:Er.clientLeft||0:0,In=(z=D==null?void 0:D[b])!=null?z:0,so=K+Be-In-oo,ps=K+jt-In,ao=zl(h?uf(P,so):P,K,h?Uo(M,ps):M);k[b]=ao,j[b]=ao-K}if(a){var lo,ms=b==="x"?Jt:Yt,Tr=b==="x"?Pn:Mn,_r=k[C],Xr=C==="y"?"height":"width",tl=_r+x[ms],co=_r-x[Tr],nl=[Jt,Yt].indexOf(v)!==-1,iu=(lo=D==null?void 0:D[C])!=null?lo:0,ou=nl?tl:_r-E[Xr]-_[Xr]-iu+T.altAxis,su=nl?_r+E[Xr]+_[Xr]-iu-T.altAxis:co,au=h&&nl?yF(ou,_r,su):zl(h?ou:tl,_r,h?su:co);k[C]=au,j[C]=au-_r}e.modifiersData[r]=j}}const GF={name:"preventOverflow",enabled:!0,phase:"main",fn:qF,requiresIfExists:["offset"]};function JF(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function YF(t){return t===ln(t)||!kn(t)?Wv(t):JF(t)}function QF(t){var e=t.getBoundingClientRect(),n=$a(e.width)/t.offsetWidth||1,r=$a(e.height)/t.offsetHeight||1;return n!==1||r!==1}function XF(t,e,n){n===void 0&&(n=!1);var r=kn(e),i=kn(e)&&QF(e),o=io(e),s=Fa(t,i,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((br(e)!=="body"||qv(o))&&(a=YF(e)),kn(e)?(l=Fa(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):o&&(l.x=Kv(o))),{x:s.left+a.scrollLeft-l.x,y:s.top+a.scrollTop-l.y,width:s.width,height:s.height}}function ZF(t){var e=new Map,n=new Set,r=[];t.forEach(function(o){e.set(o.name,o)});function i(o){n.add(o.name);var s=[].concat(o.requires||[],o.requiresIfExists||[]);s.forEach(function(a){if(!n.has(a)){var l=e.get(a);l&&i(l)}}),r.push(o)}return t.forEach(function(o){n.has(o.name)||i(o)}),r}function eB(t){var e=ZF(t);return fF.reduce(function(n,r){return n.concat(e.filter(function(i){return i.phase===r}))},[])}function tB(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function nB(t){var e=t.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var _b={placement:"bottom",modifiers:[],strategy:"absolute"};function Rb(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function rB(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,i=e.defaultOptions,o=i===void 0?_b:i;return function(a,l,c){c===void 0&&(c=o);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},_b,o),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},d=[],f=!1,h={state:u,setOptions:function(v){var w=typeof v=="function"?v(u.options):v;g(),u.options=Object.assign({},o,u.options,w),u.scrollParents={reference:ns(a)?Ul(a):a.contextElement?Ul(a.contextElement):[],popper:Ul(l)};var S=eB(nB([].concat(r,u.options.modifiers)));return u.orderedModifiers=S.filter(function(b){return b.enabled}),p(),h.update()},forceUpdate:function(){if(!f){var v=u.elements,w=v.reference,S=v.popper;if(Rb(w,S)){u.rects={reference:XF(w,Zc(S),u.options.strategy==="fixed"),popper:Vv(S)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(T){return u.modifiersData[T.name]=Object.assign({},T.data)});for(var b=0;b<u.orderedModifiers.length;b++){if(u.reset===!0){u.reset=!1,b=-1;continue}var C=u.orderedModifiers[b],k=C.fn,E=C.options,_=E===void 0?{}:E,O=C.name;typeof k=="function"&&(u=k({state:u,options:_,name:O,instance:h})||u)}}}},update:tB(function(){return new Promise(function(x){h.forceUpdate(),x(u)})}),destroy:function(){g(),f=!0}};if(!Rb(a,l))return h;h.setOptions(c).then(function(x){!f&&c.onFirstUpdate&&c.onFirstUpdate(x)});function p(){u.orderedModifiers.forEach(function(x){var v=x.name,w=x.options,S=w===void 0?{}:w,b=x.effect;if(typeof b=="function"){var C=b({state:u,name:v,instance:h,options:S}),k=function(){};d.push(C||k)}})}function g(){d.forEach(function(x){return x()}),d=[]}return h}}var iB=[_F,WF,EF,CT,VF,$F,GF,bF,BF],oB=rB({defaultModifiers:iB}),sB="tippy-box",MT="tippy-content",aB="tippy-backdrop",AT="tippy-arrow",DT="tippy-svg-arrow",yo={passive:!0,capture:!0},IT=function(){return document.body};function Pp(t,e,n){if(Array.isArray(t)){var r=t[e];return r??(Array.isArray(n)?n[e]:n)}return t}function Gv(t,e){var n={}.toString.call(t);return n.indexOf("[object")===0&&n.indexOf(e+"]")>-1}function NT(t,e){return typeof t=="function"?t.apply(void 0,e):t}function Ob(t,e){if(e===0)return t;var n;return function(r){clearTimeout(n),n=setTimeout(function(){t(r)},e)}}function lB(t){return t.split(/\s+/).filter(Boolean)}function Ds(t){return[].concat(t)}function Pb(t,e){t.indexOf(e)===-1&&t.push(e)}function cB(t){return t.filter(function(e,n){return t.indexOf(e)===n})}function uB(t){return t.split("-")[0]}function df(t){return[].slice.call(t)}function Mb(t){return Object.keys(t).reduce(function(e,n){return t[n]!==void 0&&(e[n]=t[n]),e},{})}function Vl(){return document.createElement("div")}function ch(t){return["Element","Fragment"].some(function(e){return Gv(t,e)})}function dB(t){return Gv(t,"NodeList")}function fB(t){return Gv(t,"MouseEvent")}function hB(t){return!!(t&&t._tippy&&t._tippy.reference===t)}function pB(t){return ch(t)?[t]:dB(t)?df(t):Array.isArray(t)?t:df(document.querySelectorAll(t))}function Mp(t,e){t.forEach(function(n){n&&(n.style.transitionDuration=e+"ms")})}function Ab(t,e){t.forEach(function(n){n&&n.setAttribute("data-state",e)})}function mB(t){var e,n=Ds(t),r=n[0];return r!=null&&(e=r.ownerDocument)!=null&&e.body?r.ownerDocument:document}function gB(t,e){var n=e.clientX,r=e.clientY;return t.every(function(i){var o=i.popperRect,s=i.popperState,a=i.props,l=a.interactiveBorder,c=uB(s.placement),u=s.modifiersData.offset;if(!u)return!0;var d=c==="bottom"?u.top.y:0,f=c==="top"?u.bottom.y:0,h=c==="right"?u.left.x:0,p=c==="left"?u.right.x:0,g=o.top-r+d>l,x=r-o.bottom-f>l,v=o.left-n+h>l,w=n-o.right-p>l;return g||x||v||w})}function Ap(t,e,n){var r=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(i){t[r](i,n)})}function Db(t,e){for(var n=e;n;){var r;if(t.contains(n))return!0;n=n.getRootNode==null||(r=n.getRootNode())==null?void 0:r.host}return!1}var dr={isTouch:!1},Ib=0;function yB(){dr.isTouch||(dr.isTouch=!0,window.performance&&document.addEventListener("mousemove",jT))}function jT(){var t=performance.now();t-Ib<20&&(dr.isTouch=!1,document.removeEventListener("mousemove",jT)),Ib=t}function vB(){var t=document.activeElement;if(hB(t)){var e=t._tippy;t.blur&&!e.state.isVisible&&t.blur()}}function xB(){document.addEventListener("touchstart",yB,yo),window.addEventListener("blur",vB)}var wB=typeof window<"u"&&typeof document<"u",bB=wB?!!window.msCrypto:!1,SB={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},CB={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},Hn=Object.assign({appendTo:IT,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},SB,CB),kB=Object.keys(Hn),EB=function(e){var n=Object.keys(e);n.forEach(function(r){Hn[r]=e[r]})};function LT(t){var e=t.plugins||[],n=e.reduce(function(r,i){var o=i.name,s=i.defaultValue;if(o){var a;r[o]=t[o]!==void 0?t[o]:(a=Hn[o])!=null?a:s}return r},{});return Object.assign({},t,n)}function TB(t,e){var n=e?Object.keys(LT(Object.assign({},Hn,{plugins:e}))):kB,r=n.reduce(function(i,o){var s=(t.getAttribute("data-tippy-"+o)||"").trim();if(!s)return i;if(o==="content")i[o]=s;else try{i[o]=JSON.parse(s)}catch{i[o]=s}return i},{});return r}function Nb(t,e){var n=Object.assign({},e,{content:NT(e.content,[t])},e.ignoreAttributes?{}:TB(t,e.plugins));return n.aria=Object.assign({},Hn.aria,n.aria),n.aria={expanded:n.aria.expanded==="auto"?e.interactive:n.aria.expanded,content:n.aria.content==="auto"?e.interactive?null:"describedby":n.aria.content},n}var _B=function(){return"innerHTML"};function Ug(t,e){t[_B()]=e}function jb(t){var e=Vl();return t===!0?e.className=AT:(e.className=DT,ch(t)?e.appendChild(t):Ug(e,t)),e}function Lb(t,e){ch(e.content)?(Ug(t,""),t.appendChild(e.content)):typeof e.content!="function"&&(e.allowHTML?Ug(t,e.content):t.textContent=e.content)}function Vg(t){var e=t.firstElementChild,n=df(e.children);return{box:e,content:n.find(function(r){return r.classList.contains(MT)}),arrow:n.find(function(r){return r.classList.contains(AT)||r.classList.contains(DT)}),backdrop:n.find(function(r){return r.classList.contains(aB)})}}function $T(t){var e=Vl(),n=Vl();n.className=sB,n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=Vl();r.className=MT,r.setAttribute("data-state","hidden"),Lb(r,t.props),e.appendChild(n),n.appendChild(r),i(t.props,t.props);function i(o,s){var a=Vg(e),l=a.box,c=a.content,u=a.arrow;s.theme?l.setAttribute("data-theme",s.theme):l.removeAttribute("data-theme"),typeof s.animation=="string"?l.setAttribute("data-animation",s.animation):l.removeAttribute("data-animation"),s.inertia?l.setAttribute("data-inertia",""):l.removeAttribute("data-inertia"),l.style.maxWidth=typeof s.maxWidth=="number"?s.maxWidth+"px":s.maxWidth,s.role?l.setAttribute("role",s.role):l.removeAttribute("role"),(o.content!==s.content||o.allowHTML!==s.allowHTML)&&Lb(c,t.props),s.arrow?u?o.arrow!==s.arrow&&(l.removeChild(u),l.appendChild(jb(s.arrow))):l.appendChild(jb(s.arrow)):u&&l.removeChild(u)}return{popper:e,onUpdate:i}}$T.$$tippy=!0;var RB=1,Vu=[],Dp=[];function OB(t,e){var n=Nb(t,Object.assign({},Hn,LT(Mb(e)))),r,i,o,s=!1,a=!1,l=!1,c=!1,u,d,f,h=[],p=Ob(so,n.interactiveDebounce),g,x=RB++,v=null,w=cB(n.plugins),S={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},b={id:x,reference:t,popper:Vl(),popperInstance:v,props:n,state:S,plugins:w,clearDelayTimeouts:ou,setProps:su,setContent:au,show:YR,hide:QR,hideWithInteractivity:XR,enable:nl,disable:iu,unmount:ZR,destroy:eO};if(!n.render)return b;var C=n.render(b),k=C.popper,E=C.onUpdate;k.setAttribute("data-tippy-root",""),k.id="tippy-"+b.id,b.popper=k,t._tippy=b,k._tippy=b;var _=w.map(function(A){return A.fn(b)}),O=t.hasAttribute("aria-expanded");return Er(),L(),K(),P("onCreate",[b]),n.showOnCreate&&tl(),k.addEventListener("mouseenter",function(){b.props.interactive&&b.state.isVisible&&b.clearDelayTimeouts()}),k.addEventListener("mouseleave",function(){b.props.interactive&&b.props.trigger.indexOf("mouseenter")>=0&&I().addEventListener("mousemove",p)}),b;function T(){var A=b.props.touch;return Array.isArray(A)?A:[A,0]}function D(){return T()[0]==="hold"}function j(){var A;return!!((A=b.props.render)!=null&&A.$$tippy)}function z(){return g||t}function I(){var A=z().parentNode;return A?mB(A):document}function U(){return Vg(k)}function F(A){return b.state.isMounted&&!b.state.isVisible||dr.isTouch||u&&u.type==="focus"?0:Pp(b.props.delay,A?0:1,Hn.delay)}function K(A){A===void 0&&(A=!1),k.style.pointerEvents=b.props.interactive&&!A?"":"none",k.style.zIndex=""+b.props.zIndex}function P(A,G,te){if(te===void 0&&(te=!0),_.forEach(function(ue){ue[A]&&ue[A].apply(ue,G)}),te){var he;(he=b.props)[A].apply(he,G)}}function M(){var A=b.props.aria;if(A.content){var G="aria-"+A.content,te=k.id,he=Ds(b.props.triggerTarget||t);he.forEach(function(ue){var xt=ue.getAttribute(G);if(b.state.isVisible)ue.setAttribute(G,xt?xt+" "+te:te);else{var fn=xt&&xt.replace(te,"").trim();fn?ue.setAttribute(G,fn):ue.removeAttribute(G)}})}}function L(){if(!(O||!b.props.aria.expanded)){var A=Ds(b.props.triggerTarget||t);A.forEach(function(G){b.props.interactive?G.setAttribute("aria-expanded",b.state.isVisible&&G===z()?"true":"false"):G.removeAttribute("aria-expanded")})}}function J(){I().removeEventListener("mousemove",p),Vu=Vu.filter(function(A){return A!==p})}function B(A){if(!(dr.isTouch&&(l||A.type==="mousedown"))){var G=A.composedPath&&A.composedPath()[0]||A.target;if(!(b.props.interactive&&Db(k,G))){if(Ds(b.props.triggerTarget||t).some(function(te){return Db(te,G)})){if(dr.isTouch||b.state.isVisible&&b.props.trigger.indexOf("click")>=0)return}else P("onClickOutside",[b,A]);b.props.hideOnClick===!0&&(b.clearDelayTimeouts(),b.hide(),a=!0,setTimeout(function(){a=!1}),b.state.isMounted||Se())}}}function X(){l=!0}function fe(){l=!1}function Te(){var A=I();A.addEventListener("mousedown",B,!0),A.addEventListener("touchend",B,yo),A.addEventListener("touchstart",fe,yo),A.addEventListener("touchmove",X,yo)}function Se(){var A=I();A.removeEventListener("mousedown",B,!0),A.removeEventListener("touchend",B,yo),A.removeEventListener("touchstart",fe,yo),A.removeEventListener("touchmove",X,yo)}function Ne(A,G){Be(A,function(){!b.state.isVisible&&k.parentNode&&k.parentNode.contains(k)&&G()})}function vt(A,G){Be(A,G)}function Be(A,G){var te=U().box;function he(ue){ue.target===te&&(Ap(te,"remove",he),G())}if(A===0)return G();Ap(te,"remove",d),Ap(te,"add",he),d=he}function jt(A,G,te){te===void 0&&(te=!1);var he=Ds(b.props.triggerTarget||t);he.forEach(function(ue){ue.addEventListener(A,G,te),h.push({node:ue,eventType:A,handler:G,options:te})})}function Er(){D()&&(jt("touchstart",In,{passive:!0}),jt("touchend",ps,{passive:!0})),lB(b.props.trigger).forEach(function(A){if(A!=="manual")switch(jt(A,In),A){case"mouseenter":jt("mouseleave",ps);break;case"focus":jt(bB?"focusout":"blur",ao);break;case"focusin":jt("focusout",ao);break}})}function oo(){h.forEach(function(A){var G=A.node,te=A.eventType,he=A.handler,ue=A.options;G.removeEventListener(te,he,ue)}),h=[]}function In(A){var G,te=!1;if(!(!b.state.isEnabled||lo(A)||a)){var he=((G=u)==null?void 0:G.type)==="focus";u=A,g=A.currentTarget,L(),!b.state.isVisible&&fB(A)&&Vu.forEach(function(ue){return ue(A)}),A.type==="click"&&(b.props.trigger.indexOf("mouseenter")<0||s)&&b.props.hideOnClick!==!1&&b.state.isVisible?te=!0:tl(A),A.type==="click"&&(s=!te),te&&!he&&co(A)}}function so(A){var G=A.target,te=z().contains(G)||k.contains(G);if(!(A.type==="mousemove"&&te)){var he=Xr().concat(k).map(function(ue){var xt,fn=ue._tippy,gs=(xt=fn.popperInstance)==null?void 0:xt.state;return gs?{popperRect:ue.getBoundingClientRect(),popperState:gs,props:n}:null}).filter(Boolean);gB(he,A)&&(J(),co(A))}}function ps(A){var G=lo(A)||b.props.trigger.indexOf("click")>=0&&s;if(!G){if(b.props.interactive){b.hideWithInteractivity(A);return}co(A)}}function ao(A){b.props.trigger.indexOf("focusin")<0&&A.target!==z()||b.props.interactive&&A.relatedTarget&&k.contains(A.relatedTarget)||co(A)}function lo(A){return dr.isTouch?D()!==A.type.indexOf("touch")>=0:!1}function ms(){Tr();var A=b.props,G=A.popperOptions,te=A.placement,he=A.offset,ue=A.getReferenceClientRect,xt=A.moveTransition,fn=j()?Vg(k).arrow:null,gs=ue?{getBoundingClientRect:ue,contextElement:ue.contextElement||z()}:t,O0={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(lu){var ys=lu.state;if(j()){var tO=U(),Ph=tO.box;["placement","reference-hidden","escaped"].forEach(function(cu){cu==="placement"?Ph.setAttribute("data-placement",ys.placement):ys.attributes.popper["data-popper-"+cu]?Ph.setAttribute("data-"+cu,""):Ph.removeAttribute("data-"+cu)}),ys.attributes.popper={}}}},uo=[{name:"offset",options:{offset:he}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!xt}},O0];j()&&fn&&uo.push({name:"arrow",options:{element:fn,padding:3}}),uo.push.apply(uo,(G==null?void 0:G.modifiers)||[]),b.popperInstance=oB(gs,k,Object.assign({},G,{placement:te,onFirstUpdate:f,modifiers:uo}))}function Tr(){b.popperInstance&&(b.popperInstance.destroy(),b.popperInstance=null)}function _r(){var A=b.props.appendTo,G,te=z();b.props.interactive&&A===IT||A==="parent"?G=te.parentNode:G=NT(A,[te]),G.contains(k)||G.appendChild(k),b.state.isMounted=!0,ms()}function Xr(){return df(k.querySelectorAll("[data-tippy-root]"))}function tl(A){b.clearDelayTimeouts(),A&&P("onTrigger",[b,A]),Te();var G=F(!0),te=T(),he=te[0],ue=te[1];dr.isTouch&&he==="hold"&&ue&&(G=ue),G?r=setTimeout(function(){b.show()},G):b.show()}function co(A){if(b.clearDelayTimeouts(),P("onUntrigger",[b,A]),!b.state.isVisible){Se();return}if(!(b.props.trigger.indexOf("mouseenter")>=0&&b.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(A.type)>=0&&s)){var G=F(!1);G?i=setTimeout(function(){b.state.isVisible&&b.hide()},G):o=requestAnimationFrame(function(){b.hide()})}}function nl(){b.state.isEnabled=!0}function iu(){b.hide(),b.state.isEnabled=!1}function ou(){clearTimeout(r),clearTimeout(i),cancelAnimationFrame(o)}function su(A){if(!b.state.isDestroyed){P("onBeforeUpdate",[b,A]),oo();var G=b.props,te=Nb(t,Object.assign({},G,Mb(A),{ignoreAttributes:!0}));b.props=te,Er(),G.interactiveDebounce!==te.interactiveDebounce&&(J(),p=Ob(so,te.interactiveDebounce)),G.triggerTarget&&!te.triggerTarget?Ds(G.triggerTarget).forEach(function(he){he.removeAttribute("aria-expanded")}):te.triggerTarget&&t.removeAttribute("aria-expanded"),L(),K(),E&&E(G,te),b.popperInstance&&(ms(),Xr().forEach(function(he){requestAnimationFrame(he._tippy.popperInstance.forceUpdate)})),P("onAfterUpdate",[b,A])}}function au(A){b.setProps({content:A})}function YR(){var A=b.state.isVisible,G=b.state.isDestroyed,te=!b.state.isEnabled,he=dr.isTouch&&!b.props.touch,ue=Pp(b.props.duration,0,Hn.duration);if(!(A||G||te||he)&&!z().hasAttribute("disabled")&&(P("onShow",[b],!1),b.props.onShow(b)!==!1)){if(b.state.isVisible=!0,j()&&(k.style.visibility="visible"),K(),Te(),b.state.isMounted||(k.style.transition="none"),j()){var xt=U(),fn=xt.box,gs=xt.content;Mp([fn,gs],0)}f=function(){var uo;if(!(!b.state.isVisible||c)){if(c=!0,k.offsetHeight,k.style.transition=b.props.moveTransition,j()&&b.props.animation){var Oh=U(),lu=Oh.box,ys=Oh.content;Mp([lu,ys],ue),Ab([lu,ys],"visible")}M(),L(),Pb(Dp,b),(uo=b.popperInstance)==null||uo.forceUpdate(),P("onMount",[b]),b.props.animation&&j()&&vt(ue,function(){b.state.isShown=!0,P("onShown",[b])})}},_r()}}function QR(){var A=!b.state.isVisible,G=b.state.isDestroyed,te=!b.state.isEnabled,he=Pp(b.props.duration,1,Hn.duration);if(!(A||G||te)&&(P("onHide",[b],!1),b.props.onHide(b)!==!1)){if(b.state.isVisible=!1,b.state.isShown=!1,c=!1,s=!1,j()&&(k.style.visibility="hidden"),J(),Se(),K(!0),j()){var ue=U(),xt=ue.box,fn=ue.content;b.props.animation&&(Mp([xt,fn],he),Ab([xt,fn],"hidden"))}M(),L(),b.props.animation?j()&&Ne(he,b.unmount):b.unmount()}}function XR(A){I().addEventListener("mousemove",p),Pb(Vu,p),p(A)}function ZR(){b.state.isVisible&&b.hide(),b.state.isMounted&&(Tr(),Xr().forEach(function(A){A._tippy.unmount()}),k.parentNode&&k.parentNode.removeChild(k),Dp=Dp.filter(function(A){return A!==b}),b.state.isMounted=!1,P("onHidden",[b]))}function eO(){b.state.isDestroyed||(b.clearDelayTimeouts(),b.unmount(),oo(),delete t._tippy,b.state.isDestroyed=!0,P("onDestroy",[b]))}}function eu(t,e){e===void 0&&(e={});var n=Hn.plugins.concat(e.plugins||[]);xB();var r=Object.assign({},e,{plugins:n}),i=pB(t),o=i.reduce(function(s,a){var l=a&&OB(a,r);return l&&s.push(l),s},[]);return ch(t)?o[0]:o}eu.defaultProps=Hn;eu.setDefaultProps=EB;eu.currentInput=dr;Object.assign({},CT,{effect:function(e){var n=e.state,r={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(n.elements.popper.style,r.popper),n.styles=r,n.elements.arrow&&Object.assign(n.elements.arrow.style,r.arrow)}});eu.setDefaultProps({render:$T});class PB{constructor({editor:e,element:n,view:r,tippyOptions:i={},updateDelay:o=250,shouldShow:s}){this.preventHide=!1,this.shouldShow=({view:a,state:l,from:c,to:u})=>{const{doc:d,selection:f}=l,{empty:h}=f,p=!d.textBetween(c,u).length&&$v(l.selection),g=this.element.contains(document.activeElement);return!(!(a.hasFocus()||g)||h||p||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:a})=>{var l;if(this.preventHide){this.preventHide=!1;return}a!=null&&a.relatedTarget&&(!((l=this.element.parentNode)===null||l===void 0)&&l.contains(a.relatedTarget))||(a==null?void 0:a.relatedTarget)!==this.editor.view.dom&&this.hide()},this.tippyBlurHandler=a=>{this.blurHandler({event:a})},this.handleDebouncedUpdate=(a,l)=>{const c=!(l!=null&&l.selection.eq(a.state.selection)),u=!(l!=null&&l.doc.eq(a.state.doc));!c&&!u||(this.updateDebounceTimer&&clearTimeout(this.updateDebounceTimer),this.updateDebounceTimer=window.setTimeout(()=>{this.updateHandler(a,c,u,l)},this.updateDelay))},this.updateHandler=(a,l,c,u)=>{var d,f,h;const{state:p,composing:g}=a,{selection:x}=p;if(g||!l&&!c)return;this.createTooltip();const{ranges:w}=x,S=Math.min(...w.map(k=>k.$from.pos)),b=Math.max(...w.map(k=>k.$to.pos));if(!((d=this.shouldShow)===null||d===void 0?void 0:d.call(this,{editor:this.editor,element:this.element,view:a,state:p,oldState:u,from:S,to:b}))){this.hide();return}(f=this.tippy)===null||f===void 0||f.setProps({getReferenceClientRect:((h=this.tippyOptions)===null||h===void 0?void 0:h.getReferenceClientRect)||(()=>{if(wT(p.selection)){let k=a.nodeDOM(S);if(k){const E=k.dataset.nodeViewWrapper?k:k.querySelector("[data-node-view-wrapper]");if(E&&(k=E.firstChild),k)return k.getBoundingClientRect()}}return S3(a,S,b)})}),this.show()},this.editor=e,this.element=n,this.view=r,this.updateDelay=o,s&&(this.shouldShow=s),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=i,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){const{element:e}=this.editor.options,n=!!e.parentElement;this.tippy||!n||(this.tippy=eu(e,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"top",hideOnClick:"toggle",...this.tippyOptions}),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",this.tippyBlurHandler))}update(e,n){const{state:r}=e,i=r.selection.from!==r.selection.to;if(this.updateDelay>0&&i){this.handleDebouncedUpdate(e,n);return}const o=!(n!=null&&n.selection.eq(e.state.selection)),s=!(n!=null&&n.doc.eq(e.state.doc));this.updateHandler(e,o,s,n)}show(){var e;(e=this.tippy)===null||e===void 0||e.show()}hide(){var e;(e=this.tippy)===null||e===void 0||e.hide()}destroy(){var e,n;!((e=this.tippy)===null||e===void 0)&&e.popper.firstChild&&this.tippy.popper.firstChild.removeEventListener("blur",this.tippyBlurHandler),(n=this.tippy)===null||n===void 0||n.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const FT=t=>new lt({key:typeof t.pluginKey=="string"?new dn(t.pluginKey):t.pluginKey,view:e=>new PB({view:e,...t})});Ze.create({name:"bubbleMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"bubbleMenu",updateDelay:void 0,shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[FT({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,updateDelay:this.options.updateDelay,shouldShow:this.options.shouldShow})]:[]}});function MB(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var BT={exports:{}},Ip={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $b;function AB(){if($b)return Ip;$b=1;var t=we;function e(d,f){return d===f&&(d!==0||1/d===1/f)||d!==d&&f!==f}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,o=t.useLayoutEffect,s=t.useDebugValue;function a(d,f){var h=f(),p=r({inst:{value:h,getSnapshot:f}}),g=p[0].inst,x=p[1];return o(function(){g.value=h,g.getSnapshot=f,l(g)&&x({inst:g})},[d,h,f]),i(function(){return l(g)&&x({inst:g}),d(function(){l(g)&&x({inst:g})})},[d]),s(h),h}function l(d){var f=d.getSnapshot;d=d.value;try{var h=f();return!n(d,h)}catch{return!0}}function c(d,f){return f()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:a;return Ip.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:u,Ip}BT.exports=AB();var Jv=BT.exports;const DB=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},IB=({contentComponent:t})=>{const e=Jv.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return we.createElement(we.Fragment,null,Object.values(e))};function NB(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:GC.createPortal(r.reactElement,r.element,n)},t.forEach(i=>i())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(i=>i())}}}class jB extends we.Component{constructor(e){var n;super(e),this.editorContentRef=we.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((n=e.editor)===null||n===void 0)&&n.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const n=this.editorContentRef.current;n.append(...e.options.element.childNodes),e.setOptions({element:n}),e.contentComponent=NB(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;const n=document.createElement("div");n.append(...e.options.element.childNodes),e.setOptions({element:n})}render(){const{editor:e,innerRef:n,...r}=this.props;return we.createElement(we.Fragment,null,we.createElement("div",{ref:DB(n,this.editorContentRef),...r}),(e==null?void 0:e.contentComponent)&&we.createElement(IB,{contentComponent:e.contentComponent}))}}const LB=y.forwardRef((t,e)=>{const n=we.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return we.createElement(jB,{key:n,innerRef:e,...t})}),$B=we.memo(LB);var FB=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!t(e[i],n[i]))return!1;return!0}if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;for(i of e.entries())if(!t(i[1],n.get(i[0])))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(n)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(e[i]!==n[i])return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(o=Object.keys(e),r=o.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;i--!==0;){var s=o[i];if(!(s==="_owner"&&e.$$typeof)&&!t(e[s],n[s]))return!1}return!0}return e!==e&&n!==n},BB=MB(FB),zT={exports:{}},Np={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fb;function zB(){if(Fb)return Np;Fb=1;var t=we,e=Jv;function n(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,o=t.useRef,s=t.useEffect,a=t.useMemo,l=t.useDebugValue;return Np.useSyncExternalStoreWithSelector=function(c,u,d,f,h){var p=o(null);if(p.current===null){var g={hasValue:!1,value:null};p.current=g}else g=p.current;p=a(function(){function v(k){if(!w){if(w=!0,S=k,k=f(k),h!==void 0&&g.hasValue){var E=g.value;if(h(E,k))return b=E}return b=k}if(E=b,r(S,k))return E;var _=f(k);return h!==void 0&&h(E,_)?E:(S=k,b=_)}var w=!1,S,b,C=d===void 0?null:d;return[function(){return v(u())},C===null?void 0:function(){return v(C())}]},[u,d,f,h]);var x=i(c,p[0],p[1]);return s(function(){g.hasValue=!0,g.value=x},[x]),l(x),x},Np}zT.exports=zB();var UB=zT.exports;const VB=typeof window<"u"?y.useLayoutEffect:y.useEffect;class HB{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const n=()=>{this.transactionNumber+=1,this.subscribers.forEach(i=>i())},r=this.editor;return r.on("transaction",n),()=>{r.off("transaction",n)}}}}function WB(t){var e;const[n]=y.useState(()=>new HB(t.editor)),r=UB.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,t.selector,(e=t.equalityFn)!==null&&e!==void 0?e:BB);return VB(()=>n.watch(t.editor),[t.editor,n]),y.useDebugValue(r),r}const KB=!1,Hg=typeof window>"u",qB=Hg||!!(typeof window<"u"&&window.next);class Yv{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){if(this.options.current.immediatelyRender===void 0)return Hg||qB?null:this.createEditor();if(this.options.current.immediatelyRender&&Hg&&KB)throw new Error("Tiptap Error: SSR has been detected, and `immediatelyRender` has been set to `true` this is an unsupported configuration that may result in errors, explicitly set `immediatelyRender` to `false` to avoid hydration mismatches.");return this.options.current.immediatelyRender?this.createEditor():null}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var i,o;return(o=(i=this.options.current).onBeforeCreate)===null||o===void 0?void 0:o.call(i,...r)},onBlur:(...r)=>{var i,o;return(o=(i=this.options.current).onBlur)===null||o===void 0?void 0:o.call(i,...r)},onCreate:(...r)=>{var i,o;return(o=(i=this.options.current).onCreate)===null||o===void 0?void 0:o.call(i,...r)},onDestroy:(...r)=>{var i,o;return(o=(i=this.options.current).onDestroy)===null||o===void 0?void 0:o.call(i,...r)},onFocus:(...r)=>{var i,o;return(o=(i=this.options.current).onFocus)===null||o===void 0?void 0:o.call(i,...r)},onSelectionUpdate:(...r)=>{var i,o;return(o=(i=this.options.current).onSelectionUpdate)===null||o===void 0?void 0:o.call(i,...r)},onTransaction:(...r)=>{var i,o;return(o=(i=this.options.current).onTransaction)===null||o===void 0?void 0:o.call(i,...r)},onUpdate:(...r)=>{var i,o;return(o=(i=this.options.current).onUpdate)===null||o===void 0?void 0:o.call(i,...r)},onContentError:(...r)=>{var i,o;return(o=(i=this.options.current).onContentError)===null||o===void 0?void 0:o.call(i,...r)},onDrop:(...r)=>{var i,o;return(o=(i=this.options.current).onDrop)===null||o===void 0?void 0:o.call(i,...r)},onPaste:(...r)=>{var i,o;return(o=(i=this.options.current).onPaste)===null||o===void 0?void 0:o.call(i,...r)}};return new X3(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,n){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&n.extensions?e.extensions.length!==n.extensions.length?!1:e.extensions.every((i,o)=>{var s;return i===((s=n.extensions)===null||s===void 0?void 0:s[o])}):e[r]===n[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?Yv.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,i)=>r===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===e&&this.setEditor(null))},1)}}function GB(t={},e=[]){const n=y.useRef(t);n.current=t;const[r]=y.useState(()=>new Yv(n)),i=Jv.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return y.useDebugValue(i),y.useEffect(r.onRender(e)),WB({editor:i,selector:({transactionNumber:o})=>t.shouldRerenderOnTransaction===!1?null:t.immediatelyRender&&o===0?0:o+1}),i}const UT=y.createContext({editor:null});UT.Consumer;const JB=()=>y.useContext(UT),YB=t=>{const[e,n]=y.useState(null),{editor:r}=JB();return y.useEffect(()=>{var i;if(!e||!((i=t.editor)===null||i===void 0)&&i.isDestroyed||r!=null&&r.isDestroyed)return;const{pluginKey:o="bubbleMenu",editor:s,tippyOptions:a={},updateDelay:l,shouldShow:c=null}=t,u=s||r;if(!u){console.warn("BubbleMenu component is not rendered inside of an editor component or does not have editor prop.");return}const d=FT({updateDelay:l,editor:u,element:e,pluginKey:o,shouldShow:c,tippyOptions:a});return u.registerPlugin(d),()=>{u.unregisterPlugin(o)}},[t.editor,r,e]),we.createElement("div",{ref:n,className:t.className,style:{visibility:"hidden"}},t.children)},QB=y.createContext({onDragStart:void 0}),XB=()=>y.useContext(QB);we.forwardRef((t,e)=>{const{onDragStart:n}=XB(),r=t.as||"div";return we.createElement(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});const ZB=/^\s*>\s$/,ez=er.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return["blockquote",Pt(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[xc({find:ZB,type:this.type})]}}),tz=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,nz=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,rz=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,iz=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,oz=qi.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",Pt(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Na({find:tz,type:this.type}),Na({find:rz,type:this.type})]},addPasteRules(){return[ja({find:nz,type:this.type}),ja({find:iz,type:this.type})]}}),sz="listItem",Bb="textStyle",zb=/^\s*([-+*])\s$/,az=er.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",Pt(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(sz,this.editor.getAttributes(Bb)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=xc({find:zb,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=xc({find:zb,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(Bb),editor:this.editor})),[t]}}),lz=/(^|[^`])`([^`]+)`(?!`)/,cz=/(^|[^`])`([^`]+)`(?!`)/g,uz=qi.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",Pt(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Na({find:lz,type:this.type})]},addPasteRules(){return[ja({find:cz,type:this.type})]}}),dz=/^```([a-z]+)?[\s\n]$/,fz=/^~~~([a-z]+)?[\s\n]$/,hz=er.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options,o=[...((e=t.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(s=>s.startsWith(n)).map(s=>s.replace(n,""))[0];return o||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",Pt(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const o=r.parentOffset===r.parent.nodeSize-2,s=r.parent.textContent.endsWith(`

`);return!o||!s?!1:t.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:i,empty:o}=n;if(!o||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const a=i.after();return a===void 0?!1:r.nodeAt(a)?t.commands.command(({tr:c})=>(c.setSelection(re.near(r.resolve(a))),!0)):t.commands.exitCode()}}},addInputRules(){return[$g({find:dz,type:this.type,getAttributes:t=>({language:t[1]})}),$g({find:fz,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new lt({key:new dn("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,o=i==null?void 0:i.mode;if(!n||!o)return!1;const{tr:s,schema:a}=t.state,l=a.text(n.replace(/\r\n?/g,`
`));return s.replaceSelectionWith(this.type.create({language:o},l)),s.selection.$from.parent.type!==this.type&&s.setSelection(ne.near(s.doc.resolve(Math.max(0,s.selection.from-2)))),s.setMeta("paste",!0),t.dispatch(s),!0}}})]}}),pz=er.create({name:"doc",topNode:!0,content:"block+"});function mz(t={}){return new lt({view(e){return new gz(e,t)}})}class gz{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let o=s=>{this[i](s)};return e.dom.addEventListener(i,o),{name:i,handler:o}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r;if(n){let a=e.nodeBefore,l=e.nodeAfter;if(a||l){let c=this.editorView.nodeDOM(this.cursorPos-(a?a.nodeSize:0));if(c){let u=c.getBoundingClientRect(),d=a?u.bottom:u.top;a&&l&&(d=(d+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),r={left:u.left,right:u.right,top:d-this.width/2,bottom:d+this.width/2}}}}if(!r){let a=this.editorView.coordsAtPos(this.cursorPos);r={left:a.left-this.width/2,right:a.left+this.width/2,top:a.top,bottom:a.bottom}}let i=this.editorView.dom.offsetParent;this.element||(this.element=i.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let o,s;if(!i||i==document.body&&getComputedStyle(i).position=="static")o=-pageXOffset,s=-pageYOffset;else{let a=i.getBoundingClientRect();o=a.left-i.scrollLeft,s=a.top-i.scrollTop}this.element.style.left=r.left-o+"px",this.element.style.top=r.top-s+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,o=typeof i=="function"?i(this.editorView,n,e):i;if(n&&!o){let s=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=yE(this.editorView.state.doc,s,this.editorView.dragging.slice);a!=null&&(s=a)}this.setCursor(s),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}const yz=Ze.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[mz(this.options)]}});class Ie extends re{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return Ie.valid(r)?new Ie(r):re.near(r)}content(){return V.empty}eq(e){return e instanceof Ie&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Ie(e.resolve(n.pos))}getBookmark(){return new Qv(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!vz(e)||!xz(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&Ie.valid(e))return e;let i=e.pos,o=null;for(let s=e.depth;;s--){let a=e.node(s);if(n>0?e.indexAfter(s)<a.childCount:e.index(s)>0){o=a.child(n>0?e.indexAfter(s):e.index(s)-1);break}else if(s==0)return null;i+=n;let l=e.doc.resolve(i);if(Ie.valid(l))return l}for(;;){let s=n>0?o.firstChild:o.lastChild;if(!s){if(o.isAtom&&!o.isText&&!Q.isSelectable(o)){e=e.doc.resolve(i+o.nodeSize*n),r=!1;continue e}break}o=s,i+=n;let a=e.doc.resolve(i);if(Ie.valid(a))return a}return null}}}Ie.prototype.visible=!1;Ie.findFrom=Ie.findGapCursorFrom;re.jsonID("gapcursor",Ie);class Qv{constructor(e){this.pos=e}map(e){return new Qv(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return Ie.valid(n)?new Ie(n):re.near(n)}}function vz(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function xz(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function wz(){return new lt({props:{decorations:kz,createSelectionBetween(t,e,n){return e.pos==n.pos&&Ie.valid(n)?new Ie(n):null},handleClick:Sz,handleKeyDown:bz,handleDOMEvents:{beforeinput:Cz}}})}const bz=rT({ArrowLeft:Hu("horiz",-1),ArrowRight:Hu("horiz",1),ArrowUp:Hu("vert",-1),ArrowDown:Hu("vert",1)});function Hu(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,o){let s=r.selection,a=e>0?s.$to:s.$from,l=s.empty;if(s instanceof ne){if(!o.endOfTextblock(n)||a.depth==0)return!1;l=!1,a=r.doc.resolve(e>0?a.after():a.before())}let c=Ie.findGapCursorFrom(a,e,l);return c?(i&&i(r.tr.setSelection(new Ie(c))),!0):!1}}function Sz(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!Ie.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&Q.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new Ie(r))),!0)}function Cz(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof Ie))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=N.empty;for(let s=r.length-1;s>=0;s--)i=N.from(r[s].createAndFill(null,i));let o=t.state.tr.replace(n.pos,n.pos,new V(i,0,0));return o.setSelection(ne.near(o.doc.resolve(n.pos+1))),t.dispatch(o),!1}function kz(t){if(!(t.selection instanceof Ie))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",je.create(t.doc,[Ht.widget(t.selection.head,e,{key:"gapcursor"})])}const Ez=Ze.create({name:"gapCursor",addProseMirrorPlugins(){return[wz()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=oe(q(t,"allowGapCursor",n)))!==null&&e!==void 0?e:null}}}),Tz=er.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",Pt(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:o}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:s}=this.options,{splittableMarks:a}=r.extensionManager,l=o||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:u})=>{if(u&&l&&s){const d=l.filter(f=>a.includes(f.type.name));c.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),_z=er.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,Pt(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>$g({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}});var ff=200,Qe=function(){};Qe.prototype.append=function(e){return e.length?(e=Qe.from(e),!this.length&&e||e.length<ff&&this.leafAppend(e)||this.length<ff&&e.leafPrepend(this)||this.appendInner(e)):this};Qe.prototype.prepend=function(e){return e.length?Qe.from(e).append(this):this};Qe.prototype.appendInner=function(e){return new Rz(this,e)};Qe.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?Qe.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};Qe.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Qe.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};Qe.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(o,s){return i.push(e(o,s))},n,r),i};Qe.from=function(e){return e instanceof Qe?e:e&&e.length?new VT(e):Qe.empty};var VT=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,o){return i==0&&o==this.length?this:new e(this.values.slice(i,o))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,o,s,a){for(var l=o;l<s;l++)if(i(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(i,o,s,a){for(var l=o-1;l>=s;l--)if(i(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=ff)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=ff)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(Qe);Qe.empty=new VT([]);var Rz=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,o,s){var a=this.left.length;if(i<a&&this.left.forEachInner(r,i,Math.min(o,a),s)===!1||o>a&&this.right.forEachInner(r,Math.max(i-a,0),Math.min(this.length,o)-a,s+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,o,s){var a=this.left.length;if(i>a&&this.right.forEachInvertedInner(r,i-a,Math.max(o,a)-a,s+a)===!1||o<a&&this.left.forEachInvertedInner(r,Math.min(i,a),o,s)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var o=this.left.length;return i<=o?this.left.slice(r,i):r>=o?this.right.slice(r-o,i-o):this.left.slice(r,o).append(this.right.slice(0,i-o))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(Qe);const Oz=500;let Sc=class Is{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,o;n&&(i=this.remapping(r,this.items.length),o=i.maps.length);let s=e.tr,a,l,c=[],u=[];return this.items.forEach((d,f)=>{if(!d.step){i||(i=this.remapping(r,f+1),o=i.maps.length),o--,u.push(d);return}if(i){u.push(new ti(d.map));let h=d.step.map(i.slice(o)),p;h&&s.maybeStep(h).doc&&(p=s.mapping.maps[s.mapping.maps.length-1],c.push(new ti(p,void 0,void 0,c.length+u.length))),o--,p&&i.appendMap(p,o)}else s.maybeStep(d.step);if(d.selection)return a=i?d.selection.map(i.slice(o)):d.selection,l=new Is(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:s,selection:a}}addTransform(e,n,r,i){let o=[],s=this.eventCount,a=this.items,l=!i&&a.length?a.get(a.length-1):null;for(let u=0;u<e.steps.length;u++){let d=e.steps[u].invert(e.docs[u]),f=new ti(e.mapping.maps[u],d,n),h;(h=l&&l.merge(f))&&(f=h,u?o.pop():a=a.slice(0,a.length-1)),o.push(f),n&&(s++,n=void 0),i||(l=f)}let c=s-r.depth;return c>Mz&&(a=Pz(a,c),s-=c),new Is(a.append(o),s)}remapping(e,n){let r=new hc;return this.items.forEach((i,o)=>{let s=i.mirrorOffset!=null&&o-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,s)},e,n),r}addMaps(e){return this.eventCount==0?this:new Is(this.items.append(e.map(n=>new ti(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),o=e.mapping,s=e.steps.length,a=this.eventCount;this.items.forEach(f=>{f.selection&&a--},i);let l=n;this.items.forEach(f=>{let h=o.getMirror(--l);if(h==null)return;s=Math.min(s,h);let p=o.maps[h];if(f.step){let g=e.steps[h].invert(e.docs[h]),x=f.selection&&f.selection.map(o.slice(l+1,h));x&&a++,r.push(new ti(p,g,x))}else r.push(new ti(p))},i);let c=[];for(let f=n;f<s;f++)c.push(new ti(o.maps[f]));let u=this.items.slice(0,i).append(c).append(r),d=new Is(u,a);return d.emptyItemCount()>Oz&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],o=0;return this.items.forEach((s,a)=>{if(a>=e)i.push(s),s.selection&&o++;else if(s.step){let l=s.step.map(n.slice(r)),c=l&&l.getMap();if(r--,c&&n.appendMap(c,r),l){let u=s.selection&&s.selection.map(n.slice(r));u&&o++;let d=new ti(c.invert(),l,u),f,h=i.length-1;(f=i.length&&i[h].merge(d))?i[h]=f:i.push(d)}}else s.map&&r--},this.items.length,0),new Is(Qe.from(i.reverse()),o)}};Sc.empty=new Sc(Qe.empty,0);function Pz(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}let ti=class HT{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new HT(n.getMap().invert(),n,this.selection)}}};class fi{constructor(e,n,r,i,o){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=o}}const Mz=20;function Az(t,e,n,r){let i=n.getMeta(Vo),o;if(i)return i.historyState;n.getMeta(Nz)&&(t=new fi(t.done,t.undone,null,0,-1));let s=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(s&&s.getMeta(Vo))return s.getMeta(Vo).redo?new fi(t.done.addTransform(n,void 0,r,vd(e)),t.undone,Ub(n.mapping.maps),t.prevTime,t.prevComposition):new fi(t.done,t.undone.addTransform(n,void 0,r,vd(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(s&&s.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),l=t.prevTime==0||!s&&t.prevComposition!=a&&(t.prevTime<(n.time||0)-r.newGroupDelay||!Dz(n,t.prevRanges)),c=s?jp(t.prevRanges,n.mapping):Ub(n.mapping.maps);return new fi(t.done.addTransform(n,l?e.selection.getBookmark():void 0,r,vd(e)),Sc.empty,c,n.time,a??t.prevComposition)}else return(o=n.getMeta("rebased"))?new fi(t.done.rebased(n,o),t.undone.rebased(n,o),jp(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new fi(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),jp(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function Dz(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let o=0;o<e.length;o+=2)r<=e[o+1]&&i>=e[o]&&(n=!0)}),n}function Ub(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,i,o,s)=>e.push(o,s));return e}function jp(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),o=e.map(t[r+1],-1);i<=o&&n.push(i,o)}return n}function Iz(t,e,n){let r=vd(e),i=Vo.get(e).spec.config,o=(n?t.undone:t.done).popEvent(e,r);if(!o)return null;let s=o.selection.resolve(o.transform.doc),a=(n?t.done:t.undone).addTransform(o.transform,e.selection.getBookmark(),i,r),l=new fi(n?a:o.remaining,n?o.remaining:a,null,0,-1);return o.transform.setSelection(s).setMeta(Vo,{redo:n,historyState:l})}let Lp=!1,Vb=null;function vd(t){let e=t.plugins;if(Vb!=e){Lp=!1,Vb=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){Lp=!0;break}}return Lp}const Vo=new dn("history"),Nz=new dn("closeHistory");function jz(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new lt({key:Vo,state:{init(){return new fi(Sc.empty,Sc.empty,null,0,-1)},apply(e,n,r){return Az(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?KT:r=="historyRedo"?qT:null;return i?(n.preventDefault(),i(e.state,e.dispatch)):!1}}}})}function WT(t,e){return(n,r)=>{let i=Vo.getState(n);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(r){let o=Iz(i,n,t);o&&r(e?o.scrollIntoView():o)}return!0}}const KT=WT(!1,!0),qT=WT(!0,!0),Lz=Ze.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>KT(t,e),redo:()=>({state:t,dispatch:e})=>qT(t,e)}},addProseMirrorPlugins(){return[jz(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),$z=er.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",Pt(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{const{selection:n}=e,{$from:r,$to:i}=n,o=t();return r.parentOffset===0?o.insertContentAt({from:Math.max(r.pos-1,0),to:i.pos},{type:this.name}):wT(n)?o.insertContentAt(i.pos,{type:this.name}):o.insertContent({type:this.name}),o.command(({tr:s,dispatch:a})=>{var l;if(a){const{$to:c}=s.selection,u=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?s.setSelection(ne.create(s.doc,c.pos+1)):c.nodeAfter.isBlock?s.setSelection(Q.create(s.doc,c.pos)):s.setSelection(ne.create(s.doc,c.pos));else{const d=(l=c.parent.type.contentMatch.defaultType)===null||l===void 0?void 0:l.create();d&&(s.insert(u,d),s.setSelection(ne.create(s.doc,u+1)))}s.scrollIntoView()}return!0}).run()}}},addInputRules(){return[Z3({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),Fz=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,Bz=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,zz=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,Uz=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,Vz=qi.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",Pt(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Na({find:Fz,type:this.type}),Na({find:zz,type:this.type})]},addPasteRules(){return[ja({find:Bz,type:this.type}),ja({find:Uz,type:this.type})]}}),Hz=er.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Pt(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),Wz="listItem",Hb="textStyle",Wb=/^(\d+)\.\s$/,Kz=er.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:void 0,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",Pt(this.options.HTMLAttributes,n),0]:["ol",Pt(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Wz,this.editor.getAttributes(Hb)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=xc({find:Wb,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=xc({find:Wb,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(Hb)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),qz=er.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",Pt(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),Gz=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,Jz=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,Yz=qi.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",Pt(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Na({find:Gz,type:this.type})]},addPasteRules(){return[ja({find:Jz,type:this.type})]}}),Qz=er.create({name:"text",group:"inline"}),Xz=Ze.create({name:"starterKit",addExtensions(){var t,e,n,r,i,o,s,a,l,c,u,d,f,h,p,g,x,v;const w=[];return this.options.bold!==!1&&w.push(oz.configure((t=this.options)===null||t===void 0?void 0:t.bold)),this.options.blockquote!==!1&&w.push(ez.configure((e=this.options)===null||e===void 0?void 0:e.blockquote)),this.options.bulletList!==!1&&w.push(az.configure((n=this.options)===null||n===void 0?void 0:n.bulletList)),this.options.code!==!1&&w.push(uz.configure((r=this.options)===null||r===void 0?void 0:r.code)),this.options.codeBlock!==!1&&w.push(hz.configure((i=this.options)===null||i===void 0?void 0:i.codeBlock)),this.options.document!==!1&&w.push(pz.configure((o=this.options)===null||o===void 0?void 0:o.document)),this.options.dropcursor!==!1&&w.push(yz.configure((s=this.options)===null||s===void 0?void 0:s.dropcursor)),this.options.gapcursor!==!1&&w.push(Ez.configure((a=this.options)===null||a===void 0?void 0:a.gapcursor)),this.options.hardBreak!==!1&&w.push(Tz.configure((l=this.options)===null||l===void 0?void 0:l.hardBreak)),this.options.heading!==!1&&w.push(_z.configure((c=this.options)===null||c===void 0?void 0:c.heading)),this.options.history!==!1&&w.push(Lz.configure((u=this.options)===null||u===void 0?void 0:u.history)),this.options.horizontalRule!==!1&&w.push($z.configure((d=this.options)===null||d===void 0?void 0:d.horizontalRule)),this.options.italic!==!1&&w.push(Vz.configure((f=this.options)===null||f===void 0?void 0:f.italic)),this.options.listItem!==!1&&w.push(Hz.configure((h=this.options)===null||h===void 0?void 0:h.listItem)),this.options.orderedList!==!1&&w.push(Kz.configure((p=this.options)===null||p===void 0?void 0:p.orderedList)),this.options.paragraph!==!1&&w.push(qz.configure((g=this.options)===null||g===void 0?void 0:g.paragraph)),this.options.strike!==!1&&w.push(Yz.configure((x=this.options)===null||x===void 0?void 0:x.strike)),this.options.text!==!1&&w.push(Qz.configure((v=this.options)===null||v===void 0?void 0:v.text)),w}}),Zz=Ze.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new lt({key:new dn("placeholder"),props:{decorations:({doc:t,selection:e})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=e,i=[];if(!n)return null;const o=this.editor.isEmpty;return t.descendants((s,a)=>{const l=r>=a&&r<=a+s.nodeSize,c=!s.isLeaf&&ah(s);if((l||!this.options.showOnlyCurrent)&&c){const u=[this.options.emptyNodeClass];o&&u.push(this.options.emptyEditorClass);const d=Ht.node(a,a+s.nodeSize,{class:u.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:s,pos:a,hasAnchor:l}):this.options.placeholder});i.push(d)}return this.options.includeChildren}),je.create(t,i)}}})]}});function e4(t){var e;const{char:n,allowSpaces:r,allowToIncludeChar:i,allowedPrefixes:o,startOfLine:s,$position:a}=t,l=r&&!i,c=eF(n),u=new RegExp(`\\s${c}$`),d=s?"^":"",f=i?"":c,h=l?new RegExp(`${d}${c}.*?(?=\\s${f}|$)`,"gm"):new RegExp(`${d}(?:^)?${c}[^\\s${f}]*`,"gm"),p=((e=a.nodeBefore)===null||e===void 0?void 0:e.isText)&&a.nodeBefore.text;if(!p)return null;const g=a.pos-p.length,x=Array.from(p.matchAll(h)).pop();if(!x||x.input===void 0||x.index===void 0)return null;const v=x.input.slice(Math.max(0,x.index-1),x.index),w=new RegExp(`^[${o==null?void 0:o.join("")}\0]?$`).test(v);if(o!==null&&!w)return null;const S=g+x.index;let b=S+x[0].length;return l&&u.test(p.slice(b-1,b+1))&&(x[0]+=" ",b+=1),S<a.pos&&b>=a.pos?{range:{from:S,to:b},query:x[0].slice(n.length),text:x[0]}:null}const t4=new dn("suggestion");function n4({pluginKey:t=t4,editor:e,char:n="@",allowSpaces:r=!1,allowToIncludeChar:i=!1,allowedPrefixes:o=[" "],startOfLine:s=!1,decorationTag:a="span",decorationClass:l="suggestion",command:c=()=>null,items:u=()=>[],render:d=()=>({}),allow:f=()=>!0,findSuggestionMatch:h=e4}){let p;const g=d==null?void 0:d(),x=new lt({key:t,view(){return{update:async(v,w)=>{var S,b,C,k,E,_,O;const T=(S=this.key)===null||S===void 0?void 0:S.getState(w),D=(b=this.key)===null||b===void 0?void 0:b.getState(v.state),j=T.active&&D.active&&T.range.from!==D.range.from,z=!T.active&&D.active,I=T.active&&!D.active,U=!z&&!I&&T.query!==D.query,F=z||j&&U,K=U||j,P=I||j&&U;if(!F&&!K&&!P)return;const M=P&&!F?T:D,L=v.dom.querySelector(`[data-decoration-id="${M.decorationId}"]`);p={editor:e,range:M.range,query:M.query,text:M.text,items:[],command:J=>c({editor:e,range:M.range,props:J}),decorationNode:L,clientRect:L?()=>{var J;const{decorationId:B}=(J=this.key)===null||J===void 0?void 0:J.getState(e.state),X=v.dom.querySelector(`[data-decoration-id="${B}"]`);return(X==null?void 0:X.getBoundingClientRect())||null}:null},F&&((C=g==null?void 0:g.onBeforeStart)===null||C===void 0||C.call(g,p)),K&&((k=g==null?void 0:g.onBeforeUpdate)===null||k===void 0||k.call(g,p)),(K||F)&&(p.items=await u({editor:e,query:M.query})),P&&((E=g==null?void 0:g.onExit)===null||E===void 0||E.call(g,p)),K&&((_=g==null?void 0:g.onUpdate)===null||_===void 0||_.call(g,p)),F&&((O=g==null?void 0:g.onStart)===null||O===void 0||O.call(g,p))},destroy:()=>{var v;p&&((v=g==null?void 0:g.onExit)===null||v===void 0||v.call(g,p))}}},state:{init(){return{active:!1,range:{from:0,to:0},query:null,text:null,composing:!1}},apply(v,w,S,b){const{isEditable:C}=e,{composing:k}=e.view,{selection:E}=v,{empty:_,from:O}=E,T={...w};if(T.composing=k,C&&(_||e.view.composing)){(O<w.range.from||O>w.range.to)&&!k&&!w.composing&&(T.active=!1);const D=h({char:n,allowSpaces:r,allowToIncludeChar:i,allowedPrefixes:o,startOfLine:s,$position:E.$from}),j=`id_${Math.floor(Math.random()*4294967295)}`;D&&f({editor:e,state:b,range:D.range,isActive:w.active})?(T.active=!0,T.decorationId=w.decorationId?w.decorationId:j,T.range=D.range,T.query=D.query,T.text=D.text):T.active=!1}else T.active=!1;return T.active||(T.decorationId=null,T.range={from:0,to:0},T.query=null,T.text=null),T}},props:{handleKeyDown(v,w){var S;const{active:b,range:C}=x.getState(v.state);return b&&((S=g==null?void 0:g.onKeyDown)===null||S===void 0?void 0:S.call(g,{view:v,event:w,range:C}))||!1},decorations(v){const{active:w,range:S,decorationId:b}=x.getState(v);return w?je.create(v.doc,[Ht.inline(S.from,S.to,{nodeName:a,class:l,"data-decoration-id":b})]):null}}});return x}function Xv(t,e){if(typeof t!="function"){const[n,r]=y.useState(t);return y.useEffect(()=>{const i=setTimeout(()=>{r(t)},e);return()=>{clearTimeout(i)}},[t,e]),n}return y.useCallback((...n)=>{const r=t,i=setTimeout(()=>{r(...n)},e);return()=>{clearTimeout(i)}},[t,e])}function r4(t){return/<(.|\n)*?>/g.test(t.trim())}function i4(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function o4(t){return`<p>${i4(t).split(/\r?\n/).join("<br/>")}</p>`}const s4=Ze.create({name:"slashCommand",addOptions(){return{snippets:[],suggestion:{char:"/",command:({editor:e,range:n,props:r})=>{r.command({editor:e,range:n})},items:({query:e,editor:n})=>{var o;const r=n.extensionManager.extensions.find(s=>s.name==="slashCommand");return(((o=r==null?void 0:r.options)==null?void 0:o.snippets)||[]).filter(s=>s.command.toLowerCase().includes(e.toLowerCase())).map(s=>({title:s.command,previewText:s.text,command:({editor:a,range:l})=>{a.chain().focus().deleteRange(l).insertContent(s.text).run()}}))},render:()=>{let e,n=0,r;return{onStart:i=>{var s;r=i,e=document.createElement("div"),e.style.cssText=`
            position: absolute;
            z-index: 100;
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 6px;
            padding: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            min-width: 300px;
            max-width: 400px;
          `,r.items.forEach((a,l)=>{var f;const c=document.createElement("button");c.style.cssText=`
              display: flex;
              width: 100%;
              align-items: center;
              gap: 8px;
              text-align: left;
              padding: 8px 12px;
              border: none;
              background: none;
              cursor: pointer;
              border-radius: 4px;
              ${l===n?"background-color: #f3f4f6;":""}
            `;const u=document.createElement("div");u.textContent=a.title,u.style.cssText=`
              font-weight: 500;
              color: #1f2937;
              flex-shrink: 0;
            `;const d=document.createElement("div");d.textContent=(f=a.previewText)!=null&&f.length&&a.previewText.length>100?a.previewText.substring(0,100)+"...":a.previewText||"",d.style.cssText=`
              font-size: 14px;
              color: #6b7280;
              white-space: nowrap;
              overflow: hidden;
              text-overflow: ellipsis;
            `,c.appendChild(u),c.appendChild(d),c.addEventListener("click",()=>{r.command(a),e.remove()}),e.appendChild(c)}),document.body.appendChild(e);const o=(s=r.clientRect)==null?void 0:s.call(r);o&&(e.style.top=`${o.top+window.scrollY-e.offsetHeight-10}px`,e.style.left=`${o.left+window.scrollX}px`)},onUpdate:i=>{var s;r=i;const o=(s=r.clientRect)==null?void 0:s.call(r);o&&(e.style.top=`${o.top+window.scrollY-e.offsetHeight-10}px`,e.style.left=`${o.left+window.scrollX}px`)},onKeyDown:({event:i})=>i.key==="ArrowDown"?(n=(n+1)%e.children.length,Array.from(e.children).forEach((o,s)=>{o.style.backgroundColor=s===n?"#f3f4f6":""}),!0):i.key==="ArrowUp"?(n=(n-1+e.children.length)%e.children.length,Array.from(e.children).forEach((o,s)=>{o.style.backgroundColor=s===n?"#f3f4f6":""}),!0):i.key==="Enter"&&e.children.length>0?(r.command(r.items[n]),e.remove(),!0):!1,onExit:()=>{e.remove()}}}}}},addProseMirrorPlugins(){return[n4({editor:this.editor,...this.options.suggestion})]}}),ks={editor:{flex:1,width:"100%",height:"100%",fontSize:"16px",lineHeight:"1.5",color:"#374151",outline:"none",cursor:"text",display:"flex",flexDirection:"column",minHeight:0,overflow:"hidden",backgroundColor:"#ffffff","& .ProseMirror":{outline:"none !important",border:"none !important",height:"100%",overflow:"auto !important",flex:1,padding:"12px",minHeight:0,whiteSpace:"pre-wrap","& .preserve-whitespace":{whiteSpace:"pre-wrap"},"&:focus":{outline:"none !important",border:"none !important"},"&.ProseMirror-focused":{outline:"none !important",border:"none !important"}}},bubbleMenu:{display:"flex",gap:"8px",backgroundColor:"white",padding:"8px",borderRadius:"6px",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb"},menuButton:{padding:"4px 8px",backgroundColor:"transparent",border:"none",borderRadius:"4px",cursor:"pointer",color:"#6b7280","&:hover":{backgroundColor:"#f3f4f6"}},copyButton:{position:"absolute",right:"8px",top:"8px",padding:"4px 8px",backgroundColor:"#f3f4f6",borderRadius:"4px",cursor:"pointer",fontSize:"14px",color:"#6b7280","&:hover":{backgroundColor:"#e5e7eb"}},editorToolbar:{display:"flex",gap:"8px",alignItems:"center",marginBottom:"8px",height:"36px"},toolbarButton:{padding:"4px 8px",backgroundColor:"#f3f4f6",border:"1px solid #e5e7eb",borderRadius:"4px",cursor:"pointer",fontSize:"14px",color:"#6b7280",display:"flex",alignItems:"center",gap:"4px","&:hover":{backgroundColor:"#e5e7eb"},"&:disabled":{opacity:.5,cursor:"not-allowed"}}};function Kb(t){return t.trim()?r4(t)?t:o4(t):""}function $p({content:t,onChange:e,readOnly:n=!1,placeholder:r="Start typing...",snippets:i=[],onEditorReady:o}){const[s,a]=y.useState(""),l=y.useRef(!1),c=y.useRef(t),u=y.useMemo(()=>Kb(t),[t]),d=GB({extensions:[Xz.configure({}),Zz.configure({placeholder:r}),s4.configure({snippets:i})],editorProps:{attributes:{class:"focus:outline-none"}},content:u,onUpdate:({editor:h})=>{l.current||(l.current=!0);const p=h.getHTML();a(p)},editable:!n});y.useEffect(()=>{d&&o&&o(d)},[d,o]),y.useEffect(()=>{if(d&&t!==c.current&&!l.current){const h=Kb(t);d.commands.setContent(h),c.current=t}},[t,d]);const f=Xv(s,1e3);return y.useEffect(()=>{f&&l.current&&e&&(e(f),l.current=!1,c.current=f)},[f,e]),d?m.jsxs("div",{style:{height:"100%",display:"flex",flexDirection:"column"},children:[!n&&m.jsx(YB,{editor:d,tippyOptions:{duration:100},children:m.jsxs("div",{style:ks.bubbleMenu,children:[m.jsx("button",{onClick:()=>d.chain().focus().toggleBold().run(),className:d.isActive("bold")?"is-active":"",style:ks.menuButton,children:"Bold"}),m.jsx("button",{onClick:()=>d.chain().focus().toggleItalic().run(),className:d.isActive("italic")?"is-active":"",style:ks.menuButton,children:"Italic"}),m.jsx("button",{onClick:()=>d.chain().focus().toggleBulletList().run(),className:d.isActive("bulletList")?"is-active":"",style:ks.menuButton,children:"Bullet List"}),m.jsx("button",{onClick:()=>d.chain().focus().toggleOrderedList().run(),className:d.isActive("orderedList")?"is-active":"",style:ks.menuButton,children:"Numbered List"})]})}),m.jsx($B,{editor:d,style:ks.editor})]}):null}const ee={container:{padding:"32px 32px 0",width:"100%",height:"100%",backgroundColor:"#fff",overflow:"hidden",display:"flex",flexDirection:"column"},section:{maxWidth:"1200px",margin:"0 auto",width:"100%",height:"100%",display:"flex",flexDirection:"column"},header:{flex:"0 0 auto"},contentContainer:{flex:1,overflow:"auto",minHeight:0},title:{fontSize:"16px",fontWeight:"500",marginBottom:"8px",color:"#1f2937"},tabs:{display:"flex",gap:"24px",marginBottom:"16px",borderBottom:"1px solid #e5e7eb"},tab:{padding:"12px 0",fontSize:"14px",color:"#6b7280",cursor:"pointer",borderBottomWidth:"2px",borderBottomStyle:"solid",borderBottomColor:"transparent",marginBottom:"-1px"},activeTab:{color:"#2563eb",borderBottomColor:"#2563eb"},formGrid:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",columnGap:"24px",rowGap:"8px"},field:{marginBottom:"8px"},label:{display:"block",fontSize:"14px",color:"#4b5563",marginBottom:"8px"},sublabel:{display:"block",fontSize:"14px",color:"#6b7280",marginBottom:"8px"},select:{width:"100%",padding:"8px 12px",fontSize:"14px",border:"1px solid #d1d5db",borderRadius:"6px",color:"#1f2937",backgroundColor:"#fff",cursor:"pointer",appearance:"none",backgroundImage:'url("data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2224%22%20height%3D%2224%22%20viewBox%3D%220%200%2024%2024%22%20fill%3D%22none%22%20stroke%3D%22%236b7280%22%20stroke-width%3D%222%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%3E%3Cpolyline%20points%3D%226%209%2012%2015%2018%209%22%3E%3C%2Fpolyline%3E%3C%2Fsvg%3E")',backgroundRepeat:"no-repeat",backgroundPosition:"right 8px center",backgroundSize:"16px",paddingRight:"32px"},input:{width:"100%",padding:"8px 12px",fontSize:"14px",border:"1px solid #d1d5db",borderRadius:"6px",color:"#1f2937",backgroundColor:"#fff","&:focus":{outline:"none",borderColor:"#2563eb",boxShadow:"0 0 0 2px rgba(37, 99, 235, 0.2)"}},sectionTitle:{fontSize:"16px",fontWeight:"500",marginTop:"8px",color:"#1f2937"}};function Xa(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var a4=["color"],Zv=y.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Xa(t,a4);return y.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),y.createElement("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),l4=["color"],c4=y.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Xa(t,l4);return y.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),y.createElement("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),u4=["color"],d4=y.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Xa(t,u4);return y.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),y.createElement("path",{d:"M8.625 2.5C8.625 3.12132 8.12132 3.625 7.5 3.625C6.87868 3.625 6.375 3.12132 6.375 2.5C6.375 1.87868 6.87868 1.375 7.5 1.375C8.12132 1.375 8.625 1.87868 8.625 2.5ZM8.625 7.5C8.625 8.12132 8.12132 8.625 7.5 8.625C6.87868 8.625 6.375 8.12132 6.375 7.5C6.375 6.87868 6.87868 6.375 7.5 6.375C8.12132 6.375 8.625 6.87868 8.625 7.5ZM7.5 13.625C8.12132 13.625 8.625 13.1213 8.625 12.5C8.625 11.8787 8.12132 11.375 7.5 11.375C6.87868 11.375 6.375 11.8787 6.375 12.5C6.375 13.1213 6.87868 13.625 7.5 13.625Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),f4=["color"],Wg=y.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Xa(t,f4);return y.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),y.createElement("path",{d:"M8 2.75C8 2.47386 7.77614 2.25 7.5 2.25C7.22386 2.25 7 2.47386 7 2.75V7H2.75C2.47386 7 2.25 7.22386 2.25 7.5C2.25 7.77614 2.47386 8 2.75 8H7V12.25C7 12.5261 7.22386 12.75 7.5 12.75C7.77614 12.75 8 12.5261 8 12.25V8H12.25C12.5261 8 12.75 7.77614 12.75 7.5C12.75 7.22386 12.5261 7 12.25 7H8V2.75Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),h4=["color"],p4=y.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Xa(t,h4);return y.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),y.createElement("path",{d:"M7.49998 0.849976C7.22383 0.849976 6.99998 1.07383 6.99998 1.34998V3.52234C6.99998 3.79848 7.22383 4.02234 7.49998 4.02234C7.77612 4.02234 7.99998 3.79848 7.99998 3.52234V1.8718C10.8862 2.12488 13.15 4.54806 13.15 7.49998C13.15 10.6204 10.6204 13.15 7.49998 13.15C4.37957 13.15 1.84998 10.6204 1.84998 7.49998C1.84998 6.10612 2.35407 4.83128 3.19049 3.8459C3.36919 3.63538 3.34339 3.31985 3.13286 3.14115C2.92234 2.96245 2.60681 2.98825 2.42811 3.19877C1.44405 4.35808 0.849976 5.86029 0.849976 7.49998C0.849976 11.1727 3.82728 14.15 7.49998 14.15C11.1727 14.15 14.15 11.1727 14.15 7.49998C14.15 3.82728 11.1727 0.849976 7.49998 0.849976ZM6.74049 8.08072L4.22363 4.57237C4.15231 4.47295 4.16346 4.33652 4.24998 4.25C4.33649 4.16348 4.47293 4.15233 4.57234 4.22365L8.08069 6.74051C8.56227 7.08599 8.61906 7.78091 8.19998 8.2C7.78089 8.61909 7.08597 8.56229 6.74049 8.08072Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),m4=["color"],qb=y.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Xa(t,m4);return y.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),y.createElement("path",{d:"M5.5 1C5.22386 1 5 1.22386 5 1.5C5 1.77614 5.22386 2 5.5 2H9.5C9.77614 2 10 1.77614 10 1.5C10 1.22386 9.77614 1 9.5 1H5.5ZM3 3.5C3 3.22386 3.22386 3 3.5 3H5H10H11.5C11.7761 3 12 3.22386 12 3.5C12 3.77614 11.7761 4 11.5 4H11V12C11 12.5523 10.5523 13 10 13H5C4.44772 13 4 12.5523 4 12V4L3.5 4C3.22386 4 3 3.77614 3 3.5ZM5 4H10V12H5V4Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))});function Z(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function Gb(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function uh(...t){return e=>{let n=!1;const r=t.map(i=>{const o=Gb(i,e);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let i=0;i<r.length;i++){const o=r[i];typeof o=="function"?o():Gb(t[i],null)}}}}function Ve(...t){return y.useCallback(uh(...t),t)}function g4(t,e){const n=y.createContext(e),r=o=>{const{children:s,...a}=o,l=y.useMemo(()=>a,Object.values(a));return m.jsx(n.Provider,{value:l,children:s})};r.displayName=t+"Provider";function i(o){const s=y.useContext(n);if(s)return s;if(e!==void 0)return e;throw new Error(`\`${o}\` must be used within \`${t}\``)}return[r,i]}function ds(t,e=[]){let n=[];function r(o,s){const a=y.createContext(s),l=n.length;n=[...n,s];const c=d=>{var v;const{scope:f,children:h,...p}=d,g=((v=f==null?void 0:f[t])==null?void 0:v[l])||a,x=y.useMemo(()=>p,Object.values(p));return m.jsx(g.Provider,{value:x,children:h})};c.displayName=o+"Provider";function u(d,f){var g;const h=((g=f==null?void 0:f[t])==null?void 0:g[l])||a,p=y.useContext(h);if(p)return p;if(s!==void 0)return s;throw new Error(`\`${d}\` must be used within \`${o}\``)}return[c,u]}const i=()=>{const o=n.map(s=>y.createContext(s));return function(a){const l=(a==null?void 0:a[t])||o;return y.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return i.scopeName=t,[r,y4(i,...e)]}function y4(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const s=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(o)[`__scope${c}`];return{...a,...d}},{});return y.useMemo(()=>({[`__scope${e.scopeName}`]:s}),[s])}};return n.scopeName=e.scopeName,n}var Gi=globalThis!=null&&globalThis.document?y.useLayoutEffect:()=>{},v4=xO["useId".toString()]||(()=>{}),x4=0;function sa(t){const[e,n]=y.useState(v4());return Gi(()=>{t||n(r=>r??String(x4++))},[t]),t||(e?`radix-${e}`:"")}function Mt(t){const e=y.useRef(t);return y.useEffect(()=>{e.current=t}),y.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function dh({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,i]=w4({defaultProp:e,onChange:n}),o=t!==void 0,s=o?t:r,a=Mt(n),l=y.useCallback(c=>{if(o){const d=typeof c=="function"?c(t):c;d!==t&&a(d)}else i(c)},[o,t,i,a]);return[s,l]}function w4({defaultProp:t,onChange:e}){const n=y.useState(t),[r]=n,i=y.useRef(r),o=Mt(e);return y.useEffect(()=>{i.current!==r&&(o(r),i.current=r)},[r,i,o]),n}var za=y.forwardRef((t,e)=>{const{children:n,...r}=t,i=y.Children.toArray(n),o=i.find(S4);if(o){const s=o.props.children,a=i.map(l=>l===o?y.Children.count(s)>1?y.Children.only(null):y.isValidElement(s)?s.props.children:null:l);return m.jsx(Kg,{...r,ref:e,children:y.isValidElement(s)?y.cloneElement(s,void 0,a):null})}return m.jsx(Kg,{...r,ref:e,children:n})});za.displayName="Slot";var Kg=y.forwardRef((t,e)=>{const{children:n,...r}=t;if(y.isValidElement(n)){const i=k4(n),o=C4(r,n.props);return n.type!==y.Fragment&&(o.ref=e?uh(e,i):i),y.cloneElement(n,o)}return y.Children.count(n)>1?y.Children.only(null):null});Kg.displayName="SlotClone";var b4=({children:t})=>m.jsx(m.Fragment,{children:t});function S4(t){return y.isValidElement(t)&&t.type===b4}function C4(t,e){const n={...e};for(const r in e){const i=t[r],o=e[r];/^on[A-Z]/.test(r)?i&&o?n[r]=(...a)=>{o(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...o}:r==="className"&&(n[r]=[i,o].filter(Boolean).join(" "))}return{...t,...n}}function k4(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var E4=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],ye=E4.reduce((t,e)=>{const n=y.forwardRef((r,i)=>{const{asChild:o,...s}=r,a=o?za:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),m.jsx(a,{...s,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function e0(t,e){t&&Vc.flushSync(()=>t.dispatchEvent(e))}function T4(t,e=globalThis==null?void 0:globalThis.document){const n=Mt(t);y.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var _4="DismissableLayer",qg="dismissableLayer.update",R4="dismissableLayer.pointerDownOutside",O4="dismissableLayer.focusOutside",Jb,GT=y.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),fh=y.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:o,onInteractOutside:s,onDismiss:a,...l}=t,c=y.useContext(GT),[u,d]=y.useState(null),f=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,h]=y.useState({}),p=Ve(e,E=>d(E)),g=Array.from(c.layers),[x]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),v=g.indexOf(x),w=u?g.indexOf(u):-1,S=c.layersWithOutsidePointerEventsDisabled.size>0,b=w>=v,C=M4(E=>{const _=E.target,O=[...c.branches].some(T=>T.contains(_));!b||O||(i==null||i(E),s==null||s(E),E.defaultPrevented||a==null||a())},f),k=A4(E=>{const _=E.target;[...c.branches].some(T=>T.contains(_))||(o==null||o(E),s==null||s(E),E.defaultPrevented||a==null||a())},f);return T4(E=>{w===c.layers.size-1&&(r==null||r(E),!E.defaultPrevented&&a&&(E.preventDefault(),a()))},f),y.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(Jb=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),Yb(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=Jb)}},[u,f,n,c]),y.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),Yb())},[u,c]),y.useEffect(()=>{const E=()=>h({});return document.addEventListener(qg,E),()=>document.removeEventListener(qg,E)},[]),m.jsx(ye.div,{...l,ref:p,style:{pointerEvents:S?b?"auto":"none":void 0,...t.style},onFocusCapture:Z(t.onFocusCapture,k.onFocusCapture),onBlurCapture:Z(t.onBlurCapture,k.onBlurCapture),onPointerDownCapture:Z(t.onPointerDownCapture,C.onPointerDownCapture)})});fh.displayName=_4;var P4="DismissableLayerBranch",JT=y.forwardRef((t,e)=>{const n=y.useContext(GT),r=y.useRef(null),i=Ve(e,r);return y.useEffect(()=>{const o=r.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),m.jsx(ye.div,{...t,ref:i})});JT.displayName=P4;function M4(t,e=globalThis==null?void 0:globalThis.document){const n=Mt(t),r=y.useRef(!1),i=y.useRef(()=>{});return y.useEffect(()=>{const o=a=>{if(a.target&&!r.current){let l=function(){YT(R4,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);r.current=!1},s=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(s),e.removeEventListener("pointerdown",o),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function A4(t,e=globalThis==null?void 0:globalThis.document){const n=Mt(t),r=y.useRef(!1);return y.useEffect(()=>{const i=o=>{o.target&&!r.current&&YT(O4,n,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function Yb(){const t=new CustomEvent(qg);document.dispatchEvent(t)}function YT(t,e,n,{discrete:r}){const i=n.originalEvent.target,o=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?e0(i,o):i.dispatchEvent(o)}var D4=fh,I4=JT,Fp="focusScope.autoFocusOnMount",Bp="focusScope.autoFocusOnUnmount",Qb={bubbles:!1,cancelable:!0},N4="FocusScope",t0=y.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:o,...s}=t,[a,l]=y.useState(null),c=Mt(i),u=Mt(o),d=y.useRef(null),f=Ve(e,g=>l(g)),h=y.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;y.useEffect(()=>{if(r){let g=function(S){if(h.paused||!a)return;const b=S.target;a.contains(b)?d.current=b:ai(d.current,{select:!0})},x=function(S){if(h.paused||!a)return;const b=S.relatedTarget;b!==null&&(a.contains(b)||ai(d.current,{select:!0}))},v=function(S){if(document.activeElement===document.body)for(const C of S)C.removedNodes.length>0&&ai(a)};document.addEventListener("focusin",g),document.addEventListener("focusout",x);const w=new MutationObserver(v);return a&&w.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",x),w.disconnect()}}},[r,a,h.paused]),y.useEffect(()=>{if(a){Zb.add(h);const g=document.activeElement;if(!a.contains(g)){const v=new CustomEvent(Fp,Qb);a.addEventListener(Fp,c),a.dispatchEvent(v),v.defaultPrevented||(j4(z4(QT(a)),{select:!0}),document.activeElement===g&&ai(a))}return()=>{a.removeEventListener(Fp,c),setTimeout(()=>{const v=new CustomEvent(Bp,Qb);a.addEventListener(Bp,u),a.dispatchEvent(v),v.defaultPrevented||ai(g??document.body,{select:!0}),a.removeEventListener(Bp,u),Zb.remove(h)},0)}}},[a,c,u,h]);const p=y.useCallback(g=>{if(!n&&!r||h.paused)return;const x=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,v=document.activeElement;if(x&&v){const w=g.currentTarget,[S,b]=L4(w);S&&b?!g.shiftKey&&v===b?(g.preventDefault(),n&&ai(S,{select:!0})):g.shiftKey&&v===S&&(g.preventDefault(),n&&ai(b,{select:!0})):v===w&&g.preventDefault()}},[n,r,h.paused]);return m.jsx(ye.div,{tabIndex:-1,...s,ref:f,onKeyDown:p})});t0.displayName=N4;function j4(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(ai(r,{select:e}),document.activeElement!==n)return}function L4(t){const e=QT(t),n=Xb(e,t),r=Xb(e.reverse(),t);return[n,r]}function QT(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Xb(t,e){for(const n of t)if(!$4(n,{upTo:e}))return n}function $4(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function F4(t){return t instanceof HTMLInputElement&&"select"in t}function ai(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&F4(t)&&e&&t.select()}}var Zb=B4();function B4(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=e1(t,e),t.unshift(e)},remove(e){var n;t=e1(t,e),(n=t[0])==null||n.resume()}}}function e1(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function z4(t){return t.filter(e=>e.tagName!=="A")}var U4="Portal",hh=y.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[i,o]=y.useState(!1);Gi(()=>o(!0),[]);const s=n||i&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return s?GC.createPortal(m.jsx(ye.div,{...r,ref:e}),s):null});hh.displayName=U4;function V4(t,e){return y.useReducer((n,r)=>e[n][r]??n,t)}var Qr=t=>{const{present:e,children:n}=t,r=H4(e),i=typeof n=="function"?n({present:r.isPresent}):y.Children.only(n),o=Ve(r.ref,W4(i));return typeof n=="function"||r.isPresent?y.cloneElement(i,{ref:o}):null};Qr.displayName="Presence";function H4(t){const[e,n]=y.useState(),r=y.useRef({}),i=y.useRef(t),o=y.useRef("none"),s=t?"mounted":"unmounted",[a,l]=V4(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return y.useEffect(()=>{const c=Wu(r.current);o.current=a==="mounted"?c:"none"},[a]),Gi(()=>{const c=r.current,u=i.current;if(u!==t){const f=o.current,h=Wu(c);t?l("MOUNT"):h==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&f!==h?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,l]),Gi(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,d=h=>{const g=Wu(r.current).includes(h.animationName);if(h.target===e&&g&&(l("ANIMATION_END"),!i.current)){const x=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=x)})}},f=h=>{h.target===e&&(o.current=Wu(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:y.useCallback(c=>{c&&(r.current=getComputedStyle(c)),n(c)},[])}}function Wu(t){return(t==null?void 0:t.animationName)||"none"}function W4(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var zp=0;function XT(){y.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??t1()),document.body.insertAdjacentElement("beforeend",t[1]??t1()),zp++,()=>{zp===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),zp--}},[])}function t1(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var hr=function(){return hr=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},hr.apply(this,arguments)};function ZT(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function K4(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}var xd="right-scroll-bar-position",wd="width-before-scroll-bar",q4="with-scroll-bars-hidden",G4="--removed-body-scroll-bar-size";function Up(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function J4(t,e){var n=y.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var Y4=typeof window<"u"?y.useLayoutEffect:y.useEffect,n1=new WeakMap;function Q4(t,e){var n=J4(e||null,function(r){return t.forEach(function(i){return Up(i,r)})});return Y4(function(){var r=n1.get(n);if(r){var i=new Set(r),o=new Set(t),s=n.current;i.forEach(function(a){o.has(a)||Up(a,null)}),o.forEach(function(a){i.has(a)||Up(a,s)})}n1.set(n,t)},[t]),n}function X4(t){return t}function Z4(t,e){e===void 0&&(e=X4);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(o){var s=e(o,r);return n.push(s),function(){n=n.filter(function(a){return a!==s})}},assignSyncMedium:function(o){for(r=!0;n.length;){var s=n;n=[],s.forEach(o)}n={push:function(a){return o(a)},filter:function(){return n}}},assignMedium:function(o){r=!0;var s=[];if(n.length){var a=n;n=[],a.forEach(o),s=n}var l=function(){var u=s;s=[],u.forEach(o)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){s.push(u),c()},filter:function(u){return s=s.filter(u),n}}}};return i}function e6(t){t===void 0&&(t={});var e=Z4(null);return e.options=hr({async:!0,ssr:!1},t),e}var e_=function(t){var e=t.sideCar,n=ZT(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return y.createElement(r,hr({},n))};e_.isSideCarExport=!0;function t6(t,e){return t.useMedium(e),e_}var t_=e6(),Vp=function(){},ph=y.forwardRef(function(t,e){var n=y.useRef(null),r=y.useState({onScrollCapture:Vp,onWheelCapture:Vp,onTouchMoveCapture:Vp}),i=r[0],o=r[1],s=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,d=t.shards,f=t.sideCar,h=t.noIsolation,p=t.inert,g=t.allowPinchZoom,x=t.as,v=x===void 0?"div":x,w=t.gapMode,S=ZT(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),b=f,C=Q4([n,e]),k=hr(hr({},S),i);return y.createElement(y.Fragment,null,u&&y.createElement(b,{sideCar:t_,removeScrollBar:c,shards:d,noIsolation:h,inert:p,setCallbacks:o,allowPinchZoom:!!g,lockRef:n,gapMode:w}),s?y.cloneElement(y.Children.only(a),hr(hr({},k),{ref:C})):y.createElement(v,hr({},k,{className:l,ref:C}),a))});ph.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};ph.classNames={fullWidth:wd,zeroRight:xd};var r1,n6=function(){if(r1)return r1;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function r6(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=n6();return e&&t.setAttribute("nonce",e),t}function i6(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function o6(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var s6=function(){var t=0,e=null;return{add:function(n){t==0&&(e=r6())&&(i6(e,n),o6(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},a6=function(){var t=s6();return function(e,n){y.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},n_=function(){var t=a6(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},l6={left:0,top:0,right:0,gap:0},Hp=function(t){return parseInt(t||"",10)||0},c6=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[Hp(n),Hp(r),Hp(i)]},u6=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return l6;var e=c6(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},d6=n_(),aa="data-scroll-locked",f6=function(t,e,n,r){var i=t.left,o=t.top,s=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(q4,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(aa,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(s,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(xd,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(wd,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(xd," .").concat(xd,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(wd," .").concat(wd,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(aa,`] {
    `).concat(G4,": ").concat(a,`px;
  }
`)},i1=function(){var t=parseInt(document.body.getAttribute(aa)||"0",10);return isFinite(t)?t:0},h6=function(){y.useEffect(function(){return document.body.setAttribute(aa,(i1()+1).toString()),function(){var t=i1()-1;t<=0?document.body.removeAttribute(aa):document.body.setAttribute(aa,t.toString())}},[])},p6=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;h6();var o=y.useMemo(function(){return u6(i)},[i]);return y.createElement(d6,{styles:f6(o,!e,i,n?"":"!important")})},Gg=!1;if(typeof window<"u")try{var Ku=Object.defineProperty({},"passive",{get:function(){return Gg=!0,!0}});window.addEventListener("test",Ku,Ku),window.removeEventListener("test",Ku,Ku)}catch{Gg=!1}var Es=Gg?{passive:!1}:!1,m6=function(t){return t.tagName==="TEXTAREA"},r_=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!m6(t)&&n[e]==="visible")},g6=function(t){return r_(t,"overflowY")},y6=function(t){return r_(t,"overflowX")},o1=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=i_(t,r);if(i){var o=o_(t,r),s=o[1],a=o[2];if(s>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},v6=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},x6=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},i_=function(t,e){return t==="v"?g6(e):y6(e)},o_=function(t,e){return t==="v"?v6(e):x6(e)},w6=function(t,e){return t==="h"&&e==="rtl"?-1:1},b6=function(t,e,n,r,i){var o=w6(t,window.getComputedStyle(e).direction),s=o*r,a=n.target,l=e.contains(a),c=!1,u=s>0,d=0,f=0;do{var h=o_(t,a),p=h[0],g=h[1],x=h[2],v=g-x-o*p;(p||v)&&i_(t,a)&&(d+=v,f+=p),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&(i&&Math.abs(d)<1||!i&&s>d)||!u&&(i&&Math.abs(f)<1||!i&&-s>f))&&(c=!0),c},qu=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},s1=function(t){return[t.deltaX,t.deltaY]},a1=function(t){return t&&"current"in t?t.current:t},S6=function(t,e){return t[0]===e[0]&&t[1]===e[1]},C6=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},k6=0,Ts=[];function E6(t){var e=y.useRef([]),n=y.useRef([0,0]),r=y.useRef(),i=y.useState(k6++)[0],o=y.useState(n_)[0],s=y.useRef(t);y.useEffect(function(){s.current=t},[t]),y.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var g=K4([t.lockRef.current],(t.shards||[]).map(a1),!0).filter(Boolean);return g.forEach(function(x){return x.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),g.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var a=y.useCallback(function(g,x){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!s.current.allowPinchZoom;var v=qu(g),w=n.current,S="deltaX"in g?g.deltaX:w[0]-v[0],b="deltaY"in g?g.deltaY:w[1]-v[1],C,k=g.target,E=Math.abs(S)>Math.abs(b)?"h":"v";if("touches"in g&&E==="h"&&k.type==="range")return!1;var _=o1(E,k);if(!_)return!0;if(_?C=E:(C=E==="v"?"h":"v",_=o1(E,k)),!_)return!1;if(!r.current&&"changedTouches"in g&&(S||b)&&(r.current=C),!C)return!0;var O=r.current||C;return b6(O,x,g,O==="h"?S:b,!0)},[]),l=y.useCallback(function(g){var x=g;if(!(!Ts.length||Ts[Ts.length-1]!==o)){var v="deltaY"in x?s1(x):qu(x),w=e.current.filter(function(C){return C.name===x.type&&(C.target===x.target||x.target===C.shadowParent)&&S6(C.delta,v)})[0];if(w&&w.should){x.cancelable&&x.preventDefault();return}if(!w){var S=(s.current.shards||[]).map(a1).filter(Boolean).filter(function(C){return C.contains(x.target)}),b=S.length>0?a(x,S[0]):!s.current.noIsolation;b&&x.cancelable&&x.preventDefault()}}},[]),c=y.useCallback(function(g,x,v,w){var S={name:g,delta:x,target:v,should:w,shadowParent:T6(v)};e.current.push(S),setTimeout(function(){e.current=e.current.filter(function(b){return b!==S})},1)},[]),u=y.useCallback(function(g){n.current=qu(g),r.current=void 0},[]),d=y.useCallback(function(g){c(g.type,s1(g),g.target,a(g,t.lockRef.current))},[]),f=y.useCallback(function(g){c(g.type,qu(g),g.target,a(g,t.lockRef.current))},[]);y.useEffect(function(){return Ts.push(o),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",l,Es),document.addEventListener("touchmove",l,Es),document.addEventListener("touchstart",u,Es),function(){Ts=Ts.filter(function(g){return g!==o}),document.removeEventListener("wheel",l,Es),document.removeEventListener("touchmove",l,Es),document.removeEventListener("touchstart",u,Es)}},[]);var h=t.removeScrollBar,p=t.inert;return y.createElement(y.Fragment,null,p?y.createElement(o,{styles:C6(i)}):null,h?y.createElement(p6,{gapMode:t.gapMode}):null)}function T6(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const _6=t6(t_,E6);var s_=y.forwardRef(function(t,e){return y.createElement(ph,hr({},t,{ref:e,sideCar:_6}))});s_.classNames=ph.classNames;const a_=s_;var R6=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},_s=new WeakMap,Gu=new WeakMap,Ju={},Wp=0,l_=function(t){return t&&(t.host||l_(t.parentNode))},O6=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=l_(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},P6=function(t,e,n,r){var i=O6(e,Array.isArray(t)?t:[t]);Ju[n]||(Ju[n]=new WeakMap);var o=Ju[n],s=[],a=new Set,l=new Set(i),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};i.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))u(f);else try{var h=f.getAttribute(r),p=h!==null&&h!=="false",g=(_s.get(f)||0)+1,x=(o.get(f)||0)+1;_s.set(f,g),o.set(f,x),s.push(f),g===1&&p&&Gu.set(f,!0),x===1&&f.setAttribute(n,"true"),p||f.setAttribute(r,"true")}catch(v){console.error("aria-hidden: cannot operate on ",f,v)}})};return u(e),a.clear(),Wp++,function(){s.forEach(function(d){var f=_s.get(d)-1,h=o.get(d)-1;_s.set(d,f),o.set(d,h),f||(Gu.has(d)||d.removeAttribute(r),Gu.delete(d)),h||d.removeAttribute(n)}),Wp--,Wp||(_s=new WeakMap,_s=new WeakMap,Gu=new WeakMap,Ju={})}},c_=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=e||R6(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),P6(r,i,n,"aria-hidden")):function(){return null}},n0="Dialog",[u_,KH]=ds(n0),[M6,tr]=u_(n0),d_=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:i,onOpenChange:o,modal:s=!0}=t,a=y.useRef(null),l=y.useRef(null),[c=!1,u]=dh({prop:r,defaultProp:i,onChange:o});return m.jsx(M6,{scope:e,triggerRef:a,contentRef:l,contentId:sa(),titleId:sa(),descriptionId:sa(),open:c,onOpenChange:u,onOpenToggle:y.useCallback(()=>u(d=>!d),[u]),modal:s,children:n})};d_.displayName=n0;var f_="DialogTrigger",A6=y.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=tr(f_,n),o=Ve(e,i.triggerRef);return m.jsx(ye.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":o0(i.open),...r,ref:o,onClick:Z(t.onClick,i.onOpenToggle)})});A6.displayName=f_;var r0="DialogPortal",[D6,h_]=u_(r0,{forceMount:void 0}),p_=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:i}=t,o=tr(r0,e);return m.jsx(D6,{scope:e,forceMount:n,children:y.Children.map(r,s=>m.jsx(Qr,{present:n||o.open,children:m.jsx(hh,{asChild:!0,container:i,children:s})}))})};p_.displayName=r0;var hf="DialogOverlay",m_=y.forwardRef((t,e)=>{const n=h_(hf,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,o=tr(hf,t.__scopeDialog);return o.modal?m.jsx(Qr,{present:r||o.open,children:m.jsx(I6,{...i,ref:e})}):null});m_.displayName=hf;var I6=y.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=tr(hf,n);return m.jsx(a_,{as:za,allowPinchZoom:!0,shards:[i.contentRef],children:m.jsx(ye.div,{"data-state":o0(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),rs="DialogContent",g_=y.forwardRef((t,e)=>{const n=h_(rs,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,o=tr(rs,t.__scopeDialog);return m.jsx(Qr,{present:r||o.open,children:o.modal?m.jsx(N6,{...i,ref:e}):m.jsx(j6,{...i,ref:e})})});g_.displayName=rs;var N6=y.forwardRef((t,e)=>{const n=tr(rs,t.__scopeDialog),r=y.useRef(null),i=Ve(e,n.contentRef,r);return y.useEffect(()=>{const o=r.current;if(o)return c_(o)},[]),m.jsx(y_,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Z(t.onCloseAutoFocus,o=>{var s;o.preventDefault(),(s=n.triggerRef.current)==null||s.focus()}),onPointerDownOutside:Z(t.onPointerDownOutside,o=>{const s=o.detail.originalEvent,a=s.button===0&&s.ctrlKey===!0;(s.button===2||a)&&o.preventDefault()}),onFocusOutside:Z(t.onFocusOutside,o=>o.preventDefault())})}),j6=y.forwardRef((t,e)=>{const n=tr(rs,t.__scopeDialog),r=y.useRef(!1),i=y.useRef(!1);return m.jsx(y_,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var s,a;(s=t.onCloseAutoFocus)==null||s.call(t,o),o.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),o.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:o=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const s=o.target;((c=n.triggerRef.current)==null?void 0:c.contains(s))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&i.current&&o.preventDefault()}})}),y_=y.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:o,...s}=t,a=tr(rs,n),l=y.useRef(null),c=Ve(e,l);return XT(),m.jsxs(m.Fragment,{children:[m.jsx(t0,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:o,children:m.jsx(fh,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":o0(a.open),...s,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),m.jsxs(m.Fragment,{children:[m.jsx(F6,{titleId:a.titleId}),m.jsx(z6,{contentRef:l,descriptionId:a.descriptionId})]})]})}),i0="DialogTitle",v_=y.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=tr(i0,n);return m.jsx(ye.h2,{id:i.titleId,...r,ref:e})});v_.displayName=i0;var x_="DialogDescription",L6=y.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=tr(x_,n);return m.jsx(ye.p,{id:i.descriptionId,...r,ref:e})});L6.displayName=x_;var w_="DialogClose",$6=y.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=tr(w_,n);return m.jsx(ye.button,{type:"button",...r,ref:e,onClick:Z(t.onClick,()=>i.onOpenChange(!1))})});$6.displayName=w_;function o0(t){return t?"open":"closed"}var b_="DialogTitleWarning",[qH,S_]=g4(b_,{contentName:rs,titleName:i0,docsSlug:"dialog"}),F6=({titleId:t})=>{const e=S_(b_),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return y.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},B6="DialogDescriptionWarning",z6=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${S_(B6).contentName}}.`;return y.useEffect(()=>{var o;const i=(o=t.current)==null?void 0:o.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},U6=d_,V6=p_,H6=m_,W6=g_,K6=v_;const Qt={overlay:{backgroundColor:"rgba(0, 0, 0, 0.4)",position:"fixed",inset:0,animation:"overlayShow 150ms cubic-bezier(0.16, 1, 0.3, 1)"},content:{backgroundColor:"white",borderRadius:"8px",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.2)",position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"90vw",maxWidth:"600px",maxHeight:"85vh",padding:"24px"},title:{fontSize:"20px",fontWeight:"500",color:"#1f2937",marginBottom:"24px"},field:{marginBottom:"24px"},label:{display:"block",fontSize:"14px",color:"#4b5563",marginBottom:"8px"},input:{width:"100%",padding:"8px 12px",fontSize:"14px",border:"1px solid #d1d5db",borderRadius:"6px",color:"#1f2937"},textarea:{width:"100%",padding:"8px 12px",fontSize:"14px",border:"1px solid #d1d5db",borderRadius:"6px",color:"#1f2937",minHeight:"200px",resize:"vertical"},closeButton:{position:"absolute",top:"16px",right:"16px",padding:"4px",color:"#6b7280",cursor:"pointer",background:"none",border:"none","&:hover":{color:"#1f2937"}},footer:{display:"flex",justifyContent:"flex-end",gap:"12px",marginTop:"24px"},cancelButton:{padding:"8px 16px",fontSize:"14px",color:"#6b7280",backgroundColor:"#f3f4f6",border:"none",borderRadius:"6px",cursor:"pointer","&:hover":{backgroundColor:"#e5e7eb"}},saveButton:{padding:"8px 16px",fontSize:"14px",color:"white",backgroundColor:"#2563eb",border:"none",borderRadius:"6px",cursor:"pointer","&:hover":{backgroundColor:"#1d4ed8"}}};function q6({open:t,onClose:e,onSave:n}){const[r,i]=y.useState(""),[o,s]=y.useState(""),a=()=>{n(r,o),i(""),s(""),e()};return m.jsx(U6,{open:t,onOpenChange:e,children:m.jsxs(V6,{children:[m.jsx(H6,{style:Qt.overlay}),m.jsxs(W6,{style:Qt.content,children:[m.jsx(K6,{style:Qt.title,children:"Create snippet"}),m.jsx("button",{style:Qt.closeButton,onClick:e,children:m.jsx(c4,{})}),m.jsxs("div",{style:Qt.field,children:[m.jsx("label",{style:Qt.label,children:"Shorthand"}),m.jsx("div",{style:{position:"relative"},children:m.jsx("input",{style:Qt.input,type:"text",value:r,onChange:l=>i(l.target.value),placeholder:"Short, memorable trigger for your snippet"})})]}),m.jsxs("div",{style:Qt.field,children:[m.jsx("label",{style:Qt.label,children:"Content"}),m.jsx("textarea",{style:Qt.textarea,value:o,onChange:l=>s(l.target.value),placeholder:"Type or paste your snippet content here..."})]}),m.jsxs("div",{style:Qt.footer,children:[m.jsx("button",{style:Qt.cancelButton,onClick:e,children:"Cancel"}),m.jsx("button",{style:Qt.saveButton,onClick:a,disabled:!r.trim()||!o.trim(),children:"Create Snippet"})]})]})]})})}const dt={...ee,section:{marginBottom:"48px"},description:{fontSize:"14px",color:"#6b7280",marginBottom:"24px"},table:{width:"100%",backgroundColor:"#f3f6f9",borderRadius:"8px",padding:"16px"},tableHeader:{display:"grid",gridTemplateColumns:"1fr 1fr auto",gap:"16px",padding:"8px 16px",color:"#6b7280",fontSize:"14px",fontWeight:"500"},tableRow:{display:"grid",gridTemplateColumns:"1fr 1fr auto",gap:"16px",padding:"8px 16px",alignItems:"center"},addButton:{display:"flex",alignItems:"center",gap:"8px",color:"#6b7280",fontSize:"14px",padding:"8px 16px",cursor:"pointer",border:"none",background:"none","&:hover":{color:"#2563eb"}},iconButton:{padding:"4px",border:"none",background:"none",cursor:"pointer",color:"#6b7280","&:hover":{color:"#ef4444"}},snippetCard:{backgroundColor:"white",borderRadius:"8px",padding:"16px",marginBottom:"16px",border:"1px solid #e5e7eb"},snippetHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},snippetCommand:{fontSize:"14px",fontWeight:"500",color:"#1f2937"},snippetText:{fontSize:"14px",color:"#6b7280"}};function C_(){const[t,e]=y.useState([{command:"/test",text:"Tests are not covered under your insurance and may be subject..."}]);return{snippets:t,addSnippet:(i,o)=>{e([...t,{command:`/${i}`,text:o}])},deleteSnippet:i=>{e(t.filter((o,s)=>s!==i))}}}function G6(){const[t,e]=y.useState([{instead:"Chi",doThis:"Qi"}]),{snippets:n,addSnippet:r,deleteSnippet:i}=C_(),[o,s]=y.useState(!1),a=()=>{e([...t,{instead:"",doThis:""}])},l=u=>{e(t.filter((d,f)=>f!==u))},c=(u,d)=>{r(u,d)};return m.jsxs("div",{style:{height:"100%",overflow:"auto",paddingRight:"16px"},children:[m.jsxs("div",{style:dt.section,children:[m.jsx("h2",{style:ee.sectionTitle,children:"Replace"}),m.jsx("p",{style:dt.description,children:"Specify any abbreviations or alternative spellings of words you use on Heidi"}),m.jsxs("div",{style:dt.table,children:[m.jsxs("div",{style:dt.tableHeader,children:[m.jsx("div",{children:"Instead of"}),m.jsx("div",{children:"Do this"}),m.jsx("div",{})]}),t.map((u,d)=>m.jsxs("div",{style:dt.tableRow,children:[m.jsx("input",{style:ee.input,value:u.instead,placeholder:"Type word or phrase"}),m.jsx("input",{style:ee.input,value:u.doThis,placeholder:"Type replacement"}),m.jsx("button",{style:dt.iconButton,onClick:()=>l(d),children:m.jsx(qb,{width:20,height:20})})]},d))]}),m.jsxs("button",{style:dt.addButton,onClick:a,children:[m.jsx(Wg,{width:20,height:20}),"New replacement"]})]}),m.jsxs("div",{style:dt.section,children:[m.jsx("h2",{style:ee.sectionTitle,children:"Snippets"}),m.jsx("p",{style:dt.description,children:"Type / to insert your pre-written text snippets"}),n.map((u,d)=>m.jsxs("div",{style:dt.snippetCard,children:[m.jsxs("div",{style:dt.snippetHeader,children:[m.jsx("div",{style:dt.snippetCommand,children:u.command}),m.jsxs("div",{style:{display:"flex",gap:"8px"},children:[m.jsx("button",{style:dt.iconButton,children:m.jsx(d4,{width:20,height:20})}),m.jsx("button",{style:dt.iconButton,onClick:()=>i(d),children:m.jsx(qb,{width:20,height:20})})]})]}),m.jsx("div",{style:dt.snippetText,children:u.text})]},d)),m.jsxs("button",{style:dt.addButton,onClick:()=>s(!0),children:[m.jsx(Wg,{width:20,height:20}),"New snippet"]})]}),m.jsx(q6,{open:o,onClose:()=>s(!1),onSave:c})]})}const rr={tabsContainer:{display:"flex",gap:"1px",alignItems:"flex-end",height:"44px",flexShrink:0,overflow:"auto hidden",scrollbarWidth:"none",msOverflowStyle:"none","&::-webkit-scrollbar":{display:"none"},WebkitOverflowScrolling:"touch",borderBottom:"1px solid #e5e7eb"},tab:{padding:"0 12px",backgroundColor:"#f3f4f6",border:"none",borderTopLeftRadius:"6px",borderTopRightRadius:"6px",borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px",cursor:"pointer",fontWeight:"500",color:"#6b7280",transition:"all 0.15s ease",height:"36px",display:"flex",alignItems:"center",fontSize:"13px",whiteSpace:"nowrap",position:"relative",marginBottom:"-1px","&:hover":{backgroundColor:"#f9fafb"}},activeTab:{backgroundColor:"#ffffff",color:"#111827",zIndex:1},generateButton:{display:"flex",alignItems:"center",justifyContent:"center",minWidth:"28px",height:"28px",padding:0,backgroundColor:"#ffffff",border:"1px solid #e5e7eb",borderRadius:"6px",cursor:"pointer",transition:"all 0.15s ease",fontSize:"16px",lineHeight:"1",flexShrink:0,marginLeft:"4px",marginBottom:"4px",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.05)","&:hover":{backgroundColor:"#f9fafb"}}};function J6({activeTab:t,setActiveTab:e,aiContext:n,soapNote:r,templateNotes:i,onOpenTemplateModal:o}){const s=[...i].sort((a,l)=>{const c=new Date(a.created_at||0),u=new Date(l.created_at||0);return c.getTime()-u.getTime()});return m.jsxs("div",{style:rr.tabsContainer,children:[m.jsx("button",{style:{...rr.tab,...t==="transcript"?rr.activeTab:{}},onClick:()=>e("transcript"),children:"Transcript"}),n&&m.jsx("button",{style:{...rr.tab,...t==="ai_context"?rr.activeTab:{}},onClick:()=>e("ai_context"),children:"Context"}),r&&m.jsx("button",{style:{...rr.tab,...t==="soap"?rr.activeTab:{}},onClick:()=>e("soap"),children:"SOAP Note"}),s.map(a=>{const l=a.metadata;return m.jsxs("button",{style:{...rr.tab,...t===a.id?rr.activeTab:{}},onClick:()=>e(a.id),children:[(l==null?void 0:l.template_name)||"Template Note",a.version_id&&a.version_id>1?` (v${a.version_id})`:""]},a.id)}),r&&m.jsx("button",{style:rr.generateButton,onClick:o,title:"Generate from template",children:"+"})]})}function s0(){const t=He();return{getValidSessionToken:async()=>{const{data:{session:n},error:r}=await t.auth.getSession();if(r)throw new Error("Failed to get session: "+r.message);if(!(n!=null&&n.access_token)){const{data:{session:i},error:o}=await t.auth.refreshSession();if(o||!(i!=null&&i.access_token))throw new Error("No valid session available");return console.log("[Session] Using refreshed session token"),i.access_token}return console.log("[Session] Using existing session token"),n.access_token}}}function Y6({visitId:t,onSuccess:e}){const[n,r]=y.useState(!1),i=He(),{getValidSessionToken:o}=s0();return{generateFromTemplate:async a=>{if(!(!t||n)){r(!0);try{const{data:l,error:c}=await i.from("notes").insert({visit_id:t,content:"Generating note...",type:"template",template_id:a.id,metadata:{template_name:a.name,status:"processing"},user_facing:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select("id").single();if(c){console.error("Error creating placeholder note:",c);return}const{data:u,error:d}=await i.from("notes").select("*").eq("visit_id",t).eq("type","template").order("created_at",{ascending:!1});!d&&u&&(e==null||e(l.id,u));const f=await o(),h=await fetch(`${Wi.apiUrl}/generate-from-template`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${f}`},body:JSON.stringify({visitId:t,templateId:a.id,noteId:l.id})});if(!h.ok){const p=await h.json();throw new Error(p.error||"Failed to generate note")}}catch(l){console.error("Error generating template note:",l);const{error:c}=await i.from("notes").upsert({visit_id:t,content:"Failed to generate note. Please try again.",type:"template",user_facing:!0,updated_at:new Date().toISOString(),metadata:{template_id:a.id,template_name:a.name,status:"error"}},{onConflict:"visit_id,type,metadata->template_id"});c&&console.error("Error updating note status:",c)}finally{r(!1)}}},isGenerating:n}}/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q6=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),k_=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var X6={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z6=y.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:o,iconNode:s,...a},l)=>y.createElement("svg",{ref:l,...X6,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:k_("lucide",i),...a},[...s.map(([c,u])=>y.createElement(c,u)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=(t,e)=>{const n=y.forwardRef(({className:r,...i},o)=>y.createElement(Z6,{ref:o,iconNode:e,className:k_(`lucide-${Q6(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e5=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],E_=It("ChevronDown",e5);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t5=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],n5=It("ChevronRight",t5);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],i5=It("CircleAlert",r5);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],s5=It("CircleCheck",o5);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a5=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],l5=It("Copy",a5);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c5=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],u5=It("Ellipsis",c5);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d5=[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],pf=It("Mic",d5);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f5=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],h5=It("Pause",f5);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p5=[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]],m5=It("Redo",p5);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g5=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],T_=It("RefreshCw",g5);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y5=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],v5=It("Save",y5);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x5=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],w5=It("Square",x5);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b5=[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]],S5=It("Undo",b5);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C5=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],k5=It("Upload",C5);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E5=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],T5=It("X",E5);function a0(t){const e=t+"CollectionProvider",[n,r]=ds(e),[i,o]=n(e,{collectionRef:{current:null},itemMap:new Map}),s=h=>{const{scope:p,children:g}=h,x=we.useRef(null),v=we.useRef(new Map).current;return m.jsx(i,{scope:p,itemMap:v,collectionRef:x,children:g})};s.displayName=e;const a=t+"CollectionSlot",l=we.forwardRef((h,p)=>{const{scope:g,children:x}=h,v=o(a,g),w=Ve(p,v.collectionRef);return m.jsx(za,{ref:w,children:x})});l.displayName=a;const c=t+"CollectionItemSlot",u="data-radix-collection-item",d=we.forwardRef((h,p)=>{const{scope:g,children:x,...v}=h,w=we.useRef(null),S=Ve(p,w),b=o(c,g);return we.useEffect(()=>(b.itemMap.set(w,{ref:w,...v}),()=>void b.itemMap.delete(w))),m.jsx(za,{[u]:"",ref:S,children:x})});d.displayName=c;function f(h){const p=o(t+"CollectionConsumer",h);return we.useCallback(()=>{const x=p.collectionRef.current;if(!x)return[];const v=Array.from(x.querySelectorAll(`[${u}]`));return Array.from(p.itemMap.values()).sort((b,C)=>v.indexOf(b.ref.current)-v.indexOf(C.ref.current))},[p.collectionRef,p.itemMap])}return[{Provider:s,Slot:l,ItemSlot:d},f,r]}var _5=y.createContext(void 0);function __(t){const e=y.useContext(_5);return t||e||"ltr"}const R5=["top","right","bottom","left"],Ji=Math.min,tn=Math.max,mf=Math.round,Yu=Math.floor,vr=t=>({x:t,y:t}),O5={left:"right",right:"left",bottom:"top",top:"bottom"},P5={start:"end",end:"start"};function Jg(t,e,n){return tn(t,Ji(e,n))}function Gr(t,e){return typeof t=="function"?t(e):t}function Jr(t){return t.split("-")[0]}function Za(t){return t.split("-")[1]}function l0(t){return t==="x"?"y":"x"}function c0(t){return t==="y"?"height":"width"}function Yi(t){return["top","bottom"].includes(Jr(t))?"y":"x"}function u0(t){return l0(Yi(t))}function M5(t,e,n){n===void 0&&(n=!1);const r=Za(t),i=u0(t),o=c0(i);let s=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(s=gf(s)),[s,gf(s)]}function A5(t){const e=gf(t);return[Yg(t),e,Yg(e)]}function Yg(t){return t.replace(/start|end/g,e=>P5[e])}function D5(t,e,n){const r=["left","right"],i=["right","left"],o=["top","bottom"],s=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?o:s;default:return[]}}function I5(t,e,n,r){const i=Za(t);let o=D5(Jr(t),n==="start",r);return i&&(o=o.map(s=>s+"-"+i),e&&(o=o.concat(o.map(Yg)))),o}function gf(t){return t.replace(/left|right|bottom|top/g,e=>O5[e])}function N5(t){return{top:0,right:0,bottom:0,left:0,...t}}function R_(t){return typeof t!="number"?N5(t):{top:t,right:t,bottom:t,left:t}}function yf(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function l1(t,e,n){let{reference:r,floating:i}=t;const o=Yi(e),s=u0(e),a=c0(s),l=Jr(e),c=o==="y",u=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,f=r[a]/2-i[a]/2;let h;switch(l){case"top":h={x:u,y:r.y-i.height};break;case"bottom":h={x:u,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:d};break;case"left":h={x:r.x-i.width,y:d};break;default:h={x:r.x,y:r.y}}switch(Za(e)){case"start":h[s]-=f*(n&&c?-1:1);break;case"end":h[s]+=f*(n&&c?-1:1);break}return h}const j5=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:s}=n,a=o.filter(Boolean),l=await(s.isRTL==null?void 0:s.isRTL(e));let c=await s.getElementRects({reference:t,floating:e,strategy:i}),{x:u,y:d}=l1(c,r,l),f=r,h={},p=0;for(let g=0;g<a.length;g++){const{name:x,fn:v}=a[g],{x:w,y:S,data:b,reset:C}=await v({x:u,y:d,initialPlacement:r,placement:f,strategy:i,middlewareData:h,rects:c,platform:s,elements:{reference:t,floating:e}});u=w??u,d=S??d,h={...h,[x]:{...h[x],...b}},C&&p<=50&&(p++,typeof C=="object"&&(C.placement&&(f=C.placement),C.rects&&(c=C.rects===!0?await s.getElementRects({reference:t,floating:e,strategy:i}):C.rects),{x:u,y:d}=l1(c,f,l)),g=-1)}return{x:u,y:d,placement:f,strategy:i,middlewareData:h}};async function Cc(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:o,rects:s,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:h=0}=Gr(e,t),p=R_(h),x=a[f?d==="floating"?"reference":"floating":d],v=yf(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(x)))==null||n?x:x.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),w=d==="floating"?{x:r,y:i,width:s.floating.width,height:s.floating.height}:s.reference,S=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),b=await(o.isElement==null?void 0:o.isElement(S))?await(o.getScale==null?void 0:o.getScale(S))||{x:1,y:1}:{x:1,y:1},C=yf(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:w,offsetParent:S,strategy:l}):w);return{top:(v.top-C.top+p.top)/b.y,bottom:(C.bottom-v.bottom+p.bottom)/b.y,left:(v.left-C.left+p.left)/b.x,right:(C.right-v.right+p.right)/b.x}}const L5=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:o,platform:s,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=Gr(t,e)||{};if(c==null)return{};const d=R_(u),f={x:n,y:r},h=u0(i),p=c0(h),g=await s.getDimensions(c),x=h==="y",v=x?"top":"left",w=x?"bottom":"right",S=x?"clientHeight":"clientWidth",b=o.reference[p]+o.reference[h]-f[h]-o.floating[p],C=f[h]-o.reference[h],k=await(s.getOffsetParent==null?void 0:s.getOffsetParent(c));let E=k?k[S]:0;(!E||!await(s.isElement==null?void 0:s.isElement(k)))&&(E=a.floating[S]||o.floating[p]);const _=b/2-C/2,O=E/2-g[p]/2-1,T=Ji(d[v],O),D=Ji(d[w],O),j=T,z=E-g[p]-D,I=E/2-g[p]/2+_,U=Jg(j,I,z),F=!l.arrow&&Za(i)!=null&&I!==U&&o.reference[p]/2-(I<j?T:D)-g[p]/2<0,K=F?I<j?I-j:I-z:0;return{[h]:f[h]+K,data:{[h]:U,centerOffset:I-U-K,...F&&{alignmentOffset:K}},reset:F}}}),$5=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:o,rects:s,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:g=!0,...x}=Gr(t,e);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const v=Jr(i),w=Yi(a),S=Jr(a)===a,b=await(l.isRTL==null?void 0:l.isRTL(c.floating)),C=f||(S||!g?[gf(a)]:A5(a)),k=p!=="none";!f&&k&&C.push(...I5(a,g,p,b));const E=[a,...C],_=await Cc(e,x),O=[];let T=((r=o.flip)==null?void 0:r.overflows)||[];if(u&&O.push(_[v]),d){const I=M5(i,s,b);O.push(_[I[0]],_[I[1]])}if(T=[...T,{placement:i,overflows:O}],!O.every(I=>I<=0)){var D,j;const I=(((D=o.flip)==null?void 0:D.index)||0)+1,U=E[I];if(U)return{data:{index:I,overflows:T},reset:{placement:U}};let F=(j=T.filter(K=>K.overflows[0]<=0).sort((K,P)=>K.overflows[1]-P.overflows[1])[0])==null?void 0:j.placement;if(!F)switch(h){case"bestFit":{var z;const K=(z=T.filter(P=>{if(k){const M=Yi(P.placement);return M===w||M==="y"}return!0}).map(P=>[P.placement,P.overflows.filter(M=>M>0).reduce((M,L)=>M+L,0)]).sort((P,M)=>P[1]-M[1])[0])==null?void 0:z[0];K&&(F=K);break}case"initialPlacement":F=a;break}if(i!==F)return{reset:{placement:F}}}return{}}}};function c1(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function u1(t){return R5.some(e=>t[e]>=0)}const F5=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=Gr(t,e);switch(r){case"referenceHidden":{const o=await Cc(e,{...i,elementContext:"reference"}),s=c1(o,n.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:u1(s)}}}case"escaped":{const o=await Cc(e,{...i,altBoundary:!0}),s=c1(o,n.floating);return{data:{escapedOffsets:s,escaped:u1(s)}}}default:return{}}}}};async function B5(t,e){const{placement:n,platform:r,elements:i}=t,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),s=Jr(n),a=Za(n),l=Yi(n)==="y",c=["left","top"].includes(s)?-1:1,u=o&&l?-1:1,d=Gr(e,t);let{mainAxis:f,crossAxis:h,alignmentAxis:p}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),l?{x:h*u,y:f*c}:{x:f*c,y:h*u}}const z5=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:o,placement:s,middlewareData:a}=e,l=await B5(e,t);return s===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:o+l.y,data:{...l,placement:s}}}}},U5=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:o=!0,crossAxis:s=!1,limiter:a={fn:x=>{let{x:v,y:w}=x;return{x:v,y:w}}},...l}=Gr(t,e),c={x:n,y:r},u=await Cc(e,l),d=Yi(Jr(i)),f=l0(d);let h=c[f],p=c[d];if(o){const x=f==="y"?"top":"left",v=f==="y"?"bottom":"right",w=h+u[x],S=h-u[v];h=Jg(w,h,S)}if(s){const x=d==="y"?"top":"left",v=d==="y"?"bottom":"right",w=p+u[x],S=p-u[v];p=Jg(w,p,S)}const g=a.fn({...e,[f]:h,[d]:p});return{...g,data:{x:g.x-n,y:g.y-r,enabled:{[f]:o,[d]:s}}}}}},V5=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:o,middlewareData:s}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Gr(t,e),u={x:n,y:r},d=Yi(i),f=l0(d);let h=u[f],p=u[d];const g=Gr(a,e),x=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){const S=f==="y"?"height":"width",b=o.reference[f]-o.floating[S]+x.mainAxis,C=o.reference[f]+o.reference[S]-x.mainAxis;h<b?h=b:h>C&&(h=C)}if(c){var v,w;const S=f==="y"?"width":"height",b=["top","left"].includes(Jr(i)),C=o.reference[d]-o.floating[S]+(b&&((v=s.offset)==null?void 0:v[d])||0)+(b?0:x.crossAxis),k=o.reference[d]+o.reference[S]+(b?0:((w=s.offset)==null?void 0:w[d])||0)-(b?x.crossAxis:0);p<C?p=C:p>k&&(p=k)}return{[f]:h,[d]:p}}}},H5=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:o,platform:s,elements:a}=e,{apply:l=()=>{},...c}=Gr(t,e),u=await Cc(e,c),d=Jr(i),f=Za(i),h=Yi(i)==="y",{width:p,height:g}=o.floating;let x,v;d==="top"||d==="bottom"?(x=d,v=f===(await(s.isRTL==null?void 0:s.isRTL(a.floating))?"start":"end")?"left":"right"):(v=d,x=f==="end"?"top":"bottom");const w=g-u.top-u.bottom,S=p-u.left-u.right,b=Ji(g-u[x],w),C=Ji(p-u[v],S),k=!e.middlewareData.shift;let E=b,_=C;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(_=S),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(E=w),k&&!f){const T=tn(u.left,0),D=tn(u.right,0),j=tn(u.top,0),z=tn(u.bottom,0);h?_=p-2*(T!==0||D!==0?T+D:tn(u.left,u.right)):E=g-2*(j!==0||z!==0?j+z:tn(u.top,u.bottom))}await l({...e,availableWidth:_,availableHeight:E});const O=await s.getDimensions(a.floating);return p!==O.width||g!==O.height?{reset:{rects:!0}}:{}}}};function mh(){return typeof window<"u"}function el(t){return O_(t)?(t.nodeName||"").toLowerCase():"#document"}function sn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function kr(t){var e;return(e=(O_(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function O_(t){return mh()?t instanceof Node||t instanceof sn(t).Node:!1}function Yn(t){return mh()?t instanceof Element||t instanceof sn(t).Element:!1}function Sr(t){return mh()?t instanceof HTMLElement||t instanceof sn(t).HTMLElement:!1}function d1(t){return!mh()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof sn(t).ShadowRoot}function tu(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=Qn(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function W5(t){return["table","td","th"].includes(el(t))}function gh(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function d0(t){const e=f0(),n=Yn(t)?Qn(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function K5(t){let e=Qi(t);for(;Sr(e)&&!Ua(e);){if(d0(e))return e;if(gh(e))return null;e=Qi(e)}return null}function f0(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Ua(t){return["html","body","#document"].includes(el(t))}function Qn(t){return sn(t).getComputedStyle(t)}function yh(t){return Yn(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Qi(t){if(el(t)==="html")return t;const e=t.assignedSlot||t.parentNode||d1(t)&&t.host||kr(t);return d1(e)?e.host:e}function P_(t){const e=Qi(t);return Ua(e)?t.ownerDocument?t.ownerDocument.body:t.body:Sr(e)&&tu(e)?e:P_(e)}function kc(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=P_(t),o=i===((r=t.ownerDocument)==null?void 0:r.body),s=sn(i);if(o){const a=Qg(s);return e.concat(s,s.visualViewport||[],tu(i)?i:[],a&&n?kc(a):[])}return e.concat(i,kc(i,[],n))}function Qg(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function M_(t){const e=Qn(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Sr(t),o=i?t.offsetWidth:n,s=i?t.offsetHeight:r,a=mf(n)!==o||mf(r)!==s;return a&&(n=o,r=s),{width:n,height:r,$:a}}function h0(t){return Yn(t)?t:t.contextElement}function la(t){const e=h0(t);if(!Sr(e))return vr(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:o}=M_(e);let s=(o?mf(n.width):n.width)/r,a=(o?mf(n.height):n.height)/i;return(!s||!Number.isFinite(s))&&(s=1),(!a||!Number.isFinite(a))&&(a=1),{x:s,y:a}}const q5=vr(0);function A_(t){const e=sn(t);return!f0()||!e.visualViewport?q5:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function G5(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==sn(t)?!1:e}function is(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),o=h0(t);let s=vr(1);e&&(r?Yn(r)&&(s=la(r)):s=la(t));const a=G5(o,n,r)?A_(o):vr(0);let l=(i.left+a.x)/s.x,c=(i.top+a.y)/s.y,u=i.width/s.x,d=i.height/s.y;if(o){const f=sn(o),h=r&&Yn(r)?sn(r):r;let p=f,g=Qg(p);for(;g&&r&&h!==p;){const x=la(g),v=g.getBoundingClientRect(),w=Qn(g),S=v.left+(g.clientLeft+parseFloat(w.paddingLeft))*x.x,b=v.top+(g.clientTop+parseFloat(w.paddingTop))*x.y;l*=x.x,c*=x.y,u*=x.x,d*=x.y,l+=S,c+=b,p=sn(g),g=Qg(p)}}return yf({width:u,height:d,x:l,y:c})}function p0(t,e){const n=yh(t).scrollLeft;return e?e.left+n:is(kr(t)).left+n}function D_(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),i=r.left+e.scrollLeft-(n?0:p0(t,r)),o=r.top+e.scrollTop;return{x:i,y:o}}function J5(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const o=i==="fixed",s=kr(r),a=e?gh(e.floating):!1;if(r===s||a&&o)return n;let l={scrollLeft:0,scrollTop:0},c=vr(1);const u=vr(0),d=Sr(r);if((d||!d&&!o)&&((el(r)!=="body"||tu(s))&&(l=yh(r)),Sr(r))){const h=is(r);c=la(r),u.x=h.x+r.clientLeft,u.y=h.y+r.clientTop}const f=s&&!d&&!o?D_(s,l,!0):vr(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+f.x,y:n.y*c.y-l.scrollTop*c.y+u.y+f.y}}function Y5(t){return Array.from(t.getClientRects())}function Q5(t){const e=kr(t),n=yh(t),r=t.ownerDocument.body,i=tn(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),o=tn(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+p0(t);const a=-n.scrollTop;return Qn(r).direction==="rtl"&&(s+=tn(e.clientWidth,r.clientWidth)-i),{width:i,height:o,x:s,y:a}}function X5(t,e){const n=sn(t),r=kr(t),i=n.visualViewport;let o=r.clientWidth,s=r.clientHeight,a=0,l=0;if(i){o=i.width,s=i.height;const c=f0();(!c||c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:o,height:s,x:a,y:l}}function Z5(t,e){const n=is(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,o=Sr(t)?la(t):vr(1),s=t.clientWidth*o.x,a=t.clientHeight*o.y,l=i*o.x,c=r*o.y;return{width:s,height:a,x:l,y:c}}function f1(t,e,n){let r;if(e==="viewport")r=X5(t,n);else if(e==="document")r=Q5(kr(t));else if(Yn(e))r=Z5(e,n);else{const i=A_(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return yf(r)}function I_(t,e){const n=Qi(t);return n===e||!Yn(n)||Ua(n)?!1:Qn(n).position==="fixed"||I_(n,e)}function e8(t,e){const n=e.get(t);if(n)return n;let r=kc(t,[],!1).filter(a=>Yn(a)&&el(a)!=="body"),i=null;const o=Qn(t).position==="fixed";let s=o?Qi(t):t;for(;Yn(s)&&!Ua(s);){const a=Qn(s),l=d0(s);!l&&a.position==="fixed"&&(i=null),(o?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||tu(s)&&!l&&I_(t,s))?r=r.filter(u=>u!==s):i=a,s=Qi(s)}return e.set(t,r),r}function t8(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const s=[...n==="clippingAncestors"?gh(e)?[]:e8(e,this._c):[].concat(n),r],a=s[0],l=s.reduce((c,u)=>{const d=f1(e,u,i);return c.top=tn(d.top,c.top),c.right=Ji(d.right,c.right),c.bottom=Ji(d.bottom,c.bottom),c.left=tn(d.left,c.left),c},f1(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function n8(t){const{width:e,height:n}=M_(t);return{width:e,height:n}}function r8(t,e,n){const r=Sr(e),i=kr(e),o=n==="fixed",s=is(t,!0,o,e);let a={scrollLeft:0,scrollTop:0};const l=vr(0);if(r||!r&&!o)if((el(e)!=="body"||tu(i))&&(a=yh(e)),r){const f=is(e,!0,o,e);l.x=f.x+e.clientLeft,l.y=f.y+e.clientTop}else i&&(l.x=p0(i));const c=i&&!r&&!o?D_(i,a):vr(0),u=s.left+a.scrollLeft-l.x-c.x,d=s.top+a.scrollTop-l.y-c.y;return{x:u,y:d,width:s.width,height:s.height}}function Kp(t){return Qn(t).position==="static"}function h1(t,e){if(!Sr(t)||Qn(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return kr(t)===n&&(n=n.ownerDocument.body),n}function N_(t,e){const n=sn(t);if(gh(t))return n;if(!Sr(t)){let i=Qi(t);for(;i&&!Ua(i);){if(Yn(i)&&!Kp(i))return i;i=Qi(i)}return n}let r=h1(t,e);for(;r&&W5(r)&&Kp(r);)r=h1(r,e);return r&&Ua(r)&&Kp(r)&&!d0(r)?n:r||K5(t)||n}const i8=async function(t){const e=this.getOffsetParent||N_,n=this.getDimensions,r=await n(t.floating);return{reference:r8(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function o8(t){return Qn(t).direction==="rtl"}const s8={convertOffsetParentRelativeRectToViewportRelativeRect:J5,getDocumentElement:kr,getClippingRect:t8,getOffsetParent:N_,getElementRects:i8,getClientRects:Y5,getDimensions:n8,getScale:la,isElement:Yn,isRTL:o8};function j_(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function a8(t,e){let n=null,r;const i=kr(t);function o(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function s(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),o();const c=t.getBoundingClientRect(),{left:u,top:d,width:f,height:h}=c;if(a||e(),!f||!h)return;const p=Yu(d),g=Yu(i.clientWidth-(u+f)),x=Yu(i.clientHeight-(d+h)),v=Yu(u),S={rootMargin:-p+"px "+-g+"px "+-x+"px "+-v+"px",threshold:tn(0,Ji(1,l))||1};let b=!0;function C(k){const E=k[0].intersectionRatio;if(E!==l){if(!b)return s();E?s(!1,E):r=setTimeout(()=>{s(!1,1e-7)},1e3)}E===1&&!j_(c,t.getBoundingClientRect())&&s(),b=!1}try{n=new IntersectionObserver(C,{...S,root:i.ownerDocument})}catch{n=new IntersectionObserver(C,S)}n.observe(t)}return s(!0),o}function l8(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=h0(t),u=i||o?[...c?kc(c):[],...kc(e)]:[];u.forEach(v=>{i&&v.addEventListener("scroll",n,{passive:!0}),o&&v.addEventListener("resize",n)});const d=c&&a?a8(c,n):null;let f=-1,h=null;s&&(h=new ResizeObserver(v=>{let[w]=v;w&&w.target===c&&h&&(h.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var S;(S=h)==null||S.observe(e)})),n()}),c&&!l&&h.observe(c),h.observe(e));let p,g=l?is(t):null;l&&x();function x(){const v=is(t);g&&!j_(g,v)&&n(),g=v,p=requestAnimationFrame(x)}return n(),()=>{var v;u.forEach(w=>{i&&w.removeEventListener("scroll",n),o&&w.removeEventListener("resize",n)}),d==null||d(),(v=h)==null||v.disconnect(),h=null,l&&cancelAnimationFrame(p)}}const c8=z5,u8=U5,d8=$5,f8=H5,h8=F5,p1=L5,p8=V5,m8=(t,e,n)=>{const r=new Map,i={platform:s8,...n},o={...i.platform,_c:r};return j5(t,e,{...i,platform:o})};var bd=typeof document<"u"?y.useLayoutEffect:y.useEffect;function vf(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!vf(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const o=i[r];if(!(o==="_owner"&&t.$$typeof)&&!vf(t[o],e[o]))return!1}return!0}return t!==t&&e!==e}function L_(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function m1(t,e){const n=L_(t);return Math.round(e*n)/n}function qp(t){const e=y.useRef(t);return bd(()=>{e.current=t}),e}function g8(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:o,floating:s}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[u,d]=y.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,h]=y.useState(r);vf(f,r)||h(r);const[p,g]=y.useState(null),[x,v]=y.useState(null),w=y.useCallback(P=>{P!==k.current&&(k.current=P,g(P))},[]),S=y.useCallback(P=>{P!==E.current&&(E.current=P,v(P))},[]),b=o||p,C=s||x,k=y.useRef(null),E=y.useRef(null),_=y.useRef(u),O=l!=null,T=qp(l),D=qp(i),j=qp(c),z=y.useCallback(()=>{if(!k.current||!E.current)return;const P={placement:e,strategy:n,middleware:f};D.current&&(P.platform=D.current),m8(k.current,E.current,P).then(M=>{const L={...M,isPositioned:j.current!==!1};I.current&&!vf(_.current,L)&&(_.current=L,Vc.flushSync(()=>{d(L)}))})},[f,e,n,D,j]);bd(()=>{c===!1&&_.current.isPositioned&&(_.current.isPositioned=!1,d(P=>({...P,isPositioned:!1})))},[c]);const I=y.useRef(!1);bd(()=>(I.current=!0,()=>{I.current=!1}),[]),bd(()=>{if(b&&(k.current=b),C&&(E.current=C),b&&C){if(T.current)return T.current(b,C,z);z()}},[b,C,z,T,O]);const U=y.useMemo(()=>({reference:k,floating:E,setReference:w,setFloating:S}),[w,S]),F=y.useMemo(()=>({reference:b,floating:C}),[b,C]),K=y.useMemo(()=>{const P={position:n,left:0,top:0};if(!F.floating)return P;const M=m1(F.floating,u.x),L=m1(F.floating,u.y);return a?{...P,transform:"translate("+M+"px, "+L+"px)",...L_(F.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:M,top:L}},[n,a,F.floating,u.x,u.y]);return y.useMemo(()=>({...u,update:z,refs:U,elements:F,floatingStyles:K}),[u,z,U,F,K])}const y8=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?p1({element:r.current,padding:i}).fn(n):{}:r?p1({element:r,padding:i}).fn(n):{}}}},v8=(t,e)=>({...c8(t),options:[t,e]}),x8=(t,e)=>({...u8(t),options:[t,e]}),w8=(t,e)=>({...p8(t),options:[t,e]}),b8=(t,e)=>({...d8(t),options:[t,e]}),S8=(t,e)=>({...f8(t),options:[t,e]}),C8=(t,e)=>({...h8(t),options:[t,e]}),k8=(t,e)=>({...y8(t),options:[t,e]});var E8="Arrow",$_=y.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...o}=t;return m.jsx(ye.svg,{...o,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:m.jsx("polygon",{points:"0,0 30,0 15,10"})})});$_.displayName=E8;var T8=$_;function _8(t){const[e,n]=y.useState(void 0);return Gi(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const o=i[0];let s,a;if("borderBoxSize"in o){const l=o.borderBoxSize,c=Array.isArray(l)?l[0]:l;s=c.inlineSize,a=c.blockSize}else s=t.offsetWidth,a=t.offsetHeight;n({width:s,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var m0="Popper",[F_,B_]=ds(m0),[R8,z_]=F_(m0),U_=t=>{const{__scopePopper:e,children:n}=t,[r,i]=y.useState(null);return m.jsx(R8,{scope:e,anchor:r,onAnchorChange:i,children:n})};U_.displayName=m0;var V_="PopperAnchor",H_=y.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,o=z_(V_,n),s=y.useRef(null),a=Ve(e,s);return y.useEffect(()=>{o.onAnchorChange((r==null?void 0:r.current)||s.current)}),r?null:m.jsx(ye.div,{...i,ref:a})});H_.displayName=V_;var g0="PopperContent",[O8,P8]=F_(g0),W_=y.forwardRef((t,e)=>{var Ne,vt,Be,jt,Er,oo;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:o="center",alignOffset:s=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:f=!1,updatePositionStrategy:h="optimized",onPlaced:p,...g}=t,x=z_(g0,n),[v,w]=y.useState(null),S=Ve(e,In=>w(In)),[b,C]=y.useState(null),k=_8(b),E=(k==null?void 0:k.width)??0,_=(k==null?void 0:k.height)??0,O=r+(o!=="center"?"-"+o:""),T=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},D=Array.isArray(c)?c:[c],j=D.length>0,z={padding:T,boundary:D.filter(A8),altBoundary:j},{refs:I,floatingStyles:U,placement:F,isPositioned:K,middlewareData:P}=g8({strategy:"fixed",placement:O,whileElementsMounted:(...In)=>l8(...In,{animationFrame:h==="always"}),elements:{reference:x.anchor},middleware:[v8({mainAxis:i+_,alignmentAxis:s}),l&&x8({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?w8():void 0,...z}),l&&b8({...z}),S8({...z,apply:({elements:In,rects:so,availableWidth:ps,availableHeight:ao})=>{const{width:lo,height:ms}=so.reference,Tr=In.floating.style;Tr.setProperty("--radix-popper-available-width",`${ps}px`),Tr.setProperty("--radix-popper-available-height",`${ao}px`),Tr.setProperty("--radix-popper-anchor-width",`${lo}px`),Tr.setProperty("--radix-popper-anchor-height",`${ms}px`)}}),b&&k8({element:b,padding:a}),D8({arrowWidth:E,arrowHeight:_}),f&&C8({strategy:"referenceHidden",...z})]}),[M,L]=G_(F),J=Mt(p);Gi(()=>{K&&(J==null||J())},[K,J]);const B=(Ne=P.arrow)==null?void 0:Ne.x,X=(vt=P.arrow)==null?void 0:vt.y,fe=((Be=P.arrow)==null?void 0:Be.centerOffset)!==0,[Te,Se]=y.useState();return Gi(()=>{v&&Se(window.getComputedStyle(v).zIndex)},[v]),m.jsx("div",{ref:I.setFloating,"data-radix-popper-content-wrapper":"",style:{...U,transform:K?U.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Te,"--radix-popper-transform-origin":[(jt=P.transformOrigin)==null?void 0:jt.x,(Er=P.transformOrigin)==null?void 0:Er.y].join(" "),...((oo=P.hide)==null?void 0:oo.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:m.jsx(O8,{scope:n,placedSide:M,onArrowChange:C,arrowX:B,arrowY:X,shouldHideArrow:fe,children:m.jsx(ye.div,{"data-side":M,"data-align":L,...g,ref:S,style:{...g.style,animation:K?void 0:"none"}})})})});W_.displayName=g0;var K_="PopperArrow",M8={top:"bottom",right:"left",bottom:"top",left:"right"},q_=y.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,o=P8(K_,r),s=M8[o.placedSide];return m.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:m.jsx(T8,{...i,ref:n,style:{...i.style,display:"block"}})})});q_.displayName=K_;function A8(t){return t!==null}var D8=t=>({name:"transformOrigin",options:t,fn(e){var x,v,w;const{placement:n,rects:r,middlewareData:i}=e,s=((x=i.arrow)==null?void 0:x.centerOffset)!==0,a=s?0:t.arrowWidth,l=s?0:t.arrowHeight,[c,u]=G_(n),d={start:"0%",center:"50%",end:"100%"}[u],f=(((v=i.arrow)==null?void 0:v.x)??0)+a/2,h=(((w=i.arrow)==null?void 0:w.y)??0)+l/2;let p="",g="";return c==="bottom"?(p=s?d:`${f}px`,g=`${-l}px`):c==="top"?(p=s?d:`${f}px`,g=`${r.floating.height+l}px`):c==="right"?(p=`${-l}px`,g=s?d:`${h}px`):c==="left"&&(p=`${r.floating.width+l}px`,g=s?d:`${h}px`),{data:{x:p,y:g}}}});function G_(t){const[e,n="center"]=t.split("-");return[e,n]}var I8=U_,N8=H_,j8=W_,L8=q_,Gp="rovingFocusGroup.onEntryFocus",$8={bubbles:!1,cancelable:!0},vh="RovingFocusGroup",[Xg,J_,F8]=a0(vh),[B8,Y_]=ds(vh,[F8]),[z8,U8]=B8(vh),Q_=y.forwardRef((t,e)=>m.jsx(Xg.Provider,{scope:t.__scopeRovingFocusGroup,children:m.jsx(Xg.Slot,{scope:t.__scopeRovingFocusGroup,children:m.jsx(V8,{...t,ref:e})})}));Q_.displayName=vh;var V8=y.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:o,currentTabStopId:s,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=t,f=y.useRef(null),h=Ve(e,f),p=__(o),[g=null,x]=dh({prop:s,defaultProp:a,onChange:l}),[v,w]=y.useState(!1),S=Mt(c),b=J_(n),C=y.useRef(!1),[k,E]=y.useState(0);return y.useEffect(()=>{const _=f.current;if(_)return _.addEventListener(Gp,S),()=>_.removeEventListener(Gp,S)},[S]),m.jsx(z8,{scope:n,orientation:r,dir:p,loop:i,currentTabStopId:g,onItemFocus:y.useCallback(_=>x(_),[x]),onItemShiftTab:y.useCallback(()=>w(!0),[]),onFocusableItemAdd:y.useCallback(()=>E(_=>_+1),[]),onFocusableItemRemove:y.useCallback(()=>E(_=>_-1),[]),children:m.jsx(ye.div,{tabIndex:v||k===0?-1:0,"data-orientation":r,...d,ref:h,style:{outline:"none",...t.style},onMouseDown:Z(t.onMouseDown,()=>{C.current=!0}),onFocus:Z(t.onFocus,_=>{const O=!C.current;if(_.target===_.currentTarget&&O&&!v){const T=new CustomEvent(Gp,$8);if(_.currentTarget.dispatchEvent(T),!T.defaultPrevented){const D=b().filter(F=>F.focusable),j=D.find(F=>F.active),z=D.find(F=>F.id===g),U=[j,z,...D].filter(Boolean).map(F=>F.ref.current);eR(U,u)}}C.current=!1}),onBlur:Z(t.onBlur,()=>w(!1))})})}),X_="RovingFocusGroupItem",Z_=y.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:o,...s}=t,a=sa(),l=o||a,c=U8(X_,n),u=c.currentTabStopId===l,d=J_(n),{onFocusableItemAdd:f,onFocusableItemRemove:h}=c;return y.useEffect(()=>{if(r)return f(),()=>h()},[r,f,h]),m.jsx(Xg.ItemSlot,{scope:n,id:l,focusable:r,active:i,children:m.jsx(ye.span,{tabIndex:u?0:-1,"data-orientation":c.orientation,...s,ref:e,onMouseDown:Z(t.onMouseDown,p=>{r?c.onItemFocus(l):p.preventDefault()}),onFocus:Z(t.onFocus,()=>c.onItemFocus(l)),onKeyDown:Z(t.onKeyDown,p=>{if(p.key==="Tab"&&p.shiftKey){c.onItemShiftTab();return}if(p.target!==p.currentTarget)return;const g=K8(p,c.orientation,c.dir);if(g!==void 0){if(p.metaKey||p.ctrlKey||p.altKey||p.shiftKey)return;p.preventDefault();let v=d().filter(w=>w.focusable).map(w=>w.ref.current);if(g==="last")v.reverse();else if(g==="prev"||g==="next"){g==="prev"&&v.reverse();const w=v.indexOf(p.currentTarget);v=c.loop?q8(v,w+1):v.slice(w+1)}setTimeout(()=>eR(v))}})})})});Z_.displayName=X_;var H8={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function W8(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function K8(t,e,n){const r=W8(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return H8[r]}function eR(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function q8(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var G8=Q_,J8=Z_,Zg=["Enter"," "],Y8=["ArrowDown","PageUp","Home"],tR=["ArrowUp","PageDown","End"],Q8=[...Y8,...tR],X8={ltr:[...Zg,"ArrowRight"],rtl:[...Zg,"ArrowLeft"]},Z8={ltr:["ArrowLeft"],rtl:["ArrowRight"]},nu="Menu",[Ec,eU,tU]=a0(nu),[fs,nR]=ds(nu,[tU,B_,Y_]),xh=B_(),rR=Y_(),[nU,hs]=fs(nu),[rU,ru]=fs(nu),iR=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:i,onOpenChange:o,modal:s=!0}=t,a=xh(e),[l,c]=y.useState(null),u=y.useRef(!1),d=Mt(o),f=__(i);return y.useEffect(()=>{const h=()=>{u.current=!0,document.addEventListener("pointerdown",p,{capture:!0,once:!0}),document.addEventListener("pointermove",p,{capture:!0,once:!0})},p=()=>u.current=!1;return document.addEventListener("keydown",h,{capture:!0}),()=>{document.removeEventListener("keydown",h,{capture:!0}),document.removeEventListener("pointerdown",p,{capture:!0}),document.removeEventListener("pointermove",p,{capture:!0})}},[]),m.jsx(I8,{...a,children:m.jsx(nU,{scope:e,open:n,onOpenChange:d,content:l,onContentChange:c,children:m.jsx(rU,{scope:e,onClose:y.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:u,dir:f,modal:s,children:r})})})};iR.displayName=nu;var iU="MenuAnchor",y0=y.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=xh(n);return m.jsx(N8,{...i,...r,ref:e})});y0.displayName=iU;var v0="MenuPortal",[oU,oR]=fs(v0,{forceMount:void 0}),sR=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:i}=t,o=hs(v0,e);return m.jsx(oU,{scope:e,forceMount:n,children:m.jsx(Qr,{present:n||o.open,children:m.jsx(hh,{asChild:!0,container:i,children:r})})})};sR.displayName=v0;var En="MenuContent",[sU,x0]=fs(En),aR=y.forwardRef((t,e)=>{const n=oR(En,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,o=hs(En,t.__scopeMenu),s=ru(En,t.__scopeMenu);return m.jsx(Ec.Provider,{scope:t.__scopeMenu,children:m.jsx(Qr,{present:r||o.open,children:m.jsx(Ec.Slot,{scope:t.__scopeMenu,children:s.modal?m.jsx(aU,{...i,ref:e}):m.jsx(lU,{...i,ref:e})})})})}),aU=y.forwardRef((t,e)=>{const n=hs(En,t.__scopeMenu),r=y.useRef(null),i=Ve(e,r);return y.useEffect(()=>{const o=r.current;if(o)return c_(o)},[]),m.jsx(w0,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Z(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),lU=y.forwardRef((t,e)=>{const n=hs(En,t.__scopeMenu);return m.jsx(w0,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),w0=y.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:i,onOpenAutoFocus:o,onCloseAutoFocus:s,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:h,disableOutsideScroll:p,...g}=t,x=hs(En,n),v=ru(En,n),w=xh(n),S=rR(n),b=eU(n),[C,k]=y.useState(null),E=y.useRef(null),_=Ve(e,E,x.onContentChange),O=y.useRef(0),T=y.useRef(""),D=y.useRef(0),j=y.useRef(null),z=y.useRef("right"),I=y.useRef(0),U=p?a_:y.Fragment,F=p?{as:za,allowPinchZoom:!0}:void 0,K=M=>{var Ne,vt;const L=T.current+M,J=b().filter(Be=>!Be.disabled),B=document.activeElement,X=(Ne=J.find(Be=>Be.ref.current===B))==null?void 0:Ne.textValue,fe=J.map(Be=>Be.textValue),Te=wU(fe,L,X),Se=(vt=J.find(Be=>Be.textValue===Te))==null?void 0:vt.ref.current;(function Be(jt){T.current=jt,window.clearTimeout(O.current),jt!==""&&(O.current=window.setTimeout(()=>Be(""),1e3))})(L),Se&&setTimeout(()=>Se.focus())};y.useEffect(()=>()=>window.clearTimeout(O.current),[]),XT();const P=y.useCallback(M=>{var J,B;return z.current===((J=j.current)==null?void 0:J.side)&&SU(M,(B=j.current)==null?void 0:B.area)},[]);return m.jsx(sU,{scope:n,searchRef:T,onItemEnter:y.useCallback(M=>{P(M)&&M.preventDefault()},[P]),onItemLeave:y.useCallback(M=>{var L;P(M)||((L=E.current)==null||L.focus(),k(null))},[P]),onTriggerLeave:y.useCallback(M=>{P(M)&&M.preventDefault()},[P]),pointerGraceTimerRef:D,onPointerGraceIntentChange:y.useCallback(M=>{j.current=M},[]),children:m.jsx(U,{...F,children:m.jsx(t0,{asChild:!0,trapped:i,onMountAutoFocus:Z(o,M=>{var L;M.preventDefault(),(L=E.current)==null||L.focus({preventScroll:!0})}),onUnmountAutoFocus:s,children:m.jsx(fh,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:h,children:m.jsx(G8,{asChild:!0,...S,dir:v.dir,orientation:"vertical",loop:r,currentTabStopId:C,onCurrentTabStopIdChange:k,onEntryFocus:Z(l,M=>{v.isUsingKeyboardRef.current||M.preventDefault()}),preventScrollOnEntryFocus:!0,children:m.jsx(j8,{role:"menu","aria-orientation":"vertical","data-state":CR(x.open),"data-radix-menu-content":"",dir:v.dir,...w,...g,ref:_,style:{outline:"none",...g.style},onKeyDown:Z(g.onKeyDown,M=>{const J=M.target.closest("[data-radix-menu-content]")===M.currentTarget,B=M.ctrlKey||M.altKey||M.metaKey,X=M.key.length===1;J&&(M.key==="Tab"&&M.preventDefault(),!B&&X&&K(M.key));const fe=E.current;if(M.target!==fe||!Q8.includes(M.key))return;M.preventDefault();const Se=b().filter(Ne=>!Ne.disabled).map(Ne=>Ne.ref.current);tR.includes(M.key)&&Se.reverse(),vU(Se)}),onBlur:Z(t.onBlur,M=>{M.currentTarget.contains(M.target)||(window.clearTimeout(O.current),T.current="")}),onPointerMove:Z(t.onPointerMove,Tc(M=>{const L=M.target,J=I.current!==M.clientX;if(M.currentTarget.contains(L)&&J){const B=M.clientX>I.current?"right":"left";z.current=B,I.current=M.clientX}}))})})})})})})});aR.displayName=En;var cU="MenuGroup",b0=y.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return m.jsx(ye.div,{role:"group",...r,ref:e})});b0.displayName=cU;var uU="MenuLabel",lR=y.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return m.jsx(ye.div,{...r,ref:e})});lR.displayName=uU;var xf="MenuItem",g1="menu.itemSelect",wh=y.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...i}=t,o=y.useRef(null),s=ru(xf,t.__scopeMenu),a=x0(xf,t.__scopeMenu),l=Ve(e,o),c=y.useRef(!1),u=()=>{const d=o.current;if(!n&&d){const f=new CustomEvent(g1,{bubbles:!0,cancelable:!0});d.addEventListener(g1,h=>r==null?void 0:r(h),{once:!0}),e0(d,f),f.defaultPrevented?c.current=!1:s.onClose()}};return m.jsx(cR,{...i,ref:l,disabled:n,onClick:Z(t.onClick,u),onPointerDown:d=>{var f;(f=t.onPointerDown)==null||f.call(t,d),c.current=!0},onPointerUp:Z(t.onPointerUp,d=>{var f;c.current||(f=d.currentTarget)==null||f.click()}),onKeyDown:Z(t.onKeyDown,d=>{const f=a.searchRef.current!=="";n||f&&d.key===" "||Zg.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});wh.displayName=xf;var cR=y.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:i,...o}=t,s=x0(xf,n),a=rR(n),l=y.useRef(null),c=Ve(e,l),[u,d]=y.useState(!1),[f,h]=y.useState("");return y.useEffect(()=>{const p=l.current;p&&h((p.textContent??"").trim())},[o.children]),m.jsx(Ec.ItemSlot,{scope:n,disabled:r,textValue:i??f,children:m.jsx(J8,{asChild:!0,...a,focusable:!r,children:m.jsx(ye.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...o,ref:c,onPointerMove:Z(t.onPointerMove,Tc(p=>{r?s.onItemLeave(p):(s.onItemEnter(p),p.defaultPrevented||p.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Z(t.onPointerLeave,Tc(p=>s.onItemLeave(p))),onFocus:Z(t.onFocus,()=>d(!0)),onBlur:Z(t.onBlur,()=>d(!1))})})})}),dU="MenuCheckboxItem",uR=y.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...i}=t;return m.jsx(mR,{scope:t.__scopeMenu,checked:n,children:m.jsx(wh,{role:"menuitemcheckbox","aria-checked":wf(n)?"mixed":n,...i,ref:e,"data-state":C0(n),onSelect:Z(i.onSelect,()=>r==null?void 0:r(wf(n)?!0:!n),{checkForDefaultPrevented:!1})})})});uR.displayName=dU;var dR="MenuRadioGroup",[fU,hU]=fs(dR,{value:void 0,onValueChange:()=>{}}),fR=y.forwardRef((t,e)=>{const{value:n,onValueChange:r,...i}=t,o=Mt(r);return m.jsx(fU,{scope:t.__scopeMenu,value:n,onValueChange:o,children:m.jsx(b0,{...i,ref:e})})});fR.displayName=dR;var hR="MenuRadioItem",pR=y.forwardRef((t,e)=>{const{value:n,...r}=t,i=hU(hR,t.__scopeMenu),o=n===i.value;return m.jsx(mR,{scope:t.__scopeMenu,checked:o,children:m.jsx(wh,{role:"menuitemradio","aria-checked":o,...r,ref:e,"data-state":C0(o),onSelect:Z(r.onSelect,()=>{var s;return(s=i.onValueChange)==null?void 0:s.call(i,n)},{checkForDefaultPrevented:!1})})})});pR.displayName=hR;var S0="MenuItemIndicator",[mR,pU]=fs(S0,{checked:!1}),gR=y.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...i}=t,o=pU(S0,n);return m.jsx(Qr,{present:r||wf(o.checked)||o.checked===!0,children:m.jsx(ye.span,{...i,ref:e,"data-state":C0(o.checked)})})});gR.displayName=S0;var mU="MenuSeparator",yR=y.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return m.jsx(ye.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});yR.displayName=mU;var gU="MenuArrow",vR=y.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=xh(n);return m.jsx(L8,{...i,...r,ref:e})});vR.displayName=gU;var yU="MenuSub",[GH,xR]=fs(yU),El="MenuSubTrigger",wR=y.forwardRef((t,e)=>{const n=hs(El,t.__scopeMenu),r=ru(El,t.__scopeMenu),i=xR(El,t.__scopeMenu),o=x0(El,t.__scopeMenu),s=y.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=o,c={__scopeMenu:t.__scopeMenu},u=y.useCallback(()=>{s.current&&window.clearTimeout(s.current),s.current=null},[]);return y.useEffect(()=>u,[u]),y.useEffect(()=>{const d=a.current;return()=>{window.clearTimeout(d),l(null)}},[a,l]),m.jsx(y0,{asChild:!0,...c,children:m.jsx(cR,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":i.contentId,"data-state":CR(n.open),...t,ref:uh(e,i.onTriggerChange),onClick:d=>{var f;(f=t.onClick)==null||f.call(t,d),!(t.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Z(t.onPointerMove,Tc(d=>{o.onItemEnter(d),!d.defaultPrevented&&!t.disabled&&!n.open&&!s.current&&(o.onPointerGraceIntentChange(null),s.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:Z(t.onPointerLeave,Tc(d=>{var h,p;u();const f=(h=n.content)==null?void 0:h.getBoundingClientRect();if(f){const g=(p=n.content)==null?void 0:p.dataset.side,x=g==="right",v=x?-5:5,w=f[x?"left":"right"],S=f[x?"right":"left"];o.onPointerGraceIntentChange({area:[{x:d.clientX+v,y:d.clientY},{x:w,y:f.top},{x:S,y:f.top},{x:S,y:f.bottom},{x:w,y:f.bottom}],side:g}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(d),d.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:Z(t.onKeyDown,d=>{var h;const f=o.searchRef.current!=="";t.disabled||f&&d.key===" "||X8[r.dir].includes(d.key)&&(n.onOpenChange(!0),(h=n.content)==null||h.focus(),d.preventDefault())})})})});wR.displayName=El;var bR="MenuSubContent",SR=y.forwardRef((t,e)=>{const n=oR(En,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,o=hs(En,t.__scopeMenu),s=ru(En,t.__scopeMenu),a=xR(bR,t.__scopeMenu),l=y.useRef(null),c=Ve(e,l);return m.jsx(Ec.Provider,{scope:t.__scopeMenu,children:m.jsx(Qr,{present:r||o.open,children:m.jsx(Ec.Slot,{scope:t.__scopeMenu,children:m.jsx(w0,{id:a.contentId,"aria-labelledby":a.triggerId,...i,ref:c,align:"start",side:s.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var d;s.isUsingKeyboardRef.current&&((d=l.current)==null||d.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:Z(t.onFocusOutside,u=>{u.target!==a.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:Z(t.onEscapeKeyDown,u=>{s.onClose(),u.preventDefault()}),onKeyDown:Z(t.onKeyDown,u=>{var h;const d=u.currentTarget.contains(u.target),f=Z8[s.dir].includes(u.key);d&&f&&(o.onOpenChange(!1),(h=a.trigger)==null||h.focus(),u.preventDefault())})})})})})});SR.displayName=bR;function CR(t){return t?"open":"closed"}function wf(t){return t==="indeterminate"}function C0(t){return wf(t)?"indeterminate":t?"checked":"unchecked"}function vU(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function xU(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function wU(t,e,n){const i=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,o=n?t.indexOf(n):-1;let s=xU(t,Math.max(o,0));i.length===1&&(s=s.filter(c=>c!==n));const l=s.find(c=>c.toLowerCase().startsWith(i.toLowerCase()));return l!==n?l:void 0}function bU(t,e){const{x:n,y:r}=t;let i=!1;for(let o=0,s=e.length-1;o<e.length;s=o++){const a=e[o].x,l=e[o].y,c=e[s].x,u=e[s].y;l>r!=u>r&&n<(c-a)*(r-l)/(u-l)+a&&(i=!i)}return i}function SU(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return bU(n,e)}function Tc(t){return e=>e.pointerType==="mouse"?t(e):void 0}var CU=iR,kU=y0,EU=sR,TU=aR,_U=b0,RU=lR,OU=wh,PU=uR,MU=fR,AU=pR,DU=gR,IU=yR,NU=vR,jU=wR,LU=SR,k0="DropdownMenu",[$U,JH]=ds(k0,[nR]),Nt=nR(),[FU,kR]=$U(k0),ER=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:i,defaultOpen:o,onOpenChange:s,modal:a=!0}=t,l=Nt(e),c=y.useRef(null),[u=!1,d]=dh({prop:i,defaultProp:o,onChange:s});return m.jsx(FU,{scope:e,triggerId:sa(),triggerRef:c,contentId:sa(),open:u,onOpenChange:d,onOpenToggle:y.useCallback(()=>d(f=>!f),[d]),modal:a,children:m.jsx(CU,{...l,open:u,onOpenChange:d,dir:r,modal:a,children:n})})};ER.displayName=k0;var TR="DropdownMenuTrigger",_R=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...i}=t,o=kR(TR,n),s=Nt(n);return m.jsx(kU,{asChild:!0,...s,children:m.jsx(ye.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...i,ref:uh(e,o.triggerRef),onPointerDown:Z(t.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(o.onOpenToggle(),o.open||a.preventDefault())}),onKeyDown:Z(t.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&o.onOpenToggle(),a.key==="ArrowDown"&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});_R.displayName=TR;var BU="DropdownMenuPortal",RR=t=>{const{__scopeDropdownMenu:e,...n}=t,r=Nt(e);return m.jsx(EU,{...r,...n})};RR.displayName=BU;var OR="DropdownMenuContent",PR=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=kR(OR,n),o=Nt(n),s=y.useRef(!1);return m.jsx(TU,{id:i.contentId,"aria-labelledby":i.triggerId,...o,...r,ref:e,onCloseAutoFocus:Z(t.onCloseAutoFocus,a=>{var l;s.current||(l=i.triggerRef.current)==null||l.focus(),s.current=!1,a.preventDefault()}),onInteractOutside:Z(t.onInteractOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;(!i.modal||u)&&(s.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});PR.displayName=OR;var zU="DropdownMenuGroup",UU=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Nt(n);return m.jsx(_U,{...i,...r,ref:e})});UU.displayName=zU;var VU="DropdownMenuLabel",HU=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Nt(n);return m.jsx(RU,{...i,...r,ref:e})});HU.displayName=VU;var WU="DropdownMenuItem",MR=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Nt(n);return m.jsx(OU,{...i,...r,ref:e})});MR.displayName=WU;var KU="DropdownMenuCheckboxItem",qU=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Nt(n);return m.jsx(PU,{...i,...r,ref:e})});qU.displayName=KU;var GU="DropdownMenuRadioGroup",JU=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Nt(n);return m.jsx(MU,{...i,...r,ref:e})});JU.displayName=GU;var YU="DropdownMenuRadioItem",QU=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Nt(n);return m.jsx(AU,{...i,...r,ref:e})});QU.displayName=YU;var XU="DropdownMenuItemIndicator",ZU=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Nt(n);return m.jsx(DU,{...i,...r,ref:e})});ZU.displayName=XU;var eV="DropdownMenuSeparator",AR=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Nt(n);return m.jsx(IU,{...i,...r,ref:e})});AR.displayName=eV;var tV="DropdownMenuArrow",nV=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Nt(n);return m.jsx(NU,{...i,...r,ref:e})});nV.displayName=tV;var rV="DropdownMenuSubTrigger",iV=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Nt(n);return m.jsx(jU,{...i,...r,ref:e})});iV.displayName=rV;var oV="DropdownMenuSubContent",sV=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Nt(n);return m.jsx(LU,{...i,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});sV.displayName=oV;var bh=ER,Sh=_R,Ch=RR,kh=PR,Ir=MR,y1=AR,aV="VisuallyHidden",E0=y.forwardRef((t,e)=>m.jsx(ye.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));E0.displayName=aV;var T0="ToastProvider",[_0,lV,cV]=a0("Toast"),[DR,YH]=ds("Toast",[cV]),[uV,Eh]=DR(T0),IR=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:o=50,children:s}=t,[a,l]=y.useState(null),[c,u]=y.useState(0),d=y.useRef(!1),f=y.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${T0}\`. Expected non-empty \`string\`.`),m.jsx(_0.Provider,{scope:e,children:m.jsx(uV,{scope:e,label:n,duration:r,swipeDirection:i,swipeThreshold:o,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:y.useCallback(()=>u(h=>h+1),[]),onToastRemove:y.useCallback(()=>u(h=>h-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:f,children:s})})};IR.displayName=T0;var NR="ToastViewport",dV=["F8"],ey="toast.viewportPause",ty="toast.viewportResume",jR=y.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=dV,label:i="Notifications ({hotkey})",...o}=t,s=Eh(NR,n),a=lV(n),l=y.useRef(null),c=y.useRef(null),u=y.useRef(null),d=y.useRef(null),f=Ve(e,d,s.onViewportChange),h=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),p=s.toastCount>0;y.useEffect(()=>{const x=v=>{var S;r.length!==0&&r.every(b=>v[b]||v.code===b)&&((S=d.current)==null||S.focus())};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[r]),y.useEffect(()=>{const x=l.current,v=d.current;if(p&&x&&v){const w=()=>{if(!s.isClosePausedRef.current){const k=new CustomEvent(ey);v.dispatchEvent(k),s.isClosePausedRef.current=!0}},S=()=>{if(s.isClosePausedRef.current){const k=new CustomEvent(ty);v.dispatchEvent(k),s.isClosePausedRef.current=!1}},b=k=>{!x.contains(k.relatedTarget)&&S()},C=()=>{x.contains(document.activeElement)||S()};return x.addEventListener("focusin",w),x.addEventListener("focusout",b),x.addEventListener("pointermove",w),x.addEventListener("pointerleave",C),window.addEventListener("blur",w),window.addEventListener("focus",S),()=>{x.removeEventListener("focusin",w),x.removeEventListener("focusout",b),x.removeEventListener("pointermove",w),x.removeEventListener("pointerleave",C),window.removeEventListener("blur",w),window.removeEventListener("focus",S)}}},[p,s.isClosePausedRef]);const g=y.useCallback(({tabbingDirection:x})=>{const w=a().map(S=>{const b=S.ref.current,C=[b,...EV(b)];return x==="forwards"?C:C.reverse()});return(x==="forwards"?w.reverse():w).flat()},[a]);return y.useEffect(()=>{const x=d.current;if(x){const v=w=>{var C,k,E;const S=w.altKey||w.ctrlKey||w.metaKey;if(w.key==="Tab"&&!S){const _=document.activeElement,O=w.shiftKey;if(w.target===x&&O){(C=c.current)==null||C.focus();return}const j=g({tabbingDirection:O?"backwards":"forwards"}),z=j.findIndex(I=>I===_);Jp(j.slice(z+1))?w.preventDefault():O?(k=c.current)==null||k.focus():(E=u.current)==null||E.focus()}};return x.addEventListener("keydown",v),()=>x.removeEventListener("keydown",v)}},[a,g]),m.jsxs(I4,{ref:l,role:"region","aria-label":i.replace("{hotkey}",h),tabIndex:-1,style:{pointerEvents:p?void 0:"none"},children:[p&&m.jsx(ny,{ref:c,onFocusFromOutsideViewport:()=>{const x=g({tabbingDirection:"forwards"});Jp(x)}}),m.jsx(_0.Slot,{scope:n,children:m.jsx(ye.ol,{tabIndex:-1,...o,ref:f})}),p&&m.jsx(ny,{ref:u,onFocusFromOutsideViewport:()=>{const x=g({tabbingDirection:"backwards"});Jp(x)}})]})});jR.displayName=NR;var LR="ToastFocusProxy",ny=y.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...i}=t,o=Eh(LR,n);return m.jsx(E0,{"aria-hidden":!0,tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:s=>{var c;const a=s.relatedTarget;!((c=o.viewport)!=null&&c.contains(a))&&r()}})});ny.displayName=LR;var Th="Toast",fV="toast.swipeStart",hV="toast.swipeMove",pV="toast.swipeCancel",mV="toast.swipeEnd",$R=y.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:i,onOpenChange:o,...s}=t,[a=!0,l]=dh({prop:r,defaultProp:i,onChange:o});return m.jsx(Qr,{present:n||a,children:m.jsx(vV,{open:a,...s,ref:e,onClose:()=>l(!1),onPause:Mt(t.onPause),onResume:Mt(t.onResume),onSwipeStart:Z(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Z(t.onSwipeMove,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:Z(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Z(t.onSwipeEnd,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),l(!1)})})})});$R.displayName=Th;var[gV,yV]=DR(Th,{onClose(){}}),vV=y.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:i,open:o,onClose:s,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:u,onSwipeMove:d,onSwipeCancel:f,onSwipeEnd:h,...p}=t,g=Eh(Th,n),[x,v]=y.useState(null),w=Ve(e,I=>v(I)),S=y.useRef(null),b=y.useRef(null),C=i||g.duration,k=y.useRef(0),E=y.useRef(C),_=y.useRef(0),{onToastAdd:O,onToastRemove:T}=g,D=Mt(()=>{var U;(x==null?void 0:x.contains(document.activeElement))&&((U=g.viewport)==null||U.focus()),s()}),j=y.useCallback(I=>{!I||I===1/0||(window.clearTimeout(_.current),k.current=new Date().getTime(),_.current=window.setTimeout(D,I))},[D]);y.useEffect(()=>{const I=g.viewport;if(I){const U=()=>{j(E.current),c==null||c()},F=()=>{const K=new Date().getTime()-k.current;E.current=E.current-K,window.clearTimeout(_.current),l==null||l()};return I.addEventListener(ey,F),I.addEventListener(ty,U),()=>{I.removeEventListener(ey,F),I.removeEventListener(ty,U)}}},[g.viewport,C,l,c,j]),y.useEffect(()=>{o&&!g.isClosePausedRef.current&&j(C)},[o,C,g.isClosePausedRef,j]),y.useEffect(()=>(O(),()=>T()),[O,T]);const z=y.useMemo(()=>x?HR(x):null,[x]);return g.viewport?m.jsxs(m.Fragment,{children:[z&&m.jsx(xV,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:z}),m.jsx(gV,{scope:n,onClose:D,children:Vc.createPortal(m.jsx(_0.ItemSlot,{scope:n,children:m.jsx(D4,{asChild:!0,onEscapeKeyDown:Z(a,()=>{g.isFocusedToastEscapeKeyDownRef.current||D(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:m.jsx(ye.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":g.swipeDirection,...p,ref:w,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Z(t.onKeyDown,I=>{I.key==="Escape"&&(a==null||a(I.nativeEvent),I.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,D()))}),onPointerDown:Z(t.onPointerDown,I=>{I.button===0&&(S.current={x:I.clientX,y:I.clientY})}),onPointerMove:Z(t.onPointerMove,I=>{if(!S.current)return;const U=I.clientX-S.current.x,F=I.clientY-S.current.y,K=!!b.current,P=["left","right"].includes(g.swipeDirection),M=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,L=P?M(0,U):0,J=P?0:M(0,F),B=I.pointerType==="touch"?10:2,X={x:L,y:J},fe={originalEvent:I,delta:X};K?(b.current=X,Qu(hV,d,fe,{discrete:!1})):v1(X,g.swipeDirection,B)?(b.current=X,Qu(fV,u,fe,{discrete:!1}),I.target.setPointerCapture(I.pointerId)):(Math.abs(U)>B||Math.abs(F)>B)&&(S.current=null)}),onPointerUp:Z(t.onPointerUp,I=>{const U=b.current,F=I.target;if(F.hasPointerCapture(I.pointerId)&&F.releasePointerCapture(I.pointerId),b.current=null,S.current=null,U){const K=I.currentTarget,P={originalEvent:I,delta:U};v1(U,g.swipeDirection,g.swipeThreshold)?Qu(mV,h,P,{discrete:!0}):Qu(pV,f,P,{discrete:!0}),K.addEventListener("click",M=>M.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),xV=t=>{const{__scopeToast:e,children:n,...r}=t,i=Eh(Th,e),[o,s]=y.useState(!1),[a,l]=y.useState(!1);return CV(()=>s(!0)),y.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:m.jsx(hh,{asChild:!0,children:m.jsx(E0,{...r,children:o&&m.jsxs(m.Fragment,{children:[i.label," ",n]})})})},wV="ToastTitle",FR=y.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return m.jsx(ye.div,{...r,ref:e})});FR.displayName=wV;var bV="ToastDescription",BR=y.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return m.jsx(ye.div,{...r,ref:e})});BR.displayName=bV;var zR="ToastAction",SV=y.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?m.jsx(VR,{altText:n,asChild:!0,children:m.jsx(R0,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${zR}\`. Expected non-empty \`string\`.`),null)});SV.displayName=zR;var UR="ToastClose",R0=y.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,i=yV(UR,n);return m.jsx(VR,{asChild:!0,children:m.jsx(ye.button,{type:"button",...r,ref:e,onClick:Z(t.onClick,i.onClose)})})});R0.displayName=UR;var VR=y.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...i}=t;return m.jsx(ye.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:e})});function HR(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),kV(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",o=r.dataset.radixToastAnnounceExclude==="";if(!i)if(o){const s=r.dataset.radixToastAnnounceAlt;s&&e.push(s)}else e.push(...HR(r))}}),e}function Qu(t,e,n,{discrete:r}){const i=n.originalEvent.currentTarget,o=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?e0(i,o):i.dispatchEvent(o)}var v1=(t,e,n=0)=>{const r=Math.abs(t.x),i=Math.abs(t.y),o=r>i;return e==="left"||e==="right"?o&&r>n:!o&&i>n};function CV(t=()=>{}){const e=Mt(t);Gi(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function kV(t){return t.nodeType===t.ELEMENT_NODE}function EV(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Jp(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var TV=IR,_V=jR,RV=$R,OV=FR,PV=BR,MV=R0;const AV=`
  .toast-close-button {
    all: unset;
    cursor: pointer;
    color: #9CA3AF;
    flex-shrink: 0;
    padding: 2px;
    border-radius: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
  }
  
  .toast-close-button:hover {
    background-color: #F3F4F6;
    color: #6B7280;
  }

  @keyframes slideIn {
    from {
      transform: translateY(100%);
      opacity: 0;
    }
    to {
      transform: translateY(0);
      opacity: 1;
    }
  }

  @keyframes slideOut {
    from {
      transform: translateY(0);
      opacity: 1;
    }
    to {
      transform: translateY(100%);
      opacity: 0;
    }
  }

  .toast-root[data-state='open'] {
    animation: slideIn 300ms cubic-bezier(0.16, 1, 0.3, 1);
  }

  .toast-root[data-state='closed'] {
    animation: slideOut 300ms cubic-bezier(0.16, 1, 0.3, 1);
  }
`,Rs={viewport:{position:"fixed",bottom:"32px",left:"50%",transform:"translateX(-50%)",display:"flex",flexDirection:"column",padding:"25px",gap:"10px",width:"fit-content",minWidth:"300px",maxWidth:"480px",listStyle:"none",zIndex:2147483647,outline:"none"},toast:{backgroundColor:"white",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",padding:"16px",display:"flex",alignItems:"flex-start",justifyContent:"space-between",gap:"12px",border:"1px solid #e5e7eb",width:"100%"},title:{color:"#111827",fontSize:"14px",fontWeight:600,marginBottom:"4px"},description:{color:"#6b7280",fontSize:"13px"},icon:{flexShrink:0,marginTop:"2px"}},WR=y.createContext(null);function DV({children:t}){const[e,n]=y.useState({open:!1,title:"",description:"",type:"success"}),r=(i,o,s="success")=>{n({open:!0,title:i,description:o,type:s})};return m.jsx(WR.Provider,{value:{showToast:r},children:m.jsxs(TV,{swipeDirection:"down",duration:2e3,children:[m.jsx("style",{children:AV}),t,m.jsxs(RV,{open:e.open,onOpenChange:i=>n(o=>({...o,open:i})),style:Rs.toast,className:"toast-root",children:[m.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px",flex:1},children:[e.type==="success"?m.jsx(s5,{size:18,style:{...Rs.icon,color:"#10b981"}}):m.jsx(i5,{size:18,style:{...Rs.icon,color:"#ef4444"}}),m.jsxs("div",{style:{flex:1},children:[m.jsx(OV,{style:Rs.title,children:e.title}),m.jsx(PV,{style:Rs.description,children:e.description})]})]}),m.jsx(MV,{asChild:!0,children:m.jsx("button",{className:"toast-close-button",children:m.jsx(T5,{size:16})})})]}),m.jsx(_V,{style:Rs.viewport})]})})}function IV(){const t=y.useContext(WR);if(!t)throw new Error("useToast must be used within a ToastProvider");return t}function Dn(){const t=He(),e=Bf(),{data:n,isLoading:r,error:i}=HD({queryKey:["user"],queryFn:async()=>{console.log("useUser: Fetching user data");const{data:{user:o},error:s}=await t.auth.getUser();if(console.log("useUser: Auth response:",{hasUser:!!o,userId:o==null?void 0:o.id,hasError:!!s}),s)throw console.error("useUser: Auth error:",s),s;if(!o)return console.log("useUser: No authenticated user found"),null;try{console.log("useUser: Fetching user profile for",o.id);const{data:a,error:l}=await t.from("user_profiles").select("*").eq("id",o.id).single();if(l){if(console.error("useUser: Profile error:",l),l.code==="PGRST116")return console.log("useUser: No profile found, returning basic user"),o;throw l}return console.log("useUser: Profile loaded successfully"),{...o,...a}}catch(a){return console.error("useUser: Error in profile fetch:",a),o}},staleTime:5*60*1e3,gcTime:30*60*1e3,retry:!1});return y.useEffect(()=>{console.log("useUser: Loading state changed:",{isLoading:r,hasUser:!!n,error:i==null?void 0:i.message})},[r,n,i]),y.useEffect(()=>{const{data:{subscription:o}}=t.auth.onAuthStateChange((s,a)=>{s==="SIGNED_OUT"?e.setQueryData(["user"],null):a!=null&&a.user&&e.invalidateQueries({queryKey:["user"]})});return()=>{o.unsubscribe()}},[t,e]),y.useEffect(()=>{if(!(n!=null&&n.id))return;const o=t.channel(`profile-changes-${n.id}`).on("postgres_changes",{event:"*",schema:"public",table:"user_profiles",filter:`id=eq.${n.id}`},s=>{s.new&&e.setQueryData(["user"],a=>a?{...a,name:s.new.name,specialty:s.new.specialty}:null)}).subscribe();return()=>{o.unsubscribe()}},[t,n==null?void 0:n.id,e]),{user:n,loading:r,error:(i==null?void 0:i.message)||null}}function x1(t){return typeof t=="object"&&t!==null&&"default_copy_mode"in t&&typeof t.default_copy_mode=="string"}function NV(t,e){switch(e){case"plain":return t.getText();case"rich_text":return t.getHTML();case"without_lists":return t.getText();default:return t.getText()}}const pe={toolbar:{display:"flex",gap:"4px",alignItems:"center"},button:{padding:"8px",backgroundColor:"#f3f4f6",border:"1px solid #e5e7eb",borderRadius:"4px",cursor:"pointer",color:"#6b7280",display:"flex",alignItems:"center",justifyContent:"center",height:"36px",width:"36px",transition:"all 0.2s ease","&:hover:not(:disabled)":{backgroundColor:"#e5e7eb"},"&:disabled":{opacity:.5,cursor:"not-allowed",backgroundColor:"#f3f4f6"}},divider:{width:"1px",height:"24px",backgroundColor:"#e5e7eb",margin:"0 4px"},buttonContainer:{position:"relative"},dropdown:{position:"absolute",top:"calc(100% + 4px)",right:"0",backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"6px",padding:"4px",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",zIndex:1e3,minWidth:"180px"},dropdownButton:{width:"100%",padding:"8px 12px",border:"none",backgroundColor:"transparent",cursor:"pointer",textAlign:"left",fontSize:"14px",color:"#6b7280",borderRadius:"4px","&:hover":{backgroundColor:"#f3f4f6"}},modal:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"white",padding:"24px",borderRadius:"8px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",zIndex:100,width:"400px"},modalOverlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:99},modalTitle:{fontSize:"18px",fontWeight:"600",color:"#111827",marginBottom:"16px"},modalText:{fontSize:"14px",color:"#4b5563",marginBottom:"24px",lineHeight:"1.5"},modalButtons:{display:"flex",gap:"8px",justifyContent:"flex-end"},modalButton:{padding:"8px 16px",borderRadius:"6px",fontSize:"14px",fontWeight:"500",cursor:"pointer",border:"1px solid #e5e7eb"},modalButtonPrimary:{backgroundColor:"#ef4444",color:"white",border:"none","&:hover":{backgroundColor:"#dc2626"}},modalButtonSecondary:{backgroundColor:"white",color:"#6b7280","&:hover":{backgroundColor:"#f3f4f6"}},copyButtonGroup:{display:"flex",alignItems:"center",gap:"1px"},copyMainButton:{padding:"8px",backgroundColor:"#f3f4f6",border:"1px solid #e5e7eb",borderRadius:"4px 0 0 4px",cursor:"pointer",color:"#6b7280",display:"flex",alignItems:"center",justifyContent:"center",height:"36px",width:"36px",transition:"all 0.2s ease","&:hover":{backgroundColor:"#e5e7eb"}},copyDropdownButton:{padding:"8px 4px",backgroundColor:"#f3f4f6",border:"1px solid #e5e7eb",borderLeft:"none",borderRadius:"0 4px 4px 0",cursor:"pointer",color:"#6b7280",display:"flex",alignItems:"center",justifyContent:"center",height:"36px",width:"24px",transition:"all 0.2s ease","&:hover":{backgroundColor:"#e5e7eb"}},dropdownContent:{minWidth:"220px",backgroundColor:"white",borderRadius:"6px",padding:"5px",boxShadow:"0px 10px 38px -10px rgba(22, 23, 24, 0.35), 0px 10px 20px -15px rgba(22, 23, 24, 0.2)",zIndex:1e3},dropdownItem:{fontSize:"14px",lineHeight:"1",color:"#374151",borderRadius:"3px",display:"flex",alignItems:"center",justifyContent:"space-between",height:"32px",padding:"0 8px",userSelect:"none",outline:"none",cursor:"pointer","&:hover":{backgroundColor:"#f3f4f6"}},selectedDropdownItem:{backgroundColor:"#f0f9ff",color:"#2563eb","&:hover":{backgroundColor:"#e0f2fe"}},checkmark:{color:"#2563eb",marginLeft:"8px"},toastViewport:{position:"fixed",bottom:0,right:0,display:"flex",flexDirection:"column",padding:"25px",gap:"10px",width:"390px",listStyle:"none",zIndex:2147483647,outline:"none"},toast:{backgroundColor:"white",borderRadius:"6px",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.1)",padding:"15px",display:"flex",alignItems:"center",justifyContent:"space-between",border:"1px solid #e5e7eb"},toastTitle:{color:"#111827",fontSize:"14px",fontWeight:500,marginBottom:"4px"},toastDescription:{color:"#6b7280",fontSize:"13px"},successIcon:{color:"#10b981",marginRight:"12px"}};function jV({editor:t,currentNote:e,previousVersions:n=[],onRevertToPreviousVersion:r,hasUnsavedChanges:i=!1,onSave:o,tabType:s,onRegenerateSoapNote:a,onRegenerateCurrentNote:l}){const c=He(),{showToast:u}=IV(),{user:d}=Dn(),[f,h]=y.useState(!1),[p,g]=y.useState(!1),[x,v]=y.useState(!1),[w,S]=y.useState("plain"),b=y.useRef(null),C=y.useRef(null);y.useEffect(()=>{function I(U){b.current&&!b.current.contains(U.target)&&h(!1),C.current&&!C.current.contains(U.target)&&g(!1)}return document.addEventListener("mousedown",I),()=>{document.removeEventListener("mousedown",I)}},[]),y.useEffect(()=>{d!=null&&d.note_preferences&&x1(d.note_preferences)&&S(d.note_preferences.default_copy_mode)},[d==null?void 0:d.note_preferences]);const k=(t==null?void 0:t.can().undo())||n.length>0&&!!r,E=t==null?void 0:t.can().redo(),_=async(I=w)=>{if(t)try{const U=NV(t,I);await navigator.clipboard.writeText(U),u("Copied!",`Content copied as ${I.replace(/_/g," ").toLowerCase()}`,"success")}catch(U){console.error("Failed to copy text:",U),u("Copy Failed","Failed to copy content to clipboard","error")}},O=async I=>{try{if(!(d!=null&&d.id))return;const U=d.note_preferences&&x1(d.note_preferences)?d.note_preferences:{};await c.from("user_profiles").update({note_preferences:{...U,default_copy_mode:I}}).eq("user_id",d.id),S(I),await _(I)}catch(U){console.error("Failed to update default copy mode:",U),u("Error","Failed to update copy mode","error")}},T=()=>{if(!(!t||!k)){if(t.can().undo()){t.chain().focus().undo().run();return}n.length>0&&r&&v(!0)}},D=async()=>{if(!r||n.length===0)return;const I=n[0];await r(I),v(!1)},j=()=>{if(console.log("[EditorToolbar] Save button clicked, hasUnsavedChanges:",i),!i){console.log("[EditorToolbar] No unsaved changes, skipping save");return}o?(console.log("[EditorToolbar] Calling onSave handler"),o(),u("Saved!","Your changes have been saved","success")):console.log("[EditorToolbar] No onSave handler provided")};y.useEffect(()=>{console.log("[EditorToolbar] Current note changed:",e==null?void 0:e.id)},[e==null?void 0:e.id]);const z=[{value:"plain",label:"Copy as Plain Text"},{value:"rich_text",label:"Copy as Rich Text"},{value:"without_lists",label:"Copy Without Lists"}];return t?(console.log("[EditorToolbar] Tab type:",s),m.jsxs("div",{style:pe.toolbar,children:[m.jsx("button",{onClick:T,disabled:!k,style:{...pe.button,opacity:k?1:.5},title:t!=null&&t.can().undo()?"Undo last change":n.length>0?"Revert to previous version":"Nothing to undo",children:m.jsx(S5,{size:18})}),m.jsx("button",{onClick:()=>t.chain().focus().redo().run(),disabled:!E,style:{...pe.button,opacity:E?1:.5},title:E?"Redo":"Nothing to redo",children:m.jsx(m5,{size:18})}),m.jsx("div",{style:pe.divider}),m.jsx("button",{onClick:j,disabled:!i,style:{...pe.button,...i?{backgroundColor:"#10b981",color:"white",border:"none","&:hover":{backgroundColor:"#059669"}}:{}},title:i?"Save changes":"No unsaved changes",children:m.jsx(v5,{size:18})}),m.jsx("div",{style:pe.divider}),m.jsxs("div",{style:pe.copyButtonGroup,children:[m.jsx("button",{onClick:()=>_(),style:pe.copyMainButton,title:`Copy as ${w.replace(/_/g," ").toUpperCase()}`,children:m.jsx(l5,{size:18})}),m.jsxs(bh,{children:[m.jsx(Sh,{asChild:!0,children:m.jsx("button",{style:pe.copyDropdownButton,title:"Copy Options",children:m.jsx(E_,{size:14})})}),m.jsx(Ch,{children:m.jsx(kh,{style:pe.dropdownContent,sideOffset:5,children:z.map(I=>{const U=I.value===w;return m.jsxs(Ir,{style:{...pe.dropdownItem,...U?pe.selectedDropdownItem:{}},onClick:()=>O(I.value),children:[I.label,U&&m.jsx("span",{style:pe.checkmark,children:""})]},I.value)})})})]})]}),m.jsx("div",{style:pe.divider}),m.jsxs("div",{style:pe.buttonContainer,ref:b,children:[m.jsx("button",{onClick:()=>h(!f),style:pe.button,title:"More Options",children:m.jsx(u5,{size:18})}),f&&m.jsxs("div",{style:pe.dropdown,children:[m.jsx("button",{onClick:()=>_(),style:pe.dropdownButton,children:"Copy All"}),(s==="ai_context"||s==="soap")&&a&&m.jsx("button",{onClick:()=>a(),style:pe.dropdownButton,children:"Regenerate SOAP Note"}),s==="template"&&l&&m.jsx("button",{onClick:()=>l(),style:pe.dropdownButton,children:"Regenerate Current Note"})]})]}),x&&m.jsxs(m.Fragment,{children:[m.jsx("div",{style:pe.modalOverlay,onClick:()=>v(!1)}),m.jsxs("div",{style:pe.modal,children:[m.jsx("h3",{style:pe.modalTitle,children:"Revert to Previous Version?"}),m.jsx("p",{style:pe.modalText,children:"This will delete your current changes and restore the previous version of this note. This action cannot be undone."}),m.jsxs("div",{style:pe.modalButtons,children:[m.jsx("button",{onClick:()=>v(!1),style:{...pe.modalButton,...pe.modalButtonSecondary},children:"Cancel"}),m.jsx("button",{onClick:D,style:{...pe.modalButton,...pe.modalButtonPrimary},children:"Revert to Previous Version"})]})]})]})]})):null}function LV({visit:t,partialTranscription:e="",onRevert:n}){const r=He(),i=y.useRef(!1),[o,s]=y.useState({transcript:null,soapNote:null,aiContext:null,templateNotes:[],noteVersions:{soap:[],ai_context:[]},hasUnsavedChanges:!1,pendingContent:null});y.useEffect(()=>{if(!t.id||t.id==="")return;(async()=>{try{const{data:w,error:S}=await r.from("transcripts").select("full_text").eq("visit_id",t.id).single(),{data:b}=await r.from("notes").select("content").eq("visit_id",t.id).eq("type","soap").order("version_id",{ascending:!1}).limit(1).single(),{data:C}=await r.from("notes").select("content").eq("visit_id",t.id).eq("type","ai_context").order("version_id",{ascending:!1}).limit(1).single(),{data:k}=await r.from("notes").select("*").eq("visit_id",t.id).eq("type","template").order("created_at",{ascending:!1});s(E=>({...E,transcript:S?e:(w==null?void 0:w.full_text)||null,soapNote:(b==null?void 0:b.content)||null,aiContext:(C==null?void 0:C.content)||null,templateNotes:k||[]}))}catch(w){console.error("Error in loadTranscriptAndNotes:",w)}})()},[t.id,t.state,r,e]);const a=y.useCallback(async(v,w)=>{if(t.id)try{const{data:S}=await r.from("notes").select("*").eq("visit_id",t.id).eq("type",v).order("version_id",{ascending:!1});if(S)if(v==="template"&&w){const b=S.filter(C=>C.template_id===w);s(C=>({...C,noteVersions:{...C.noteVersions,[w]:b}}))}else s(b=>({...b,noteVersions:{...b.noteVersions,[v]:S}}))}catch(S){console.error("Error loading note versions:",S)}},[t.id,r]),l=y.useCallback(v=>{s(w=>({...w,templateNotes:v}))},[]),c=y.useCallback((v,w)=>{s(S=>({...S,hasUnsavedChanges:!1,pendingContent:null}))},[]),u=y.useCallback((v,w,S)=>{var C;const b=w==="soap"?o.soapNote:w==="ai_context"?o.aiContext:(C=o.templateNotes.find(k=>k.id===S))==null?void 0:C.content;s(k=>({...k,pendingContent:v?{content:v,type:w,noteId:S}:null,hasUnsavedChanges:v!==b}))},[o.soapNote,o.aiContext,o.templateNotes]),d=y.useCallback((v,w)=>{var S;return v==="soap"||v==="ai_context"?((S=o.noteVersions[v])==null?void 0:S[0])||null:o.templateNotes.find(b=>b.id===w)||null},[o.noteVersions,o.templateNotes]),f=y.useCallback((v,w)=>{var S;return v==="soap"||v==="ai_context"?((S=o.noteVersions[v])==null?void 0:S.slice(1))||[]:o.noteVersions[w||""]||[]},[o.noteVersions]),h=y.useCallback(async()=>{if(!t.id||!o.pendingContent||i.current)return;i.current=!0;const{content:v,type:w,noteId:S}=o.pendingContent;try{if(w==="template"&&S){const{data:b}=await r.from("notes").select("version_id, metadata, template_id").eq("id",S).single(),C=((b==null?void 0:b.version_id)||0)+1;await r.from("notes").insert({visit_id:t.id,content:v,type:w,template_id:b==null?void 0:b.template_id,metadata:{...b==null?void 0:b.metadata,status:"edited"},version_id:C,user_facing:!0});const{data:k}=await r.from("notes").select("*").eq("visit_id",t.id).eq("type","template").order("created_at",{ascending:!1});k&&s(E=>({...E,templateNotes:k}))}else{const{data:b}=await r.from("notes").select("version_id").eq("visit_id",t.id).eq("type",w).order("version_id",{ascending:!1}).limit(1).single(),C=((b==null?void 0:b.version_id)||0)+1;await r.from("notes").insert({visit_id:t.id,content:v,type:w,version_id:C,user_facing:!0}),s(k=>({...k,[w==="soap"?"soapNote":"aiContext"]:v})),await a(w)}return c(w,S),!0}catch(b){throw console.error("Error saving note:",b),b}finally{i.current=!1}},[t.id,o.pendingContent,r,a,c]),p=y.useCallback(async v=>{if(!(!t.id||i.current)){i.current=!0;try{const w=d(v.type,v.id);w&&await r.from("notes").delete().eq("id",w.id),s(S=>{const b={...S};return v.type==="soap"?b.soapNote=v.content:v.type==="ai_context"?b.aiContext=v.content:v.type==="template"&&(b.templateNotes=S.templateNotes.map(C=>C.id===v.id?{...C,content:v.content}:C)),{...b,hasUnsavedChanges:!1,pendingContent:null}}),await a(v.type,v.template_id||void 0),n==null||n()}catch(w){console.error("Error reverting to previous version:",w)}finally{i.current=!1}}},[t.id,r,a,d,n]),g=y.useCallback(async()=>{var v;try{const w=await fetch(`/api/notes/${(v=d("soap",""))==null?void 0:v.id}/regenerate-soap`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!w.ok)throw new Error("Failed to regenerate SOAP note");const S=await w.json();s(b=>({...b,soapNote:S.content,hasUnsavedChanges:!0,pendingContent:{content:S.content,type:"soap"}})),n==null||n()}catch(w){console.error("Error regenerating SOAP note:",w)}},[d,n]),x=y.useCallback(async v=>{try{const w=await fetch(`/api/notes/${v}/regenerate-template`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!w.ok)throw new Error("Failed to regenerate template note");const S=await w.json(),b=o.templateNotes.map(C=>C.id===v?{...C,content:S.content}:C);s(C=>({...C,templateNotes:b,hasUnsavedChanges:!0,pendingContent:{content:S.content,type:"template",noteId:v}})),n==null||n()}catch(w){console.error("Error regenerating template note:",w)}},[o.templateNotes,n]);return{transcript:o.transcript,soapNote:o.soapNote,aiContext:o.aiContext,templateNotes:o.templateNotes,hasUnsavedChanges:o.hasUnsavedChanges,handleContentChange:u,saveNote:h,revertToPreviousVersion:p,getCurrentNote:d,getPreviousVersions:f,loadNoteVersions:a,updateTemplateNotes:l,resetState:c,regenerateSoapNote:g,regenerateTemplateNote:x}}const ml={container:{display:"flex",flexDirection:"column",gap:"0px",height:"100%",overflow:"hidden"},transcriptPanel:{flex:1,display:"flex",flexDirection:"column",backgroundColor:"white",border:"1px solid #e5e7eb",borderTop:"none",borderBottomLeftRadius:"6px",borderBottomRightRadius:"6px",padding:"16px",overflow:"hidden",minHeight:0},text:{fontSize:"16px",color:"#374151",lineHeight:"1.5",whiteSpace:"pre-wrap",margin:0,overflow:"auto",flex:1},contentContainer:{flex:1,display:"flex",flexDirection:"column",minHeight:0,height:"100%",gap:"16px"},toolbarSection:{display:"flex",alignItems:"center",justifyContent:"flex-start",gap:"8px"}};function $V({visit:t,partialTranscription:e}){console.log("[ReadyTranscriptionDisplay] Rendering with visit:",{id:t.id,state:t.state});const[n,r]=y.useState("transcript"),[i,o]=y.useState(!1),[s,a]=y.useState(null),[l,c]=y.useState(0),{snippets:u}=C_(),d=y.useCallback(()=>{c(B=>B+1)},[]),{transcript:f,soapNote:h,aiContext:p,templateNotes:g,hasUnsavedChanges:x,handleContentChange:v,saveNote:w,revertToPreviousVersion:S,getCurrentNote:b,getPreviousVersions:C,loadNoteVersions:k,updateTemplateNotes:E,resetState:_,regenerateSoapNote:O,regenerateTemplateNote:T}=LV({visit:t,partialTranscription:e,onRevert:d}),D=y.useCallback((B,X)=>{E(X),k("template"),r(B),o(!1)},[E,k]),{generateFromTemplate:j,isGenerating:z}=Y6({visitId:t.id,onSuccess:D});y.useEffect(()=>{if(!t.id||n==="transcript")return;let B="soap";n==="ai_context"?B="ai_context":n!=="soap"&&(B="template");const X=B==="template"?g.find(Te=>Te.id===n):void 0,fe=(X==null?void 0:X.template_id)||void 0;k(B,fe)},[t.id,n,k,g]);const I=y.useCallback(B=>{x&&!window.confirm("You have unsaved changes. Are you sure you want to switch tabs? Your changes will be lost.")||(r(B),c(X=>X+1),_(B==="soap"?"soap":B==="ai_context"?"ai_context":"template",B!=="soap"&&B!=="ai_context"?B:void 0))},[x,_]),U=y.useCallback(async()=>{await w()&&c(X=>X+1)},[w]),F=y.useCallback(()=>{if(x){if(!window.confirm("You have unsaved changes. Are you sure you want to create a new template? Your changes will be lost."))return;_("template")}o(!0)},[x,_]),K=y.useCallback(()=>{o(!1)},[]),P=y.useMemo(()=>g.filter((B,X,fe)=>X===fe.findIndex(Te=>Te.template_id===B.template_id)).map(B=>B.template_id).filter(B=>B!==null),[g]),M=y.useCallback(async()=>{x&&!window.confirm("You have unsaved changes. Are you sure you want to regenerate? Your changes will be lost.")||await O()},[x,O]),L=y.useCallback(async()=>{if(x&&!window.confirm("You have unsaved changes. Are you sure you want to regenerate? Your changes will be lost."))return;const B=b("template",n);B&&await T(B.id)},[x,T,b,n]),J=()=>{if(n==="transcript")return m.jsx("p",{style:ml.text,children:f});if(n==="soap")return m.jsx($p,{content:h||"",readOnly:!1,placeholder:"Start typing your SOAP note...",onChange:X=>v(X,"soap"),snippets:u,onEditorReady:a},`soap-editor-${l}`);if(n==="ai_context")return m.jsx($p,{content:p||"",readOnly:!1,placeholder:"Start typing your context note...",onChange:X=>v(X,"ai_context"),snippets:u,onEditorReady:a},`ai_context-${l}`);const B=g.find(X=>X.id===n);return m.jsx($p,{content:(B==null?void 0:B.content)||"",readOnly:!1,placeholder:"Start typing your template note...",onChange:X=>v(X,"template",B==null?void 0:B.id),snippets:u,onEditorReady:a},`template-${B==null?void 0:B.id}-${l}`)};return m.jsxs("div",{style:ml.container,children:[m.jsx(J6,{activeTab:n,setActiveTab:I,aiContext:p,soapNote:h,templateNotes:g,onOpenTemplateModal:F}),m.jsx("div",{style:ml.transcriptPanel,children:m.jsxs("div",{style:ml.contentContainer,children:[s&&n!=="transcript"&&m.jsx("div",{style:ml.toolbarSection,children:m.jsx(jV,{editor:s,currentNote:b(n==="soap"?"soap":n==="ai_context"?"ai_context":"template",n!=="soap"&&n!=="ai_context"?n:void 0),previousVersions:C(n==="soap"?"soap":n==="ai_context"?"ai_context":"template",n!=="soap"&&n!=="ai_context"?n:void 0),onRevertToPreviousVersion:S,hasUnsavedChanges:x,onSave:U,tabType:n,onRegenerateSoapNote:n==="ai_context"?M:void 0,onRegenerateCurrentNote:n!=="soap"&&n!=="ai_context"&&n!=="transcript"?L:void 0})}),J()]})}),m.jsx(e2,{isOpen:i,onClose:K,onGenerate:j,existingTemplateIds:P})]})}const Xu=(...t)=>{};function FV({visitId:t,onMessage:e}){const[n,r]=y.useState([]),i=y.useRef(!1),o=y.useRef(null),s=y.useCallback(async()=>{if(!t||t==="")return;const{data:a,error:l}=await Xo.from("containers").select("*").eq("visit_id",t).order("chunk_id",{ascending:!0});l||a&&(Xu(`Fetched ${a.length} containers`),r(a),i.current=!0,a.forEach(c=>e==null?void 0:e(c)))},[t,e]);return y.useEffect(()=>{if(!t||t===""){r([]),i.current=!1;return}i.current||s(),o.current&&(o.current.unsubscribe(),o.current=null);const a=Xo.channel(`containers_list_${t}`).on("postgres_changes",{event:"*",schema:"public",table:"containers",filter:`visit_id=eq.${t}`},l=>{switch(Xu("Received realtime event:",l.eventType,l),l.eventType){case qn.INSERT:{const c=l.new;r(u=>{if(u.some(f=>f.id===c.id))return u;const d=[...u,c].sort((f,h)=>f.chunk_id-h.chunk_id);return e==null||e(c),d});break}case qn.UPDATE:{const c=l.new;r(u=>{const d=u.map(f=>f.id===c.id?c:f);return JSON.stringify(d)===JSON.stringify(u)?u:(e==null||e(c),d)});break}case qn.DELETE:{const c=l.old;r(u=>{const d=u.filter(f=>f.id!==c.id);return d.length,u.length,d});break}default:Xu("Unhandled event type:",l.eventType);break}}).subscribe(l=>{});return o.current=a,()=>{a.unsubscribe(),o.current=null}},[t,s,e]),y.useEffect(()=>{Xu("Containers state updated:",n.length,"containers")},[n]),n}const ir={container:{position:"relative",width:"100%",maxWidth:"300px"},inputContainer:{display:"flex",alignItems:"center",gap:"8px",width:"100%"},input:{width:"100%",padding:"8px 12px",fontSize:"16px",border:"1px solid #e5e7eb",borderRadius:"6px",outline:"none","&:focus":{borderColor:"#3b82f6",boxShadow:"0 0 0 2px rgba(59, 130, 246, 0.1)"}},dropdown:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"6px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",marginTop:"4px",width:"100%",maxHeight:"300px",overflow:"auto",zIndex:50,position:"absolute",left:0,right:0},dropdownItem:{padding:"8px 12px",cursor:"pointer","&:hover":{backgroundColor:"#f3f4f6"}},createButton:{display:"flex",alignItems:"center",gap:"8px",width:"100%",padding:"8px 12px",backgroundColor:"#f3f4f6",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",color:"#1f2937","&:hover":{backgroundColor:"#e5e7eb"}},patientName:{fontSize:"14px",fontWeight:"500",color:"#1f2937"},patientMrn:{fontSize:"12px",color:"#6b7280"},separator:{height:"1px",backgroundColor:"#e5e7eb",margin:"8px 0"}};function BV({onPatientSelect:t,selectedPatientId:e}){const[n,r]=y.useState(""),[i,o]=y.useState([]),[s,a]=y.useState(!1),[l,c]=y.useState(null),[u,d]=y.useState(!1),f=Xv(n,300),{user:h}=Dn(),p=He(),g=y.useRef(null);y.useEffect(()=>{e&&x(e)},[e]);const x=async C=>{try{const{data:k,error:E}=await p.from("patient_profiles").select("id, name, medical_record_number").eq("id",C).single();if(E)throw E;k&&(c(k),r(k.name))}catch(k){console.error("Error loading patient:",k)}};y.useEffect(()=>{(async()=>{if(!(!f||!(h!=null&&h.id))){a(!0);try{const{data:k,error:E}=await p.rpc("search_patients",{search_term:f,user_id_param:h.id});if(E)throw E;o(k||[]),d(!0)}catch(k){console.error("Error searching patients:",k)}finally{a(!1)}}})()},[f,h==null?void 0:h.id]);const v=C=>{c(C),r(C.name),d(!1),t(C)},w=async()=>{if(!(!n.trim()||!(h!=null&&h.id)))try{const{data:C,error:k}=await p.from("patient_profiles").insert([{name:n.trim(),user_id:h.id}]).select().single();if(k)throw k;const E={id:C.id,name:C.name,medical_record_number:C.medical_record_number};v(E)}catch(C){console.error("Error creating patient:",C)}},S=()=>{n&&d(!0)},b=C=>{const k=C.target.value;r(k),k===""&&(c(null),t(null))};return m.jsxs("div",{style:ir.container,children:[m.jsx("div",{style:ir.inputContainer,children:m.jsx("input",{ref:g,type:"text",value:n,onChange:b,onFocus:S,placeholder:"Add patient details",style:ir.input})}),u&&m.jsx("div",{style:ir.dropdown,children:s?m.jsx("div",{style:ir.dropdownItem,children:"Searching..."}):m.jsxs(m.Fragment,{children:[i.map(C=>m.jsxs("div",{style:ir.dropdownItem,onClick:()=>v(C),children:[m.jsx("div",{style:ir.patientName,children:C.name}),C.medical_record_number&&m.jsxs("div",{style:ir.patientMrn,children:["MRN: ",C.medical_record_number]})]},C.id)),n&&i.length===0&&m.jsxs(m.Fragment,{children:[m.jsx("div",{style:ir.separator}),m.jsxs("button",{style:ir.createButton,onClick:w,children:[m.jsx(Wg,{}),'Create new patient "',n,'"']})]})]})})]})}const ry=(t,e)=>e.some(n=>t instanceof n);let w1,b1;function zV(){return w1||(w1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function UV(){return b1||(b1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const iy=new WeakMap,Yp=new WeakMap,_h=new WeakMap;function VV(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Ho(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return _h.set(e,t),e}function HV(t){if(iy.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});iy.set(t,e)}let oy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return iy.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ho(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function KR(t){oy=t(oy)}function WV(t){return UV().includes(t)?function(...e){return t.apply(sy(this),e),Ho(this.request)}:function(...e){return Ho(t.apply(sy(this),e))}}function KV(t){return typeof t=="function"?WV(t):(t instanceof IDBTransaction&&HV(t),ry(t,zV())?new Proxy(t,oy):t)}function Ho(t){if(t instanceof IDBRequest)return VV(t);if(Yp.has(t))return Yp.get(t);const e=KV(t);return e!==t&&(Yp.set(t,e),_h.set(e,t)),e}const sy=t=>_h.get(t);function qV(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),a=Ho(s);return r&&s.addEventListener("upgradeneeded",l=>{r(Ho(s.result),l.oldVersion,l.newVersion,Ho(s.transaction),l)}),n&&s.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{o&&l.addEventListener("close",()=>o()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const GV=["get","getKey","getAll","getAllKeys","count"],JV=["put","add","delete","clear"],Qp=new Map;function S1(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Qp.get(e))return Qp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=JV.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||GV.includes(n)))return;const o=async function(s,...a){const l=this.transaction(s,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return Qp.set(e,o),o}KR(t=>({...t,get:(e,n,r)=>S1(e,n)||t.get(e,n,r),has:(e,n)=>!!S1(e,n)||t.has(e,n)}));const YV=["continue","continuePrimaryKey","advance"],C1={},ay=new WeakMap,qR=new WeakMap,QV={get(t,e){if(!YV.includes(e))return t[e];let n=C1[e];return n||(n=C1[e]=function(...r){ay.set(this,qR.get(this)[e](...r))}),n}};async function*XV(...t){let e=this;if(e instanceof IDBCursor||(e=await e.openCursor(...t)),!e)return;e=e;const n=new Proxy(e,QV);for(qR.set(n,e),_h.set(n,sy(e));e;)yield n,e=await(ay.get(n)||e.continue()),ay.delete(n)}function k1(t,e){return e===Symbol.asyncIterator&&ry(t,[IDBIndex,IDBObjectStore,IDBCursor])||e==="iterate"&&ry(t,[IDBIndex,IDBObjectStore])}KR(t=>({...t,get(e,n,r){return k1(e,n)?XV:t.get(e,n,r)},has(e,n){return k1(e,n)||t.has(e,n)}}));class ZV{constructor(){this.db=null,this.DB_NAME="audio-recorder-db",this.STORE_NAME="audio-chunks",this.SYNC_STORE="chunk-sync-metadata",this.DB_VERSION=1}async initialize(){this.db||(this.db=await qV(this.DB_NAME,this.DB_VERSION,{upgrade(e){e.objectStoreNames.contains("audio-chunks")||e.createObjectStore("audio-chunks",{keyPath:["visitId","containerIndex","chunkId"]}).createIndex("by-visit","visitId"),e.objectStoreNames.contains("chunk-sync-metadata")||e.createObjectStore("chunk-sync-metadata",{keyPath:"key"}).createIndex("by-visit","visitId")}}))}async getDb(){return this.db||await this.initialize(),this.db}async storeChunk(e){this.db||await this.initialize(),console.log(` Storing chunk ${e.containerIndex}:${e.chunkId} (${(e.blob.size/1024).toFixed(1)}KB)`),await this.db.put(this.STORE_NAME,e)}async getChunk(e,n,r){return this.db||await this.initialize(),this.db.get(this.STORE_NAME,[e,n,r])}async getChunksByVisit(e){return this.db||await this.initialize(),this.db.getAllFromIndex(this.STORE_NAME,"by-visit",e)}async deleteChunksByVisit(e){this.db||await this.initialize();const n=await this.getChunksByVisit(e),r=this.db.transaction(this.STORE_NAME,"readwrite");await Promise.all(n.map(i=>r.store.delete([i.visitId,i.containerIndex,i.chunkId]))),await r.done}async deleteChunk(e,n,r){this.db||await this.initialize();const i=this.db.transaction(this.STORE_NAME,"readwrite");if(r!==void 0)await i.store.delete([e,n,r]);else{const o=await this.getChunksByVisit(e);await Promise.all(o.filter(s=>s.containerIndex===n).map(s=>i.store.delete([s.visitId,s.containerIndex,s.chunkId])))}await i.done}async getDatabaseStats(){try{this.db||await this.initialize();const r=await this.db.transaction(this.STORE_NAME).objectStore(this.STORE_NAME).getAll(),i={};r.forEach(s=>{i[s.visitId]||(i[s.visitId]={chunks:0,size:0,containers:new Set}),i[s.visitId].chunks++,i[s.visitId].size+=s.blob.size,i[s.visitId].containers.add(s.containerIndex)});const o={totalChunks:r.length,totalVisits:Object.keys(i).length,totalSize:r.reduce((s,a)=>s+a.blob.size,0),visitStats:Object.entries(i).reduce((s,[a,l])=>({...s,[a]:{chunks:l.chunks,size:l.size,containers:l.containers.size}}),{})};return console.log("[AudioStorage] Database stats:",o),o}catch(e){throw console.error("[AudioStorage] Failed to get database stats:",e),e}}}const bo=new ZV,Rh=class Xt{constructor(){this.isSyncing=!1,this.syncPromise=null}async getUnuploadedChunks(){return(await bo.getDb()).transaction(Xt.SYNC_STORE).objectStore(Xt.SYNC_STORE).getAll()}async markChunkForUpload(e){await(await bo.getDb()).transaction(Xt.SYNC_STORE,"readwrite").objectStore(Xt.SYNC_STORE).put({...e,uploadAttempts:0,lastAttempt:Date.now()})}async markChunkAsUploaded(e){await(await bo.getDb()).transaction(Xt.SYNC_STORE,"readwrite").objectStore(Xt.SYNC_STORE).delete(e)}async updateUploadAttempt(e){await(await bo.getDb()).transaction(Xt.SYNC_STORE,"readwrite").objectStore(Xt.SYNC_STORE).put({...e,uploadAttempts:e.uploadAttempts+1,lastAttempt:Date.now()})}async uploadChunk(e,n){console.log(` Uploading container ${e.containerIndex} (${(e.blob.size/1024).toFixed(1)}KB)`);try{const r={key:`audio-chunks/${e.visitId}/${e.containerIndex}-${e.chunkId}-${e.timestamp}.webm`,contentType:e.blob.type,visitId:e.visitId,chunkId:e.chunkId,isFinal:e.isFinal,containerIndex:e.containerIndex},i=await fetch(`${Wi.apiUrl}/get-upload-url`,{method:"POST",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify(r)});if(!i.ok)throw new Error(`Failed to get upload URL: ${i.status}`);const{uploadUrl:o,fields:s}=await i.json(),a=new FormData;if(Object.entries(s).forEach(([d,f])=>{a.append(d,f)}),a.append("file",e.blob),!(await fetch(o,{method:"POST",body:a})).ok)throw new Error("Failed to upload to S3");const c=await fetch(`${Wi.apiUrl}/process-audio`,{method:"POST",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify({key:r.key,visitId:e.visitId,chunkId:e.chunkId,isFinal:e.isFinal,contentType:e.blob.type,containerIndex:e.containerIndex})});if(!c.ok)throw new Error(`Failed to process audio: ${c.status}`);if(!(await c.json()).success)throw new Error("Processing failed");return console.log(` Uploaded container ${e.containerIndex}`),!0}catch(r){return console.error(` Failed to upload container ${e.containerIndex}:`,r),!1}}async syncChunks(e){return this.isSyncing?this.syncPromise||Promise.resolve():(this.isSyncing=!0,this.syncPromise=(async()=>{try{const n=await this.getUnuploadedChunks();for(const r of n){if(r.uploadAttempts>=Xt.MAX_RETRIES){console.log(` Skipping container ${r.containerIndex} (max retries reached)`);continue}const i=await bo.getChunk(r.visitId,r.containerIndex,r.chunkId);if(!i){console.warn(` Container ${r.containerIndex} not found in storage`);continue}await this.uploadChunk(i,e)?await this.markChunkAsUploaded(r.key):(await this.updateUploadAttempt(r),console.log(` Will retry container ${r.containerIndex} later (attempt ${r.uploadAttempts+1}/${Xt.MAX_RETRIES})`)),await new Promise(s=>setTimeout(s,Xt.RETRY_DELAY))}}finally{this.isSyncing=!1,this.syncPromise=null}})(),this.syncPromise)}async markForUpload(e){const n={key:`audio-chunks/${e.visitId}/${e.containerIndex}-${e.chunkId}-${e.timestamp}.webm`,visitId:e.visitId,chunkId:e.chunkId,containerIndex:e.containerIndex,isFinal:e.isFinal,contentType:e.blob.type};await this.markChunkForUpload(n)}async getSyncStats(){const n=(await this.getUnuploadedChunks()).reduce((r,i)=>{if(r.visitStats[i.visitId]||(r.visitStats[i.visitId]={pending:0,failed:0,lastAttempt:null}),i.uploadAttempts>=Xt.MAX_RETRIES?(r.failedUploads++,r.visitStats[i.visitId].failed++):(r.pendingUploads++,r.visitStats[i.visitId].pending++),i.lastAttempt){const o=new Date(i.lastAttempt).toISOString();(!r.visitStats[i.visitId].lastAttempt||o>r.visitStats[i.visitId].lastAttempt)&&(r.visitStats[i.visitId].lastAttempt=o)}return r},{pendingUploads:0,failedUploads:0,visitStats:{}});return console.log("[ChunkSyncManager] Sync stats:",n),n}};Rh.SYNC_STORE="chunk-sync-metadata";Rh.MAX_RETRIES=3;Rh.RETRY_DELAY=5e3;let eH=Rh;class tH{constructor(e){this.mediaRecorder=null,this.stream=null,this.isRecording=!1,this.isPaused=!1,this.currentChunkId=0,this.currentContainerIndex=0,this.chunkBatch=[],this.containerChunks=[],this.CHUNK_DURATION=2e3,this.BATCH_SIZE=5,this.CONTAINER_DURATION=2e4,this.containerStartTime=null,this.containerTimer=null,this.visitId=null,this.config={saveLocally:!0,...e},this.syncManager=new eH,this.visitId=e.visitId||null}async saveChunkLocally(e,n,r,i=!1){if(!this.config.saveLocally)return;const o=URL.createObjectURL(e),s=document.createElement("a");s.href=o;const a=i?"container":"chunk";s.download=`${a}_${this.config.visitId||"debug"}_${this.currentContainerIndex}_${n}${r?"_final":""}.webm`,s.click(),URL.revokeObjectURL(o),console.log(`[RecorderV3] Saved ${a} locally: ${s.download}, size: ${e.size} bytes`)}async initialize(e){try{this.stream&&this.cleanup();const n={sampleRate:16e3,channelCount:1,autoGainControl:!0,deviceId:e||void 0};this.stream=await navigator.mediaDevices.getUserMedia({audio:n}),console.log("[RecorderV3] Initialized with device:",e||"default")}catch(n){throw console.error("[RecorderV3] Initialization failed:",n),this.cleanup(),n}}async flushChunks(e=!1){if(this.chunkBatch.length===0)return;const n=new Blob(this.chunkBatch,{type:"audio/webm;codecs=opus"}),r=Date.now();console.log("[RecorderV3] Flushing chunks:",{batchSize:this.chunkBatch.length,totalSize:n.size,containerIndex:this.currentContainerIndex,isFinal:e});try{this.containerChunks.push(n);const i={blob:n,timestamp:r,chunkId:this.currentChunkId,visitId:this.visitId,isFinal:e,containerIndex:this.currentContainerIndex};await bo.storeChunk(i),console.log(`[RecorderV3] Stored chunk in IndexedDB: ${this.currentChunkId}`),this.currentChunkId++,this.chunkBatch=[]}catch(i){throw console.error("[RecorderV3] Error in flushChunks:",i),i}}async flushContainer(e=!1){if(this.containerChunks.length===0)return;this.chunkBatch.length>0&&await this.flushChunks(!1);const n=new Blob(this.containerChunks,{type:"audio/webm;codecs=opus"}),r=Date.now(),i=`audio-chunks/${this.visitId}/${this.currentContainerIndex}-${r}.webm`;console.log(`[RecorderV3] Flushing container ${this.currentContainerIndex}:`,{chunks:this.containerChunks.length,totalSize:n.size,timestamp:r,isFinal:e});try{await this.config.onChunkReady({blob:n,chunkId:this.currentContainerIndex,isFinal:e,key:i,isCompleteContainer:!0,visitId:this.visitId}),console.log(`[RecorderV3] Container ${this.currentContainerIndex} uploaded successfully`)}catch(o){console.error("[RecorderV3] Failed to upload container, storing in IndexedDB for retry:",o);const s={blob:n,timestamp:r,chunkId:this.currentContainerIndex,visitId:this.visitId,isFinal:e,containerIndex:this.currentContainerIndex};await bo.storeChunk(s),await this.syncManager.markForUpload(s)}this.containerChunks=[]}async switchContainer(){var e;if(((e=this.mediaRecorder)==null?void 0:e.state)==="recording"){console.log("[RecorderV3] Switching container:",{currentIndex:this.currentContainerIndex,batchSize:this.chunkBatch.length,containerSize:this.containerChunks.length});try{const n=this.mediaRecorder;await new Promise(r=>{const i=()=>{n.removeEventListener("dataavailable",i),r()};n.addEventListener("dataavailable",i),n.stop()}),this.mediaRecorder=null,this.chunkBatch.length>0&&await this.flushChunks(!1),await this.flushContainer(!1),this.currentContainerIndex++,this.containerStartTime=Date.now(),this.mediaRecorder=this.createRecorder(),this.mediaRecorder.start(this.CHUNK_DURATION),console.log("[RecorderV3] Switched to new container:",{newIndex:this.currentContainerIndex,timestamp:this.containerStartTime})}catch(n){console.error("[RecorderV3] Failed to switch container:",n)}}}createRecorder(){if(!this.stream)throw new Error("No audio stream available");const e=new MediaRecorder(this.stream,{mimeType:"audio/webm;codecs=opus",audioBitsPerSecond:48e3});return e.addEventListener("dataavailable",async n=>{var r;if(!(!(n instanceof BlobEvent)||!((r=n.data)!=null&&r.size))&&(console.log("[RecorderV3] Data available:",{size:n.data.size,batchSize:this.chunkBatch.length,containerIndex:this.currentContainerIndex,isActiveRecorder:this.mediaRecorder===e}),this.chunkBatch.push(n.data),this.chunkBatch.length>=this.BATCH_SIZE))try{await this.flushChunks(!1)}catch(i){console.error("[RecorderV3] Error flushing chunks:",i)}}),e}async startRecording(e){if(!this.isRecording)try{if(this.visitId=e||this.visitId,!this.visitId)throw new Error("No visit ID provided for recording");this.stream||await this.initialize(),this.isRecording=!0,this.currentChunkId=0,this.currentContainerIndex=0,this.chunkBatch=[],this.containerChunks=[],this.containerStartTime=Date.now(),this.mediaRecorder=this.createRecorder(),this.mediaRecorder.start(this.CHUNK_DURATION),this.containerTimer=setInterval(()=>{Date.now()-this.containerStartTime>=this.CONTAINER_DURATION&&this.switchContainer()},1e3),console.log("[RecorderV3] Started recording with visit ID:",this.visitId)}catch(n){throw console.error("[RecorderV3] Failed to start recording:",n),this.cleanup(),n}}async stopRecording(){if(this.isRecording){console.log("[RecorderV3] Stopping recording:",{currentIndex:this.currentContainerIndex,batchSize:this.chunkBatch.length,containerSize:this.containerChunks.length});try{this.containerTimer&&(clearInterval(this.containerTimer),this.containerTimer=null);const e=this.mediaRecorder;this.mediaRecorder=null,this.isRecording=!1;let n=!1;((e==null?void 0:e.state)==="recording"||(e==null?void 0:e.state)==="paused")&&await new Promise((r,i)=>{const o=async s=>{var a;try{e.removeEventListener("dataavailable",o),(a=s.data)!=null&&a.size&&!n&&(console.log("[RecorderV3] Adding final chunk:",{size:s.data.size,existingBatchSize:this.chunkBatch.length}),this.chunkBatch.push(s.data),n=!0),this.chunkBatch.length>0&&await this.flushChunks(!0),await this.flushContainer(!0),r()}catch(l){i(l)}};e.addEventListener("dataavailable",o),e.stop()}),console.log("[RecorderV3] Recording stopped and final data flushed:",{finalContainerIndex:this.currentContainerIndex,finalBatchSize:this.chunkBatch.length,finalContainerSize:this.containerChunks.length}),this.isRecording=!1,this.stream&&(this.stream.getTracks().forEach(r=>r.stop()),this.stream=null),this.chunkBatch=[],this.containerChunks=[]}catch(e){throw console.error("[RecorderV3] Error stopping recording:",e),e}}}async pauseRecording(){if(!(!this.isRecording||this.isPaused))try{this.containerTimer&&(clearInterval(this.containerTimer),this.containerTimer=null);const e=this.mediaRecorder;(e==null?void 0:e.state)==="recording"&&await new Promise(n=>{const r=async()=>{try{e.removeEventListener("dataavailable",r),this.chunkBatch.length>0&&await this.flushChunks(!1),n()}catch(i){console.error("[RecorderV3] Error flushing chunks during pause:",i),n()}};e.addEventListener("dataavailable",r),e.pause()}),this.isPaused=!0,console.log("[RecorderV3] Recording paused")}catch(e){throw console.error("[RecorderV3] Failed to pause recording:",e),e}}async resumeRecording(){var e;if(!(!this.isRecording||!this.isPaused))try{this.stream||await this.initialize(),((e=this.mediaRecorder)==null?void 0:e.state)==="paused"&&this.mediaRecorder.resume(),this.containerStartTime=Date.now(),this.containerTimer=setInterval(()=>{Date.now()-this.containerStartTime>=this.CONTAINER_DURATION&&this.switchContainer()},1e3),this.isPaused=!1,console.log("[RecorderV3] Recording resumed")}catch(n){throw console.error("[RecorderV3] Failed to resume recording:",n),this.isPaused=!0,this.mediaRecorder&&this.mediaRecorder.pause(),n}}cleanup(){var e;this.containerTimer&&(clearInterval(this.containerTimer),this.containerTimer=null),((e=this.mediaRecorder)==null?void 0:e.state)==="recording"&&this.mediaRecorder.stop(),this.mediaRecorder=null,this.stream&&(this.stream.getTracks().forEach(n=>n.stop()),this.stream=null),this.isRecording=!1,this.isPaused=!1,this.chunkBatch=[],this.containerChunks=[],console.log("[RecorderV3] Cleanup complete")}getState(){return{isRecording:this.isRecording,isPaused:this.isPaused,currentChunkId:this.currentChunkId,currentContainerIndex:this.currentContainerIndex,batchSize:this.chunkBatch.length,containerSize:this.containerChunks.length}}}const nH=()=>crypto.randomUUID(),rH=t=>{const e=Math.floor(t/60),n=t%60;return`${e}:${n.toString().padStart(2,"0")}`};function iH(t={}){const[e,n]=y.useState(!1),[r,i]=y.useState(!1),[o,s]=y.useState(0),[a,l]=y.useState(t.initialVisitId||null),c=y.useRef(null),u=y.useRef(null),d=y.useRef(null),{user:f}=Dn(),{getValidSessionToken:h}=s0(),p=He(),g=Cr();y.useEffect(()=>f!=null&&f.id?((async()=>{try{if(!await h())throw new Error("No session token available");c.current=new tH({saveLocally:!0,async onChunkReady({blob:k,chunkId:E,isFinal:_,key:O,visitId:T}){const D=await h(),j={key:O,contentType:k.type,visitId:T,chunkId:E,isFinal:_,userId:f==null?void 0:f.id};if(console.log("[Debug] Request payload:",j),!j.key||!j.contentType||!j.visitId)throw new Error("Missing required fields in payload");const z=await fetch(`${Wi.apiUrl}/get-upload-url`,{method:"POST",headers:{Authorization:`Bearer ${D}`,"Content-Type":"application/json"},body:JSON.stringify(j)});if(!z.ok){const L=await z.text();throw console.error("[Debug] Upload URL error response:",{status:z.status,statusText:z.statusText,body:L}),new Error(`Failed to get upload URL: ${z.status} ${z.statusText} - ${L}`)}const{uploadUrl:I,fields:U}=await z.json(),F=new FormData;Object.entries(U).forEach(([L,J])=>{F.append(L,J)}),F.append("file",k),console.log("[Debug] Uploading to S3:",{uploadUrl:I,fields:U,formDataKeys:Array.from(F.keys())});const K=await fetch(I,{method:"POST",body:F});if(!K.ok){const L=await K.text();throw console.error("[Debug] S3 upload error:",{status:K.status,statusText:K.statusText,response:L}),new Error(`Failed to upload to S3: ${K.status} ${K.statusText} - ${L}`)}console.log("[Debug] S3 upload successful");const P={key:O,visitId:T,chunkId:Number(E),isFinal:!!_,contentType:k.type},M=await fetch(`${Wi.apiUrl}/process-audio`,{method:"POST",headers:{Authorization:`Bearer ${D}`,"Content-Type":"application/json"},body:JSON.stringify(P)});if(!M.ok){const L=await M.text();throw new Error(`Failed to process audio: ${M.status} ${M.statusText} - ${L}`)}}}),await c.current.initialize()}catch(C){console.error("Failed to initialize recorder:",C)}})(),()=>{var C;return(C=c.current)==null?void 0:C.cleanup()}):void 0,[f==null?void 0:f.id]),y.useEffect(()=>(e&&!r&&u.current&&(d.current=setInterval(()=>{const b=Date.now()-u.current;s(Math.floor(b/1e3))},1e3)),()=>{d.current&&(clearInterval(d.current),d.current=null)}),[e,r]),y.useEffect(()=>{t.initialVisitId&&t.initialState==="recording"?(n(!0),i(!1)):t.initialVisitId&&t.initialState==="paused"&&(n(!0),i(!0))},[t.initialVisitId,t.initialState]);const x=y.useCallback(async(b,C)=>{var k;try{if(!c.current)throw new Error("Recorder not initialized");if(!(f!=null&&f.id))throw new Error("Must be logged in to record");const E=C||a||nH();if(l(E),b&&await c.current.initialize(b),u.current=Date.now(),await c.current.startRecording(E),n(!0),i(!1),!C&&!a){const{error:_}=await p.from("visits").insert([{id:E,user_id:f.id,state:"recording"}]).select().single();_?console.error("Failed to create visit record:",_):g(`/visit/${E}`)}(k=t.onRecordingStateChange)==null||k.call(t,!0,!1)}catch(E){console.error("Failed to start recording:",E)}},[f==null?void 0:f.id,p,a,g]),v=y.useCallback(async()=>{var b;try{c.current&&(await c.current.stopRecording(),a&&await p.from("visits").update({state:"processing"}).eq("id",a),n(!1),i(!1),s(0),(b=t.onRecordingStateChange)==null||b.call(t,!1,!1))}catch(C){console.error("Failed to stop recording:",C)}},[a,p]),w=y.useCallback(async()=>{var b;try{c.current&&(await c.current.pauseRecording(),i(!0),(b=t.onRecordingStateChange)==null||b.call(t,!0,!0))}catch(C){console.error("Failed to pause recording:",C)}},[]),S=y.useCallback(async()=>{var b;try{c.current&&(await c.current.resumeRecording(),i(!1),(b=t.onRecordingStateChange)==null||b.call(t,!0,!1))}catch(C){console.error("Failed to resume recording:",C)}},[]);return{isRecording:e,isPaused:r,startRecording:x,stopRecording:v,pauseRecording:w,resumeRecording:S,formattedTime:rH(o),currentVisitId:a}}class oH{constructor(e={}){this.stream=null,this.monitorRecorder=null,this.audioContext=null,this.analyser=null,this.mediaStreamSource=null,this.reconnectInterval=null,this.isReconnecting=!1,this.onStreamAvailable=e.onStreamAvailable}startStreamMonitoring(){this.reconnectInterval&&clearInterval(this.reconnectInterval),this.reconnectInterval=window.setInterval(async()=>{if(!this.stream)return;if(!this.stream.getAudioTracks().some(r=>r.readyState==="live")&&!this.isReconnecting){console.log("[AudioMonitor] Stream inactive, attempting to reconnect..."),this.isReconnecting=!0;try{await this.initialize(this.lastDeviceId),console.log("[AudioMonitor] Successfully reconnected stream")}catch(r){console.error("[AudioMonitor] Failed to reconnect stream:",r)}finally{this.isReconnecting=!1}}},5e3)}async initialize(e){try{this.lastDeviceId=e,this.cleanup(),this.stream=await navigator.mediaDevices.getUserMedia({audio:{deviceId:e?{exact:e}:void 0,channelCount:1,sampleRate:48e3}}),this.audioContext=new AudioContext,this.analyser=this.audioContext.createAnalyser(),this.analyser.minDecibels=-85,this.analyser.maxDecibels=-10,this.analyser.smoothingTimeConstant=.85,this.analyser.fftSize=1024,this.mediaStreamSource=this.audioContext.createMediaStreamSource(this.stream),this.mediaStreamSource.connect(this.analyser),this.monitorRecorder=new MediaRecorder(this.stream,{mimeType:"audio/webm"}),this.monitorRecorder.start(100),this.startStreamMonitoring(),this.onStreamAvailable&&this.onStreamAvailable(this.stream)}catch(n){throw console.error("[AudioMonitor] Failed to initialize:",n),this.cleanup(),n}}getStream(){return this.stream}getAnalyser(){return this.analyser}getAudioContext(){return this.audioContext}isMonitoring(){return this.monitorRecorder!==null&&this.monitorRecorder.state==="recording"}async resumeContext(){var e;((e=this.audioContext)==null?void 0:e.state)==="suspended"&&await this.audioContext.resume()}cleanup(){if(console.log("[AudioMonitor] Cleaning up..."),this.reconnectInterval&&(clearInterval(this.reconnectInterval),this.reconnectInterval=null),this.monitorRecorder){try{this.monitorRecorder.state==="recording"&&this.monitorRecorder.stop()}catch(e){console.warn("[AudioMonitor] Error stopping monitor recorder:",e)}this.monitorRecorder=null}this.mediaStreamSource&&(this.mediaStreamSource.disconnect(),this.mediaStreamSource=null),this.analyser&&(this.analyser.disconnect(),this.analyser=null),this.audioContext&&(this.audioContext.close(),this.audioContext=null),this.stream&&(this.stream.getTracks().forEach(e=>e.stop()),this.stream=null),console.log("[AudioMonitor] Cleanup complete.")}}const sH=t=>{const e=y.useRef(null),n=y.useRef(null),r=y.useRef(null),i=y.useRef(null),o=async()=>{const a=t.current;if(!a){console.error("AudioMonitor not provided");return}const l=document.getElementById("visualizer");if(!l){console.error("Canvas element not found");return}i.current=l;const c=l.getContext("2d");if(!c){console.error("Unable to get canvas context");return}if(l.width===0||l.height===0){console.error("Canvas has zero dimensions:",l.width,l.height);return}let u=a.getAnalyser(),d=0;const f=5;for(;!u&&d<f;)console.log(`Waiting for analyzer (attempt ${d+1}/${f})...`),await new Promise(O=>{r.current=window.setTimeout(O,500)}),u=a.getAnalyser(),d++;if(!u){console.error("Analyzer not available after retries");return}await a.resumeContext();const h=u.frequencyBinCount,p=new Uint8Array(h),g=8,x=new Float32Array(g).fill(0),v=.85,w=a.getAudioContext();if(!w){console.error("AudioContext not available");return}const b=w.sampleRate/u.fftSize,C=Math.floor(50/b),k=Math.floor(1e3/b),E=k-C;e.current&&(cancelAnimationFrame(e.current),e.current=null);const _=()=>{if(!i.current){console.log("Canvas no longer exists, stopping visualization"),e.current&&(cancelAnimationFrame(e.current),e.current=null);return}e.current=requestAnimationFrame(_),u.getByteFrequencyData(p);const O=p.slice(C,k).every(F=>F===0),T=Date.now();O?n.current||(n.current=T):n.current&&(n.current=null);const D=n.current&&T-n.current>3e4;c.clearRect(0,0,l.width,l.height);const j=1,z=(g-1)*j,I=Math.floor((l.width-z)/g);let U=0;for(let F=0;F<g;F++){const K=C+Math.floor(F/g*E),P=C+Math.floor((F+1)/g*E);if(P<=K)continue;const M=p.slice(K,P).reduce((B,X)=>B+X,0)/(P-K);x[F]=x[F]*v+M*(1-v);const L=Math.max(x[F]/255*l.height*1.2,l.height*.2),J=(l.height-L)/2;c.fillStyle=D?"rgba(239, 68, 68, 0.8)":`rgba(59, 130, 246, ${Math.max(.3,x[F]/255)})`,c.fillRect(U,J,I,L),U+=I+j}};_()},s=()=>{r.current&&(window.clearTimeout(r.current),r.current=null),e.current&&(cancelAnimationFrame(e.current),e.current=null),i.current=null};return y.useEffect(()=>()=>{s()},[]),{startVisualizer:o,stopVisualizer:s}},ni={micSelectorContainer:{display:"flex",alignItems:"center"},visualizerButton:{display:"flex",alignItems:"center",padding:"0",backgroundColor:"transparent",border:"none",cursor:"pointer",outline:"none",WebkitTapHighlightColor:"transparent","&:hover":{backgroundColor:"transparent"},"&:active":{backgroundColor:"transparent"},"&:focus":{backgroundColor:"transparent",outline:"none"}},visualizerGroup:{display:"flex",alignItems:"center",gap:"4px",backgroundColor:"white",padding:"0 12px",borderRadius:"6px",border:"1px solid #e5e7eb",justifyContent:"space-between",height:"36px"},visualizer:{maxWidth:"60px",height:"36px",backgroundColor:"transparent"},dropdownContent:{minWidth:"220px",backgroundColor:"white",borderRadius:"6px",padding:"5px",boxShadow:"0px 10px 38px -10px rgba(22, 23, 24, 0.35), 0px 10px 20px -15px rgba(22, 23, 24, 0.2)"},dropdownItem:{fontSize:"14px",lineHeight:"1",color:"#374151",borderRadius:"3px",display:"flex",alignItems:"center",height:"32px",padding:"0 8px",userSelect:"none",outline:"none",cursor:"pointer","&:hover":{backgroundColor:"#f3f4f6"}},selectedDropdownItem:{backgroundColor:"#f0f9ff",color:"#2563eb","&:hover":{backgroundColor:"#e0f2fe"}},dropdownLabel:{fontSize:"12px",lineHeight:"1",color:"#6b7280",padding:"0 8px",marginBottom:"4px"}};function aH({onDeviceSelect:t,selectedDevice:e}){const[n,r]=y.useState([]),[i,o]=y.useState(null),s=y.useRef(null),a=y.useRef(!1),{startVisualizer:l}=sH(s),c=y.useRef(!0);y.useEffect(()=>(s.current=new oH,c.current=!0,()=>{c.current=!1}),[]);const u=y.useCallback(async()=>{if(c.current)try{await navigator.mediaDevices.getUserMedia({audio:!0});const p=(await navigator.mediaDevices.enumerateDevices()).filter(g=>g.kind==="audioinput");if(r(p),p.length>0&&!e){const g=p.find(x=>x.deviceId!=="default"&&x.deviceId!=="communications")||p[0];t(g)}}catch(h){console.error("Failed to load audio devices:",h)}},[e,t]);y.useEffect(()=>(u(),navigator.mediaDevices.addEventListener("devicechange",u),()=>{navigator.mediaDevices.removeEventListener("devicechange",u)}),[u]);const d=y.useCallback(async()=>{if(!(!c.current||!s.current||!e||a.current))try{a.current=!0,s.current.cleanup(),await s.current.initialize(e.deviceId),c.current&&(await new Promise(h=>setTimeout(h,100)),await l())}catch(h){console.error("Failed to initialize audio monitor:",h),c.current&&s.current&&s.current.cleanup()}finally{c.current&&(a.current=!1)}},[e==null?void 0:e.deviceId,l]);y.useEffect(()=>{(i==null?void 0:i.deviceId)!==(e==null?void 0:e.deviceId)&&(o(e),e&&d())},[i==null?void 0:i.deviceId,e==null?void 0:e.deviceId,d]);const f=y.useCallback(h=>{if(!c.current)return;const p=n.find(g=>g.deviceId===h);p&&t(p)},[n,t]);return m.jsx("div",{style:ni.micSelectorContainer,children:m.jsxs(bh,{children:[m.jsx(Sh,{asChild:!0,children:m.jsx("button",{style:ni.visualizerButton,children:m.jsxs("div",{style:ni.visualizerGroup,children:[m.jsx(pf,{size:16,color:"#6b7280"}),m.jsx("canvas",{id:"visualizer",style:ni.visualizer,width:"120",height:"36"}),m.jsx(Zv,{width:16,height:16,color:"#6b7280"})]})})}),m.jsx(Ch,{children:m.jsxs(kh,{style:ni.dropdownContent,sideOffset:5,children:[m.jsx("div",{style:ni.dropdownLabel,children:"Select Microphone"}),n.filter(h=>h.deviceId!=="default").map(h=>{const p=h.deviceId===(e==null?void 0:e.deviceId);return m.jsxs(Ir,{style:{...ni.dropdownItem,...p?ni.selectedDropdownItem:{}},onClick:()=>f(h.deviceId),children:[m.jsx(pf,{size:16,style:{marginRight:"8px",color:p?"#2563eb":"#6b7280"}}),h.label||`Microphone ${h.deviceId.slice(0,4)}`]},h.deviceId)})]})})]})})}const $t={container:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"8px"},buttonsContainer:{width:"200px",height:"36px"},buttonGroup:{display:"flex",alignItems:"stretch",height:"100%",width:"100%",minWidth:"200px"},dropdownTrigger:{display:"flex",alignItems:"center",padding:"0 8px",backgroundColor:"#3b82f6",color:"white",border:"none",borderLeft:"1px solid rgba(255,255,255,0.2)",borderRadius:"0 6px 6px 0",cursor:"pointer",transition:"all 0.2s ease",outline:"none",width:"32px","&:hover":{backgroundColor:"#2563eb"},"&:focus":{outline:"none"},"&:active":{outline:"none"},WebkitTapHighlightColor:"transparent"},controlsRow:{display:"flex",alignItems:"center",gap:"16px",userSelect:"none",height:"36px"},timerContainer:{display:"flex",alignItems:"center",pointerEvents:"none",height:"36px"},timer:{display:"flex",alignItems:"center",gap:"4px",fontSize:"14px",color:"#374151",height:"36px",padding:"0 8px"},timerIcon:{width:"16px",height:"16px",color:"#6b7280"},dropdownContent:{minWidth:"220px",backgroundColor:"white",borderRadius:"6px",padding:"5px",boxShadow:"0px 10px 38px -10px rgba(22, 23, 24, 0.35), 0px 10px 20px -15px rgba(22, 23, 24, 0.2)"},dropdownItem:{fontSize:"14px",lineHeight:"1",color:"#374151",borderRadius:"3px",display:"flex",alignItems:"center",height:"32px",padding:"0 8px",userSelect:"none",outline:"none",cursor:"pointer","&:hover":{backgroundColor:"#f3f4f6"}},pauseButton:{display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",padding:"8px 16px",color:"white",border:"none",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"all 0.2s ease",outline:"none",borderRadius:"6px 0 0 6px",backgroundColor:"#9ca3af",width:"100px","&:hover":{backgroundColor:"#6b7280"}},resumeButton:{display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",padding:"8px 16px",color:"white",border:"none",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"all 0.2s ease",outline:"none",borderRadius:"6px 0 0 6px",backgroundColor:"#3b82f6",flex:"1","&:hover":{backgroundColor:"#2563eb"}},stopButton:{display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",padding:"8px 16px",color:"white",border:"none",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"all 0.2s ease",outline:"none",borderRadius:"0 6px 6px 0",backgroundColor:"#dc2626",width:"100px","&:hover":{backgroundColor:"#b91c1c"}},startButton:{display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",padding:"8px 16px",color:"white",border:"none",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"all 0.2s ease",outline:"none",borderRadius:"6px 0 0 6px",backgroundColor:"#3b82f6",minWidth:"168px",flex:1,"&:hover":{backgroundColor:"#2563eb"}}};function lH({disabled:t=!1,onRecordingStateChange:e,initialVisitId:n,initialChunkId:r,onVisitIdChange:i}){const[o,s]=y.useState(null),[a,l]=y.useState(n||null),[c,u]=y.useState("new"),{user:d}=Dn(),f=He(),h=Cr(),{isRecording:p,isPaused:g,formattedTime:x,startRecording:v,stopRecording:w,pauseRecording:S,resumeRecording:b}=iH({onRecordingStateChange:e,initialVisitId:n,initialChunkId:r});y.useEffect(()=>{n&&c==="paused"&&l(n)},[n,c]),y.useEffect(()=>{console.log("[AudioRecorder] State update:",{isRecording:p,isPaused:g,recordingState:c,initialVisitId:n,currentVisitId:a,disabled:t})},[p,g,c,n,a,t]);const C=y.useCallback(async()=>{try{if(!(d!=null&&d.id))throw new Error("User not authenticated");if(n&&c==="paused")l(n),i==null||i(n),await v(o==null?void 0:o.deviceId,n),u("recording"),await f.from("visits").update({state:"recording"}).eq("id",n),h(`/visit/${n}`);else{l(null);const{data:T,error:D}=await f.from("visits").insert([{state:"recording",user_id:d.id,started_at:new Date().toISOString(),ended_at:null,updated_at:new Date().toISOString()}]).select().single();if(D)throw D;l(T.id),u("recording"),i==null||i(T.id),await v(o==null?void 0:o.deviceId,T.id),h(`/visit/${T.id}`)}}catch(T){console.error("Failed to start recording:",T)}},[d==null?void 0:d.id,n,c,o,v,f,i,h]),k=y.useCallback(async()=>{if(a)try{await S(),u("paused");const{error:T}=await f.from("visits").update({state:"paused",updated_at:new Date().toISOString()}).eq("id",a);T&&console.error("Error updating visit state to paused:",T)}catch(T){console.error("Failed to pause recording:",T)}},[a,S,f]),E=y.useCallback(async()=>{if(console.log("[AudioRecorder] Attempting to resume recording:",{currentVisitId:a,recordingState:c}),!!a)try{await b(),u("recording");const{error:T}=await f.from("visits").update({state:"recording",updated_at:new Date().toISOString()}).eq("id",a);T&&console.error("Error updating visit state to recording:",T)}catch(T){console.error("Failed to resume recording:",T)}},[a,b,f]),_=y.useCallback(async()=>{if(console.log("[AudioRecorder] Attempting to stop recording:",{currentVisitId:a,recordingState:c}),!!a)try{await w(),u("processing");const{error:T}=await f.from("visits").update({state:"processing",ended_at:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("id",a);T&&console.error("Error updating visit state to processing:",T),l(null),i==null||i(null)}catch(T){console.error("Failed to stop recording:",T)}},[a,w,f,i]);y.useEffect(()=>{e==null||e(p,g)},[p,g,e]);const O=y.useMemo(()=>({startButton:{...$t.startButton,...t?{opacity:.5,cursor:"not-allowed",backgroundColor:"#9ca3af"}:{}},dropdownTrigger:{...$t.dropdownTrigger,...t?{opacity:.5,cursor:"not-allowed",backgroundColor:"#9ca3af"}:{}}}),[t]);return m.jsxs("div",{style:$t.container,children:[m.jsxs("div",{style:$t.controlsRow,children:[m.jsx("div",{style:$t.timerContainer,children:m.jsxs("div",{style:$t.timer,children:[m.jsx(p4,{style:$t.timerIcon}),x]})}),m.jsx(aH,{selectedDevice:o,onDeviceSelect:s})]}),m.jsx("div",{style:$t.buttonsContainer,children:m.jsx("div",{style:$t.buttonGroup,children:p?m.jsxs(m.Fragment,{children:[m.jsxs("button",{onClick:c==="paused"?E:k,style:c==="paused"?$t.resumeButton:$t.pauseButton,disabled:t,children:[c==="paused"?m.jsx(pf,{size:16}):m.jsx(h5,{size:16}),c==="paused"?"Resume":"Pause"]}),m.jsxs("button",{onClick:_,style:$t.stopButton,disabled:t,children:[m.jsx(w5,{size:16}),"Stop"]})]}):m.jsxs(m.Fragment,{children:[m.jsxs("button",{onClick:C,style:O.startButton,disabled:t,children:[m.jsx(pf,{size:16}),"Start Recording"]}),m.jsxs(bh,{children:[m.jsx(Sh,{asChild:!0,children:m.jsx("button",{style:O.dropdownTrigger,disabled:t,children:m.jsx(Zv,{width:16,height:16})})}),m.jsx(Ch,{children:m.jsx(kh,{style:$t.dropdownContent,sideOffset:5,children:m.jsxs(Ir,{style:$t.dropdownItem,children:[m.jsx(k5,{size:16,style:{marginRight:"8px"}}),"Upload Audio"]})})})]})]})})})]})}const Xp={header:{height:"60px",backgroundColor:"#f9fafb",padding:"0 24px 0",display:"flex",alignItems:"flex-end",justifyContent:"space-between",gap:"32px"},headerLeft:{flex:"0 1 auto",minWidth:0,maxWidth:"300px"},headerRight:{flex:"0 0 auto",display:"flex",alignItems:"center",gap:"16px"}};function cH({onPatientSelect:t,selectedPatientId:e,onRecordingStateChange:n,visitId:r}){const i=o=>{t(o)};return m.jsxs("div",{style:Xp.header,children:[m.jsx("div",{style:Xp.headerLeft,children:m.jsx(BV,{onPatientSelect:i,selectedPatientId:e})}),m.jsx("div",{style:Xp.headerRight,children:m.jsx(lH,{disabled:!1,onRecordingStateChange:n,initialVisitId:r})})]})}const uH=async(t,e,n)=>{try{if(n==="paused"||n==="processing"){const{data:o,error:s}=await t.from("containers").select("transcript_fragment").eq("visit_id",e).order("chunk_id",{ascending:!0});return s?(console.error("Error loading containers:",s),"Error loading partial transcription."):o.map(l=>l.transcript_fragment).filter(l=>l!==null).join(" ").trim()||"Processing..."}else if(n==="recording")return"";const{data:r,error:i}=await t.from("transcripts").select("full_text").eq("visit_id",e).single();return i?i.code==="PGRST116"?"No transcript available for this visit.":(console.error("Error loading transcript:",i),"Error loading transcript. Please try again later."):(r==null?void 0:r.full_text)||"No transcript content available."}catch(r){return console.error("Error processing transcription:",r),"Error loading transcription data. Please try again later."}},Zu={container:{display:"flex",flexDirection:"column",height:"100%",width:"100%",backgroundColor:"#f9fafb"},content:{flex:1,backgroundColor:"#f9fafb",overflow:"hidden",width:"100%",height:"calc(100vh - 60px)",padding:"24px"},transcriptContainer:{height:"100%",overflow:"hidden"},transcriptContent:{lineHeight:"1.5",color:"#374151",height:"100%",display:"flex",flexDirection:"column"}};function dH({placeholder:t="Your transcription will appear here as you speak...",isTranscribing:e=!1,visitId:n,onRecordingStateChange:r,onPatientSelect:i,selectedPatientId:o,visits:s}){const[a,l]=y.useState(""),[c,u]=y.useState({}),[d,f]=y.useState(null),h=He(),p=y.useMemo(()=>n?s.find(C=>C.id===n):null,[n,s]),g=p==null?void 0:p.state,x=y.useCallback(C=>{const k=C.transcript_fragment,E=C.chunk_id;k&&typeof E=="number"&&u(_=>({..._,[E]:k}))},[]);FV({visitId:n||"",onMessage:x});const v=y.useMemo(()=>e?Object.entries(c).sort(([C],[k])=>Number(C)-Number(k)).map(([C,k])=>k).join(" ").trim():"",[c,e]);y.useEffect(()=>{e&&v!==a&&l(v)},[v,a,e]),y.useEffect(()=>{if(!n||!g||!p){u({}),l(""),f(null);return}(async()=>{try{const k=await uH(h,n,g);f(k),e||l(k)}catch{l("Error loading transcription data.")}})()},[n,g,p,h,e]);const w=y.useCallback(C=>{i((C==null?void 0:C.id)||null)},[i]),S=y.useMemo(()=>e?a:d||a||"",[e,a,d]),b=y.useMemo(()=>m.jsx("div",{style:Zu.content,children:m.jsx("div",{style:Zu.transcriptContainer,children:m.jsx("div",{style:Zu.transcriptContent,children:e||!n||!p?m.jsx(ZN,{transcription:S,placeholder:t,isTranscribing:e,visit:p??void 0}):m.jsx($V,{partialTranscription:S,visit:p})})})}),[S,t,e,n,p]);return m.jsxs("div",{style:Zu.container,children:[m.jsx(cH,{onPatientSelect:w,selectedPatientId:o,onRecordingStateChange:r,visitId:n}),b]})}function fH(){const t=y.useContext(Hk),e=He();if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return{...t,signIn:async(r,i)=>{try{const{data:o,error:s}=await e.auth.signInWithPassword({email:r,password:i});if(s)throw s;return await e.auth.getSession(),{data:o,error:null}}catch(o){return console.error("Sign in error:",o),{data:null,error:o}}}}}const bt={container:{minHeight:"100vh",width:"100vw",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f3f4f6",padding:"20px"},formContainer:{backgroundColor:"white",padding:"48px",borderRadius:"12px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)",width:"100%",maxWidth:"480px"},title:{fontSize:"32px",fontWeight:"bold",color:"#1f2937",marginBottom:"32px",textAlign:"center"},form:{display:"flex",flexDirection:"column",gap:"24px"},inputGroup:{display:"flex",flexDirection:"column",gap:"8px"},label:{fontSize:"14px",color:"#4b5563",fontWeight:"500"},input:{padding:"12px 16px",borderRadius:"8px",border:"1px solid #e5e7eb",fontSize:"16px",backgroundColor:"white",transition:"all 0.2s ease","&:focus":{outline:"none",borderColor:"#3b82f6",boxShadow:"0 0 0 3px rgba(59, 130, 246, 0.1)"}},button:{backgroundColor:"#3b82f6",color:"white",padding:"14px",borderRadius:"8px",border:"none",fontSize:"16px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",marginTop:"8px","&:hover":{backgroundColor:"#2563eb"},"&:disabled":{backgroundColor:"#93c5fd",cursor:"not-allowed"}},error:{color:"#ef4444",fontSize:"14px",textAlign:"center",marginBottom:"16px"},signupText:{textAlign:"center",marginTop:"24px",fontSize:"14px",color:"#6b7280"},signupLink:{color:"#3b82f6",textDecoration:"none",fontWeight:"500","&:hover":{textDecoration:"underline"}}};function hH(){const t=Cr(),{signIn:e,user:n}=fH(),[r,i]=y.useState(""),[o,s]=y.useState(""),[a,l]=y.useState(""),[c,u]=y.useState(!1),d=Bf(),f=An();y.useEffect(()=>{var p,g;if(n){console.log("User is logged in, redirecting to record",{user:n.id,email:n.email,location:window.location.pathname});const x=((g=(p=f.state)==null?void 0:p.from)==null?void 0:g.pathname)||"/record";t(x,{replace:!0})}},[n,t,f]);const h=async p=>{if(p.preventDefault(),!c){l(""),u(!0);try{const g=await e(r,o);if(g.error)throw g.error;d.clear()}catch(g){l(g instanceof Error?g.message:"Failed to sign in"),u(!1)}}};return n?m.jsx("div",{style:bt.container,children:m.jsx("div",{style:bt.formContainer,children:m.jsx("div",{style:{textAlign:"center",color:"#4b5563"},children:"Redirecting..."})})}):m.jsx("div",{style:bt.container,children:m.jsxs("div",{style:bt.formContainer,children:[m.jsx("h1",{style:bt.title,children:"Welcome to East Medical AI Scribe"}),m.jsxs("form",{onSubmit:h,style:bt.form,children:[a&&m.jsx("div",{style:bt.error,children:a}),m.jsxs("div",{style:bt.inputGroup,children:[m.jsx("label",{htmlFor:"email",style:bt.label,children:"Email Address"}),m.jsx("input",{id:"email",type:"email",value:r,onChange:p=>i(p.target.value),required:!0,style:bt.input,placeholder:"Enter your email"})]}),m.jsxs("div",{style:bt.inputGroup,children:[m.jsx("label",{htmlFor:"password",style:bt.label,children:"Password"}),m.jsx("input",{id:"password",type:"password",value:o,onChange:p=>s(p.target.value),required:!0,style:bt.input,placeholder:"Enter your password"})]}),m.jsx("button",{type:"submit",disabled:c,style:bt.button,children:c?"Signing in...":"Sign In"})]}),m.jsxs("div",{style:bt.signupText,children:["Don't have an account?"," "]})]})})}const GR=y.createContext(void 0);function pH({children:t}){const[e,n]=y.useState(null),[r,i]=y.useState(!0),o=He();y.useEffect(()=>{(async()=>{const{data:{session:f},error:h}=await o.auth.getSession();h&&console.error("Error fetching session:",h),n((f==null?void 0:f.user)??null),i(!1)})();const{data:{subscription:d}}=o.auth.onAuthStateChange((f,h)=>{n((h==null?void 0:h.user)??null)});return()=>{d.unsubscribe()}},[o]);const c={user:e,loading:r,signIn:async(u,d)=>{const{error:f}=await o.auth.signInWithPassword({email:u,password:d});if(f)throw f},signUp:async(u,d)=>{const{error:f}=await o.auth.signUp({email:u,password:d});if(f)throw f},signOut:async()=>{const{error:u}=await o.auth.signOut();if(u)throw u}};return m.jsx(GR.Provider,{value:c,children:t})}function JR(){const t=y.useContext(GR);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const Ft={container:{minHeight:"100vh",width:"100vw",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f3f4f6",padding:"20px"},formContainer:{backgroundColor:"white",padding:"48px",borderRadius:"12px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)",width:"100%",maxWidth:"480px"},title:{fontSize:"32px",fontWeight:"bold",color:"#1f2937",marginBottom:"32px",textAlign:"center"},form:{display:"flex",flexDirection:"column",gap:"24px"},inputGroup:{display:"flex",flexDirection:"column",gap:"8px"},label:{fontSize:"14px",color:"#4b5563",fontWeight:"500"},input:{padding:"12px 16px",borderRadius:"8px",border:"1px solid #e5e7eb",fontSize:"16px",backgroundColor:"white",transition:"all 0.2s ease","&:focus":{outline:"none",borderColor:"#3b82f6",boxShadow:"0 0 0 3px rgba(59, 130, 246, 0.1)"}},button:{backgroundColor:"#3b82f6",color:"white",padding:"14px",borderRadius:"8px",border:"none",fontSize:"16px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",marginTop:"8px","&:hover":{backgroundColor:"#2563eb"},"&:disabled":{backgroundColor:"#93c5fd",cursor:"not-allowed"}},error:{color:"#ef4444",fontSize:"14px",textAlign:"center",marginBottom:"16px"},loginText:{textAlign:"center",marginTop:"24px",fontSize:"14px",color:"#6b7280"},loginLink:{color:"#3b82f6",textDecoration:"none",fontWeight:"500","&:hover":{textDecoration:"underline"}}};function mH(){const[t,e]=y.useState(""),[n,r]=y.useState(""),[i,o]=y.useState(""),[s,a]=y.useState(!1),{signUp:l}=JR(),c=Cr(),u=async d=>{d.preventDefault();try{o(""),a(!0),await l(t,n),c("/")}catch(f){o("Failed to create account. Please try again."),console.error("Signup error:",f)}finally{a(!1)}};return m.jsx("div",{style:Ft.container,children:m.jsxs("div",{style:Ft.formContainer,children:[m.jsx("h1",{style:Ft.title,children:"Create an Account"}),m.jsxs("form",{onSubmit:u,style:Ft.form,children:[i&&m.jsx("div",{style:Ft.error,children:i}),m.jsxs("div",{style:Ft.inputGroup,children:[m.jsx("label",{htmlFor:"email",style:Ft.label,children:"Email Address"}),m.jsx("input",{id:"email",type:"email",value:t,onChange:d=>e(d.target.value),required:!0,style:Ft.input,placeholder:"Enter your email"})]}),m.jsxs("div",{style:Ft.inputGroup,children:[m.jsx("label",{htmlFor:"password",style:Ft.label,children:"Password"}),m.jsx("input",{id:"password",type:"password",value:n,onChange:d=>r(d.target.value),required:!0,style:Ft.input,placeholder:"Choose a password"})]}),m.jsx("button",{type:"submit",disabled:s,style:Ft.button,children:s?"Creating Account...":"Sign Up"})]}),m.jsxs("div",{style:Ft.loginText,children:["Already have an account?"," ",m.jsx(uv,{to:"/login",style:Ft.loginLink,children:"Sign in"})]})]})})}const gH=["Accident and Emergency Nurse","Acupuncturist","Addiction Counsellor","Addiction Medicine Specialist","Adolescent and young adult medicine Specialist","Adult Intensive Care Specialist","Aerospace Medicine Specialist","Allergy and Immunologist","Allied Health Professional","Alternative medicine practitioner","Anaesthetist","Anatomical Pathologist","Andrologist","Animal-Assisted Therapist","Aromatherapist","Arts Therapist","Audiologist","Audiology Technician","Audiometrist","Ayurveda","Behaviour Therapist","Bereavement Counselor","Biofeedback Therapist","Blood Transfusion Doctor","Breast Surgeon","Cardiologist","Cardiothoracic Surgeon","Chemical Pathologist","Chemotherapy Nurse","Child and Adolescent Psychiatrist","Chiropractor","Chronic Pain Specialist","Clinical Geneticist","Clinical Immunologist","Clinical Neurophysiologist","Clinical Pathologist","Clinical Pharmacologist","Clinical Physiologist","Clinical Social Worker","Cognitive Behavioral Therapist","Colorectal Surgeon","Community Child Health Specialist","Community Nurse","Coroner","Counselling Psychologist","Counselors","Critical Care Medicine Specialist","Dance Therapist","Dental Auxiliary","Dental Technician","Dental assistant","Dental nurse","Dentist","Dermatologist","Diabetes Dietitian","Diabetes Specialist","Diabetologist","Diagnostic Radiographer","Diagnostic Radiologist","Dietitian","Drama Therapist","ECG Technician","EEG Technician","EMT","Eating Disorder Specialist Dietitian","Eating Disorder Specialist Psychologist","Emergency Medicine Specialist","Endocrine Surgeon","Endocrinologist","Endodontist","Equine Therapist","Exercise Physiologists","Family Medicine Specialist","Family Planning Doctor","Fetal Medicine Specialist","Foot and Ankle Surgeon","Forensic Medicine Specialist","Forensic Psychiatrist","Functional Medicine Specialist","Gastroenterologist","Gastrointestinal Surgeon","General Dietitian","General Gastrointestinal Surgeon","General Practitioner","General Surgeon","Genetic Counselor","Geriatric Medicine Specialist","Geriatrician","Gerodontist","Geropsychologist","Grief Counsellor","Gynaecologist","Haematologist","Haemodialysis Nurse","Hand Surgeon","Health Coach","Health Psychologist","Healthcare Assistant","Healthcare Service Manager","Hepatobiliary Surgeon","Hepatologist","Herbal Medicine Specialist","Hip and Knee Surgeon","Holistic Health Practitioner","Homeopath","Horticultural Therapist","Hospital Administrator","Hydrotherapist","Hypnotherapist","Immunopathologist","Infection Control Nurse","Infectious Diseases Physician","Intensive Care Specialist","Internal Medicine Specialist","Interpreter","Interventional Radiologist","Invasive Cardiologist","Kinesiologist","Laboratory Haematologist","Laboratory Medicine Specialist","Lactation Consultant","Lifestyle medicine Specialist","Liver Dietitian","Lower Gastrointestinal Surgeon","Marriage Guidance Counsellor","Marriage and family therapist","Massage Therapist","Maternal-Fetal Medicine Specialist","Maxillofacial Surgeon","Medical Geneticist","Medical Microbiologist","Medical Oncologist","Medical Pathologist","Medical Record Administrator","Medical Secretary","Medical Technician","Medical X-ray Technician","Mental Health Counselor","Mental Health Nurse","Mental Health and Behavioural Specialist","Midwife","Music Therapist","Naturopath","Neonatal Nurse","Neonatologist","Nephrologist","Neuroendocrinologist","Neurologist","Neuropathologist","Neuropsychiatrist","Neuroradiologist","Neurosurgeon","Nuclear Medicine Physician","Nurse","Nurse Administrator","Nurse Anaesthetist","Nurse Practitioner","Nurse Psychotherapist","Nursing Aid","Nursing Auxiliary","Nutrition & diabetics Specialist","Nutrition Therapist","Obesity Medicine","Obesity Specialist","Obstetrician & Gynaecologist","Occupational Health Nurse","Occupational Medicine Specialist","Occupational Therapist","Oculoplastic Surgeon","Oncologist","Oncology Dietitian","Oncology Nurse","Ophthalmologist","Optician","Optometrist","Oral Pathologist","Oral/Dental Hygienist","Orthodontist","Orthopaedic Surgeon","Orthoptist","Orthotist","Osteopath","Otolaryngologist","Otorhinolaryngologist (ENT Specialist)","Paediatric Allergist","Paediatric Audiologist","Paediatric Cardiologist","Paediatric Dietitian","Paediatric Emergency Medicine Specialist","Paediatric Endocrinologist","Paediatric Gastroenterologist","Paediatric Intensive Care Specialist","Paediatric Nephrologist","Paediatric Neurologist","Paediatric Nurse","Paediatric Oncologist","Paediatric Orthopaedic Surgeon","Paediatric Respirologist","Paediatric Rheumatologist","Paediatric Surgeon","Paediatric haematologist","Paediatrician","Pain Management Specialist","Palantypist","Palliative Care Nurse","Palliative Care Physician","Pancreatic Surgeon","Paramedic","Pathologist","Pediatric Dentist","Pediatric Psychologist","Pediatric Pulmonologist","Pediatric Radiologist","Pediatric Surgeon","Periodontist","Perioperative Nurse","Pharmacist","Physical Medicine and Rehabilitation Specialist","Physician","Physician Assistant","Physiologist","Physiotherapist","Pituitary Surgeon","Plastic & Reconstructive Surgeon","Play Therapist","Podiatrist","Podiatrist Assistant","Practice Manager","Preventive medicine Specialist","Prosthetist","Prosthodontist","Psychiatric Nurse","Psychiatrist","Psychiatrist for Mental Handicap","Psychoanalyst","Psychogeriatrician","Psychologist","Psychotherapist","Public Health Medicine Specialist","Public Health Nurse","Pulmonologist","Radiation Oncologist","Radiation Oncology","Radiation Therapist","Radiologist","Radiology and Imaging Specialist","Radiotherapy Nurse","Recreational Therapist","Reflexologist","Registered Nurse"],ve={container:{padding:"32px",width:"100%",height:"100%",backgroundColor:"#fff"},title:{fontSize:"16px",fontWeight:"500",marginBottom:"32px",color:"#1f2937"},section:{maxWidth:"1200px",margin:"0 auto"},formGrid:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"24px"},field:{marginBottom:"24px"},label:{display:"block",fontSize:"14px",color:"#4b5563",marginBottom:"8px"},input:{width:"100%",padding:"8px 12px",fontSize:"14px",border:"1px solid #d1d5db",borderRadius:"6px",color:"#1f2937",backgroundColor:"#fff","&:focus":{outline:"none",borderColor:"#2563eb",boxShadow:"0 0 0 2px rgba(37, 99, 235, 0.2)"}},select:{width:"100%",padding:"8px 12px",fontSize:"14px",border:"1px solid #d1d5db",borderRadius:"6px",color:"#1f2937",backgroundColor:"#fff",cursor:"pointer",appearance:"none",backgroundImage:'url("data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2224%22%20height%3D%2224%22%20viewBox%3D%220%200%2024%2024%22%20fill%3D%22none%22%20stroke%3D%22%236b7280%22%20stroke-width%3D%222%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%3E%3Cpolyline%20points%3D%226%209%2012%2015%2018%209%22%3E%3C%2Fpolyline%3E%3C%2Fsvg%3E")',backgroundRepeat:"no-repeat",backgroundPosition:"right 8px center",backgroundSize:"16px",paddingRight:"32px"},saveButton:{backgroundColor:"#2563eb",color:"white",padding:"10px 20px",borderRadius:"6px",border:"none",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"background-color 0.2s","&:hover":{backgroundColor:"#1d4ed8"},"&:disabled":{backgroundColor:"#93c5fd",cursor:"not-allowed"}},disabledInput:{backgroundColor:"#f3f4f6",cursor:"not-allowed"}};function yH(){const{user:t,loading:e}=Dn(),n=He(),[r,i]=y.useState({firstName:"",lastName:"",specialty:"",title:"",organization:"",companySize:"Just me",position:"Individual clinician"}),[o,s]=y.useState(!1);if(we.useEffect(()=>{if(t){const[c="",u=""]=(t.name||"").split(" ");i({firstName:c,lastName:u,specialty:t.specialty||"",title:t.title||"",organization:t.organization||"",companySize:"Just me",position:"Individual clinician"})}},[t]),e)return m.jsx("div",{children:"Loading..."});if(!t)return m.jsx("div",{children:"Not logged in"});const a=c=>{const{name:u,value:d}=c.target;i(f=>({...f,[u]:d}))},l=async()=>{if(t.id){s(!0);try{const{error:c}=await n.from("user_profiles").update({name:`${r.firstName} ${r.lastName}`.trim(),specialty:r.specialty,title:r.title,organization:r.organization,updated_at:new Date().toISOString()}).eq("id",t.id);if(c)throw c}catch(c){console.error("Error updating profile:",c)}finally{s(!1)}}};return m.jsx("div",{style:ve.container,children:m.jsxs("div",{style:ve.section,children:[m.jsx("h1",{style:ve.title,children:"About you"}),m.jsxs("div",{style:ve.formGrid,children:[m.jsxs("div",{style:ve.field,children:[m.jsx("label",{style:ve.label,children:"Title"}),m.jsx("input",{style:ve.input,name:"title",value:r.title,onChange:a,type:"text",placeholder:"Enter your title"})]}),m.jsxs("div",{style:ve.field,children:[m.jsx("label",{style:ve.label,children:"First name"}),m.jsx("input",{style:ve.input,type:"text",name:"firstName",value:r.firstName,onChange:a,placeholder:"Enter your first name"})]}),m.jsxs("div",{style:ve.field,children:[m.jsx("label",{style:ve.label,children:"Last name"}),m.jsx("input",{style:ve.input,type:"text",name:"lastName",value:r.lastName,onChange:a,placeholder:"Enter your last name"})]}),m.jsxs("div",{style:ve.field,children:[m.jsx("label",{style:ve.label,children:"Specialty"}),m.jsxs("select",{style:ve.select,name:"specialty",value:r.specialty,onChange:a,children:[m.jsx("option",{value:"",children:"Select a specialty"}),gH.map(c=>m.jsx("option",{value:c,children:c},c))]})]}),m.jsxs("div",{style:ve.field,children:[m.jsx("label",{style:ve.label,children:"Organization name"}),m.jsx("input",{style:ve.input,type:"text",name:"organization",value:r.organization,onChange:a,placeholder:"Enter your organization"})]}),m.jsxs("div",{style:ve.field,children:[m.jsx("label",{style:ve.label,children:"Company size"}),m.jsxs("select",{style:ve.select,name:"companySize",value:r.companySize,onChange:a,children:[m.jsx("option",{value:"Just me",children:"Just me"}),m.jsx("option",{value:"2-10",children:"2-10 employees"}),m.jsx("option",{value:"11-50",children:"11-50 employees"}),m.jsx("option",{value:"51+",children:"51+ employees"})]})]}),m.jsxs("div",{style:ve.field,children:[m.jsx("label",{style:ve.label,children:"Position"}),m.jsxs("select",{style:ve.select,name:"position",value:r.position,onChange:a,children:[m.jsx("option",{value:"Individual clinician",children:"Individual clinician"}),m.jsx("option",{value:"Practice owner",children:"Practice owner"}),m.jsx("option",{value:"Administrator",children:"Administrator"})]})]})]}),m.jsx("div",{style:{marginTop:"24px",textAlign:"right"},children:m.jsx("button",{style:ve.saveButton,onClick:l,disabled:o,children:o?"Saving...":"Save changes"})})]})})}const vH=[{value:"plain",label:"Plain Text"},{value:"rich_text",label:"Formatted Text"},{value:"without_lists",label:"Formatted Text (Without Lists)"}],E1=[{value:"auto",label:"Multi-lingual"},{value:"en",label:"English"},{value:"zh",label:"Mandarin"},{value:"zh-HK",label:"Cantonese"},{value:"cs",label:"Czech"},{value:"da",label:"Danish"},{value:"nl",label:"Dutch"},{value:"nl-BE",label:"Flemish"},{value:"fr",label:"French"},{value:"de",label:"German"},{value:"el",label:"Greek"},{value:"hi",label:"Hindi"},{value:"id",label:"Indonesian"},{value:"it",label:"Italian"},{value:"ja",label:"Japanese"},{value:"ko",label:"Korean"},{value:"ms",label:"Malay"},{value:"no",label:"Norwegian"},{value:"pl",label:"Polish"},{value:"pt",label:"Portuguese"},{value:"ru",label:"Russian"},{value:"es",label:"Spanish"},{value:"sv",label:"Swedish"},{value:"th",label:"Thai"},{value:"tr",label:"Turkish"},{value:"uk",label:"Ukrainian"},{value:"vi",label:"Vietnamese"}];function xH(){const t=He(),[e,n]=y.useState({default_copy_mode:"plain",date_format:"MM/DD/YYYY",primary_language:"auto",preferred_note_language:"en",patient_instructions_language:"en",spelling:"en-us",patient_reference_format:"",clinician_reference_format:""});y.useEffect(()=>{(async()=>{const{data:{user:a}}=await t.auth.getUser();if(!(a!=null&&a.id))return;const{data:l}=await t.from("user_profiles").select("note_preferences").eq("id",a.id).single();l!=null&&l.note_preferences&&n(c=>({...c,...l.note_preferences}))})()},[t]);const i=Xv(async s=>{try{const{data:{user:a}}=await t.auth.getUser();if(!(a!=null&&a.id))return;const{data:l}=await t.from("user_profiles").select("note_preferences").eq("id",a.id).single(),c=(l==null?void 0:l.note_preferences)||{};await t.from("user_profiles").update({note_preferences:{...c,...s}}).eq("id",a.id)}catch(a){console.error("Failed to update preferences:",a)}},500),o=(s,a)=>{n(l=>({...l,[s]:a})),i({[s]:a})};return m.jsxs("div",{style:{height:"100%",overflow:"auto",paddingRight:"16px"},children:[m.jsx("div",{style:ee.sectionTitle,children:"Editor Settings"}),m.jsx("div",{style:ee.formGrid,children:m.jsxs("div",{style:ee.field,children:[m.jsx("label",{style:ee.label,children:"Default Copy Mode"}),m.jsx("select",{style:ee.select,value:e.default_copy_mode,onChange:s=>o("default_copy_mode",s.target.value),children:vH.map(s=>m.jsx("option",{value:s.value,children:s.label},s.value))})]})}),m.jsx("div",{style:ee.sectionTitle,children:"Date"}),m.jsx("div",{style:ee.formGrid,children:m.jsxs("div",{style:ee.field,children:[m.jsx("label",{style:ee.label,children:"Date format"}),m.jsxs("select",{style:ee.select,value:e.date_format,onChange:s=>o("date_format",s.target.value),children:[m.jsx("option",{value:"MM/DD/YYYY",children:"MM/DD/YYYY"}),m.jsx("option",{value:"DD/MM/YYYY",children:"DD/MM/YYYY"}),m.jsx("option",{value:"D MMM YYYY",children:"D MMM YYYY"}),m.jsx("option",{value:"MMMM DD YYYY",children:"MMMM DD YYYY"}),m.jsx("option",{value:"MMM DD YYYY",children:"MMM DD YYYY"}),m.jsx("option",{value:"YYYY/MM/DD",children:"YYYY/MM/DD"})]})]})}),m.jsx("div",{style:ee.sectionTitle,children:"Language & spelling"}),m.jsxs("div",{style:ee.formGrid,children:[m.jsxs("div",{style:ee.field,children:[m.jsx("label",{style:ee.label,children:"Primary spoken language"}),m.jsx("select",{style:ee.select,value:e.primary_language,onChange:s=>o("primary_language",s.target.value),children:E1.map(s=>m.jsx("option",{value:s.value,children:s.label},s.value))})]}),m.jsxs("div",{style:ee.field,children:[m.jsx("label",{style:ee.label,children:"Preferred Note Language"}),m.jsx("select",{style:ee.select,value:e.preferred_note_language,onChange:s=>o("preferred_note_language",s.target.value),children:E1.filter(s=>s.value!=="auto").map(s=>m.jsx("option",{value:s.value,children:s.label},s.value))})]}),m.jsxs("div",{style:ee.field,children:[m.jsx("label",{style:ee.label,children:"Patient Instructions Language"}),m.jsxs("select",{style:ee.select,value:e.patient_instructions_language,onChange:s=>o("patient_instructions_language",s.target.value),children:[m.jsx("option",{value:"en",children:"English"}),m.jsx("option",{value:"match_spoken",children:"Match spoken language"})]})]}),m.jsxs("div",{style:ee.field,children:[m.jsx("label",{style:ee.label,children:"Spelling"}),m.jsxs("select",{style:ee.select,value:e.spelling,onChange:s=>o("spelling",s.target.value),children:[m.jsx("option",{value:"en-us",children:"English (United States)"}),m.jsx("option",{value:"en-gb",children:"English (United Kingdom)"}),m.jsx("option",{value:"en-au",children:"English (Australia)"}),m.jsx("option",{value:"en-ca",children:"English (Canada)"})]})]})]}),m.jsx("div",{style:ee.sectionTitle,children:"Reference format"}),m.jsxs("div",{style:ee.formGrid,children:[m.jsxs("div",{style:ee.field,children:[m.jsx("label",{style:ee.label,children:"Refer to patient"}),m.jsx("input",{style:ee.input,type:"text",value:e.patient_reference_format,onChange:s=>o("patient_reference_format",s.target.value),placeholder:"e.g Title + Firstname + Lastname"})]}),m.jsxs("div",{style:ee.field,children:[m.jsx("label",{style:ee.label,children:"Refer to clinician"}),m.jsx("input",{style:ee.input,type:"text",value:e.clinician_reference_format,onChange:s=>o("clinician_reference_format",s.target.value),placeholder:"e.g Dr Smith"})]})]})]})}function wH(){const[t,e]=y.useState("preferences");return m.jsx("div",{style:ee.container,children:m.jsxs("div",{style:ee.section,children:[m.jsxs("div",{style:ee.header,children:[m.jsx("h1",{style:ee.title,children:"Settings"}),m.jsxs("div",{style:ee.tabs,children:[m.jsx("div",{style:{...ee.tab,...t==="preferences"?ee.activeTab:{}},onClick:()=>e("preferences"),children:"Note Preferences"}),m.jsx("div",{style:{...ee.tab,...t==="memory"?ee.activeTab:{}},onClick:()=>e("memory"),children:"Memory"})]})]}),m.jsx("div",{style:ee.contentContainer,children:t==="preferences"?m.jsx(xH,{}):m.jsx(G6,{})})]})})}const Ce={container:{padding:"32px",width:"100%",height:"100%",backgroundColor:"#fff"},section:{maxWidth:"1200px",margin:"0 auto"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px"},title:{fontSize:"24px",fontWeight:"600",color:"#1f2937"},actions:{display:"flex",gap:"12px"},button:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 16px",borderRadius:"6px",fontSize:"14px",fontWeight:"500"},primaryButton:{backgroundColor:"#1f2937",color:"white",border:"none"},secondaryButton:{backgroundColor:"transparent",color:"#1f2937",border:"1px solid #e5e7eb"},searchBar:{display:"flex",gap:"12px",marginBottom:"24px"},searchInput:{flex:"1",maxWidth:"320px",padding:"8px 12px",border:"1px solid #e5e7eb",borderRadius:"6px",fontSize:"14px"},table:{width:"100%",borderCollapse:"collapse"},tableHeader:{textAlign:"left",padding:"12px 16px",fontSize:"14px",fontWeight:"500",color:"#6b7280",borderBottom:"1px solid #e5e7eb"},tableCell:{padding:"12px 16px",fontSize:"14px",color:"#374151",borderBottom:"1px solid #e5e7eb"},templateType:{fontSize:"12px",padding:"4 px 6px",marginLeft:"8px",backgroundColor:"#f3f4f6",borderRadius:"12px",color:"#6b7280"},actionButton:{padding:"4px",border:"none",background:"none",cursor:"pointer",color:"#6b7280","&:hover":{color:"#374151"}}};function bH(){const[t,e]=y.useState([]),[n,r]=y.useState(!0),[i,o]=y.useState(""),s=He(),{user:a}=Dn();y.useEffect(()=>{(async()=>{try{if(!(a!=null&&a.id))return;const{data:u,error:d}=await s.from("template_library").select("*").or(`owner_id.eq.${a.id},published.eq.false`).order("name");if(d)throw d;e(u||[])}catch(u){console.error("Error fetching templates:",u)}finally{r(!1)}})()},[s,a==null?void 0:a.id]);const l=t.filter(c=>c.name.toLowerCase().includes(i.toLowerCase()));return n?m.jsx("div",{style:Ce.container,children:m.jsxs("div",{style:Ce.section,children:[m.jsx("h1",{style:Ce.title,children:"My Templates"}),m.jsx("div",{children:"Loading templates..."})]})}):m.jsx("div",{style:Ce.container,children:m.jsxs("div",{style:Ce.section,children:[m.jsxs("div",{style:Ce.header,children:[m.jsx("h1",{style:Ce.title,children:"My Templates"}),m.jsxs("div",{style:Ce.actions,children:[m.jsx("button",{style:{...Ce.button,...Ce.secondaryButton},children:"Browse community"}),m.jsx("button",{style:{...Ce.button,...Ce.primaryButton},children:"Create template"})]})]}),m.jsx("div",{style:Ce.searchBar,children:m.jsx("input",{type:"text",placeholder:"Search templates...",value:i,onChange:c=>o(c.target.value),style:Ce.searchInput})}),m.jsxs("table",{style:Ce.table,children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{style:Ce.tableHeader,children:"Template name"}),m.jsx("th",{style:Ce.tableHeader,children:"Creator"}),m.jsx("th",{style:Ce.tableHeader,children:"Visibility"}),m.jsx("th",{style:Ce.tableHeader})]})}),m.jsx("tbody",{children:l.map(c=>m.jsxs("tr",{children:[m.jsxs("td",{style:Ce.tableCell,children:[c.name,m.jsx("span",{style:Ce.templateType,children:c.type})]}),m.jsx("td",{style:Ce.tableCell,children:c.owner_id===(a==null?void 0:a.id)?"Me":"Library"}),m.jsx("td",{style:Ce.tableCell,children:"Just me"}),m.jsx("td",{style:Ce.tableCell,children:m.jsx("button",{style:Ce.actionButton,children:""})})]},c.id))})]})]})})}const et={container:{padding:"32px",width:"100%",height:"100%",backgroundColor:"#fff"},section:{maxWidth:"1200px",margin:"0 auto"},title:{fontSize:"16px",fontWeight:"500",marginBottom:"32px",color:"#1f2937"},searchContainer:{marginBottom:"24px"},searchInput:{width:"100%",maxWidth:"400px",padding:"8px 16px",fontSize:"14px",border:"1px solid #e5e7eb",borderRadius:"6px","&:focus":{outline:"none",borderColor:"#2563eb",boxShadow:"0 0 0 2px rgba(37, 99, 235, 0.2)"}},templateGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"16px",marginTop:"24px"},templateCard:{backgroundColor:"white",borderRadius:"8px",border:"1px solid #e5e7eb",padding:"16px",transition:"all 0.2s ease","&:hover":{transform:"translateY(-2px)",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"}},templateName:{fontSize:"18px",fontWeight:"500",color:"#111827",marginBottom:"8px"},templateDescription:{fontSize:"14px",color:"#6b7280",marginBottom:"12px"},templateMeta:{display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"12px",color:"#6b7280"},templateType:{display:"inline-block",padding:"2px 8px",backgroundColor:"#f3f4f6",borderRadius:"12px",fontSize:"12px",color:"#374151"},noTemplates:{textAlign:"center",padding:"48px",color:"#6b7280",backgroundColor:"#f9fafb",borderRadius:"8px",border:"1px dashed #e5e7eb"},tagsContainer:{display:"flex",flexWrap:"wrap",gap:"8px",marginBottom:"12px"},tag:{display:"inline-block",padding:"2px 8px",backgroundColor:"#e5e7eb",borderRadius:"12px",fontSize:"12px",color:"#374151"}};function SH(){const[t,e]=y.useState([]),[n,r]=y.useState(!0),[i,o]=y.useState(""),s=He();return y.useEffect(()=>{(async()=>{try{const l=s.from("template_library").select("*").eq("editable",!0).order("name");i&&l.or(`name.ilike.%${i}%,description.ilike.%${i}%`);const{data:c,error:u}=await l;if(u)throw u;e(c||[])}catch(l){console.error("Error fetching templates:",l)}finally{r(!1)}})()},[s,i]),n?m.jsx("div",{style:et.container,children:m.jsxs("div",{style:et.section,children:[m.jsx("h1",{style:et.title,children:"Community Templates"}),m.jsx("div",{children:"Loading templates..."})]})}):m.jsx("div",{style:et.container,children:m.jsxs("div",{style:et.section,children:[m.jsx("h1",{style:et.title,children:"Community Templates"}),m.jsx("div",{style:et.searchContainer,children:m.jsx("input",{type:"text",placeholder:"Search templates...",value:i,onChange:a=>o(a.target.value),style:et.searchInput})}),t.length===0?m.jsx("div",{style:et.noTemplates,children:i?"No templates found matching your search.":"No community templates available."}):m.jsx("div",{style:et.templateGrid,children:t.map(a=>m.jsxs("div",{style:et.templateCard,children:[m.jsx("div",{style:et.templateName,children:a.name}),a.description&&m.jsx("div",{style:et.templateDescription,children:a.description}),a.tags&&a.tags.length>0&&m.jsx("div",{style:et.tagsContainer,children:a.tags.map((l,c)=>m.jsx("span",{style:et.tag,children:l},c))}),m.jsxs("div",{style:et.templateMeta,children:[m.jsx("div",{style:et.templateType,children:a.type.charAt(0).toUpperCase()+a.type.slice(1)}),a.specialty&&m.jsx("div",{children:a.specialty})]})]},a.id))})]})})}function ho({children:t}){const{user:e,loading:n,error:r}=Dn(),i=An(),[o,s]=y.useState(!0);return console.log("ProtectedRoute state:",{isAuthenticated:!!e,userId:e==null?void 0:e.id,isLoading:n,hasError:!!r,errorMessage:r,path:i.pathname,isInitialLoad:o}),y.useEffect(()=>{!n&&o&&s(!1)},[n]),n||o?m.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,height:"100vh",width:"100vw",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"#f3f4f6",flexDirection:"column",gap:"12px",zIndex:9999},children:[m.jsx("div",{style:{width:"48px",height:"48px",border:"4px solid #e5e7eb",borderTopColor:"#3b82f6",borderRadius:"50%",animation:"spin 1s linear infinite"}}),m.jsx("div",{style:{fontSize:"16px",color:"#4b5563",marginTop:"16px"},children:"Loading..."}),m.jsx("style",{children:`
          @keyframes spin {
            to {
              transform: rotate(360deg);
            }
          }
        `})]}):(r&&console.error("ProtectedRoute error:",r),e?(console.log("ProtectedRoute: User authenticated, rendering protected content"),m.jsx(m.Fragment,{children:t})):(console.log("ProtectedRoute: No user found, redirecting to login"),m.jsx(qd,{to:"/login",state:{from:i},replace:!0})))}const Vn={container:{flex:1,overflowY:"auto"},dateGroup:{display:"flex",flexDirection:"column",gap:"1px"},dateHeader:{fontSize:"13px",fontWeight:"600",color:"#374151",padding:"0 12px 8px 12px"},visitItem:{display:"flex",flexDirection:"column",padding:"8px 12px",backgroundColor:"white",cursor:"pointer",transition:"all 0.2s ease"},selectedVisit:{backgroundColor:"#f0f9ff"},visitHeader:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"8px"},visitName:{fontSize:"14px",fontWeight:"500",color:"#111827",flex:1},visitState:{fontSize:"12px",padding:"2px 6px",borderRadius:"4px",backgroundColor:"#f3f4f6",color:"#374151",textTransform:"capitalize",flexShrink:0},visitTime:{fontSize:"12px",color:"#6b7280",marginTop:"2px"},loadingContainer:{display:"flex",justifyContent:"center",alignItems:"center",height:"100px",color:"#6b7280"}},CH=y.memo(function({visit:e,isSelected:n,onSelect:r}){const i=e.patient_id||e.name||"Untitled",o=new Date(e.started_at).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"});return m.jsxs("div",{style:{...Vn.visitItem,...n?Vn.selectedVisit:{}},onClick:()=>r(e),children:[m.jsxs("div",{style:Vn.visitHeader,children:[m.jsx("div",{style:Vn.visitName,children:i}),m.jsx("div",{style:Vn.visitState,children:e.state})]}),m.jsx("div",{style:Vn.visitTime,children:o})]})});function kH({visits:t,onVisitSelect:e,selectedVisitId:n,onContinueRecording:r}){const{user:i}=Dn(),[o,s]=y.useState(!0),a=y.useCallback(u=>{u.state==="paused"&&r?r(u):e==null||e(u)},[r,e]),l=y.useMemo(()=>t.reduce((u,d)=>{const f=new Date(d.started_at).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"});return u[f]||(u[f]=[]),u[f].push(d),u},{}),[t]);if(y.useEffect(()=>{i!=null&&i.id&&s(t.length===0)},[i==null?void 0:i.id,t.length]),!(i!=null&&i.id)||o)return m.jsx("div",{style:Vn.container,children:m.jsx("div",{style:Vn.loadingContainer,children:o?"Your visits will appear here":"Loading..."})});const c=Object.keys(l).sort((u,d)=>new Date(d).getTime()-new Date(u).getTime());return m.jsx("div",{style:Vn.container,children:c.map(u=>m.jsxs("div",{style:Vn.dateGroup,children:[m.jsx("div",{style:Vn.dateHeader,children:u}),l[u].sort((d,f)=>new Date(f.started_at).getTime()-new Date(d.started_at).getTime()).map(d=>m.jsx(CH,{visit:d,isSelected:d.id===n,onSelect:a},d.id))]},u))})}const EH=({user:t,onSignOut:e})=>{const n=Cr();return m.jsx("div",{style:St.userSection,children:m.jsxs(bh,{children:[m.jsx(Sh,{asChild:!0,children:m.jsxs("button",{style:St.userButton,children:[m.jsxs("div",{style:St.userInfo,children:[m.jsx("span",{style:St.userName,children:t!=null&&t.name?`${t.name}`:"User"}),m.jsx("span",{style:St.userEmail,children:t==null?void 0:t.email})]}),m.jsx(Zv,{style:St.chevronIcon})]})}),m.jsx(Ch,{children:m.jsxs(kh,{style:St.dropdownContent,sideOffset:5,align:"start",children:[m.jsx(Ir,{asChild:!0,children:m.jsx("button",{style:St.dropdownItem,onClick:()=>n("/profile"),children:"Profile"})}),m.jsx(Ir,{asChild:!0,children:m.jsx("button",{style:St.dropdownItem,onClick:()=>n("/settings"),children:"Settings"})}),m.jsx(Ir,{asChild:!0,children:m.jsx("button",{style:St.dropdownItem,onClick:()=>n("/group"),children:"Group Settings"})}),m.jsx(y1,{style:St.dropdownSeparator}),m.jsx(Ir,{asChild:!0,children:m.jsx("button",{style:St.dropdownItem,onClick:()=>n("/my-templates"),children:"My Templates"})}),m.jsx(Ir,{asChild:!0,children:m.jsx("button",{style:St.dropdownItem,onClick:()=>n("/community-templates"),children:"Community Templates"})}),m.jsx(y1,{style:St.dropdownSeparator}),m.jsx(Ir,{asChild:!0,children:m.jsx("button",{style:St.dropdownItem,onClick:e,children:"Logout"})})]})})]})})},St={userSection:{padding:"12px",borderTop:"1px solid #eaeaea"},userButton:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",padding:"8px",border:"none",borderRadius:"6px",background:"transparent",cursor:"pointer",":hover":{backgroundColor:"#f5f5f5"}},userInfo:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"2px"},userName:{fontSize:"14px",fontWeight:500},userEmail:{fontSize:"12px",color:"#666"},chevronIcon:{width:"16px",height:"16px",color:"#666"},dropdownContent:{maxWidth:"280px",backgroundColor:"white",borderRadius:"6px",padding:"4px",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.1)"},dropdownItem:{width:"100%",border:"none",borderRadius:"4px",padding:"8px 12px",fontSize:"14px",textAlign:"left",backgroundColor:"transparent",cursor:"pointer",":hover":{backgroundColor:"#f5f5f5"}},dropdownSeparator:{height:"1px",backgroundColor:"#eaeaea",margin:"4px 0"}},Zp={sidebar:{width:"240px",backgroundColor:"#f9fafb",display:"flex",flexDirection:"column",overflow:"hidden"},userSection:{padding:"12px"},userButton:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px",backgroundColor:"transparent",border:"none",cursor:"pointer",transition:"all 0.2s ease","&:hover":{backgroundColor:"#f3f4f6"}},userInfo:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1},userName:{fontSize:"14px",fontWeight:"500",color:"#111827"},userEmail:{fontSize:"12px",color:"#6b7280",marginTop:"2px"},chevronIcon:{color:"#9ca3af",width:"12px",height:"12px",marginLeft:"8px",flexShrink:0},dropdownContent:{minWidth:"200px",backgroundColor:"white",borderRadius:"8px",padding:"6px",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",border:"1px solid #e5e7eb"},dropdownItem:{fontSize:"14px",padding:"8px 12px",borderRadius:"6px",cursor:"pointer",color:"#374151",display:"block",width:"100%",textAlign:"left",border:"none",backgroundColor:"transparent",transition:"all 0.2s ease","&:hover":{backgroundColor:"#f3f4f6",color:"#111827"}},dropdownSeparator:{height:"1px",backgroundColor:"#e5e7eb",margin:"6px"},newSessionButton:{display:"flex",alignItems:"center",gap:"8px",backgroundColor:"#f3f4f6",color:"#1f2937",border:"1px solid #e5e7eb",cursor:"pointer",fontSize:"14px",fontWeight:"500",marginBottom:"12px",width:"100%",justifyContent:"center",borderRadius:"0px",transition:"all 0.2s ease","&:hover":{backgroundColor:"#e5e7eb"}},visitsContainer:{flex:1,overflow:"auto"}};function TH({onNewSession:t,onVisitSelect:e,selectedVisitId:n,onContinueRecording:r,visits:i=[]}){const o=Cr(),{user:s}=Dn(),{signOut:a}=JR();console.log("[Sidebar] Render with visits:",i.length);const l=async()=>{try{await a(),o("/login")}catch(c){console.error("Error signing out:",c)}};return s?m.jsxs("div",{style:Zp.sidebar,children:[m.jsx(EH,{user:s,onSignOut:l}),m.jsx("button",{style:Zp.newSessionButton,onClick:t,children:"New Session"}),m.jsx("div",{style:Zp.visitsContainer,children:m.jsx(kH,{visits:i,onVisitSelect:e,selectedVisitId:n,onContinueRecording:r})})]}):null}const We=(...t)=>{console.log("[useRealtimeVisits]",...t)};function _H(t){const[e,n]=y.useState([]),r=y.useRef(!1),i=y.useRef(null),o=y.useRef(null),s=y.useRef([]);y.useEffect(()=>{s.current=e,We("Updated visitsRef:",e.length,"visits")},[e]),y.useEffect(()=>{if(!t||r.current)return;(async()=>{We("Fetching initial visits for user:",t);const{data:c,error:u}=await Xo.from("visits").select("*").eq("user_id",t).order("started_at",{ascending:!1});if(u){We("Error fetching initial visits:",u);return}c&&(We(`Setting initial ${c.length} visits`),n(c),s.current=c,r.current=!0)})()},[t]);const a=y.useCallback(l=>{const c=[...l].sort((u,d)=>new Date(d.started_at).getTime()-new Date(u.started_at).getTime());n(c)},[]);return y.useEffect(()=>{if(!t){We("No userId, skipping subscription");return}We("Setting up realtime subscription for user:",t),i.current&&(We("Cleaning up existing subscription"),i.current.unsubscribe(),i.current=null);const l=Xo.channel(`visits_list_${t}`).on("postgres_changes",{event:"*",schema:"public",table:"visits",filter:`user_id=eq.${t}`},c=>{const u=new Date().toISOString(),d=o.current?new Date(u).getTime()-new Date(o.current).getTime():null;switch(We("Received realtime event:",c.eventType,{...c,timeSinceLastUpdate:d?`${d}ms`:"first update",currentVisitsCount:s.current.length}),o.current=u,c.eventType){case qn.INSERT:{const f=c.new;if(We("Processing insert for visit:",f.id),s.current.some(p=>p.id===f.id)){We("Visit already exists, skipping insert:",f.id);return}const h=[f,...s.current];We(`Updating visits after insert: ${h.length} visits`),a(h);break}case qn.UPDATE:{const f=c.new;We("Processing update for visit:",f.id);const h=s.current.map(p=>p.id===f.id?f:p);We(`Updating visits after update: ${h.length} visits`),a(h);break}case qn.DELETE:{const f=c.old;We("Processing delete for visit:",f.id);const h=s.current.filter(p=>p.id!==f.id);We(`Updating visits after delete: ${h.length} visits`),a(h);break}}}).subscribe(c=>{We("Subscription status:",c)});return i.current=l,()=>{We("Cleaning up subscription in effect cleanup"),l.unsubscribe(),i.current=null}},[t,a]),y.useEffect(()=>{We("Visits state updated:",e.length,"visits")},[e]),e}function em({title:t,children:e}){const[n,r]=y.useState(!1);return m.jsxs("div",{className:"border border-gray-200 rounded-md mb-4",children:[m.jsxs("button",{onClick:()=>r(!n),className:"w-full px-4 py-3 flex items-center justify-between bg-gray-50 hover:bg-gray-100 transition-colors rounded-t-md",children:[m.jsx("h3",{className:"text-sm font-medium text-gray-700",children:t}),n?m.jsx(E_,{className:"h-4 w-4 text-gray-500"}):m.jsx(n5,{className:"h-4 w-4 text-gray-500"})]}),n&&m.jsx("div",{className:"p-4 bg-white rounded-b-md",children:e})]})}function RH({onClick:t,icon:e,label:n,loading:r=!1,disabled:i=!1}){return m.jsxs("button",{onClick:t,disabled:r||i,className:`
        flex items-center gap-2 px-3 py-2 text-sm 
        ${i?"bg-gray-100 text-gray-400":"bg-gray-50 text-gray-700 hover:bg-gray-100"} 
        rounded-md transition-colors
        ${r?"cursor-not-allowed":""}
      `,children:[r?m.jsx(T_,{className:"h-4 w-4 animate-spin"}):e,n]})}function OH(){const[t,e]=lD();Dn();const n=He(),[r,i]=y.useState(t.get("visitId")||""),[o,s]=y.useState(null),[a,l]=y.useState(null),[c,u]=y.useState([]),[d,f]=y.useState([]),[h,p]=y.useState([]),{getValidSessionToken:g}=s0(),[x,v]=y.useState(!1);y.useEffect(()=>{const T=t.get("visitId");T&&(i(T),w(T))},[]);const w=async T=>{const D=T||r;if(D.trim()){l(null);try{const{data:j,error:z}=await n.from("visits").select("*").eq("id",D.trim()).single();if(z)throw z;s(j),e({visitId:D.trim()}),await S(D.trim())}catch(j){console.error("Error fetching visit:",j),l("Visit not found"),s(null),e({}),u([]),f([]),p([])}}},S=async T=>{try{const{data:D,error:j}=await n.from("transcripts").select("*").eq("visit_id",T).order("created_at",{ascending:!1});if(j)throw j;u(D||[]);const{data:z,error:I}=await n.from("containers").select("*").eq("visit_id",T).order("chunk_id",{ascending:!0});if(I)throw I;f(z||[]);const{data:U,error:F}=await n.from("notes").select("*").eq("visit_id",T).order("created_at",{ascending:!1});if(F)throw F;p(U||[])}catch(D){console.error("Error loading visit data:",D),l("Failed to load visit data")}},b=async()=>{if(!(!(o!=null&&o.id)||x))try{v(!0);const T=await g(),D=await fetch(`${Wi.apiUrl}/admin/regenerate-visit`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${T}`},body:JSON.stringify({visitId:o.id})});if(!D.ok){const j=await D.json();throw new Error(j.error||"Failed to regenerate visit")}await S(o.id)}catch(T){console.error("Error regenerating visit:",T),l("Failed to regenerate visit")}finally{v(!1)}},C=()=>m.jsx("div",{className:"bg-white rounded-lg shadow-sm mb-6",children:m.jsxs("div",{className:"p-6",children:[m.jsx("div",{className:"flex items-center justify-between mb-6",children:m.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Visit Details"})}),m.jsxs("dl",{className:"grid grid-cols-2 gap-6",children:[m.jsxs("div",{children:[m.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"ID"}),m.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:o.id})]}),m.jsxs("div",{children:[m.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Created At"}),m.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:new Date(o.created_at).toLocaleString()})]}),m.jsxs("div",{children:[m.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Patient ID"}),m.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:o.patient_id||"No patient assigned"})]}),m.jsxs("div",{children:[m.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"State"}),m.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:o.state})]})]})]})}),k=()=>m.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-6",children:m.jsx("div",{className:"flex items-center gap-4",children:m.jsx(RH,{onClick:b,icon:m.jsx(T_,{className:"h-4 w-4"}),label:"Regenerate SOAP Note",loading:x,disabled:!(o!=null&&o.id)})})}),E=()=>m.jsx(em,{title:`Transcripts (${c.length})`,children:m.jsx("div",{className:"space-y-4",children:c.map(T=>m.jsxs("div",{className:"border border-gray-200 rounded p-3",children:[m.jsxs("div",{className:"flex justify-between mb-2",children:[m.jsx("span",{className:"text-xs text-gray-500",children:new Date(T.created_at).toLocaleString()}),m.jsxs("span",{className:"text-xs text-gray-500",children:["ID: ",T.id]})]}),m.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:T.full_text})]},T.id))})}),_=()=>m.jsx(em,{title:`Container Fragments (${d.length})`,children:m.jsx("div",{className:"space-y-4",children:d.map(T=>m.jsxs("div",{className:"border border-gray-200 rounded p-3",children:[m.jsxs("div",{className:"flex justify-between mb-2",children:[m.jsxs("span",{className:"text-xs text-gray-500",children:["Chunk ",T.chunk_id,"  ",T.state]}),m.jsx("span",{className:"text-xs text-gray-500",children:new Date(T.created_at).toLocaleString()})]}),m.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:T.text})]},T.id))})}),O=()=>m.jsx(em,{title:`Notes (${h.length})`,children:m.jsx("div",{className:"space-y-4",children:h.map(T=>m.jsxs("div",{className:"border border-gray-200 rounded p-3",children:[m.jsxs("div",{className:"flex justify-between mb-2",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"text-xs font-medium text-gray-700",children:T.type}),T.version_id&&m.jsxs("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-0.5 rounded",children:["v",T.version_id]}),T.template_id&&m.jsx("span",{className:"text-xs text-gray-500",children:"Template"})]}),m.jsx("span",{className:"text-xs text-gray-500",children:new Date(T.created_at).toLocaleString()})]}),m.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:T.content}),T.metadata&&Object.keys(T.metadata).length>0&&m.jsx("div",{className:"mt-2 pt-2 border-t border-gray-200",children:m.jsxs("details",{children:[m.jsx("summary",{className:"text-xs text-gray-500 cursor-pointer",children:"Metadata"}),m.jsx("pre",{className:"mt-2 text-xs text-gray-600 overflow-auto",children:JSON.stringify(T.metadata,null,2)})]})})]},T.id))})});return m.jsxs("div",{className:"h-screen bg-gray-50 flex",children:[m.jsxs("div",{className:"w-80 bg-white border-r border-gray-200 p-6 flex flex-col gap-6",children:[m.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Admin Tools"}),m.jsxs("div",{className:"flex flex-col gap-2",children:[m.jsx("h2",{className:"text-sm font-medium text-gray-700",children:"Visit Search"}),m.jsx("input",{type:"text",value:r,onChange:T=>i(T.target.value),placeholder:"Enter Visit ID",className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),m.jsx("button",{onClick:()=>w(),className:"w-full px-3 py-2 text-sm bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors",children:"Search"})]}),m.jsxs("div",{className:"flex flex-col gap-2",children:[m.jsx("h2",{className:"text-sm font-medium text-gray-700",children:"Actions"}),m.jsx("button",{className:"w-full px-3 py-2 text-sm text-gray-700 bg-gray-50 hover:bg-gray-100 rounded-md text-left transition-colors",children:"Future Action 1"}),m.jsx("button",{className:"w-full px-3 py-2 text-sm text-gray-700 bg-gray-50 hover:bg-gray-100 rounded-md text-left transition-colors",children:"Future Action 2"})]})]}),m.jsxs("div",{className:"flex-1 p-6 overflow-auto",children:[a&&m.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 mb-6",children:m.jsx("p",{className:"text-sm text-red-600",children:a})}),o&&m.jsxs(m.Fragment,{children:[C(),k(),E(),_(),O()]})]})]})}const PH=["test@localhost"];function MH({children:t}){const{user:e,loading:n}=Dn();return n?m.jsx("div",{children:"Loading..."}):!e||!PH.includes(e.email||"")?m.jsx(qd,{to:"/record",replace:!0}):m.jsx(m.Fragment,{children:t})}const tm={container:{height:"100vh",width:"100vw",display:"flex",flexDirection:"column",backgroundColor:"#f3f4f6"},mainContent:{flex:1,display:"flex",flexDirection:"row",overflow:"hidden"},content:{flex:1,display:"flex",flexDirection:"column",alignItems:"flex-start",overflow:"hidden"}};function Os(){const t=Cr(),{visitId:e}=gA(),n=An(),[r,i]=y.useState(null),[o,s]=y.useState(null),[a,l]=y.useState(!1),[c,u]=y.useState(!1),{user:d,loading:f,error:h}=Dn(),p=He();console.log("MainContent rendering:",{path:n.pathname,userId:d==null?void 0:d.id,isLoading:f,hasError:!!h,visitId:e,selectedVisitId:r==null?void 0:r.id});let g=[];try{g=_H((d==null?void 0:d.id)||""),console.log("Visits loaded:",g.length)}catch(C){console.error("Error loading visits:",C)}const x=y.useCallback((C,k=!1)=>{l(C),u(k)},[]);y.useEffect(()=>{e&&n.pathname.startsWith("/visit/")&&(async()=>{try{const{data:k,error:E}=await p.from("visits").select("*, patient_profiles(id, name, medical_record_number)").eq("id",e).single();if(E)throw E;k&&(i(k),s(k.patient_id))}catch(k){console.error("Error loading visit:",k)}})()},[e,n.pathname,p]),y.useEffect(()=>{n.pathname==="/record"&&(i(null),s(null))},[n.pathname]);const v=C=>{t(`/visit/${C.id}`)},w=()=>{i(null),s(null),t("/record")},S=async C=>{if(s(C),r!=null&&r.id)try{const{error:k}=await p.from("visits").update({patient_id:C}).eq("id",r.id);if(k)throw k}catch(k){console.error("Error updating visit with patient:",k)}},b=C=>{if(C.state!=="paused")return;(async()=>{var E;try{const{data:_,error:O}=await p.from("containers").select("chunk_id").eq("visit_id",C.id).order("chunk_id",{ascending:!1}).limit(1);if(O)throw O;return((E=_==null?void 0:_[0])==null?void 0:E.chunk_id)??-1}catch(_){return console.error("Error getting last chunk ID:",_),-1}})().then(E=>{i(C),t(`/visit/${C.id}`,{state:{visitId:C.id,lastChunkId:E,state:"paused",isRecordingEnabled:!0}})})};return f?m.jsx("div",{style:{height:"100vh",width:"100vw",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"#f3f4f6"},children:m.jsx("div",{children:"Loading..."})}):h?m.jsxs("div",{children:["Error loading user profile: ",h]}):m.jsx("div",{style:tm.container,children:m.jsxs("div",{style:tm.mainContent,children:[m.jsx(TH,{onNewSession:w,onVisitSelect:v,selectedVisitId:r==null?void 0:r.id,onContinueRecording:b,visits:g}),m.jsx("div",{style:tm.content,children:n.pathname==="/profile"?m.jsx(yH,{}):n.pathname==="/settings"?m.jsx(wH,{}):n.pathname==="/my-templates"?m.jsx(bH,{}):n.pathname==="/community-templates"?m.jsx(SH,{}):m.jsx(dH,{isTranscribing:a&&!c,placeholder:a?c?"Recording paused...":"Your transcription will appear here as you speak...":r?"Loading visit transcription...":"Select a visit or start a new recording session",visitId:r==null?void 0:r.id,onRecordingStateChange:x,onPatientSelect:S,selectedPatientId:o,visits:g})})]})})}const AH=new gk({defaultOptions:{queries:{retry:1,refetchOnWindowFocus:!1}}});function DH(){return m.jsx(xk,{client:AH,children:m.jsx(pH,{children:m.jsx(DV,{children:m.jsxs(MA,{children:[m.jsx(hn,{path:"/login",element:m.jsx(hH,{})}),m.jsx(hn,{path:"/signup",element:m.jsx(mH,{})}),m.jsx(hn,{path:"/",element:m.jsx(qd,{to:"/record",replace:!0})}),m.jsx(hn,{path:"*",element:m.jsx(qd,{to:"/record",replace:!0})}),m.jsx(hn,{path:"/record",element:m.jsx(ho,{children:m.jsx(Os,{})})}),m.jsx(hn,{path:"/visit/:visitId",element:m.jsx(ho,{children:m.jsx(Os,{})})}),m.jsx(hn,{path:"/profile",element:m.jsx(ho,{children:m.jsx(Os,{})})}),m.jsx(hn,{path:"/settings",element:m.jsx(ho,{children:m.jsx(Os,{})})}),m.jsx(hn,{path:"/my-templates",element:m.jsx(ho,{children:m.jsx(Os,{})})}),m.jsx(hn,{path:"/community-templates",element:m.jsx(ho,{children:m.jsx(Os,{})})}),m.jsx(hn,{path:"/admin",element:m.jsx(ho,{children:m.jsx(MH,{children:m.jsx(OH,{})})})})]})})})})}const IH=new gk({defaultOptions:{queries:{retry:1,refetchOnWindowFocus:!1}}});nm.createRoot(document.getElementById("root")).render(m.jsx(we.StrictMode,{children:m.jsx(xk,{client:IH,children:m.jsx(QN,{children:m.jsx(rD,{children:m.jsx(DH,{})})})})}));export{N1 as g};
