var np=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var T=(t,e,n)=>(np(t,e,"read from private field"),n?n.call(t):e.get(t)),J=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},W=(t,e,n,r)=>(np(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n);var Du=(t,e,n,r)=>({set _(i){W(t,e,i,n)},get _(){return T(t,e,r)}}),oe=(t,e,n)=>(np(t,e,"access private method"),n);function qO(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var Pn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function GO(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var hS={exports:{}},Jf={},pS={exports:{}},le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iu=Symbol.for("react.element"),JO=Symbol.for("react.portal"),YO=Symbol.for("react.fragment"),QO=Symbol.for("react.strict_mode"),XO=Symbol.for("react.profiler"),ZO=Symbol.for("react.provider"),eP=Symbol.for("react.context"),tP=Symbol.for("react.forward_ref"),nP=Symbol.for("react.suspense"),rP=Symbol.for("react.memo"),iP=Symbol.for("react.lazy"),lx=Symbol.iterator;function oP(t){return t===null||typeof t!="object"?null:(t=lx&&t[lx]||t["@@iterator"],typeof t=="function"?t:null)}var mS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},gS=Object.assign,yS={};function tl(t,e,n){this.props=t,this.context=e,this.refs=yS,this.updater=n||mS}tl.prototype.isReactComponent={};tl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};tl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function vS(){}vS.prototype=tl.prototype;function Iy(t,e,n){this.props=t,this.context=e,this.refs=yS,this.updater=n||mS}var jy=Iy.prototype=new vS;jy.constructor=Iy;gS(jy,tl.prototype);jy.isPureReactComponent=!0;var cx=Array.isArray,xS=Object.prototype.hasOwnProperty,Ly={current:null},wS={key:!0,ref:!0,__self:!0,__source:!0};function bS(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)xS.call(e,r)&&!wS.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:iu,type:t,key:o,ref:s,props:i,_owner:Ly.current}}function sP(t,e){return{$$typeof:iu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function $y(t){return typeof t=="object"&&t!==null&&t.$$typeof===iu}function aP(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ux=/\/+/g;function rp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?aP(""+t.key):e.toString(36)}function kd(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case iu:case JO:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+rp(s,0):r,cx(i)?(n="",t!=null&&(n=t.replace(ux,"$&/")+"/"),kd(i,e,n,"",function(c){return c})):i!=null&&($y(i)&&(i=sP(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(ux,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",cx(t))for(var a=0;a<t.length;a++){o=t[a];var l=r+rp(o,a);s+=kd(o,e,n,l,i)}else if(l=oP(t),typeof l=="function")for(t=l.call(t),a=0;!(o=t.next()).done;)o=o.value,l=r+rp(o,a++),s+=kd(o,e,n,l,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function Nu(t,e,n){if(t==null)return t;var r=[],i=0;return kd(t,r,"","",function(o){return e.call(n,o,i++)}),r}function lP(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Nt={current:null},Ed={transition:null},cP={ReactCurrentDispatcher:Nt,ReactCurrentBatchConfig:Ed,ReactCurrentOwner:Ly};function SS(){throw Error("act(...) is not supported in production builds of React.")}le.Children={map:Nu,forEach:function(t,e,n){Nu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Nu(t,function(){e++}),e},toArray:function(t){return Nu(t,function(e){return e})||[]},only:function(t){if(!$y(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};le.Component=tl;le.Fragment=YO;le.Profiler=XO;le.PureComponent=Iy;le.StrictMode=QO;le.Suspense=nP;le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cP;le.act=SS;le.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=gS({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=Ly.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)xS.call(e,l)&&!wS.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:iu,type:t.type,key:i,ref:o,props:r,_owner:s}};le.createContext=function(t){return t={$$typeof:eP,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:ZO,_context:t},t.Consumer=t};le.createElement=bS;le.createFactory=function(t){var e=bS.bind(null,t);return e.type=t,e};le.createRef=function(){return{current:null}};le.forwardRef=function(t){return{$$typeof:tP,render:t}};le.isValidElement=$y;le.lazy=function(t){return{$$typeof:iP,_payload:{_status:-1,_result:t},_init:lP}};le.memo=function(t,e){return{$$typeof:rP,type:t,compare:e===void 0?null:e}};le.startTransition=function(t){var e=Ed.transition;Ed.transition={};try{t()}finally{Ed.transition=e}};le.unstable_act=SS;le.useCallback=function(t,e){return Nt.current.useCallback(t,e)};le.useContext=function(t){return Nt.current.useContext(t)};le.useDebugValue=function(){};le.useDeferredValue=function(t){return Nt.current.useDeferredValue(t)};le.useEffect=function(t,e){return Nt.current.useEffect(t,e)};le.useId=function(){return Nt.current.useId()};le.useImperativeHandle=function(t,e,n){return Nt.current.useImperativeHandle(t,e,n)};le.useInsertionEffect=function(t,e){return Nt.current.useInsertionEffect(t,e)};le.useLayoutEffect=function(t,e){return Nt.current.useLayoutEffect(t,e)};le.useMemo=function(t,e){return Nt.current.useMemo(t,e)};le.useReducer=function(t,e,n){return Nt.current.useReducer(t,e,n)};le.useRef=function(t){return Nt.current.useRef(t)};le.useState=function(t){return Nt.current.useState(t)};le.useSyncExternalStore=function(t,e,n){return Nt.current.useSyncExternalStore(t,e,n)};le.useTransition=function(){return Nt.current.useTransition()};le.version="18.3.1";pS.exports=le;var y=pS.exports;const ve=fS(y),uP=qO({__proto__:null,default:ve},[y]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dP=y,fP=Symbol.for("react.element"),hP=Symbol.for("react.fragment"),pP=Object.prototype.hasOwnProperty,mP=dP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,gP={key:!0,ref:!0,__self:!0,__source:!0};function CS(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)pP.call(e,r)&&!gP.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:fP,type:t,key:o,ref:s,props:i,_owner:mP.current}}Jf.Fragment=hP;Jf.jsx=CS;Jf.jsxs=CS;hS.exports=Jf;var h=hS.exports;window.global=window;var Rm={},kS={exports:{}},hn={},ES={exports:{}},TS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(M,D){var B=M.length;M.push(D);e:for(;0<B;){var Q=B-1>>>1,U=M[Q];if(0<i(U,D))M[Q]=D,M[B]=U,B=Q;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var D=M[0],B=M.pop();if(B!==D){M[0]=B;e:for(var Q=0,U=M.length,ee=U>>>1;Q<ee;){var he=2*(Q+1)-1,_e=M[he],Ce=he+1,je=M[Ce];if(0>i(_e,B))Ce<U&&0>i(je,_e)?(M[Q]=je,M[Ce]=B,Q=Ce):(M[Q]=_e,M[he]=B,Q=he);else if(Ce<U&&0>i(je,B))M[Q]=je,M[Ce]=B,Q=Ce;else break e}}return D}function i(M,D){var B=M.sortIndex-D.sortIndex;return B!==0?B:M.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var l=[],c=[],u=1,d=null,f=3,p=!1,m=!1,g=!1,x=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(M){for(var D=n(c);D!==null;){if(D.callback===null)r(c);else if(D.startTime<=M)r(c),D.sortIndex=D.expirationTime,e(l,D);else break;D=n(c)}}function b(M){if(g=!1,S(M),!m)if(n(l)!==null)m=!0,$(C);else{var D=n(c);D!==null&&H(b,D.startTime-M)}}function C(M,D){m=!1,g&&(g=!1,v(_),_=-1),p=!0;var B=f;try{for(S(D),d=n(l);d!==null&&(!(d.expirationTime>D)||M&&!N());){var Q=d.callback;if(typeof Q=="function"){d.callback=null,f=d.priorityLevel;var U=Q(d.expirationTime<=D);D=t.unstable_now(),typeof U=="function"?d.callback=U:d===n(l)&&r(l),S(D)}else r(l);d=n(l)}if(d!==null)var ee=!0;else{var he=n(c);he!==null&&H(b,he.startTime-D),ee=!1}return ee}finally{d=null,f=B,p=!1}}var k=!1,E=null,_=-1,P=5,R=-1;function N(){return!(t.unstable_now()-R<P)}function A(){if(E!==null){var M=t.unstable_now();R=M;var D=!0;try{D=E(!0,M)}finally{D?I():(k=!1,E=null)}}else k=!1}var I;if(typeof w=="function")I=function(){w(A)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,L=O.port2;O.port1.onmessage=A,I=function(){L.postMessage(null)}}else I=function(){x(A,0)};function $(M){E=M,k||(k=!0,I())}function H(M,D){_=x(function(){M(t.unstable_now())},D)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,$(C))},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(M){switch(f){case 1:case 2:case 3:var D=3;break;default:D=f}var B=f;f=D;try{return M()}finally{f=B}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(M,D){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var B=f;f=M;try{return D()}finally{f=B}},t.unstable_scheduleCallback=function(M,D,B){var Q=t.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?Q+B:Q):B=Q,M){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=B+U,M={id:u++,callback:D,priorityLevel:M,startTime:B,expirationTime:U,sortIndex:-1},B>Q?(M.sortIndex=B,e(c,M),n(l)===null&&M===n(c)&&(g?(v(_),_=-1):g=!0,H(b,B-Q))):(M.sortIndex=U,e(l,M),m||p||(m=!0,$(C))),M},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(M){var D=f;return function(){var B=f;f=D;try{return M.apply(this,arguments)}finally{f=B}}}})(TS);ES.exports=TS;var yP=ES.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vP=y,dn=yP;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _S=new Set,cc={};function ys(t,e){Na(t,e),Na(t+"Capture",e)}function Na(t,e){for(cc[t]=e,t=0;t<e.length;t++)_S.add(e[t])}var qr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Om=Object.prototype.hasOwnProperty,xP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,dx={},fx={};function wP(t){return Om.call(fx,t)?!0:Om.call(dx,t)?!1:xP.test(t)?fx[t]=!0:(dx[t]=!0,!1)}function bP(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function SP(t,e,n,r){if(e===null||typeof e>"u"||bP(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function It(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var ct={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ct[t]=new It(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ct[e]=new It(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ct[t]=new It(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ct[t]=new It(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ct[t]=new It(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ct[t]=new It(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ct[t]=new It(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ct[t]=new It(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ct[t]=new It(t,5,!1,t.toLowerCase(),null,!1,!1)});var Fy=/[\-:]([a-z])/g;function By(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Fy,By);ct[e]=new It(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Fy,By);ct[e]=new It(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Fy,By);ct[e]=new It(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ct[t]=new It(t,1,!1,t.toLowerCase(),null,!1,!1)});ct.xlinkHref=new It("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ct[t]=new It(t,1,!1,t.toLowerCase(),null,!0,!0)});function zy(t,e,n,r){var i=ct.hasOwnProperty(e)?ct[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(SP(e,n,i,r)&&(n=null),r||i===null?wP(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ei=vP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Iu=Symbol.for("react.element"),Ks=Symbol.for("react.portal"),qs=Symbol.for("react.fragment"),Uy=Symbol.for("react.strict_mode"),Pm=Symbol.for("react.profiler"),RS=Symbol.for("react.provider"),OS=Symbol.for("react.context"),Vy=Symbol.for("react.forward_ref"),Mm=Symbol.for("react.suspense"),Am=Symbol.for("react.suspense_list"),Hy=Symbol.for("react.memo"),fi=Symbol.for("react.lazy"),PS=Symbol.for("react.offscreen"),hx=Symbol.iterator;function ml(t){return t===null||typeof t!="object"?null:(t=hx&&t[hx]||t["@@iterator"],typeof t=="function"?t:null)}var Ae=Object.assign,ip;function Rl(t){if(ip===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ip=e&&e[1]||""}return`
`+ip+t}var op=!1;function sp(t,e){if(!t||op)return"";op=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var l=`
`+i[s].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=s&&0<=a);break}}}finally{op=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Rl(t):""}function CP(t){switch(t.tag){case 5:return Rl(t.type);case 16:return Rl("Lazy");case 13:return Rl("Suspense");case 19:return Rl("SuspenseList");case 0:case 2:case 15:return t=sp(t.type,!1),t;case 11:return t=sp(t.type.render,!1),t;case 1:return t=sp(t.type,!0),t;default:return""}}function Dm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case qs:return"Fragment";case Ks:return"Portal";case Pm:return"Profiler";case Uy:return"StrictMode";case Mm:return"Suspense";case Am:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case OS:return(t.displayName||"Context")+".Consumer";case RS:return(t._context.displayName||"Context")+".Provider";case Vy:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Hy:return e=t.displayName||null,e!==null?e:Dm(t.type)||"Memo";case fi:e=t._payload,t=t._init;try{return Dm(t(e))}catch{}}return null}function kP(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Dm(e);case 8:return e===Uy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Gi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function MS(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function EP(t){var e=MS(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ju(t){t._valueTracker||(t._valueTracker=EP(t))}function AS(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=MS(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function qd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Nm(t,e){var n=e.checked;return Ae({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function px(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Gi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function DS(t,e){e=e.checked,e!=null&&zy(t,"checked",e,!1)}function Im(t,e){DS(t,e);var n=Gi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?jm(t,e.type,n):e.hasOwnProperty("defaultValue")&&jm(t,e.type,Gi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function mx(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function jm(t,e,n){(e!=="number"||qd(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ol=Array.isArray;function aa(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Gi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Lm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return Ae({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function gx(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(Ol(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Gi(n)}}function NS(t,e){var n=Gi(e.value),r=Gi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function yx(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function IS(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $m(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?IS(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Lu,jS=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Lu=Lu||document.createElement("div"),Lu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Lu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function uc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Hl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},TP=["Webkit","ms","Moz","O"];Object.keys(Hl).forEach(function(t){TP.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Hl[e]=Hl[t]})});function LS(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Hl.hasOwnProperty(t)&&Hl[t]?(""+e).trim():e+"px"}function $S(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=LS(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var _P=Ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Fm(t,e){if(e){if(_P[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function Bm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zm=null;function Wy(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Um=null,la=null,ca=null;function vx(t){if(t=au(t)){if(typeof Um!="function")throw Error(z(280));var e=t.stateNode;e&&(e=eh(e),Um(t.stateNode,t.type,e))}}function FS(t){la?ca?ca.push(t):ca=[t]:la=t}function BS(){if(la){var t=la,e=ca;if(ca=la=null,vx(t),e)for(t=0;t<e.length;t++)vx(e[t])}}function zS(t,e){return t(e)}function US(){}var ap=!1;function VS(t,e,n){if(ap)return t(e,n);ap=!0;try{return zS(t,e,n)}finally{ap=!1,(la!==null||ca!==null)&&(US(),BS())}}function dc(t,e){var n=t.stateNode;if(n===null)return null;var r=eh(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var Vm=!1;if(qr)try{var gl={};Object.defineProperty(gl,"passive",{get:function(){Vm=!0}}),window.addEventListener("test",gl,gl),window.removeEventListener("test",gl,gl)}catch{Vm=!1}function RP(t,e,n,r,i,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Wl=!1,Gd=null,Jd=!1,Hm=null,OP={onError:function(t){Wl=!0,Gd=t}};function PP(t,e,n,r,i,o,s,a,l){Wl=!1,Gd=null,RP.apply(OP,arguments)}function MP(t,e,n,r,i,o,s,a,l){if(PP.apply(this,arguments),Wl){if(Wl){var c=Gd;Wl=!1,Gd=null}else throw Error(z(198));Jd||(Jd=!0,Hm=c)}}function vs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function HS(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function xx(t){if(vs(t)!==t)throw Error(z(188))}function AP(t){var e=t.alternate;if(!e){if(e=vs(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return xx(i),t;if(o===r)return xx(i),e;o=o.sibling}throw Error(z(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function WS(t){return t=AP(t),t!==null?KS(t):null}function KS(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=KS(t);if(e!==null)return e;t=t.sibling}return null}var qS=dn.unstable_scheduleCallback,wx=dn.unstable_cancelCallback,DP=dn.unstable_shouldYield,NP=dn.unstable_requestPaint,$e=dn.unstable_now,IP=dn.unstable_getCurrentPriorityLevel,Ky=dn.unstable_ImmediatePriority,GS=dn.unstable_UserBlockingPriority,Yd=dn.unstable_NormalPriority,jP=dn.unstable_LowPriority,JS=dn.unstable_IdlePriority,Yf=null,wr=null;function LP(t){if(wr&&typeof wr.onCommitFiberRoot=="function")try{wr.onCommitFiberRoot(Yf,t,void 0,(t.current.flags&128)===128)}catch{}}var Gn=Math.clz32?Math.clz32:BP,$P=Math.log,FP=Math.LN2;function BP(t){return t>>>=0,t===0?32:31-($P(t)/FP|0)|0}var $u=64,Fu=4194304;function Pl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Qd(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var a=s&~i;a!==0?r=Pl(a):(o&=s,o!==0&&(r=Pl(o)))}else s=n&~i,s!==0?r=Pl(s):o!==0&&(r=Pl(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Gn(e),i=1<<n,r|=t[n],e&=~i;return r}function zP(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function UP(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-Gn(o),a=1<<s,l=i[s];l===-1?(!(a&n)||a&r)&&(i[s]=zP(a,e)):l<=e&&(t.expiredLanes|=a),o&=~a}}function Wm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function YS(){var t=$u;return $u<<=1,!($u&4194240)&&($u=64),t}function lp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ou(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Gn(e),t[e]=n}function VP(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Gn(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function qy(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Gn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ge=0;function QS(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var XS,Gy,ZS,eC,tC,Km=!1,Bu=[],Ii=null,ji=null,Li=null,fc=new Map,hc=new Map,yi=[],HP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function bx(t,e){switch(t){case"focusin":case"focusout":Ii=null;break;case"dragenter":case"dragleave":ji=null;break;case"mouseover":case"mouseout":Li=null;break;case"pointerover":case"pointerout":fc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":hc.delete(e.pointerId)}}function yl(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=au(e),e!==null&&Gy(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function WP(t,e,n,r,i){switch(e){case"focusin":return Ii=yl(Ii,t,e,n,r,i),!0;case"dragenter":return ji=yl(ji,t,e,n,r,i),!0;case"mouseover":return Li=yl(Li,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return fc.set(o,yl(fc.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,hc.set(o,yl(hc.get(o)||null,t,e,n,r,i)),!0}return!1}function nC(t){var e=Mo(t.target);if(e!==null){var n=vs(e);if(n!==null){if(e=n.tag,e===13){if(e=HS(n),e!==null){t.blockedOn=e,tC(t.priority,function(){ZS(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Td(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=qm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);zm=r,n.target.dispatchEvent(r),zm=null}else return e=au(n),e!==null&&Gy(e),t.blockedOn=n,!1;e.shift()}return!0}function Sx(t,e,n){Td(t)&&n.delete(e)}function KP(){Km=!1,Ii!==null&&Td(Ii)&&(Ii=null),ji!==null&&Td(ji)&&(ji=null),Li!==null&&Td(Li)&&(Li=null),fc.forEach(Sx),hc.forEach(Sx)}function vl(t,e){t.blockedOn===e&&(t.blockedOn=null,Km||(Km=!0,dn.unstable_scheduleCallback(dn.unstable_NormalPriority,KP)))}function pc(t){function e(i){return vl(i,t)}if(0<Bu.length){vl(Bu[0],t);for(var n=1;n<Bu.length;n++){var r=Bu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ii!==null&&vl(Ii,t),ji!==null&&vl(ji,t),Li!==null&&vl(Li,t),fc.forEach(e),hc.forEach(e),n=0;n<yi.length;n++)r=yi[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<yi.length&&(n=yi[0],n.blockedOn===null);)nC(n),n.blockedOn===null&&yi.shift()}var ua=ei.ReactCurrentBatchConfig,Xd=!0;function qP(t,e,n,r){var i=ge,o=ua.transition;ua.transition=null;try{ge=1,Jy(t,e,n,r)}finally{ge=i,ua.transition=o}}function GP(t,e,n,r){var i=ge,o=ua.transition;ua.transition=null;try{ge=4,Jy(t,e,n,r)}finally{ge=i,ua.transition=o}}function Jy(t,e,n,r){if(Xd){var i=qm(t,e,n,r);if(i===null)vp(t,e,r,Zd,n),bx(t,r);else if(WP(i,t,e,n,r))r.stopPropagation();else if(bx(t,r),e&4&&-1<HP.indexOf(t)){for(;i!==null;){var o=au(i);if(o!==null&&XS(o),o=qm(t,e,n,r),o===null&&vp(t,e,r,Zd,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else vp(t,e,r,null,n)}}var Zd=null;function qm(t,e,n,r){if(Zd=null,t=Wy(r),t=Mo(t),t!==null)if(e=vs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=HS(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Zd=t,null}function rC(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(IP()){case Ky:return 1;case GS:return 4;case Yd:case jP:return 16;case JS:return 536870912;default:return 16}default:return 16}}var Pi=null,Yy=null,_d=null;function iC(){if(_d)return _d;var t,e=Yy,n=e.length,r,i="value"in Pi?Pi.value:Pi.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return _d=i.slice(t,1<r?1-r:void 0)}function Rd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function zu(){return!0}function Cx(){return!1}function pn(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?zu:Cx,this.isPropagationStopped=Cx,this}return Ae(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=zu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=zu)},persist:function(){},isPersistent:zu}),e}var nl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qy=pn(nl),su=Ae({},nl,{view:0,detail:0}),JP=pn(su),cp,up,xl,Qf=Ae({},su,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xy,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==xl&&(xl&&t.type==="mousemove"?(cp=t.screenX-xl.screenX,up=t.screenY-xl.screenY):up=cp=0,xl=t),cp)},movementY:function(t){return"movementY"in t?t.movementY:up}}),kx=pn(Qf),YP=Ae({},Qf,{dataTransfer:0}),QP=pn(YP),XP=Ae({},su,{relatedTarget:0}),dp=pn(XP),ZP=Ae({},nl,{animationName:0,elapsedTime:0,pseudoElement:0}),eM=pn(ZP),tM=Ae({},nl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),nM=pn(tM),rM=Ae({},nl,{data:0}),Ex=pn(rM),iM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},oM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function aM(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=sM[t])?!!e[t]:!1}function Xy(){return aM}var lM=Ae({},su,{key:function(t){if(t.key){var e=iM[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Rd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?oM[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xy,charCode:function(t){return t.type==="keypress"?Rd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Rd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),cM=pn(lM),uM=Ae({},Qf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tx=pn(uM),dM=Ae({},su,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xy}),fM=pn(dM),hM=Ae({},nl,{propertyName:0,elapsedTime:0,pseudoElement:0}),pM=pn(hM),mM=Ae({},Qf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),gM=pn(mM),yM=[9,13,27,32],Zy=qr&&"CompositionEvent"in window,Kl=null;qr&&"documentMode"in document&&(Kl=document.documentMode);var vM=qr&&"TextEvent"in window&&!Kl,oC=qr&&(!Zy||Kl&&8<Kl&&11>=Kl),_x=String.fromCharCode(32),Rx=!1;function sC(t,e){switch(t){case"keyup":return yM.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function aC(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Gs=!1;function xM(t,e){switch(t){case"compositionend":return aC(e);case"keypress":return e.which!==32?null:(Rx=!0,_x);case"textInput":return t=e.data,t===_x&&Rx?null:t;default:return null}}function wM(t,e){if(Gs)return t==="compositionend"||!Zy&&sC(t,e)?(t=iC(),_d=Yy=Pi=null,Gs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return oC&&e.locale!=="ko"?null:e.data;default:return null}}var bM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ox(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!bM[t.type]:e==="textarea"}function lC(t,e,n,r){FS(r),e=ef(e,"onChange"),0<e.length&&(n=new Qy("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ql=null,mc=null;function SM(t){xC(t,0)}function Xf(t){var e=Qs(t);if(AS(e))return t}function CM(t,e){if(t==="change")return e}var cC=!1;if(qr){var fp;if(qr){var hp="oninput"in document;if(!hp){var Px=document.createElement("div");Px.setAttribute("oninput","return;"),hp=typeof Px.oninput=="function"}fp=hp}else fp=!1;cC=fp&&(!document.documentMode||9<document.documentMode)}function Mx(){ql&&(ql.detachEvent("onpropertychange",uC),mc=ql=null)}function uC(t){if(t.propertyName==="value"&&Xf(mc)){var e=[];lC(e,mc,t,Wy(t)),VS(SM,e)}}function kM(t,e,n){t==="focusin"?(Mx(),ql=e,mc=n,ql.attachEvent("onpropertychange",uC)):t==="focusout"&&Mx()}function EM(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Xf(mc)}function TM(t,e){if(t==="click")return Xf(e)}function _M(t,e){if(t==="input"||t==="change")return Xf(e)}function RM(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Qn=typeof Object.is=="function"?Object.is:RM;function gc(t,e){if(Qn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Om.call(e,i)||!Qn(t[i],e[i]))return!1}return!0}function Ax(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Dx(t,e){var n=Ax(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ax(n)}}function dC(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?dC(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function fC(){for(var t=window,e=qd();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=qd(t.document)}return e}function ev(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function OM(t){var e=fC(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&dC(n.ownerDocument.documentElement,n)){if(r!==null&&ev(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=Dx(n,o);var s=Dx(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var PM=qr&&"documentMode"in document&&11>=document.documentMode,Js=null,Gm=null,Gl=null,Jm=!1;function Nx(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Jm||Js==null||Js!==qd(r)||(r=Js,"selectionStart"in r&&ev(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Gl&&gc(Gl,r)||(Gl=r,r=ef(Gm,"onSelect"),0<r.length&&(e=new Qy("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Js)))}function Uu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ys={animationend:Uu("Animation","AnimationEnd"),animationiteration:Uu("Animation","AnimationIteration"),animationstart:Uu("Animation","AnimationStart"),transitionend:Uu("Transition","TransitionEnd")},pp={},hC={};qr&&(hC=document.createElement("div").style,"AnimationEvent"in window||(delete Ys.animationend.animation,delete Ys.animationiteration.animation,delete Ys.animationstart.animation),"TransitionEvent"in window||delete Ys.transitionend.transition);function Zf(t){if(pp[t])return pp[t];if(!Ys[t])return t;var e=Ys[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in hC)return pp[t]=e[n];return t}var pC=Zf("animationend"),mC=Zf("animationiteration"),gC=Zf("animationstart"),yC=Zf("transitionend"),vC=new Map,Ix="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function oo(t,e){vC.set(t,e),ys(e,[t])}for(var mp=0;mp<Ix.length;mp++){var gp=Ix[mp],MM=gp.toLowerCase(),AM=gp[0].toUpperCase()+gp.slice(1);oo(MM,"on"+AM)}oo(pC,"onAnimationEnd");oo(mC,"onAnimationIteration");oo(gC,"onAnimationStart");oo("dblclick","onDoubleClick");oo("focusin","onFocus");oo("focusout","onBlur");oo(yC,"onTransitionEnd");Na("onMouseEnter",["mouseout","mouseover"]);Na("onMouseLeave",["mouseout","mouseover"]);Na("onPointerEnter",["pointerout","pointerover"]);Na("onPointerLeave",["pointerout","pointerover"]);ys("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ys("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ys("onBeforeInput",["compositionend","keypress","textInput","paste"]);ys("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ys("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ys("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ml="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),DM=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ml));function jx(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,MP(r,e,void 0,t),t.currentTarget=null}function xC(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;jx(i,a,c),o=l}else for(s=0;s<r.length;s++){if(a=r[s],l=a.instance,c=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;jx(i,a,c),o=l}}}if(Jd)throw t=Hm,Jd=!1,Hm=null,t}function Ee(t,e){var n=e[eg];n===void 0&&(n=e[eg]=new Set);var r=t+"__bubble";n.has(r)||(wC(e,t,2,!1),n.add(r))}function yp(t,e,n){var r=0;e&&(r|=4),wC(n,t,r,e)}var Vu="_reactListening"+Math.random().toString(36).slice(2);function yc(t){if(!t[Vu]){t[Vu]=!0,_S.forEach(function(n){n!=="selectionchange"&&(DM.has(n)||yp(n,!1,t),yp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Vu]||(e[Vu]=!0,yp("selectionchange",!1,e))}}function wC(t,e,n,r){switch(rC(e)){case 1:var i=qP;break;case 4:i=GP;break;default:i=Jy}n=i.bind(null,e,n,t),i=void 0,!Vm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function vp(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;a!==null;){if(s=Mo(a),s===null)return;if(l=s.tag,l===5||l===6){r=o=s;continue e}a=a.parentNode}}r=r.return}VS(function(){var c=o,u=Wy(n),d=[];e:{var f=vC.get(t);if(f!==void 0){var p=Qy,m=t;switch(t){case"keypress":if(Rd(n)===0)break e;case"keydown":case"keyup":p=cM;break;case"focusin":m="focus",p=dp;break;case"focusout":m="blur",p=dp;break;case"beforeblur":case"afterblur":p=dp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=kx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=QP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=fM;break;case pC:case mC:case gC:p=eM;break;case yC:p=pM;break;case"scroll":p=JP;break;case"wheel":p=gM;break;case"copy":case"cut":case"paste":p=nM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Tx}var g=(e&4)!==0,x=!g&&t==="scroll",v=g?f!==null?f+"Capture":null:f;g=[];for(var w=c,S;w!==null;){S=w;var b=S.stateNode;if(S.tag===5&&b!==null&&(S=b,v!==null&&(b=dc(w,v),b!=null&&g.push(vc(w,b,S)))),x)break;w=w.return}0<g.length&&(f=new p(f,m,null,n,u),d.push({event:f,listeners:g}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==zm&&(m=n.relatedTarget||n.fromElement)&&(Mo(m)||m[Gr]))break e;if((p||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,p?(m=n.relatedTarget||n.toElement,p=c,m=m?Mo(m):null,m!==null&&(x=vs(m),m!==x||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=c),p!==m)){if(g=kx,b="onMouseLeave",v="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(g=Tx,b="onPointerLeave",v="onPointerEnter",w="pointer"),x=p==null?f:Qs(p),S=m==null?f:Qs(m),f=new g(b,w+"leave",p,n,u),f.target=x,f.relatedTarget=S,b=null,Mo(u)===c&&(g=new g(v,w+"enter",m,n,u),g.target=S,g.relatedTarget=x,b=g),x=b,p&&m)t:{for(g=p,v=m,w=0,S=g;S;S=Ps(S))w++;for(S=0,b=v;b;b=Ps(b))S++;for(;0<w-S;)g=Ps(g),w--;for(;0<S-w;)v=Ps(v),S--;for(;w--;){if(g===v||v!==null&&g===v.alternate)break t;g=Ps(g),v=Ps(v)}g=null}else g=null;p!==null&&Lx(d,f,p,g,!1),m!==null&&x!==null&&Lx(d,x,m,g,!0)}}e:{if(f=c?Qs(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var C=CM;else if(Ox(f))if(cC)C=_M;else{C=EM;var k=kM}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(C=TM);if(C&&(C=C(t,c))){lC(d,C,n,u);break e}k&&k(t,f,c),t==="focusout"&&(k=f._wrapperState)&&k.controlled&&f.type==="number"&&jm(f,"number",f.value)}switch(k=c?Qs(c):window,t){case"focusin":(Ox(k)||k.contentEditable==="true")&&(Js=k,Gm=c,Gl=null);break;case"focusout":Gl=Gm=Js=null;break;case"mousedown":Jm=!0;break;case"contextmenu":case"mouseup":case"dragend":Jm=!1,Nx(d,n,u);break;case"selectionchange":if(PM)break;case"keydown":case"keyup":Nx(d,n,u)}var E;if(Zy)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Gs?sC(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(oC&&n.locale!=="ko"&&(Gs||_!=="onCompositionStart"?_==="onCompositionEnd"&&Gs&&(E=iC()):(Pi=u,Yy="value"in Pi?Pi.value:Pi.textContent,Gs=!0)),k=ef(c,_),0<k.length&&(_=new Ex(_,t,null,n,u),d.push({event:_,listeners:k}),E?_.data=E:(E=aC(n),E!==null&&(_.data=E)))),(E=vM?xM(t,n):wM(t,n))&&(c=ef(c,"onBeforeInput"),0<c.length&&(u=new Ex("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=E))}xC(d,e)})}function vc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ef(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=dc(t,n),o!=null&&r.unshift(vc(t,o,i)),o=dc(t,e),o!=null&&r.push(vc(t,o,i))),t=t.return}return r}function Ps(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Lx(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=dc(n,o),l!=null&&s.unshift(vc(n,l,a))):i||(l=dc(n,o),l!=null&&s.push(vc(n,l,a)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var NM=/\r\n?/g,IM=/\u0000|\uFFFD/g;function $x(t){return(typeof t=="string"?t:""+t).replace(NM,`
`).replace(IM,"")}function Hu(t,e,n){if(e=$x(e),$x(t)!==e&&n)throw Error(z(425))}function tf(){}var Ym=null,Qm=null;function Xm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Zm=typeof setTimeout=="function"?setTimeout:void 0,jM=typeof clearTimeout=="function"?clearTimeout:void 0,Fx=typeof Promise=="function"?Promise:void 0,LM=typeof queueMicrotask=="function"?queueMicrotask:typeof Fx<"u"?function(t){return Fx.resolve(null).then(t).catch($M)}:Zm;function $M(t){setTimeout(function(){throw t})}function xp(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),pc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);pc(e)}function $i(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Bx(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var rl=Math.random().toString(36).slice(2),yr="__reactFiber$"+rl,xc="__reactProps$"+rl,Gr="__reactContainer$"+rl,eg="__reactEvents$"+rl,FM="__reactListeners$"+rl,BM="__reactHandles$"+rl;function Mo(t){var e=t[yr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Gr]||n[yr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Bx(t);t!==null;){if(n=t[yr])return n;t=Bx(t)}return e}t=n,n=t.parentNode}return null}function au(t){return t=t[yr]||t[Gr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Qs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function eh(t){return t[xc]||null}var tg=[],Xs=-1;function so(t){return{current:t}}function Te(t){0>Xs||(t.current=tg[Xs],tg[Xs]=null,Xs--)}function Se(t,e){Xs++,tg[Xs]=t.current,t.current=e}var Ji={},xt=so(Ji),Gt=so(!1),ts=Ji;function Ia(t,e){var n=t.type.contextTypes;if(!n)return Ji;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Jt(t){return t=t.childContextTypes,t!=null}function nf(){Te(Gt),Te(xt)}function zx(t,e,n){if(xt.current!==Ji)throw Error(z(168));Se(xt,e),Se(Gt,n)}function bC(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(z(108,kP(t)||"Unknown",i));return Ae({},n,r)}function rf(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ji,ts=xt.current,Se(xt,t),Se(Gt,Gt.current),!0}function Ux(t,e,n){var r=t.stateNode;if(!r)throw Error(z(169));n?(t=bC(t,e,ts),r.__reactInternalMemoizedMergedChildContext=t,Te(Gt),Te(xt),Se(xt,t)):Te(Gt),Se(Gt,n)}var Lr=null,th=!1,wp=!1;function SC(t){Lr===null?Lr=[t]:Lr.push(t)}function zM(t){th=!0,SC(t)}function ao(){if(!wp&&Lr!==null){wp=!0;var t=0,e=ge;try{var n=Lr;for(ge=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Lr=null,th=!1}catch(i){throw Lr!==null&&(Lr=Lr.slice(t+1)),qS(Ky,ao),i}finally{ge=e,wp=!1}}return null}var Zs=[],ea=0,of=null,sf=0,bn=[],Sn=0,ns=null,Br=1,zr="";function Co(t,e){Zs[ea++]=sf,Zs[ea++]=of,of=t,sf=e}function CC(t,e,n){bn[Sn++]=Br,bn[Sn++]=zr,bn[Sn++]=ns,ns=t;var r=Br;t=zr;var i=32-Gn(r)-1;r&=~(1<<i),n+=1;var o=32-Gn(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Br=1<<32-Gn(e)+i|n<<i|r,zr=o+t}else Br=1<<o|n<<i|r,zr=t}function tv(t){t.return!==null&&(Co(t,1),CC(t,1,0))}function nv(t){for(;t===of;)of=Zs[--ea],Zs[ea]=null,sf=Zs[--ea],Zs[ea]=null;for(;t===ns;)ns=bn[--Sn],bn[Sn]=null,zr=bn[--Sn],bn[Sn]=null,Br=bn[--Sn],bn[Sn]=null}var cn=null,ln=null,Re=!1,Hn=null;function kC(t,e){var n=kn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Vx(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,cn=t,ln=$i(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,cn=t,ln=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ns!==null?{id:Br,overflow:zr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=kn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,cn=t,ln=null,!0):!1;default:return!1}}function ng(t){return(t.mode&1)!==0&&(t.flags&128)===0}function rg(t){if(Re){var e=ln;if(e){var n=e;if(!Vx(t,e)){if(ng(t))throw Error(z(418));e=$i(n.nextSibling);var r=cn;e&&Vx(t,e)?kC(r,n):(t.flags=t.flags&-4097|2,Re=!1,cn=t)}}else{if(ng(t))throw Error(z(418));t.flags=t.flags&-4097|2,Re=!1,cn=t}}}function Hx(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;cn=t}function Wu(t){if(t!==cn)return!1;if(!Re)return Hx(t),Re=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Xm(t.type,t.memoizedProps)),e&&(e=ln)){if(ng(t))throw EC(),Error(z(418));for(;e;)kC(t,e),e=$i(e.nextSibling)}if(Hx(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ln=$i(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ln=null}}else ln=cn?$i(t.stateNode.nextSibling):null;return!0}function EC(){for(var t=ln;t;)t=$i(t.nextSibling)}function ja(){ln=cn=null,Re=!1}function rv(t){Hn===null?Hn=[t]:Hn.push(t)}var UM=ei.ReactCurrentBatchConfig;function wl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var a=i.refs;s===null?delete a[o]:a[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function Ku(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Wx(t){var e=t._init;return e(t._payload)}function TC(t){function e(v,w){if(t){var S=v.deletions;S===null?(v.deletions=[w],v.flags|=16):S.push(w)}}function n(v,w){if(!t)return null;for(;w!==null;)e(v,w),w=w.sibling;return null}function r(v,w){for(v=new Map;w!==null;)w.key!==null?v.set(w.key,w):v.set(w.index,w),w=w.sibling;return v}function i(v,w){return v=Ui(v,w),v.index=0,v.sibling=null,v}function o(v,w,S){return v.index=S,t?(S=v.alternate,S!==null?(S=S.index,S<w?(v.flags|=2,w):S):(v.flags|=2,w)):(v.flags|=1048576,w)}function s(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,w,S,b){return w===null||w.tag!==6?(w=_p(S,v.mode,b),w.return=v,w):(w=i(w,S),w.return=v,w)}function l(v,w,S,b){var C=S.type;return C===qs?u(v,w,S.props.children,b,S.key):w!==null&&(w.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===fi&&Wx(C)===w.type)?(b=i(w,S.props),b.ref=wl(v,w,S),b.return=v,b):(b=Id(S.type,S.key,S.props,null,v.mode,b),b.ref=wl(v,w,S),b.return=v,b)}function c(v,w,S,b){return w===null||w.tag!==4||w.stateNode.containerInfo!==S.containerInfo||w.stateNode.implementation!==S.implementation?(w=Rp(S,v.mode,b),w.return=v,w):(w=i(w,S.children||[]),w.return=v,w)}function u(v,w,S,b,C){return w===null||w.tag!==7?(w=Ko(S,v.mode,b,C),w.return=v,w):(w=i(w,S),w.return=v,w)}function d(v,w,S){if(typeof w=="string"&&w!==""||typeof w=="number")return w=_p(""+w,v.mode,S),w.return=v,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Iu:return S=Id(w.type,w.key,w.props,null,v.mode,S),S.ref=wl(v,null,w),S.return=v,S;case Ks:return w=Rp(w,v.mode,S),w.return=v,w;case fi:var b=w._init;return d(v,b(w._payload),S)}if(Ol(w)||ml(w))return w=Ko(w,v.mode,S,null),w.return=v,w;Ku(v,w)}return null}function f(v,w,S,b){var C=w!==null?w.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return C!==null?null:a(v,w,""+S,b);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Iu:return S.key===C?l(v,w,S,b):null;case Ks:return S.key===C?c(v,w,S,b):null;case fi:return C=S._init,f(v,w,C(S._payload),b)}if(Ol(S)||ml(S))return C!==null?null:u(v,w,S,b,null);Ku(v,S)}return null}function p(v,w,S,b,C){if(typeof b=="string"&&b!==""||typeof b=="number")return v=v.get(S)||null,a(w,v,""+b,C);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Iu:return v=v.get(b.key===null?S:b.key)||null,l(w,v,b,C);case Ks:return v=v.get(b.key===null?S:b.key)||null,c(w,v,b,C);case fi:var k=b._init;return p(v,w,S,k(b._payload),C)}if(Ol(b)||ml(b))return v=v.get(S)||null,u(w,v,b,C,null);Ku(w,b)}return null}function m(v,w,S,b){for(var C=null,k=null,E=w,_=w=0,P=null;E!==null&&_<S.length;_++){E.index>_?(P=E,E=null):P=E.sibling;var R=f(v,E,S[_],b);if(R===null){E===null&&(E=P);break}t&&E&&R.alternate===null&&e(v,E),w=o(R,w,_),k===null?C=R:k.sibling=R,k=R,E=P}if(_===S.length)return n(v,E),Re&&Co(v,_),C;if(E===null){for(;_<S.length;_++)E=d(v,S[_],b),E!==null&&(w=o(E,w,_),k===null?C=E:k.sibling=E,k=E);return Re&&Co(v,_),C}for(E=r(v,E);_<S.length;_++)P=p(E,v,_,S[_],b),P!==null&&(t&&P.alternate!==null&&E.delete(P.key===null?_:P.key),w=o(P,w,_),k===null?C=P:k.sibling=P,k=P);return t&&E.forEach(function(N){return e(v,N)}),Re&&Co(v,_),C}function g(v,w,S,b){var C=ml(S);if(typeof C!="function")throw Error(z(150));if(S=C.call(S),S==null)throw Error(z(151));for(var k=C=null,E=w,_=w=0,P=null,R=S.next();E!==null&&!R.done;_++,R=S.next()){E.index>_?(P=E,E=null):P=E.sibling;var N=f(v,E,R.value,b);if(N===null){E===null&&(E=P);break}t&&E&&N.alternate===null&&e(v,E),w=o(N,w,_),k===null?C=N:k.sibling=N,k=N,E=P}if(R.done)return n(v,E),Re&&Co(v,_),C;if(E===null){for(;!R.done;_++,R=S.next())R=d(v,R.value,b),R!==null&&(w=o(R,w,_),k===null?C=R:k.sibling=R,k=R);return Re&&Co(v,_),C}for(E=r(v,E);!R.done;_++,R=S.next())R=p(E,v,_,R.value,b),R!==null&&(t&&R.alternate!==null&&E.delete(R.key===null?_:R.key),w=o(R,w,_),k===null?C=R:k.sibling=R,k=R);return t&&E.forEach(function(A){return e(v,A)}),Re&&Co(v,_),C}function x(v,w,S,b){if(typeof S=="object"&&S!==null&&S.type===qs&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Iu:e:{for(var C=S.key,k=w;k!==null;){if(k.key===C){if(C=S.type,C===qs){if(k.tag===7){n(v,k.sibling),w=i(k,S.props.children),w.return=v,v=w;break e}}else if(k.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===fi&&Wx(C)===k.type){n(v,k.sibling),w=i(k,S.props),w.ref=wl(v,k,S),w.return=v,v=w;break e}n(v,k);break}else e(v,k);k=k.sibling}S.type===qs?(w=Ko(S.props.children,v.mode,b,S.key),w.return=v,v=w):(b=Id(S.type,S.key,S.props,null,v.mode,b),b.ref=wl(v,w,S),b.return=v,v=b)}return s(v);case Ks:e:{for(k=S.key;w!==null;){if(w.key===k)if(w.tag===4&&w.stateNode.containerInfo===S.containerInfo&&w.stateNode.implementation===S.implementation){n(v,w.sibling),w=i(w,S.children||[]),w.return=v,v=w;break e}else{n(v,w);break}else e(v,w);w=w.sibling}w=Rp(S,v.mode,b),w.return=v,v=w}return s(v);case fi:return k=S._init,x(v,w,k(S._payload),b)}if(Ol(S))return m(v,w,S,b);if(ml(S))return g(v,w,S,b);Ku(v,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,w!==null&&w.tag===6?(n(v,w.sibling),w=i(w,S),w.return=v,v=w):(n(v,w),w=_p(S,v.mode,b),w.return=v,v=w),s(v)):n(v,w)}return x}var La=TC(!0),_C=TC(!1),af=so(null),lf=null,ta=null,iv=null;function ov(){iv=ta=lf=null}function sv(t){var e=af.current;Te(af),t._currentValue=e}function ig(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function da(t,e){lf=t,iv=ta=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Kt=!0),t.firstContext=null)}function Mn(t){var e=t._currentValue;if(iv!==t)if(t={context:t,memoizedValue:e,next:null},ta===null){if(lf===null)throw Error(z(308));ta=t,lf.dependencies={lanes:0,firstContext:t}}else ta=ta.next=t;return e}var Ao=null;function av(t){Ao===null?Ao=[t]:Ao.push(t)}function RC(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,av(e)):(n.next=i.next,i.next=n),e.interleaved=n,Jr(t,r)}function Jr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var hi=!1;function lv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function OC(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Hr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Fi(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,fe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Jr(t,n)}return i=r.interleaved,i===null?(e.next=e,av(r)):(e.next=i.next,i.next=e),r.interleaved=e,Jr(t,n)}function Od(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,qy(t,n)}}function Kx(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function cf(t,e,n,r){var i=t.updateQueue;hi=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,s===null?o=c:s.next=c,s=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==s&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(o!==null){var d=i.baseState;s=0,u=c=l=null,a=o;do{var f=a.lane,p=a.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,g=a;switch(f=e,p=n,g.tag){case 1:if(m=g.payload,typeof m=="function"){d=m.call(p,d,f);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,f=typeof m=="function"?m.call(p,d,f):m,f==null)break e;d=Ae({},d,f);break e;case 2:hi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=p,l=d):u=u.next=p,s|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(1);if(u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);is|=s,t.lanes=s,t.memoizedState=d}}function qx(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(z(191,i));i.call(r)}}}var lu={},br=so(lu),wc=so(lu),bc=so(lu);function Do(t){if(t===lu)throw Error(z(174));return t}function cv(t,e){switch(Se(bc,e),Se(wc,t),Se(br,lu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:$m(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=$m(e,t)}Te(br),Se(br,e)}function $a(){Te(br),Te(wc),Te(bc)}function PC(t){Do(bc.current);var e=Do(br.current),n=$m(e,t.type);e!==n&&(Se(wc,t),Se(br,n))}function uv(t){wc.current===t&&(Te(br),Te(wc))}var Pe=so(0);function uf(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var bp=[];function dv(){for(var t=0;t<bp.length;t++)bp[t]._workInProgressVersionPrimary=null;bp.length=0}var Pd=ei.ReactCurrentDispatcher,Sp=ei.ReactCurrentBatchConfig,rs=0,Me=null,He=null,Je=null,df=!1,Jl=!1,Sc=0,VM=0;function dt(){throw Error(z(321))}function fv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Qn(t[n],e[n]))return!1;return!0}function hv(t,e,n,r,i,o){if(rs=o,Me=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Pd.current=t===null||t.memoizedState===null?qM:GM,t=n(r,i),Jl){o=0;do{if(Jl=!1,Sc=0,25<=o)throw Error(z(301));o+=1,Je=He=null,e.updateQueue=null,Pd.current=JM,t=n(r,i)}while(Jl)}if(Pd.current=ff,e=He!==null&&He.next!==null,rs=0,Je=He=Me=null,df=!1,e)throw Error(z(300));return t}function pv(){var t=Sc!==0;return Sc=0,t}function ur(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Je===null?Me.memoizedState=Je=t:Je=Je.next=t,Je}function An(){if(He===null){var t=Me.alternate;t=t!==null?t.memoizedState:null}else t=He.next;var e=Je===null?Me.memoizedState:Je.next;if(e!==null)Je=e,He=t;else{if(t===null)throw Error(z(310));He=t,t={memoizedState:He.memoizedState,baseState:He.baseState,baseQueue:He.baseQueue,queue:He.queue,next:null},Je===null?Me.memoizedState=Je=t:Je=Je.next=t}return Je}function Cc(t,e){return typeof e=="function"?e(t):e}function Cp(t){var e=An(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=He,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var a=s=null,l=null,c=o;do{var u=c.lane;if((rs&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,s=r):l=l.next=d,Me.lanes|=u,is|=u}c=c.next}while(c!==null&&c!==o);l===null?s=r:l.next=a,Qn(r,e.memoizedState)||(Kt=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,Me.lanes|=o,is|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function kp(t){var e=An(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);Qn(o,e.memoizedState)||(Kt=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function MC(){}function AC(t,e){var n=Me,r=An(),i=e(),o=!Qn(r.memoizedState,i);if(o&&(r.memoizedState=i,Kt=!0),r=r.queue,mv(IC.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||Je!==null&&Je.memoizedState.tag&1){if(n.flags|=2048,kc(9,NC.bind(null,n,r,i,e),void 0,null),Qe===null)throw Error(z(349));rs&30||DC(n,e,i)}return i}function DC(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Me.updateQueue,e===null?(e={lastEffect:null,stores:null},Me.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function NC(t,e,n,r){e.value=n,e.getSnapshot=r,jC(e)&&LC(t)}function IC(t,e,n){return n(function(){jC(e)&&LC(t)})}function jC(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Qn(t,n)}catch{return!0}}function LC(t){var e=Jr(t,1);e!==null&&Jn(e,t,1,-1)}function Gx(t){var e=ur();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Cc,lastRenderedState:t},e.queue=t,t=t.dispatch=KM.bind(null,Me,t),[e.memoizedState,t]}function kc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Me.updateQueue,e===null?(e={lastEffect:null,stores:null},Me.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function $C(){return An().memoizedState}function Md(t,e,n,r){var i=ur();Me.flags|=t,i.memoizedState=kc(1|e,n,void 0,r===void 0?null:r)}function nh(t,e,n,r){var i=An();r=r===void 0?null:r;var o=void 0;if(He!==null){var s=He.memoizedState;if(o=s.destroy,r!==null&&fv(r,s.deps)){i.memoizedState=kc(e,n,o,r);return}}Me.flags|=t,i.memoizedState=kc(1|e,n,o,r)}function Jx(t,e){return Md(8390656,8,t,e)}function mv(t,e){return nh(2048,8,t,e)}function FC(t,e){return nh(4,2,t,e)}function BC(t,e){return nh(4,4,t,e)}function zC(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function UC(t,e,n){return n=n!=null?n.concat([t]):null,nh(4,4,zC.bind(null,e,t),n)}function gv(){}function VC(t,e){var n=An();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&fv(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function HC(t,e){var n=An();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&fv(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function WC(t,e,n){return rs&21?(Qn(n,e)||(n=YS(),Me.lanes|=n,is|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Kt=!0),t.memoizedState=n)}function HM(t,e){var n=ge;ge=n!==0&&4>n?n:4,t(!0);var r=Sp.transition;Sp.transition={};try{t(!1),e()}finally{ge=n,Sp.transition=r}}function KC(){return An().memoizedState}function WM(t,e,n){var r=zi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},qC(t))GC(e,n);else if(n=RC(t,e,n,r),n!==null){var i=Rt();Jn(n,t,r,i),JC(n,e,r)}}function KM(t,e,n){var r=zi(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(qC(t))GC(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,Qn(a,s)){var l=e.interleaved;l===null?(i.next=i,av(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=RC(t,e,i,r),n!==null&&(i=Rt(),Jn(n,t,r,i),JC(n,e,r))}}function qC(t){var e=t.alternate;return t===Me||e!==null&&e===Me}function GC(t,e){Jl=df=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function JC(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,qy(t,n)}}var ff={readContext:Mn,useCallback:dt,useContext:dt,useEffect:dt,useImperativeHandle:dt,useInsertionEffect:dt,useLayoutEffect:dt,useMemo:dt,useReducer:dt,useRef:dt,useState:dt,useDebugValue:dt,useDeferredValue:dt,useTransition:dt,useMutableSource:dt,useSyncExternalStore:dt,useId:dt,unstable_isNewReconciler:!1},qM={readContext:Mn,useCallback:function(t,e){return ur().memoizedState=[t,e===void 0?null:e],t},useContext:Mn,useEffect:Jx,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Md(4194308,4,zC.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Md(4194308,4,t,e)},useInsertionEffect:function(t,e){return Md(4,2,t,e)},useMemo:function(t,e){var n=ur();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ur();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=WM.bind(null,Me,t),[r.memoizedState,t]},useRef:function(t){var e=ur();return t={current:t},e.memoizedState=t},useState:Gx,useDebugValue:gv,useDeferredValue:function(t){return ur().memoizedState=t},useTransition:function(){var t=Gx(!1),e=t[0];return t=HM.bind(null,t[1]),ur().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Me,i=ur();if(Re){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),Qe===null)throw Error(z(349));rs&30||DC(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,Jx(IC.bind(null,r,o,t),[t]),r.flags|=2048,kc(9,NC.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=ur(),e=Qe.identifierPrefix;if(Re){var n=zr,r=Br;n=(r&~(1<<32-Gn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Sc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=VM++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},GM={readContext:Mn,useCallback:VC,useContext:Mn,useEffect:mv,useImperativeHandle:UC,useInsertionEffect:FC,useLayoutEffect:BC,useMemo:HC,useReducer:Cp,useRef:$C,useState:function(){return Cp(Cc)},useDebugValue:gv,useDeferredValue:function(t){var e=An();return WC(e,He.memoizedState,t)},useTransition:function(){var t=Cp(Cc)[0],e=An().memoizedState;return[t,e]},useMutableSource:MC,useSyncExternalStore:AC,useId:KC,unstable_isNewReconciler:!1},JM={readContext:Mn,useCallback:VC,useContext:Mn,useEffect:mv,useImperativeHandle:UC,useInsertionEffect:FC,useLayoutEffect:BC,useMemo:HC,useReducer:kp,useRef:$C,useState:function(){return kp(Cc)},useDebugValue:gv,useDeferredValue:function(t){var e=An();return He===null?e.memoizedState=t:WC(e,He.memoizedState,t)},useTransition:function(){var t=kp(Cc)[0],e=An().memoizedState;return[t,e]},useMutableSource:MC,useSyncExternalStore:AC,useId:KC,unstable_isNewReconciler:!1};function Fn(t,e){if(t&&t.defaultProps){e=Ae({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function og(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ae({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var rh={isMounted:function(t){return(t=t._reactInternals)?vs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Rt(),i=zi(t),o=Hr(r,i);o.payload=e,n!=null&&(o.callback=n),e=Fi(t,o,i),e!==null&&(Jn(e,t,i,r),Od(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Rt(),i=zi(t),o=Hr(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Fi(t,o,i),e!==null&&(Jn(e,t,i,r),Od(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Rt(),r=zi(t),i=Hr(n,r);i.tag=2,e!=null&&(i.callback=e),e=Fi(t,i,r),e!==null&&(Jn(e,t,r,n),Od(e,t,r))}};function Yx(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!gc(n,r)||!gc(i,o):!0}function YC(t,e,n){var r=!1,i=Ji,o=e.contextType;return typeof o=="object"&&o!==null?o=Mn(o):(i=Jt(e)?ts:xt.current,r=e.contextTypes,o=(r=r!=null)?Ia(t,i):Ji),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=rh,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function Qx(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&rh.enqueueReplaceState(e,e.state,null)}function sg(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},lv(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=Mn(o):(o=Jt(e)?ts:xt.current,i.context=Ia(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(og(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&rh.enqueueReplaceState(i,i.state,null),cf(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Fa(t,e){try{var n="",r=e;do n+=CP(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function Ep(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ag(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var YM=typeof WeakMap=="function"?WeakMap:Map;function QC(t,e,n){n=Hr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){pf||(pf=!0,yg=r),ag(t,e)},n}function XC(t,e,n){n=Hr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){ag(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){ag(t,e),typeof r!="function"&&(Bi===null?Bi=new Set([this]):Bi.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function Xx(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new YM;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=uA.bind(null,t,e,n),e.then(t,t))}function Zx(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ew(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Hr(-1,1),e.tag=2,Fi(n,e,1))),n.lanes|=1),t)}var QM=ei.ReactCurrentOwner,Kt=!1;function _t(t,e,n,r){e.child=t===null?_C(e,null,n,r):La(e,t.child,n,r)}function tw(t,e,n,r,i){n=n.render;var o=e.ref;return da(e,i),r=hv(t,e,n,r,o,i),n=pv(),t!==null&&!Kt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Yr(t,e,i)):(Re&&n&&tv(e),e.flags|=1,_t(t,e,r,i),e.child)}function nw(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!kv(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,ZC(t,e,o,r,i)):(t=Id(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:gc,n(s,r)&&t.ref===e.ref)return Yr(t,e,i)}return e.flags|=1,t=Ui(o,r),t.ref=e.ref,t.return=e,e.child=t}function ZC(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(gc(o,r)&&t.ref===e.ref)if(Kt=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(Kt=!0);else return e.lanes=t.lanes,Yr(t,e,i)}return lg(t,e,n,r,i)}function ek(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Se(ra,on),on|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Se(ra,on),on|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Se(ra,on),on|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,Se(ra,on),on|=r;return _t(t,e,i,n),e.child}function tk(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function lg(t,e,n,r,i){var o=Jt(n)?ts:xt.current;return o=Ia(e,o),da(e,i),n=hv(t,e,n,r,o,i),r=pv(),t!==null&&!Kt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Yr(t,e,i)):(Re&&r&&tv(e),e.flags|=1,_t(t,e,n,i),e.child)}function rw(t,e,n,r,i){if(Jt(n)){var o=!0;rf(e)}else o=!1;if(da(e,i),e.stateNode===null)Ad(t,e),YC(e,n,r),sg(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var l=s.context,c=n.contextType;typeof c=="object"&&c!==null?c=Mn(c):(c=Jt(n)?ts:xt.current,c=Ia(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof s.getSnapshotBeforeUpdate=="function";d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||l!==c)&&Qx(e,s,r,c),hi=!1;var f=e.memoizedState;s.state=f,cf(e,r,s,i),l=e.memoizedState,a!==r||f!==l||Gt.current||hi?(typeof u=="function"&&(og(e,n,u,r),l=e.memoizedState),(a=hi||Yx(e,n,a,r,f,l,c))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),s.props=r,s.state=l,s.context=c,r=a):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,OC(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Fn(e.type,a),s.props=c,d=e.pendingProps,f=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=Mn(l):(l=Jt(n)?ts:xt.current,l=Ia(e,l));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==d||f!==l)&&Qx(e,s,r,l),hi=!1,f=e.memoizedState,s.state=f,cf(e,r,s,i);var m=e.memoizedState;a!==d||f!==m||Gt.current||hi?(typeof p=="function"&&(og(e,n,p,r),m=e.memoizedState),(c=hi||Yx(e,n,c,r,f,m,l)||!1)?(u||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,m,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,m,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),s.props=r,s.state=m,s.context=l,r=c):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return cg(t,e,n,r,o,i)}function cg(t,e,n,r,i,o){tk(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&Ux(e,n,!1),Yr(t,e,o);r=e.stateNode,QM.current=e;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=La(e,t.child,null,o),e.child=La(e,null,a,o)):_t(t,e,a,o),e.memoizedState=r.state,i&&Ux(e,n,!0),e.child}function nk(t){var e=t.stateNode;e.pendingContext?zx(t,e.pendingContext,e.pendingContext!==e.context):e.context&&zx(t,e.context,!1),cv(t,e.containerInfo)}function iw(t,e,n,r,i){return ja(),rv(i),e.flags|=256,_t(t,e,n,r),e.child}var ug={dehydrated:null,treeContext:null,retryLane:0};function dg(t){return{baseLanes:t,cachePool:null,transitions:null}}function rk(t,e,n){var r=e.pendingProps,i=Pe.current,o=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Se(Pe,i&1),t===null)return rg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=sh(s,r,0,null),t=Ko(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=dg(n),e.memoizedState=ug,t):yv(e,s));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return XM(t,e,s,r,a,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Ui(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=Ui(a,o):(o=Ko(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?dg(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=ug,r}return o=t.child,t=o.sibling,r=Ui(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function yv(t,e){return e=sh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function qu(t,e,n,r){return r!==null&&rv(r),La(e,t.child,null,n),t=yv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function XM(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=Ep(Error(z(422))),qu(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=sh({mode:"visible",children:r.children},i,0,null),o=Ko(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&La(e,t.child,null,s),e.child.memoizedState=dg(s),e.memoizedState=ug,o);if(!(e.mode&1))return qu(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(z(419)),r=Ep(o,r,void 0),qu(t,e,s,r)}if(a=(s&t.childLanes)!==0,Kt||a){if(r=Qe,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Jr(t,i),Jn(r,t,i,-1))}return Cv(),r=Ep(Error(z(421))),qu(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=dA.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,ln=$i(i.nextSibling),cn=e,Re=!0,Hn=null,t!==null&&(bn[Sn++]=Br,bn[Sn++]=zr,bn[Sn++]=ns,Br=t.id,zr=t.overflow,ns=e),e=yv(e,r.children),e.flags|=4096,e)}function ow(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),ig(t.return,e,n)}function Tp(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function ik(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(_t(t,e,r.children,n),r=Pe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ow(t,n,e);else if(t.tag===19)ow(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Se(Pe,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&uf(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Tp(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&uf(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Tp(e,!0,n,null,o);break;case"together":Tp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ad(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Yr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),is|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=Ui(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ui(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function ZM(t,e,n){switch(e.tag){case 3:nk(e),ja();break;case 5:PC(e);break;case 1:Jt(e.type)&&rf(e);break;case 4:cv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Se(af,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Se(Pe,Pe.current&1),e.flags|=128,null):n&e.child.childLanes?rk(t,e,n):(Se(Pe,Pe.current&1),t=Yr(t,e,n),t!==null?t.sibling:null);Se(Pe,Pe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return ik(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Se(Pe,Pe.current),r)break;return null;case 22:case 23:return e.lanes=0,ek(t,e,n)}return Yr(t,e,n)}var ok,fg,sk,ak;ok=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};fg=function(){};sk=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Do(br.current);var o=null;switch(n){case"input":i=Nm(t,i),r=Nm(t,r),o=[];break;case"select":i=Ae({},i,{value:void 0}),r=Ae({},r,{value:void 0}),o=[];break;case"textarea":i=Lm(t,i),r=Lm(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=tf)}Fm(n,r);var s;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(cc.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(o||(o=[]),o.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(cc.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ee("scroll",t),o||a===l||(o=[])):(o=o||[]).push(c,l))}n&&(o=o||[]).push("style",n);var c=o;(e.updateQueue=c)&&(e.flags|=4)}};ak=function(t,e,n,r){n!==r&&(e.flags|=4)};function bl(t,e){if(!Re)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ft(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function eA(t,e,n){var r=e.pendingProps;switch(nv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ft(e),null;case 1:return Jt(e.type)&&nf(),ft(e),null;case 3:return r=e.stateNode,$a(),Te(Gt),Te(xt),dv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Wu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Hn!==null&&(wg(Hn),Hn=null))),fg(t,e),ft(e),null;case 5:uv(e);var i=Do(bc.current);if(n=e.type,t!==null&&e.stateNode!=null)sk(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return ft(e),null}if(t=Do(br.current),Wu(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[yr]=e,r[xc]=o,t=(e.mode&1)!==0,n){case"dialog":Ee("cancel",r),Ee("close",r);break;case"iframe":case"object":case"embed":Ee("load",r);break;case"video":case"audio":for(i=0;i<Ml.length;i++)Ee(Ml[i],r);break;case"source":Ee("error",r);break;case"img":case"image":case"link":Ee("error",r),Ee("load",r);break;case"details":Ee("toggle",r);break;case"input":px(r,o),Ee("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ee("invalid",r);break;case"textarea":gx(r,o),Ee("invalid",r)}Fm(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&Hu(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&Hu(r.textContent,a,t),i=["children",""+a]):cc.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&Ee("scroll",r)}switch(n){case"input":ju(r),mx(r,o,!0);break;case"textarea":ju(r),yx(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=tf)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=IS(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[yr]=e,t[xc]=r,ok(t,e,!1,!1),e.stateNode=t;e:{switch(s=Bm(n,r),n){case"dialog":Ee("cancel",t),Ee("close",t),i=r;break;case"iframe":case"object":case"embed":Ee("load",t),i=r;break;case"video":case"audio":for(i=0;i<Ml.length;i++)Ee(Ml[i],t);i=r;break;case"source":Ee("error",t),i=r;break;case"img":case"image":case"link":Ee("error",t),Ee("load",t),i=r;break;case"details":Ee("toggle",t),i=r;break;case"input":px(t,r),i=Nm(t,r),Ee("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ae({},r,{value:void 0}),Ee("invalid",t);break;case"textarea":gx(t,r),i=Lm(t,r),Ee("invalid",t);break;default:i=r}Fm(n,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?$S(t,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&jS(t,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&uc(t,l):typeof l=="number"&&uc(t,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(cc.hasOwnProperty(o)?l!=null&&o==="onScroll"&&Ee("scroll",t):l!=null&&zy(t,o,l,s))}switch(n){case"input":ju(t),mx(t,r,!1);break;case"textarea":ju(t),yx(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Gi(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?aa(t,!!r.multiple,o,!1):r.defaultValue!=null&&aa(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=tf)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ft(e),null;case 6:if(t&&e.stateNode!=null)ak(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(n=Do(bc.current),Do(br.current),Wu(e)){if(r=e.stateNode,n=e.memoizedProps,r[yr]=e,(o=r.nodeValue!==n)&&(t=cn,t!==null))switch(t.tag){case 3:Hu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Hu(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[yr]=e,e.stateNode=r}return ft(e),null;case 13:if(Te(Pe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Re&&ln!==null&&e.mode&1&&!(e.flags&128))EC(),ja(),e.flags|=98560,o=!1;else if(o=Wu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(z(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(z(317));o[yr]=e}else ja(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ft(e),o=!1}else Hn!==null&&(wg(Hn),Hn=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Pe.current&1?Ke===0&&(Ke=3):Cv())),e.updateQueue!==null&&(e.flags|=4),ft(e),null);case 4:return $a(),fg(t,e),t===null&&yc(e.stateNode.containerInfo),ft(e),null;case 10:return sv(e.type._context),ft(e),null;case 17:return Jt(e.type)&&nf(),ft(e),null;case 19:if(Te(Pe),o=e.memoizedState,o===null)return ft(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)bl(o,!1);else{if(Ke!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=uf(t),s!==null){for(e.flags|=128,bl(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Se(Pe,Pe.current&1|2),e.child}t=t.sibling}o.tail!==null&&$e()>Ba&&(e.flags|=128,r=!0,bl(o,!1),e.lanes=4194304)}else{if(!r)if(t=uf(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),bl(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!Re)return ft(e),null}else 2*$e()-o.renderingStartTime>Ba&&n!==1073741824&&(e.flags|=128,r=!0,bl(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=$e(),e.sibling=null,n=Pe.current,Se(Pe,r?n&1|2:n&1),e):(ft(e),null);case 22:case 23:return Sv(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?on&1073741824&&(ft(e),e.subtreeFlags&6&&(e.flags|=8192)):ft(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function tA(t,e){switch(nv(e),e.tag){case 1:return Jt(e.type)&&nf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return $a(),Te(Gt),Te(xt),dv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return uv(e),null;case 13:if(Te(Pe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));ja()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Te(Pe),null;case 4:return $a(),null;case 10:return sv(e.type._context),null;case 22:case 23:return Sv(),null;case 24:return null;default:return null}}var Gu=!1,yt=!1,nA=typeof WeakSet=="function"?WeakSet:Set,q=null;function na(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ne(t,e,r)}else n.current=null}function hg(t,e,n){try{n()}catch(r){Ne(t,e,r)}}var sw=!1;function rA(t,e){if(Ym=Xd,t=fC(),ev(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,a=-1,l=-1,c=0,u=0,d=t,f=null;t:for(;;){for(var p;d!==n||i!==0&&d.nodeType!==3||(a=s+i),d!==o||r!==0&&d.nodeType!==3||(l=s+r),d.nodeType===3&&(s+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===t)break t;if(f===n&&++c===i&&(a=s),f===o&&++u===r&&(l=s),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Qm={focusedElem:t,selectionRange:n},Xd=!1,q=e;q!==null;)if(e=q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,q=t;else for(;q!==null;){e=q;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var g=m.memoizedProps,x=m.memoizedState,v=e.stateNode,w=v.getSnapshotBeforeUpdate(e.elementType===e.type?g:Fn(e.type,g),x);v.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(b){Ne(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,q=t;break}q=e.return}return m=sw,sw=!1,m}function Yl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&hg(e,n,o)}i=i.next}while(i!==r)}}function ih(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function pg(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function lk(t){var e=t.alternate;e!==null&&(t.alternate=null,lk(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[yr],delete e[xc],delete e[eg],delete e[FM],delete e[BM])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ck(t){return t.tag===5||t.tag===3||t.tag===4}function aw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ck(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function mg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=tf));else if(r!==4&&(t=t.child,t!==null))for(mg(t,e,n),t=t.sibling;t!==null;)mg(t,e,n),t=t.sibling}function gg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(gg(t,e,n),t=t.sibling;t!==null;)gg(t,e,n),t=t.sibling}var it=null,Un=!1;function ni(t,e,n){for(n=n.child;n!==null;)uk(t,e,n),n=n.sibling}function uk(t,e,n){if(wr&&typeof wr.onCommitFiberUnmount=="function")try{wr.onCommitFiberUnmount(Yf,n)}catch{}switch(n.tag){case 5:yt||na(n,e);case 6:var r=it,i=Un;it=null,ni(t,e,n),it=r,Un=i,it!==null&&(Un?(t=it,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):it.removeChild(n.stateNode));break;case 18:it!==null&&(Un?(t=it,n=n.stateNode,t.nodeType===8?xp(t.parentNode,n):t.nodeType===1&&xp(t,n),pc(t)):xp(it,n.stateNode));break;case 4:r=it,i=Un,it=n.stateNode.containerInfo,Un=!0,ni(t,e,n),it=r,Un=i;break;case 0:case 11:case 14:case 15:if(!yt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&hg(n,e,s),i=i.next}while(i!==r)}ni(t,e,n);break;case 1:if(!yt&&(na(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ne(n,e,a)}ni(t,e,n);break;case 21:ni(t,e,n);break;case 22:n.mode&1?(yt=(r=yt)||n.memoizedState!==null,ni(t,e,n),yt=r):ni(t,e,n);break;default:ni(t,e,n)}}function lw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new nA),e.forEach(function(r){var i=fA.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function $n(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,a=s;e:for(;a!==null;){switch(a.tag){case 5:it=a.stateNode,Un=!1;break e;case 3:it=a.stateNode.containerInfo,Un=!0;break e;case 4:it=a.stateNode.containerInfo,Un=!0;break e}a=a.return}if(it===null)throw Error(z(160));uk(o,s,i),it=null,Un=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Ne(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)dk(e,t),e=e.sibling}function dk(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if($n(e,t),ar(t),r&4){try{Yl(3,t,t.return),ih(3,t)}catch(g){Ne(t,t.return,g)}try{Yl(5,t,t.return)}catch(g){Ne(t,t.return,g)}}break;case 1:$n(e,t),ar(t),r&512&&n!==null&&na(n,n.return);break;case 5:if($n(e,t),ar(t),r&512&&n!==null&&na(n,n.return),t.flags&32){var i=t.stateNode;try{uc(i,"")}catch(g){Ne(t,t.return,g)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&DS(i,o),Bm(a,s);var c=Bm(a,o);for(s=0;s<l.length;s+=2){var u=l[s],d=l[s+1];u==="style"?$S(i,d):u==="dangerouslySetInnerHTML"?jS(i,d):u==="children"?uc(i,d):zy(i,u,d,c)}switch(a){case"input":Im(i,o);break;case"textarea":NS(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;p!=null?aa(i,!!o.multiple,p,!1):f!==!!o.multiple&&(o.defaultValue!=null?aa(i,!!o.multiple,o.defaultValue,!0):aa(i,!!o.multiple,o.multiple?[]:"",!1))}i[xc]=o}catch(g){Ne(t,t.return,g)}}break;case 6:if($n(e,t),ar(t),r&4){if(t.stateNode===null)throw Error(z(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(g){Ne(t,t.return,g)}}break;case 3:if($n(e,t),ar(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{pc(e.containerInfo)}catch(g){Ne(t,t.return,g)}break;case 4:$n(e,t),ar(t);break;case 13:$n(e,t),ar(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(wv=$e())),r&4&&lw(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(yt=(c=yt)||u,$n(e,t),yt=c):$n(e,t),ar(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(q=t,u=t.child;u!==null;){for(d=q=u;q!==null;){switch(f=q,p=f.child,f.tag){case 0:case 11:case 14:case 15:Yl(4,f,f.return);break;case 1:na(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(g){Ne(r,n,g)}}break;case 5:na(f,f.return);break;case 22:if(f.memoizedState!==null){uw(d);continue}}p!==null?(p.return=f,q=p):uw(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=d.stateNode,l=d.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=LS("display",s))}catch(g){Ne(t,t.return,g)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(g){Ne(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:$n(e,t),ar(t),r&4&&lw(t);break;case 21:break;default:$n(e,t),ar(t)}}function ar(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(ck(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(uc(i,""),r.flags&=-33);var o=aw(t);gg(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,a=aw(t);mg(t,a,s);break;default:throw Error(z(161))}}catch(l){Ne(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function iA(t,e,n){q=t,fk(t)}function fk(t,e,n){for(var r=(t.mode&1)!==0;q!==null;){var i=q,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||Gu;if(!s){var a=i.alternate,l=a!==null&&a.memoizedState!==null||yt;a=Gu;var c=yt;if(Gu=s,(yt=l)&&!c)for(q=i;q!==null;)s=q,l=s.child,s.tag===22&&s.memoizedState!==null?dw(i):l!==null?(l.return=s,q=l):dw(i);for(;o!==null;)q=o,fk(o),o=o.sibling;q=i,Gu=a,yt=c}cw(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,q=o):cw(t)}}function cw(t){for(;q!==null;){var e=q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:yt||ih(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!yt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Fn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&qx(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}qx(e,s,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&pc(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}yt||e.flags&512&&pg(e)}catch(f){Ne(e,e.return,f)}}if(e===t){q=null;break}if(n=e.sibling,n!==null){n.return=e.return,q=n;break}q=e.return}}function uw(t){for(;q!==null;){var e=q;if(e===t){q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,q=n;break}q=e.return}}function dw(t){for(;q!==null;){var e=q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ih(4,e)}catch(l){Ne(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Ne(e,i,l)}}var o=e.return;try{pg(e)}catch(l){Ne(e,o,l)}break;case 5:var s=e.return;try{pg(e)}catch(l){Ne(e,s,l)}}}catch(l){Ne(e,e.return,l)}if(e===t){q=null;break}var a=e.sibling;if(a!==null){a.return=e.return,q=a;break}q=e.return}}var oA=Math.ceil,hf=ei.ReactCurrentDispatcher,vv=ei.ReactCurrentOwner,En=ei.ReactCurrentBatchConfig,fe=0,Qe=null,ze=null,lt=0,on=0,ra=so(0),Ke=0,Ec=null,is=0,oh=0,xv=0,Ql=null,Ht=null,wv=0,Ba=1/0,Nr=null,pf=!1,yg=null,Bi=null,Ju=!1,Mi=null,mf=0,Xl=0,vg=null,Dd=-1,Nd=0;function Rt(){return fe&6?$e():Dd!==-1?Dd:Dd=$e()}function zi(t){return t.mode&1?fe&2&&lt!==0?lt&-lt:UM.transition!==null?(Nd===0&&(Nd=YS()),Nd):(t=ge,t!==0||(t=window.event,t=t===void 0?16:rC(t.type)),t):1}function Jn(t,e,n,r){if(50<Xl)throw Xl=0,vg=null,Error(z(185));ou(t,n,r),(!(fe&2)||t!==Qe)&&(t===Qe&&(!(fe&2)&&(oh|=n),Ke===4&&vi(t,lt)),Yt(t,r),n===1&&fe===0&&!(e.mode&1)&&(Ba=$e()+500,th&&ao()))}function Yt(t,e){var n=t.callbackNode;UP(t,e);var r=Qd(t,t===Qe?lt:0);if(r===0)n!==null&&wx(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&wx(n),e===1)t.tag===0?zM(fw.bind(null,t)):SC(fw.bind(null,t)),LM(function(){!(fe&6)&&ao()}),n=null;else{switch(QS(r)){case 1:n=Ky;break;case 4:n=GS;break;case 16:n=Yd;break;case 536870912:n=JS;break;default:n=Yd}n=wk(n,hk.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function hk(t,e){if(Dd=-1,Nd=0,fe&6)throw Error(z(327));var n=t.callbackNode;if(fa()&&t.callbackNode!==n)return null;var r=Qd(t,t===Qe?lt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=gf(t,r);else{e=r;var i=fe;fe|=2;var o=mk();(Qe!==t||lt!==e)&&(Nr=null,Ba=$e()+500,Wo(t,e));do try{lA();break}catch(a){pk(t,a)}while(1);ov(),hf.current=o,fe=i,ze!==null?e=0:(Qe=null,lt=0,e=Ke)}if(e!==0){if(e===2&&(i=Wm(t),i!==0&&(r=i,e=xg(t,i))),e===1)throw n=Ec,Wo(t,0),vi(t,r),Yt(t,$e()),n;if(e===6)vi(t,r);else{if(i=t.current.alternate,!(r&30)&&!sA(i)&&(e=gf(t,r),e===2&&(o=Wm(t),o!==0&&(r=o,e=xg(t,o))),e===1))throw n=Ec,Wo(t,0),vi(t,r),Yt(t,$e()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:ko(t,Ht,Nr);break;case 3:if(vi(t,r),(r&130023424)===r&&(e=wv+500-$e(),10<e)){if(Qd(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Rt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Zm(ko.bind(null,t,Ht,Nr),e);break}ko(t,Ht,Nr);break;case 4:if(vi(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-Gn(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=$e()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*oA(r/1960))-r,10<r){t.timeoutHandle=Zm(ko.bind(null,t,Ht,Nr),r);break}ko(t,Ht,Nr);break;case 5:ko(t,Ht,Nr);break;default:throw Error(z(329))}}}return Yt(t,$e()),t.callbackNode===n?hk.bind(null,t):null}function xg(t,e){var n=Ql;return t.current.memoizedState.isDehydrated&&(Wo(t,e).flags|=256),t=gf(t,e),t!==2&&(e=Ht,Ht=n,e!==null&&wg(e)),t}function wg(t){Ht===null?Ht=t:Ht.push.apply(Ht,t)}function sA(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Qn(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function vi(t,e){for(e&=~xv,e&=~oh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Gn(e),r=1<<n;t[n]=-1,e&=~r}}function fw(t){if(fe&6)throw Error(z(327));fa();var e=Qd(t,0);if(!(e&1))return Yt(t,$e()),null;var n=gf(t,e);if(t.tag!==0&&n===2){var r=Wm(t);r!==0&&(e=r,n=xg(t,r))}if(n===1)throw n=Ec,Wo(t,0),vi(t,e),Yt(t,$e()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ko(t,Ht,Nr),Yt(t,$e()),null}function bv(t,e){var n=fe;fe|=1;try{return t(e)}finally{fe=n,fe===0&&(Ba=$e()+500,th&&ao())}}function ss(t){Mi!==null&&Mi.tag===0&&!(fe&6)&&fa();var e=fe;fe|=1;var n=En.transition,r=ge;try{if(En.transition=null,ge=1,t)return t()}finally{ge=r,En.transition=n,fe=e,!(fe&6)&&ao()}}function Sv(){on=ra.current,Te(ra)}function Wo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,jM(n)),ze!==null)for(n=ze.return;n!==null;){var r=n;switch(nv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&nf();break;case 3:$a(),Te(Gt),Te(xt),dv();break;case 5:uv(r);break;case 4:$a();break;case 13:Te(Pe);break;case 19:Te(Pe);break;case 10:sv(r.type._context);break;case 22:case 23:Sv()}n=n.return}if(Qe=t,ze=t=Ui(t.current,null),lt=on=e,Ke=0,Ec=null,xv=oh=is=0,Ht=Ql=null,Ao!==null){for(e=0;e<Ao.length;e++)if(n=Ao[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}Ao=null}return t}function pk(t,e){do{var n=ze;try{if(ov(),Pd.current=ff,df){for(var r=Me.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}df=!1}if(rs=0,Je=He=Me=null,Jl=!1,Sc=0,vv.current=null,n===null||n.return===null){Ke=1,Ec=e,ze=null;break}e:{var o=t,s=n.return,a=n,l=e;if(e=lt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=Zx(s);if(p!==null){p.flags&=-257,ew(p,s,a,o,e),p.mode&1&&Xx(o,c,e),e=p,l=c;var m=e.updateQueue;if(m===null){var g=new Set;g.add(l),e.updateQueue=g}else m.add(l);break e}else{if(!(e&1)){Xx(o,c,e),Cv();break e}l=Error(z(426))}}else if(Re&&a.mode&1){var x=Zx(s);if(x!==null){!(x.flags&65536)&&(x.flags|=256),ew(x,s,a,o,e),rv(Fa(l,a));break e}}o=l=Fa(l,a),Ke!==4&&(Ke=2),Ql===null?Ql=[o]:Ql.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var v=QC(o,l,e);Kx(o,v);break e;case 1:a=l;var w=o.type,S=o.stateNode;if(!(o.flags&128)&&(typeof w.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Bi===null||!Bi.has(S)))){o.flags|=65536,e&=-e,o.lanes|=e;var b=XC(o,a,e);Kx(o,b);break e}}o=o.return}while(o!==null)}yk(n)}catch(C){e=C,ze===n&&n!==null&&(ze=n=n.return);continue}break}while(1)}function mk(){var t=hf.current;return hf.current=ff,t===null?ff:t}function Cv(){(Ke===0||Ke===3||Ke===2)&&(Ke=4),Qe===null||!(is&268435455)&&!(oh&268435455)||vi(Qe,lt)}function gf(t,e){var n=fe;fe|=2;var r=mk();(Qe!==t||lt!==e)&&(Nr=null,Wo(t,e));do try{aA();break}catch(i){pk(t,i)}while(1);if(ov(),fe=n,hf.current=r,ze!==null)throw Error(z(261));return Qe=null,lt=0,Ke}function aA(){for(;ze!==null;)gk(ze)}function lA(){for(;ze!==null&&!DP();)gk(ze)}function gk(t){var e=xk(t.alternate,t,on);t.memoizedProps=t.pendingProps,e===null?yk(t):ze=e,vv.current=null}function yk(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=tA(n,e),n!==null){n.flags&=32767,ze=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ke=6,ze=null;return}}else if(n=eA(n,e,on),n!==null){ze=n;return}if(e=e.sibling,e!==null){ze=e;return}ze=e=t}while(e!==null);Ke===0&&(Ke=5)}function ko(t,e,n){var r=ge,i=En.transition;try{En.transition=null,ge=1,cA(t,e,n,r)}finally{En.transition=i,ge=r}return null}function cA(t,e,n,r){do fa();while(Mi!==null);if(fe&6)throw Error(z(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(VP(t,o),t===Qe&&(ze=Qe=null,lt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ju||(Ju=!0,wk(Yd,function(){return fa(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=En.transition,En.transition=null;var s=ge;ge=1;var a=fe;fe|=4,vv.current=null,rA(t,n),dk(n,t),OM(Qm),Xd=!!Ym,Qm=Ym=null,t.current=n,iA(n),NP(),fe=a,ge=s,En.transition=o}else t.current=n;if(Ju&&(Ju=!1,Mi=t,mf=i),o=t.pendingLanes,o===0&&(Bi=null),LP(n.stateNode),Yt(t,$e()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(pf)throw pf=!1,t=yg,yg=null,t;return mf&1&&t.tag!==0&&fa(),o=t.pendingLanes,o&1?t===vg?Xl++:(Xl=0,vg=t):Xl=0,ao(),null}function fa(){if(Mi!==null){var t=QS(mf),e=En.transition,n=ge;try{if(En.transition=null,ge=16>t?16:t,Mi===null)var r=!1;else{if(t=Mi,Mi=null,mf=0,fe&6)throw Error(z(331));var i=fe;for(fe|=4,q=t.current;q!==null;){var o=q,s=o.child;if(q.flags&16){var a=o.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(q=c;q!==null;){var u=q;switch(u.tag){case 0:case 11:case 15:Yl(8,u,o)}var d=u.child;if(d!==null)d.return=u,q=d;else for(;q!==null;){u=q;var f=u.sibling,p=u.return;if(lk(u),u===c){q=null;break}if(f!==null){f.return=p,q=f;break}q=p}}}var m=o.alternate;if(m!==null){var g=m.child;if(g!==null){m.child=null;do{var x=g.sibling;g.sibling=null,g=x}while(g!==null)}}q=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,q=s;else e:for(;q!==null;){if(o=q,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Yl(9,o,o.return)}var v=o.sibling;if(v!==null){v.return=o.return,q=v;break e}q=o.return}}var w=t.current;for(q=w;q!==null;){s=q;var S=s.child;if(s.subtreeFlags&2064&&S!==null)S.return=s,q=S;else e:for(s=w;q!==null;){if(a=q,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:ih(9,a)}}catch(C){Ne(a,a.return,C)}if(a===s){q=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,q=b;break e}q=a.return}}if(fe=i,ao(),wr&&typeof wr.onPostCommitFiberRoot=="function")try{wr.onPostCommitFiberRoot(Yf,t)}catch{}r=!0}return r}finally{ge=n,En.transition=e}}return!1}function hw(t,e,n){e=Fa(n,e),e=QC(t,e,1),t=Fi(t,e,1),e=Rt(),t!==null&&(ou(t,1,e),Yt(t,e))}function Ne(t,e,n){if(t.tag===3)hw(t,t,n);else for(;e!==null;){if(e.tag===3){hw(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Bi===null||!Bi.has(r))){t=Fa(n,t),t=XC(e,t,1),e=Fi(e,t,1),t=Rt(),e!==null&&(ou(e,1,t),Yt(e,t));break}}e=e.return}}function uA(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Rt(),t.pingedLanes|=t.suspendedLanes&n,Qe===t&&(lt&n)===n&&(Ke===4||Ke===3&&(lt&130023424)===lt&&500>$e()-wv?Wo(t,0):xv|=n),Yt(t,e)}function vk(t,e){e===0&&(t.mode&1?(e=Fu,Fu<<=1,!(Fu&130023424)&&(Fu=4194304)):e=1);var n=Rt();t=Jr(t,e),t!==null&&(ou(t,e,n),Yt(t,n))}function dA(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),vk(t,n)}function fA(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),vk(t,n)}var xk;xk=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Gt.current)Kt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Kt=!1,ZM(t,e,n);Kt=!!(t.flags&131072)}else Kt=!1,Re&&e.flags&1048576&&CC(e,sf,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ad(t,e),t=e.pendingProps;var i=Ia(e,xt.current);da(e,n),i=hv(null,e,r,t,i,n);var o=pv();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Jt(r)?(o=!0,rf(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,lv(e),i.updater=rh,e.stateNode=i,i._reactInternals=e,sg(e,r,t,n),e=cg(null,e,r,!0,o,n)):(e.tag=0,Re&&o&&tv(e),_t(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ad(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=pA(r),t=Fn(r,t),i){case 0:e=lg(null,e,r,t,n);break e;case 1:e=rw(null,e,r,t,n);break e;case 11:e=tw(null,e,r,t,n);break e;case 14:e=nw(null,e,r,Fn(r.type,t),n);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Fn(r,i),lg(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Fn(r,i),rw(t,e,r,i,n);case 3:e:{if(nk(e),t===null)throw Error(z(387));r=e.pendingProps,o=e.memoizedState,i=o.element,OC(t,e),cf(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=Fa(Error(z(423)),e),e=iw(t,e,r,n,i);break e}else if(r!==i){i=Fa(Error(z(424)),e),e=iw(t,e,r,n,i);break e}else for(ln=$i(e.stateNode.containerInfo.firstChild),cn=e,Re=!0,Hn=null,n=_C(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ja(),r===i){e=Yr(t,e,n);break e}_t(t,e,r,n)}e=e.child}return e;case 5:return PC(e),t===null&&rg(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,Xm(r,i)?s=null:o!==null&&Xm(r,o)&&(e.flags|=32),tk(t,e),_t(t,e,s,n),e.child;case 6:return t===null&&rg(e),null;case 13:return rk(t,e,n);case 4:return cv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=La(e,null,r,n):_t(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Fn(r,i),tw(t,e,r,i,n);case 7:return _t(t,e,e.pendingProps,n),e.child;case 8:return _t(t,e,e.pendingProps.children,n),e.child;case 12:return _t(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,Se(af,r._currentValue),r._currentValue=s,o!==null)if(Qn(o.value,s)){if(o.children===i.children&&!Gt.current){e=Yr(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=Hr(-1,n&-n),l.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),ig(o.return,n,e),a.lanes|=n;break}l=l.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(z(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),ig(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}_t(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,da(e,n),i=Mn(i),r=r(i),e.flags|=1,_t(t,e,r,n),e.child;case 14:return r=e.type,i=Fn(r,e.pendingProps),i=Fn(r.type,i),nw(t,e,r,i,n);case 15:return ZC(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Fn(r,i),Ad(t,e),e.tag=1,Jt(r)?(t=!0,rf(e)):t=!1,da(e,n),YC(e,r,i),sg(e,r,i,n),cg(null,e,r,!0,t,n);case 19:return ik(t,e,n);case 22:return ek(t,e,n)}throw Error(z(156,e.tag))};function wk(t,e){return qS(t,e)}function hA(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kn(t,e,n,r){return new hA(t,e,n,r)}function kv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function pA(t){if(typeof t=="function")return kv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Vy)return 11;if(t===Hy)return 14}return 2}function Ui(t,e){var n=t.alternate;return n===null?(n=kn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Id(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")kv(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case qs:return Ko(n.children,i,o,e);case Uy:s=8,i|=8;break;case Pm:return t=kn(12,n,e,i|2),t.elementType=Pm,t.lanes=o,t;case Mm:return t=kn(13,n,e,i),t.elementType=Mm,t.lanes=o,t;case Am:return t=kn(19,n,e,i),t.elementType=Am,t.lanes=o,t;case PS:return sh(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case RS:s=10;break e;case OS:s=9;break e;case Vy:s=11;break e;case Hy:s=14;break e;case fi:s=16,r=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=kn(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function Ko(t,e,n,r){return t=kn(7,t,r,e),t.lanes=n,t}function sh(t,e,n,r){return t=kn(22,t,r,e),t.elementType=PS,t.lanes=n,t.stateNode={isHidden:!1},t}function _p(t,e,n){return t=kn(6,t,null,e),t.lanes=n,t}function Rp(t,e,n){return e=kn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function mA(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=lp(0),this.expirationTimes=lp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=lp(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Ev(t,e,n,r,i,o,s,a,l){return t=new mA(t,e,n,a,l),e===1?(e=1,o===!0&&(e|=8)):e=0,o=kn(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},lv(o),t}function gA(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ks,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function bk(t){if(!t)return Ji;t=t._reactInternals;e:{if(vs(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Jt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if(Jt(n))return bC(t,n,e)}return e}function Sk(t,e,n,r,i,o,s,a,l){return t=Ev(n,r,!0,t,i,o,s,a,l),t.context=bk(null),n=t.current,r=Rt(),i=zi(n),o=Hr(r,i),o.callback=e??null,Fi(n,o,i),t.current.lanes=i,ou(t,i,r),Yt(t,r),t}function ah(t,e,n,r){var i=e.current,o=Rt(),s=zi(i);return n=bk(n),e.context===null?e.context=n:e.pendingContext=n,e=Hr(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Fi(i,e,s),t!==null&&(Jn(t,i,s,o),Od(t,i,s)),s}function yf(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function pw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Tv(t,e){pw(t,e),(t=t.alternate)&&pw(t,e)}function yA(){return null}var Ck=typeof reportError=="function"?reportError:function(t){console.error(t)};function _v(t){this._internalRoot=t}lh.prototype.render=_v.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));ah(t,e,null,null)};lh.prototype.unmount=_v.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ss(function(){ah(null,t,null,null)}),e[Gr]=null}};function lh(t){this._internalRoot=t}lh.prototype.unstable_scheduleHydration=function(t){if(t){var e=eC();t={blockedOn:null,target:t,priority:e};for(var n=0;n<yi.length&&e!==0&&e<yi[n].priority;n++);yi.splice(n,0,t),n===0&&nC(t)}};function Rv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ch(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function mw(){}function vA(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var c=yf(s);o.call(c)}}var s=Sk(e,r,t,0,null,!1,!1,"",mw);return t._reactRootContainer=s,t[Gr]=s.current,yc(t.nodeType===8?t.parentNode:t),ss(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=yf(l);a.call(c)}}var l=Ev(t,0,!1,null,null,!1,!1,"",mw);return t._reactRootContainer=l,t[Gr]=l.current,yc(t.nodeType===8?t.parentNode:t),ss(function(){ah(e,l,n,r)}),l}function uh(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var l=yf(s);a.call(l)}}ah(e,s,t,i)}else s=vA(n,e,t,i,r);return yf(s)}XS=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Pl(e.pendingLanes);n!==0&&(qy(e,n|1),Yt(e,$e()),!(fe&6)&&(Ba=$e()+500,ao()))}break;case 13:ss(function(){var r=Jr(t,1);if(r!==null){var i=Rt();Jn(r,t,1,i)}}),Tv(t,1)}};Gy=function(t){if(t.tag===13){var e=Jr(t,134217728);if(e!==null){var n=Rt();Jn(e,t,134217728,n)}Tv(t,134217728)}};ZS=function(t){if(t.tag===13){var e=zi(t),n=Jr(t,e);if(n!==null){var r=Rt();Jn(n,t,e,r)}Tv(t,e)}};eC=function(){return ge};tC=function(t,e){var n=ge;try{return ge=t,e()}finally{ge=n}};Um=function(t,e,n){switch(e){case"input":if(Im(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=eh(r);if(!i)throw Error(z(90));AS(r),Im(r,i)}}}break;case"textarea":NS(t,n);break;case"select":e=n.value,e!=null&&aa(t,!!n.multiple,e,!1)}};zS=bv;US=ss;var xA={usingClientEntryPoint:!1,Events:[au,Qs,eh,FS,BS,bv]},Sl={findFiberByHostInstance:Mo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},wA={bundleType:Sl.bundleType,version:Sl.version,rendererPackageName:Sl.rendererPackageName,rendererConfig:Sl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ei.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=WS(t),t===null?null:t.stateNode},findFiberByHostInstance:Sl.findFiberByHostInstance||yA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yu.isDisabled&&Yu.supportsFiber)try{Yf=Yu.inject(wA),wr=Yu}catch{}}hn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xA;hn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Rv(e))throw Error(z(200));return gA(t,e,null,n)};hn.createRoot=function(t,e){if(!Rv(t))throw Error(z(299));var n=!1,r="",i=Ck;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Ev(t,1,!1,null,null,n,!1,r,i),t[Gr]=e.current,yc(t.nodeType===8?t.parentNode:t),new _v(e)};hn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=WS(e),t=t===null?null:t.stateNode,t};hn.flushSync=function(t){return ss(t)};hn.hydrate=function(t,e,n){if(!ch(e))throw Error(z(200));return uh(null,t,e,!0,n)};hn.hydrateRoot=function(t,e,n){if(!Rv(t))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=Ck;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=Sk(e,null,t,1,n??null,i,!1,o,s),t[Gr]=e.current,yc(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new lh(e)};hn.render=function(t,e,n){if(!ch(e))throw Error(z(200));return uh(null,t,e,!1,n)};hn.unmountComponentAtNode=function(t){if(!ch(t))throw Error(z(40));return t._reactRootContainer?(ss(function(){uh(null,null,t,!1,function(){t._reactRootContainer=null,t[Gr]=null})}),!0):!1};hn.unstable_batchedUpdates=bv;hn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ch(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return uh(t,e,n,!1,r)};hn.version="18.3.1-next-f1338f8080-20240426";function kk(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(kk)}catch(t){console.error(t)}}kk(),kS.exports=hn;var cu=kS.exports;const Ek=fS(cu);var gw=cu;Rm.createRoot=gw.createRoot,Rm.hydrateRoot=gw.hydrateRoot;const bA="modulepreload",SA=function(t){return"/"+t},yw={},as=function(e,n,r){if(!n||n.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(n.map(o=>{if(o=SA(o),o in yw)return;yw[o]=!0;const s=o.endsWith(".css"),a=s?'[rel="stylesheet"]':"";if(!!r)for(let u=i.length-1;u>=0;u--){const d=i[u];if(d.href===o&&(!s||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${a}`))return;const c=document.createElement("link");if(c.rel=s?"stylesheet":bA,s||(c.as="script",c.crossOrigin=""),c.href=o,document.head.appendChild(c),s)return new Promise((u,d)=>{c.addEventListener("load",u),c.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>e()).catch(o=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o})};var Ov={};Object.defineProperty(Ov,"__esModule",{value:!0});Ov.parse=OA;Ov.serialize=PA;const CA=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,kA=/^[\u0021-\u003A\u003C-\u007E]*$/,EA=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,TA=/^[\u0020-\u003A\u003D-\u007E]*$/,_A=Object.prototype.toString,RA=(()=>{const t=function(){};return t.prototype=Object.create(null),t})();function OA(t,e){const n=new RA,r=t.length;if(r<2)return n;const i=(e==null?void 0:e.decode)||MA;let o=0;do{const s=t.indexOf("=",o);if(s===-1)break;const a=t.indexOf(";",o),l=a===-1?r:a;if(s>l){o=t.lastIndexOf(";",s-1)+1;continue}const c=vw(t,o,s),u=xw(t,s,c),d=t.slice(c,u);if(n[d]===void 0){let f=vw(t,s+1,l),p=xw(t,l,f);const m=i(t.slice(f,p));n[d]=m}o=l+1}while(o<r);return n}function vw(t,e,n){do{const r=t.charCodeAt(e);if(r!==32&&r!==9)return e}while(++e<n);return n}function xw(t,e,n){for(;e>n;){const r=t.charCodeAt(--e);if(r!==32&&r!==9)return e+1}return n}function PA(t,e,n){const r=(n==null?void 0:n.encode)||encodeURIComponent;if(!CA.test(t))throw new TypeError(`argument name is invalid: ${t}`);const i=r(e);if(!kA.test(i))throw new TypeError(`argument val is invalid: ${e}`);let o=t+"="+i;if(!n)return o;if(n.maxAge!==void 0){if(!Number.isInteger(n.maxAge))throw new TypeError(`option maxAge is invalid: ${n.maxAge}`);o+="; Max-Age="+n.maxAge}if(n.domain){if(!EA.test(n.domain))throw new TypeError(`option domain is invalid: ${n.domain}`);o+="; Domain="+n.domain}if(n.path){if(!TA.test(n.path))throw new TypeError(`option path is invalid: ${n.path}`);o+="; Path="+n.path}if(n.expires){if(!AA(n.expires)||!Number.isFinite(n.expires.valueOf()))throw new TypeError(`option expires is invalid: ${n.expires}`);o+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(o+="; HttpOnly"),n.secure&&(o+="; Secure"),n.partitioned&&(o+="; Partitioned"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():void 0){case"low":o+="; Priority=Low";break;case"medium":o+="; Priority=Medium";break;case"high":o+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${n.priority}`)}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:case"strict":o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"none":o+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${n.sameSite}`)}return o}function MA(t){if(t.indexOf("%")===-1)return t;try{return decodeURIComponent(t)}catch{return t}}function AA(t){return _A.call(t)==="[object Date]"}var ww="popstate";function DA(t={}){function e(r,i){let{pathname:o,search:s,hash:a}=r.location;return bg("",{pathname:o,search:s,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Tc(i)}return IA(e,n,null,t)}function Oe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Dn(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function NA(){return Math.random().toString(36).substring(2,10)}function bw(t,e){return{usr:t.state,key:t.key,idx:e}}function bg(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?il(e):e,state:n,key:e&&e.key||r||NA()}}function Tc({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function il(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function IA(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:o=!1}=r,s=i.history,a="POP",l=null,c=u();c==null&&(c=0,s.replaceState({...s.state,idx:c},""));function u(){return(s.state||{idx:null}).idx}function d(){a="POP";let x=u(),v=x==null?null:x-c;c=x,l&&l({action:a,location:g.location,delta:v})}function f(x,v){a="PUSH";let w=bg(g.location,x,v);n&&n(w,x),c=u()+1;let S=bw(w,c),b=g.createHref(w);try{s.pushState(S,"",b)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;i.location.assign(b)}o&&l&&l({action:a,location:g.location,delta:1})}function p(x,v){a="REPLACE";let w=bg(g.location,x,v);n&&n(w,x),c=u();let S=bw(w,c),b=g.createHref(w);s.replaceState(S,"",b),o&&l&&l({action:a,location:g.location,delta:0})}function m(x){let v=i.location.origin!=="null"?i.location.origin:i.location.href,w=typeof x=="string"?x:Tc(x);return w=w.replace(/ $/,"%20"),Oe(v,`No window.location.(origin|href) available to create URL for href: ${w}`),new URL(w,v)}let g={get action(){return a},get location(){return t(i,s)},listen(x){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(ww,d),l=x,()=>{i.removeEventListener(ww,d),l=null}},createHref(x){return e(i,x)},createURL:m,encodeLocation(x){let v=m(x);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:p,go(x){return s.go(x)}};return g}function Tk(t,e,n="/"){return jA(t,e,n,!1)}function jA(t,e,n,r){let i=typeof e=="string"?il(e):e,o=Yi(i.pathname||"/",n);if(o==null)return null;let s=_k(t);LA(s);let a=null;for(let l=0;a==null&&l<s.length;++l){let c=GA(o);a=KA(s[l],c,r)}return a}function _k(t,e=[],n=[],r=""){let i=(o,s,a)=>{let l={relativePath:a===void 0?o.path||"":a,caseSensitive:o.caseSensitive===!0,childrenIndex:s,route:o};l.relativePath.startsWith("/")&&(Oe(l.relativePath.startsWith(r),`Absolute route path "${l.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(r.length));let c=Wr([r,l.relativePath]),u=n.concat(l);o.children&&o.children.length>0&&(Oe(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),_k(o.children,e,u,c)),!(o.path==null&&!o.index)&&e.push({path:c,score:HA(c,o.index),routesMeta:u})};return t.forEach((o,s)=>{var a;if(o.path===""||!((a=o.path)!=null&&a.includes("?")))i(o,s);else for(let l of Rk(o.path))i(o,s,l)}),e}function Rk(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let s=Rk(r.join("/")),a=[];return a.push(...s.map(l=>l===""?o:[o,l].join("/"))),i&&a.push(...s),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function LA(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:WA(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var $A=/^:[\w-]+$/,FA=3,BA=2,zA=1,UA=10,VA=-2,Sw=t=>t==="*";function HA(t,e){let n=t.split("/"),r=n.length;return n.some(Sw)&&(r+=VA),e&&(r+=BA),n.filter(i=>!Sw(i)).reduce((i,o)=>i+($A.test(o)?FA:o===""?zA:UA),r)}function WA(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function KA(t,e,n=!1){let{routesMeta:r}=t,i={},o="/",s=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=o==="/"?e:e.slice(o.length)||"/",d=vf({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),f=l.route;if(!d&&c&&n&&!r[r.length-1].route.index&&(d=vf({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!d)return null;Object.assign(i,d.params),s.push({params:i,pathname:Wr([o,d.pathname]),pathnameBase:XA(Wr([o,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(o=Wr([o,d.pathnameBase]))}return s}function vf(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=qA(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,{paramName:u,isOptional:d},f)=>{if(u==="*"){let m=a[f]||"";s=o.slice(0,o.length-m.length).replace(/(.)\/+$/,"$1")}const p=a[f];return d&&!p?c[u]=void 0:c[u]=(p||"").replace(/%2F/g,"/"),c},{}),pathname:o,pathnameBase:s,pattern:t}}function qA(t,e=!1,n=!0){Dn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function GA(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Dn(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Yi(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function JA(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?il(t):t;return{pathname:n?n.startsWith("/")?n:YA(n,e):e,search:ZA(r),hash:eD(i)}}function YA(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Op(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function QA(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Pv(t){let e=QA(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function Mv(t,e,n,r=!1){let i;typeof t=="string"?i=il(t):(i={...t},Oe(!i.pathname||!i.pathname.includes("?"),Op("?","pathname","search",i)),Oe(!i.pathname||!i.pathname.includes("#"),Op("#","pathname","hash",i)),Oe(!i.search||!i.search.includes("#"),Op("#","search","hash",i)));let o=t===""||i.pathname==="",s=o?"/":i.pathname,a;if(s==null)a=n;else{let d=e.length-1;if(!r&&s.startsWith("..")){let f=s.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}a=d>=0?e[d]:"/"}let l=JA(i,a),c=s&&s!=="/"&&s.endsWith("/"),u=(o||s===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}var Wr=t=>t.join("/").replace(/\/\/+/g,"/"),XA=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),ZA=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,eD=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function tD(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var Ok=["POST","PUT","PATCH","DELETE"];new Set(Ok);var nD=["GET",...Ok];new Set(nD);var ol=y.createContext(null);ol.displayName="DataRouter";var dh=y.createContext(null);dh.displayName="DataRouterState";var Pk=y.createContext({isTransitioning:!1});Pk.displayName="ViewTransition";var rD=y.createContext(new Map);rD.displayName="Fetchers";var iD=y.createContext(null);iD.displayName="Await";var tr=y.createContext(null);tr.displayName="Navigation";var uu=y.createContext(null);uu.displayName="Location";var nr=y.createContext({outlet:null,matches:[],isDataRoute:!1});nr.displayName="Route";var Av=y.createContext(null);Av.displayName="RouteError";function oD(t,{relative:e}={}){Oe(sl(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=y.useContext(tr),{hash:i,pathname:o,search:s}=du(t,{relative:e}),a=o;return n!=="/"&&(a=o==="/"?n:Wr([n,o])),r.createHref({pathname:a,search:s,hash:i})}function sl(){return y.useContext(uu)!=null}function jn(){return Oe(sl(),"useLocation() may be used only in the context of a <Router> component."),y.useContext(uu).location}var Mk="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Ak(t){y.useContext(tr).static||y.useLayoutEffect(t)}function rr(){let{isDataRoute:t}=y.useContext(nr);return t?xD():sD()}function sD(){Oe(sl(),"useNavigate() may be used only in the context of a <Router> component.");let t=y.useContext(ol),{basename:e,navigator:n}=y.useContext(tr),{matches:r}=y.useContext(nr),{pathname:i}=jn(),o=JSON.stringify(Pv(r)),s=y.useRef(!1);return Ak(()=>{s.current=!0}),y.useCallback((l,c={})=>{if(Dn(s.current,Mk),!s.current)return;if(typeof l=="number"){n.go(l);return}let u=Mv(l,JSON.parse(o),i,c.relative==="path");t==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:Wr([e,u.pathname])),(c.replace?n.replace:n.push)(u,c.state,c)},[e,n,o,i,t])}y.createContext(null);function aD(){let{matches:t}=y.useContext(nr),e=t[t.length-1];return e?e.params:{}}function du(t,{relative:e}={}){let{matches:n}=y.useContext(nr),{pathname:r}=jn(),i=JSON.stringify(Pv(n));return y.useMemo(()=>Mv(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function lD(t,e){return Dk(t,e)}function Dk(t,e,n,r){var w;Oe(sl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:o}=y.useContext(tr),{matches:s}=y.useContext(nr),a=s[s.length-1],l=a?a.params:{},c=a?a.pathname:"/",u=a?a.pathnameBase:"/",d=a&&a.route;{let S=d&&d.path||"";Nk(c,!d||S.endsWith("*")||S.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${S}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${S}"> to <Route path="${S==="/"?"*":`${S}/*`}">.`)}let f=jn(),p;if(e){let S=typeof e=="string"?il(e):e;Oe(u==="/"||((w=S.pathname)==null?void 0:w.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${S.pathname}" was given in the \`location\` prop.`),p=S}else p=f;let m=p.pathname||"/",g=m;if(u!=="/"){let S=u.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(S.length).join("/")}let x=!o&&n&&n.matches&&n.matches.length>0?n.matches:Tk(t,{pathname:g});Dn(d||x!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),Dn(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let v=hD(x&&x.map(S=>Object.assign({},S,{params:Object.assign({},l,S.params),pathname:Wr([u,i.encodeLocation?i.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?u:Wr([u,i.encodeLocation?i.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),s,n,r);return e&&v?y.createElement(uu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},v):v}function cD(){let t=vD(),e=tD(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},s=null;return console.error("Error handled by React Router default ErrorBoundary:",t),s=y.createElement(y.Fragment,null,y.createElement("p",null," Hey developer "),y.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",y.createElement("code",{style:o},"ErrorBoundary")," or"," ",y.createElement("code",{style:o},"errorElement")," prop on your route.")),y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},e),n?y.createElement("pre",{style:i},n):null,s)}var uD=y.createElement(cD,null),dD=class extends y.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?y.createElement(nr.Provider,{value:this.props.routeContext},y.createElement(Av.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function fD({routeContext:t,match:e,children:n}){let r=y.useContext(ol);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),y.createElement(nr.Provider,{value:t},n)}function hD(t,e=[],n=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,o=n==null?void 0:n.errors;if(o!=null){let l=i.findIndex(c=>c.route.id&&(o==null?void 0:o[c.route.id])!==void 0);Oe(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,l+1))}let s=!1,a=-1;if(n)for(let l=0;l<i.length;l++){let c=i[l];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(a=l),c.route.id){let{loaderData:u,errors:d}=n,f=c.route.loader&&!u.hasOwnProperty(c.route.id)&&(!d||d[c.route.id]===void 0);if(c.route.lazy||f){s=!0,a>=0?i=i.slice(0,a+1):i=[i[0]];break}}}return i.reduceRight((l,c,u)=>{let d,f=!1,p=null,m=null;n&&(d=o&&c.route.id?o[c.route.id]:void 0,p=c.route.errorElement||uD,s&&(a<0&&u===0?(Nk("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),f=!0,m=null):a===u&&(f=!0,m=c.route.hydrateFallbackElement||null)));let g=e.concat(i.slice(0,u+1)),x=()=>{let v;return d?v=p:f?v=m:c.route.Component?v=y.createElement(c.route.Component,null):c.route.element?v=c.route.element:v=l,y.createElement(fD,{match:c,routeContext:{outlet:l,matches:g,isDataRoute:n!=null},children:v})};return n&&(c.route.ErrorBoundary||c.route.errorElement||u===0)?y.createElement(dD,{location:n.location,revalidation:n.revalidation,component:p,error:d,children:x(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):x()},null)}function Dv(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function pD(t){let e=y.useContext(ol);return Oe(e,Dv(t)),e}function mD(t){let e=y.useContext(dh);return Oe(e,Dv(t)),e}function gD(t){let e=y.useContext(nr);return Oe(e,Dv(t)),e}function Nv(t){let e=gD(t),n=e.matches[e.matches.length-1];return Oe(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function yD(){return Nv("useRouteId")}function vD(){var r;let t=y.useContext(Av),e=mD("useRouteError"),n=Nv("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function xD(){let{router:t}=pD("useNavigate"),e=Nv("useNavigate"),n=y.useRef(!1);return Ak(()=>{n.current=!0}),y.useCallback(async(i,o={})=>{Dn(n.current,Mk),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...o}))},[t,e])}var Cw={};function Nk(t,e,n){!e&&!Cw[t]&&(Cw[t]=!0,Dn(!1,n))}y.memo(wD);function wD({routes:t,future:e,state:n}){return Dk(t,void 0,n,e)}function xf({to:t,replace:e,state:n,relative:r}){Oe(sl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=y.useContext(tr);Dn(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=y.useContext(nr),{pathname:s}=jn(),a=rr(),l=Mv(t,Pv(o),s,r==="path"),c=JSON.stringify(l);return y.useEffect(()=>{a(JSON.parse(c),{replace:e,state:n,relative:r})},[a,c,r,e,n]),null}function tn(t){Oe(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function bD({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:o=!1}){Oe(!sl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let s=t.replace(/^\/*/,"/"),a=y.useMemo(()=>({basename:s,navigator:i,static:o,future:{}}),[s,i,o]);typeof n=="string"&&(n=il(n));let{pathname:l="/",search:c="",hash:u="",state:d=null,key:f="default"}=n,p=y.useMemo(()=>{let m=Yi(l,s);return m==null?null:{location:{pathname:m,search:c,hash:u,state:d,key:f},navigationType:r}},[s,l,c,u,d,f,r]);return Dn(p!=null,`<Router basename="${s}"> is not able to match the URL "${l}${c}${u}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:y.createElement(tr.Provider,{value:a},y.createElement(uu.Provider,{children:e,value:p}))}function SD({children:t,location:e}){return lD(Sg(t),e)}function Sg(t,e=[]){let n=[];return y.Children.forEach(t,(r,i)=>{if(!y.isValidElement(r))return;let o=[...e,i];if(r.type===y.Fragment){n.push.apply(n,Sg(r.props.children,o));return}Oe(r.type===tn,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Oe(!r.props.index||!r.props.children,"An index route cannot have child routes.");let s={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=Sg(r.props.children,o)),n.push(s)}),n}var jd="get",Ld="application/x-www-form-urlencoded";function fh(t){return t!=null&&typeof t.tagName=="string"}function CD(t){return fh(t)&&t.tagName.toLowerCase()==="button"}function kD(t){return fh(t)&&t.tagName.toLowerCase()==="form"}function ED(t){return fh(t)&&t.tagName.toLowerCase()==="input"}function TD(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function _D(t,e){return t.button===0&&(!e||e==="_self")&&!TD(t)}function Cg(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function RD(t,e){let n=Cg(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(o=>{n.append(i,o)})}),n}var Qu=null;function OD(){if(Qu===null)try{new FormData(document.createElement("form"),0),Qu=!1}catch{Qu=!0}return Qu}var PD=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Pp(t){return t!=null&&!PD.has(t)?(Dn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ld}"`),null):t}function MD(t,e){let n,r,i,o,s;if(kD(t)){let a=t.getAttribute("action");r=a?Yi(a,e):null,n=t.getAttribute("method")||jd,i=Pp(t.getAttribute("enctype"))||Ld,o=new FormData(t)}else if(CD(t)||ED(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||a.getAttribute("action");if(r=l?Yi(l,e):null,n=t.getAttribute("formmethod")||a.getAttribute("method")||jd,i=Pp(t.getAttribute("formenctype"))||Pp(a.getAttribute("enctype"))||Ld,o=new FormData(a,t),!OD()){let{name:c,type:u,value:d}=t;if(u==="image"){let f=c?`${c}.`:"";o.append(`${f}x`,"0"),o.append(`${f}y`,"0")}else c&&o.append(c,d)}}else{if(fh(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=jd,r=null,i=Ld,s=t}return o&&i==="text/plain"&&(s=o,o=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:o,body:s}}function Iv(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function AD(t,e){if(t.id in e)return e[t.id];try{let n=await as(()=>import(t.module),[]);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function DD(t){return t!=null&&typeof t.page=="string"}function ND(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function ID(t,e,n){let r=await Promise.all(t.map(async i=>{let o=e.routes[i.route.id];if(o){let s=await AD(o,n);return s.links?s.links():[]}return[]}));return FD(r.flat(1).filter(ND).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function kw(t,e,n,r,i,o){let s=(l,c)=>n[c]?l.route.id!==n[c].route.id:!0,a=(l,c)=>{var u;return n[c].pathname!==l.pathname||((u=n[c].route.path)==null?void 0:u.endsWith("*"))&&n[c].params["*"]!==l.params["*"]};return o==="assets"?e.filter((l,c)=>s(l,c)||a(l,c)):o==="data"?e.filter((l,c)=>{var d;let u=r.routes[l.route.id];if(!u||!u.hasLoader)return!1;if(s(l,c)||a(l,c))return!0;if(l.route.shouldRevalidate){let f=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((d=n[0])==null?void 0:d.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function jD(t,e,{includeHydrateFallback:n}={}){return LD(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let o=[i.module];return i.clientActionModule&&(o=o.concat(i.clientActionModule)),i.clientLoaderModule&&(o=o.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(o=o.concat(i.hydrateFallbackModule)),i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function LD(t){return[...new Set(t)]}function $D(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function FD(t,e){let n=new Set,r=new Set(e);return t.reduce((i,o)=>{if(e&&!DD(o)&&o.as==="script"&&o.href&&r.has(o.href))return i;let a=JSON.stringify($D(o));return n.has(a)||(n.add(a),i.push({key:a,link:o})),i},[])}function BD(t){let e=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function zD(){let t=y.useContext(ol);return Iv(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function UD(){let t=y.useContext(dh);return Iv(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var jv=y.createContext(void 0);jv.displayName="FrameworkContext";function Ik(){let t=y.useContext(jv);return Iv(t,"You must render this element inside a <HydratedRouter> element"),t}function VD(t,e){let n=y.useContext(jv),[r,i]=y.useState(!1),[o,s]=y.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:c,onMouseLeave:u,onTouchStart:d}=e,f=y.useRef(null);y.useEffect(()=>{if(t==="render"&&s(!0),t==="viewport"){let g=v=>{v.forEach(w=>{s(w.isIntersecting)})},x=new IntersectionObserver(g,{threshold:.5});return f.current&&x.observe(f.current),()=>{x.disconnect()}}},[t]),y.useEffect(()=>{if(r){let g=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(g)}}},[r]);let p=()=>{i(!0)},m=()=>{i(!1),s(!1)};return n?t!=="intent"?[o,f,{}]:[o,f,{onFocus:Cl(a,p),onBlur:Cl(l,m),onMouseEnter:Cl(c,p),onMouseLeave:Cl(u,m),onTouchStart:Cl(d,p)}]:[!1,f,{}]}function Cl(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function HD({page:t,...e}){let{router:n}=zD(),r=y.useMemo(()=>Tk(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?y.createElement(KD,{page:t,matches:r,...e}):null}function WD(t){let{manifest:e,routeModules:n}=Ik(),[r,i]=y.useState([]);return y.useEffect(()=>{let o=!1;return ID(t,e,n).then(s=>{o||i(s)}),()=>{o=!0}},[t,e,n]),r}function KD({page:t,matches:e,...n}){let r=jn(),{manifest:i,routeModules:o}=Ik(),{loaderData:s,matches:a}=UD(),l=y.useMemo(()=>kw(t,e,a,i,r,"data"),[t,e,a,i,r]),c=y.useMemo(()=>kw(t,e,a,i,r,"assets"),[t,e,a,i,r]),u=y.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let p=new Set,m=!1;if(e.forEach(x=>{var w;let v=i.routes[x.route.id];!v||!v.hasLoader||(!l.some(S=>S.route.id===x.route.id)&&x.route.id in s&&((w=o[x.route.id])!=null&&w.shouldRevalidate)||v.hasClientLoader?m=!0:p.add(x.route.id))}),p.size===0)return[];let g=BD(t);return m&&p.size>0&&g.searchParams.set("_routes",e.filter(x=>p.has(x.route.id)).map(x=>x.route.id).join(",")),[g.pathname+g.search]},[s,r,i,l,e,t,o]),d=y.useMemo(()=>jD(c,i),[c,i]),f=WD(c);return y.createElement(y.Fragment,null,u.map(p=>y.createElement("link",{key:p,rel:"prefetch",as:"fetch",href:p,...n})),d.map(p=>y.createElement("link",{key:p,rel:"modulepreload",href:p,...n})),f.map(({key:p,link:m})=>y.createElement("link",{key:p,...m})))}function qD(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var jk=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{jk&&(window.__reactRouterVersion="7.2.0")}catch{}function GD({basename:t,children:e,window:n}){let r=y.useRef();r.current==null&&(r.current=DA({window:n,v5Compat:!0}));let i=r.current,[o,s]=y.useState({action:i.action,location:i.location}),a=y.useCallback(l=>{y.startTransition(()=>s(l))},[s]);return y.useLayoutEffect(()=>i.listen(a),[i,a]),y.createElement(bD,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:i})}var Lk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Lv=y.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:o,replace:s,state:a,target:l,to:c,preventScrollReset:u,viewTransition:d,...f},p){let{basename:m}=y.useContext(tr),g=typeof c=="string"&&Lk.test(c),x,v=!1;if(typeof c=="string"&&g&&(x=c,jk))try{let P=new URL(window.location.href),R=c.startsWith("//")?new URL(P.protocol+c):new URL(c),N=Yi(R.pathname,m);R.origin===P.origin&&N!=null?c=N+R.search+R.hash:v=!0}catch{Dn(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let w=oD(c,{relative:i}),[S,b,C]=VD(r,f),k=XD(c,{replace:s,state:a,target:l,preventScrollReset:u,relative:i,viewTransition:d});function E(P){e&&e(P),P.defaultPrevented||k(P)}let _=y.createElement("a",{...f,...C,href:x||w,onClick:v||o?e:E,ref:qD(p,b),target:l,"data-discover":!g&&n==="render"?"true":void 0});return S&&!g?y.createElement(y.Fragment,null,_,y.createElement(HD,{page:w})):_});Lv.displayName="Link";var JD=y.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:o,to:s,viewTransition:a,children:l,...c},u){let d=du(s,{relative:c.relative}),f=jn(),p=y.useContext(dh),{navigator:m,basename:g}=y.useContext(tr),x=p!=null&&iN(d)&&a===!0,v=m.encodeLocation?m.encodeLocation(d).pathname:d.pathname,w=f.pathname,S=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;n||(w=w.toLowerCase(),S=S?S.toLowerCase():null,v=v.toLowerCase()),S&&g&&(S=Yi(S,g)||S);const b=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let C=w===v||!i&&w.startsWith(v)&&w.charAt(b)==="/",k=S!=null&&(S===v||!i&&S.startsWith(v)&&S.charAt(v.length)==="/"),E={isActive:C,isPending:k,isTransitioning:x},_=C?e:void 0,P;typeof r=="function"?P=r(E):P=[r,C?"active":null,k?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let R=typeof o=="function"?o(E):o;return y.createElement(Lv,{...c,"aria-current":_,className:P,ref:u,style:R,to:s,viewTransition:a},typeof l=="function"?l(E):l)});JD.displayName="NavLink";var YD=y.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:o,method:s=jd,action:a,onSubmit:l,relative:c,preventScrollReset:u,viewTransition:d,...f},p)=>{let m=nN(),g=rN(a,{relative:c}),x=s.toLowerCase()==="get"?"get":"post",v=typeof a=="string"&&Lk.test(a),w=S=>{if(l&&l(S),S.defaultPrevented)return;S.preventDefault();let b=S.nativeEvent.submitter,C=(b==null?void 0:b.getAttribute("formmethod"))||s;m(b||S.currentTarget,{fetcherKey:e,method:C,navigate:n,replace:i,state:o,relative:c,preventScrollReset:u,viewTransition:d})};return y.createElement("form",{ref:p,method:x,action:g,onSubmit:r?l:w,...f,"data-discover":!v&&t==="render"?"true":void 0})});YD.displayName="Form";function QD(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function $k(t){let e=y.useContext(ol);return Oe(e,QD(t)),e}function XD(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:o,viewTransition:s}={}){let a=rr(),l=jn(),c=du(t,{relative:o});return y.useCallback(u=>{if(_D(u,e)){u.preventDefault();let d=n!==void 0?n:Tc(l)===Tc(c);a(t,{replace:d,state:r,preventScrollReset:i,relative:o,viewTransition:s})}},[l,a,c,n,r,e,t,i,o,s])}function ZD(t){Dn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=y.useRef(Cg(t)),n=y.useRef(!1),r=jn(),i=y.useMemo(()=>RD(r.search,n.current?null:e.current),[r.search]),o=rr(),s=y.useCallback((a,l)=>{const c=Cg(typeof a=="function"?a(i):a);n.current=!0,o("?"+c,l)},[o,i]);return[i,s]}var eN=0,tN=()=>`__${String(++eN)}__`;function nN(){let{router:t}=$k("useSubmit"),{basename:e}=y.useContext(tr),n=yD();return y.useCallback(async(r,i={})=>{let{action:o,method:s,encType:a,formData:l,body:c}=MD(r,e);if(i.navigate===!1){let u=i.fetcherKey||tN();await t.fetch(u,n,i.action||o,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||s,formEncType:i.encType||a,flushSync:i.flushSync})}else await t.navigate(i.action||o,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||s,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function rN(t,{relative:e}={}){let{basename:n}=y.useContext(tr),r=y.useContext(nr);Oe(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),o={...du(t||".",{relative:e})},s=jn();if(t==null){o.search=s.search;let a=new URLSearchParams(o.search),l=a.getAll("index");if(l.some(u=>u==="")){a.delete("index"),l.filter(d=>d).forEach(d=>a.append("index",d));let u=a.toString();o.search=u?`?${u}`:""}}return(!t||t===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:Wr([n,o.pathname])),Tc(o)}function iN(t,e={}){let n=y.useContext(Pk);Oe(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=$k("useViewTransitionState"),i=du(t,{relative:e.relative});if(!n.isTransitioning)return!1;let o=Yi(n.currentLocation.pathname,r)||n.currentLocation.pathname,s=Yi(n.nextLocation.pathname,r)||n.nextLocation.pathname;return vf(i.pathname,s)!=null||vf(i.pathname,o)!=null}new TextEncoder;var al=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},ls=typeof window>"u"||"Deno"in globalThis;function xn(){}function oN(t,e){return typeof t=="function"?t(e):t}function kg(t){return typeof t=="number"&&t>=0&&t!==1/0}function Fk(t,e){return Math.max(t+(e||0)-Date.now(),0)}function ha(t,e){return typeof t=="function"?t(e):t}function Wn(t,e){return typeof t=="function"?t(e):t}function Ew(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:o,queryKey:s,stale:a}=t;if(s){if(r){if(e.queryHash!==$v(s,e.options))return!1}else if(!_c(e.queryKey,s))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||i&&i!==e.state.fetchStatus||o&&!o(e))}function Tw(t,e){const{exact:n,status:r,predicate:i,mutationKey:o}=t;if(o){if(!e.options.mutationKey)return!1;if(n){if(cs(e.options.mutationKey)!==cs(o))return!1}else if(!_c(e.options.mutationKey,o))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function $v(t,e){return((e==null?void 0:e.queryKeyHashFn)||cs)(t)}function cs(t){return JSON.stringify(t,(e,n)=>Eg(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function _c(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!_c(t[n],e[n])):!1}function Bk(t,e){if(t===e)return t;const n=_w(t)&&_w(e);if(n||Eg(t)&&Eg(e)){const r=n?t:Object.keys(t),i=r.length,o=n?e:Object.keys(e),s=o.length,a=n?[]:{};let l=0;for(let c=0;c<s;c++){const u=n?c:o[c];(!n&&r.includes(u)||n)&&t[u]===void 0&&e[u]===void 0?(a[u]=void 0,l++):(a[u]=Bk(t[u],e[u]),a[u]===t[u]&&t[u]!==void 0&&l++)}return i===s&&l===i?t:a}return e}function wf(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function _w(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Eg(t){if(!Rw(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!Rw(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Rw(t){return Object.prototype.toString.call(t)==="[object Object]"}function sN(t){return new Promise(e=>{setTimeout(e,t)})}function Tg(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?Bk(t,e):e}function aN(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function lN(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var Fv=Symbol();function zk(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Fv?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var jo,bi,wa,nS,cN=(nS=class extends al{constructor(){super();J(this,jo,void 0);J(this,bi,void 0);J(this,wa,void 0);W(this,wa,e=>{if(!ls&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){T(this,bi)||this.setEventListener(T(this,wa))}onUnsubscribe(){var e;this.hasListeners()||((e=T(this,bi))==null||e.call(this),W(this,bi,void 0))}setEventListener(e){var n;W(this,wa,e),(n=T(this,bi))==null||n.call(this),W(this,bi,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){T(this,jo)!==e&&(W(this,jo,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof T(this,jo)=="boolean"?T(this,jo):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},jo=new WeakMap,bi=new WeakMap,wa=new WeakMap,nS),Bv=new cN,ba,Si,Sa,rS,uN=(rS=class extends al{constructor(){super();J(this,ba,!0);J(this,Si,void 0);J(this,Sa,void 0);W(this,Sa,e=>{if(!ls&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){T(this,Si)||this.setEventListener(T(this,Sa))}onUnsubscribe(){var e;this.hasListeners()||((e=T(this,Si))==null||e.call(this),W(this,Si,void 0))}setEventListener(e){var n;W(this,Sa,e),(n=T(this,Si))==null||n.call(this),W(this,Si,e(this.setOnline.bind(this)))}setOnline(e){T(this,ba)!==e&&(W(this,ba,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return T(this,ba)}},ba=new WeakMap,Si=new WeakMap,Sa=new WeakMap,rS),bf=new uN;function _g(){let t,e;const n=new Promise((i,o)=>{t=i,e=o});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),t(i)},n.reject=i=>{r({status:"rejected",reason:i}),e(i)},n}function dN(t){return Math.min(1e3*2**t,3e4)}function Uk(t){return(t??"online")==="online"?bf.isOnline():!0}var Vk=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Mp(t){return t instanceof Vk}function Hk(t){let e=!1,n=0,r=!1,i;const o=_g(),s=g=>{var x;r||(f(new Vk(g)),(x=t.abort)==null||x.call(t))},a=()=>{e=!0},l=()=>{e=!1},c=()=>Bv.isFocused()&&(t.networkMode==="always"||bf.isOnline())&&t.canRun(),u=()=>Uk(t.networkMode)&&t.canRun(),d=g=>{var x;r||(r=!0,(x=t.onSuccess)==null||x.call(t,g),i==null||i(),o.resolve(g))},f=g=>{var x;r||(r=!0,(x=t.onError)==null||x.call(t,g),i==null||i(),o.reject(g))},p=()=>new Promise(g=>{var x;i=v=>{(r||c())&&g(v)},(x=t.onPause)==null||x.call(t)}).then(()=>{var g;i=void 0,r||(g=t.onContinue)==null||g.call(t)}),m=()=>{if(r)return;let g;const x=n===0?t.initialPromise:void 0;try{g=x??t.fn()}catch(v){g=Promise.reject(v)}Promise.resolve(g).then(d).catch(v=>{var k;if(r)return;const w=t.retry??(ls?0:3),S=t.retryDelay??dN,b=typeof S=="function"?S(n,v):S,C=w===!0||typeof w=="number"&&n<w||typeof w=="function"&&w(n,v);if(e||!C){f(v);return}n++,(k=t.onFail)==null||k.call(t,n,v),sN(b).then(()=>c()?void 0:p()).then(()=>{e?f(v):m()})})};return{promise:o,cancel:s,continue:()=>(i==null||i(),o),cancelRetry:a,continueRetry:l,canStart:u,start:()=>(u()?m():p().then(m),o)}}function fN(){let t=[],e=0,n=a=>{a()},r=a=>{a()},i=a=>setTimeout(a,0);const o=a=>{e?t.push(a):i(()=>{n(a)})},s=()=>{const a=t;t=[],a.length&&i(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||s()}return l},batchCalls:a=>(...l)=>{o(()=>{a(...l)})},schedule:o,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{i=a}}}var We=fN(),Lo,iS,Wk=(iS=class{constructor(){J(this,Lo,void 0)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),kg(this.gcTime)&&W(this,Lo,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(ls?1/0:5*60*1e3))}clearGcTimeout(){T(this,Lo)&&(clearTimeout(T(this,Lo)),W(this,Lo,void 0))}},Lo=new WeakMap,iS),Ca,ka,vn,$o,mt,Kc,Fo,Bn,Dr,oS,hN=(oS=class extends Wk{constructor(e){super();J(this,Bn);J(this,Ca,void 0);J(this,ka,void 0);J(this,vn,void 0);J(this,$o,void 0);J(this,mt,void 0);J(this,Kc,void 0);J(this,Fo,void 0);W(this,Fo,!1),W(this,Kc,e.defaultOptions),this.setOptions(e.options),this.observers=[],W(this,$o,e.client),W(this,vn,T(this,$o).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,W(this,Ca,pN(this.options)),this.state=e.state??T(this,Ca),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=T(this,mt))==null?void 0:e.promise}setOptions(e){this.options={...T(this,Kc),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&T(this,vn).remove(this)}setData(e,n){const r=Tg(this.state.data,e,this.options);return oe(this,Bn,Dr).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){oe(this,Bn,Dr).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,i;const n=(r=T(this,mt))==null?void 0:r.promise;return(i=T(this,mt))==null||i.cancel(e),n?n.then(xn).catch(xn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(T(this,Ca))}isActive(){return this.observers.some(e=>Wn(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Fv||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!Fk(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=T(this,mt))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=T(this,mt))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),T(this,vn).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(T(this,mt)&&(T(this,Fo)?T(this,mt).cancel({revert:!0}):T(this,mt).cancelRetry()),this.scheduleGc()),T(this,vn).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||oe(this,Bn,Dr).call(this,{type:"invalidate"})}fetch(e,n){var l,c,u;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(T(this,mt))return T(this,mt).continueRetry(),T(this,mt).promise}if(e&&this.setOptions(e),!this.options.queryFn){const d=this.observers.find(f=>f.options.queryFn);d&&this.setOptions(d.options)}const r=new AbortController,i=d=>{Object.defineProperty(d,"signal",{enumerable:!0,get:()=>(W(this,Fo,!0),r.signal)})},o=()=>{const d=zk(this.options,n),f={client:T(this,$o),queryKey:this.queryKey,meta:this.meta};return i(f),W(this,Fo,!1),this.options.persister?this.options.persister(d,f,this):d(f)},s={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:T(this,$o),state:this.state,fetchFn:o};i(s),(l=this.options.behavior)==null||l.onFetch(s,this),W(this,ka,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((c=s.fetchOptions)==null?void 0:c.meta))&&oe(this,Bn,Dr).call(this,{type:"fetch",meta:(u=s.fetchOptions)==null?void 0:u.meta});const a=d=>{var f,p,m,g;Mp(d)&&d.silent||oe(this,Bn,Dr).call(this,{type:"error",error:d}),Mp(d)||((p=(f=T(this,vn).config).onError)==null||p.call(f,d,this),(g=(m=T(this,vn).config).onSettled)==null||g.call(m,this.state.data,d,this)),this.scheduleGc()};return W(this,mt,Hk({initialPromise:n==null?void 0:n.initialPromise,fn:s.fetchFn,abort:r.abort.bind(r),onSuccess:d=>{var f,p,m,g;if(d===void 0){a(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(d)}catch(x){a(x);return}(p=(f=T(this,vn).config).onSuccess)==null||p.call(f,d,this),(g=(m=T(this,vn).config).onSettled)==null||g.call(m,d,this.state.error,this),this.scheduleGc()},onError:a,onFail:(d,f)=>{oe(this,Bn,Dr).call(this,{type:"failed",failureCount:d,error:f})},onPause:()=>{oe(this,Bn,Dr).call(this,{type:"pause"})},onContinue:()=>{oe(this,Bn,Dr).call(this,{type:"continue"})},retry:s.options.retry,retryDelay:s.options.retryDelay,networkMode:s.options.networkMode,canRun:()=>!0})),T(this,mt).start()}},Ca=new WeakMap,ka=new WeakMap,vn=new WeakMap,$o=new WeakMap,mt=new WeakMap,Kc=new WeakMap,Fo=new WeakMap,Bn=new WeakSet,Dr=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...Kk(r.data,this.options),fetchMeta:e.meta??null};case"success":return{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=e.error;return Mp(i)&&i.revert&&T(this,ka)?{...T(this,ka),fetchStatus:"idle"}:{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),We.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),T(this,vn).notify({query:this,type:"updated",action:e})})},oS);function Kk(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Uk(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function pN(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var fr,sS,mN=(sS=class extends al{constructor(e={}){super();J(this,fr,void 0);this.config=e,W(this,fr,new Map)}build(e,n,r){const i=n.queryKey,o=n.queryHash??$v(i,n);let s=this.get(o);return s||(s=new hN({client:e,queryKey:i,queryHash:o,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(s)),s}add(e){T(this,fr).has(e.queryHash)||(T(this,fr).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=T(this,fr).get(e.queryHash);n&&(e.destroy(),n===e&&T(this,fr).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){We.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return T(this,fr).get(e)}getAll(){return[...T(this,fr).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>Ew(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>Ew(e,r)):n}notify(e){We.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){We.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){We.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},fr=new WeakMap,sS),hr,Et,Bo,pr,ai,aS,gN=(aS=class extends Wk{constructor(e){super();J(this,pr);J(this,hr,void 0);J(this,Et,void 0);J(this,Bo,void 0);this.mutationId=e.mutationId,W(this,Et,e.mutationCache),W(this,hr,[]),this.state=e.state||qk(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){T(this,hr).includes(e)||(T(this,hr).push(e),this.clearGcTimeout(),T(this,Et).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){W(this,hr,T(this,hr).filter(n=>n!==e)),this.scheduleGc(),T(this,Et).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){T(this,hr).length||(this.state.status==="pending"?this.scheduleGc():T(this,Et).remove(this))}continue(){var e;return((e=T(this,Bo))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,o,s,a,l,c,u,d,f,p,m,g,x,v,w,S,b,C,k,E;W(this,Bo,Hk({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(_,P)=>{oe(this,pr,ai).call(this,{type:"failed",failureCount:_,error:P})},onPause:()=>{oe(this,pr,ai).call(this,{type:"pause"})},onContinue:()=>{oe(this,pr,ai).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>T(this,Et).canRun(this)}));const n=this.state.status==="pending",r=!T(this,Bo).canStart();try{if(!n){oe(this,pr,ai).call(this,{type:"pending",variables:e,isPaused:r}),await((o=(i=T(this,Et).config).onMutate)==null?void 0:o.call(i,e,this));const P=await((a=(s=this.options).onMutate)==null?void 0:a.call(s,e));P!==this.state.context&&oe(this,pr,ai).call(this,{type:"pending",context:P,variables:e,isPaused:r})}const _=await T(this,Bo).start();return await((c=(l=T(this,Et).config).onSuccess)==null?void 0:c.call(l,_,e,this.state.context,this)),await((d=(u=this.options).onSuccess)==null?void 0:d.call(u,_,e,this.state.context)),await((p=(f=T(this,Et).config).onSettled)==null?void 0:p.call(f,_,null,this.state.variables,this.state.context,this)),await((g=(m=this.options).onSettled)==null?void 0:g.call(m,_,null,e,this.state.context)),oe(this,pr,ai).call(this,{type:"success",data:_}),_}catch(_){try{throw await((v=(x=T(this,Et).config).onError)==null?void 0:v.call(x,_,e,this.state.context,this)),await((S=(w=this.options).onError)==null?void 0:S.call(w,_,e,this.state.context)),await((C=(b=T(this,Et).config).onSettled)==null?void 0:C.call(b,void 0,_,this.state.variables,this.state.context,this)),await((E=(k=this.options).onSettled)==null?void 0:E.call(k,void 0,_,e,this.state.context)),_}finally{oe(this,pr,ai).call(this,{type:"error",error:_})}}finally{T(this,Et).runNext(this)}}},hr=new WeakMap,Et=new WeakMap,Bo=new WeakMap,pr=new WeakSet,ai=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),We.batch(()=>{T(this,hr).forEach(r=>{r.onMutationUpdate(e)}),T(this,Et).notify({mutation:this,type:"updated",action:e})})},aS);function qk(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var $r,zn,qc,lS,yN=(lS=class extends al{constructor(e={}){super();J(this,$r,void 0);J(this,zn,void 0);J(this,qc,void 0);this.config=e,W(this,$r,new Set),W(this,zn,new Map),W(this,qc,0)}build(e,n,r){const i=new gN({mutationCache:this,mutationId:++Du(this,qc)._,options:e.defaultMutationOptions(n),state:r});return this.add(i),i}add(e){T(this,$r).add(e);const n=Xu(e);if(typeof n=="string"){const r=T(this,zn).get(n);r?r.push(e):T(this,zn).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(T(this,$r).delete(e)){const n=Xu(e);if(typeof n=="string"){const r=T(this,zn).get(n);if(r)if(r.length>1){const i=r.indexOf(e);i!==-1&&r.splice(i,1)}else r[0]===e&&T(this,zn).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Xu(e);if(typeof n=="string"){const r=T(this,zn).get(n),i=r==null?void 0:r.find(o=>o.state.status==="pending");return!i||i===e}else return!0}runNext(e){var r;const n=Xu(e);if(typeof n=="string"){const i=(r=T(this,zn).get(n))==null?void 0:r.find(o=>o!==e&&o.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){We.batch(()=>{T(this,$r).forEach(e=>{this.notify({type:"removed",mutation:e})}),T(this,$r).clear(),T(this,zn).clear()})}getAll(){return Array.from(T(this,$r))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>Tw(n,r))}findAll(e={}){return this.getAll().filter(n=>Tw(e,n))}notify(e){We.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return We.batch(()=>Promise.all(e.map(n=>n.continue().catch(xn))))}},$r=new WeakMap,zn=new WeakMap,qc=new WeakMap,lS);function Xu(t){var e;return(e=t.options.scope)==null?void 0:e.id}function Ow(t){return{onFetch:(e,n)=>{var u,d,f,p,m;const r=e.options,i=(f=(d=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:d.fetchMore)==null?void 0:f.direction,o=((p=e.state.data)==null?void 0:p.pages)||[],s=((m=e.state.data)==null?void 0:m.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let g=!1;const x=S=>{Object.defineProperty(S,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},v=zk(e.options,e.fetchOptions),w=async(S,b,C)=>{if(g)return Promise.reject();if(b==null&&S.pages.length)return Promise.resolve(S);const k={client:e.client,queryKey:e.queryKey,pageParam:b,direction:C?"backward":"forward",meta:e.options.meta};x(k);const E=await v(k),{maxPages:_}=e.options,P=C?lN:aN;return{pages:P(S.pages,E,_),pageParams:P(S.pageParams,b,_)}};if(i&&o.length){const S=i==="backward",b=S?vN:Pw,C={pages:o,pageParams:s},k=b(r,C);a=await w(C,k,S)}else{const S=t??o.length;do{const b=l===0?s[0]??r.initialPageParam:Pw(r,a);if(l>0&&b==null)break;a=await w(a,b),l++}while(l<S)}return a};e.options.persister?e.fetchFn=()=>{var g,x;return(x=(g=e.options).persister)==null?void 0:x.call(g,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=c}}}function Pw(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function vN(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var De,Ci,ki,Ea,Ta,Ei,_a,Ra,cS,Gk=(cS=class{constructor(t={}){J(this,De,void 0);J(this,Ci,void 0);J(this,ki,void 0);J(this,Ea,void 0);J(this,Ta,void 0);J(this,Ei,void 0);J(this,_a,void 0);J(this,Ra,void 0);W(this,De,t.queryCache||new mN),W(this,Ci,t.mutationCache||new yN),W(this,ki,t.defaultOptions||{}),W(this,Ea,new Map),W(this,Ta,new Map),W(this,Ei,0)}mount(){Du(this,Ei)._++,T(this,Ei)===1&&(W(this,_a,Bv.subscribe(async t=>{t&&(await this.resumePausedMutations(),T(this,De).onFocus())})),W(this,Ra,bf.subscribe(async t=>{t&&(await this.resumePausedMutations(),T(this,De).onOnline())})))}unmount(){var t,e;Du(this,Ei)._--,T(this,Ei)===0&&((t=T(this,_a))==null||t.call(this),W(this,_a,void 0),(e=T(this,Ra))==null||e.call(this),W(this,Ra,void 0))}isFetching(t){return T(this,De).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return T(this,Ci).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=T(this,De).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=T(this,De).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(ha(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return T(this,De).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),i=T(this,De).get(r.queryHash),o=i==null?void 0:i.state.data,s=oN(e,o);if(s!==void 0)return T(this,De).build(this,r).setData(s,{...n,manual:!0})}setQueriesData(t,e,n){return We.batch(()=>T(this,De).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=T(this,De).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=T(this,De);We.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=T(this,De);return We.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=We.batch(()=>T(this,De).findAll(t).map(i=>i.cancel(n)));return Promise.all(r).then(xn).catch(xn)}invalidateQueries(t,e={}){return We.batch(()=>(T(this,De).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=We.batch(()=>T(this,De).findAll(t).filter(i=>!i.isDisabled()).map(i=>{let o=i.fetch(void 0,n);return n.throwOnError||(o=o.catch(xn)),i.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(r).then(xn)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=T(this,De).build(this,e);return n.isStaleByTime(ha(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(xn).catch(xn)}fetchInfiniteQuery(t){return t.behavior=Ow(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(xn).catch(xn)}ensureInfiniteQueryData(t){return t.behavior=Ow(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return bf.isOnline()?T(this,Ci).resumePausedMutations():Promise.resolve()}getQueryCache(){return T(this,De)}getMutationCache(){return T(this,Ci)}getDefaultOptions(){return T(this,ki)}setDefaultOptions(t){W(this,ki,t)}setQueryDefaults(t,e){T(this,Ea).set(cs(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...T(this,Ea).values()],n={};return e.forEach(r=>{_c(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){T(this,Ta).set(cs(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...T(this,Ta).values()],n={};return e.forEach(r=>{_c(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...T(this,ki).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=$v(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Fv&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...T(this,ki).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){T(this,De).clear(),T(this,Ci).clear()}},De=new WeakMap,Ci=new WeakMap,ki=new WeakMap,Ea=new WeakMap,Ta=new WeakMap,Ei=new WeakMap,_a=new WeakMap,Ra=new WeakMap,cS),Ut,ce,Gc,Tt,zo,Oa,Ti,mr,Jc,Pa,Ma,Uo,Vo,_i,Aa,Ho,Al,Yc,Rg,Qc,Og,Xc,Pg,Zc,Mg,eu,Ag,tu,Dg,nu,Ng,Gf,Jk,uS,xN=(uS=class extends al{constructor(e,n){super();J(this,Ho);J(this,Yc);J(this,Qc);J(this,Xc);J(this,Zc);J(this,eu);J(this,tu);J(this,nu);J(this,Gf);J(this,Ut,void 0);J(this,ce,void 0);J(this,Gc,void 0);J(this,Tt,void 0);J(this,zo,void 0);J(this,Oa,void 0);J(this,Ti,void 0);J(this,mr,void 0);J(this,Jc,void 0);J(this,Pa,void 0);J(this,Ma,void 0);J(this,Uo,void 0);J(this,Vo,void 0);J(this,_i,void 0);J(this,Aa,new Set);this.options=n,W(this,Ut,e),W(this,mr,null),W(this,Ti,_g()),this.options.experimental_prefetchInRender||T(this,Ti).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(T(this,ce).addObserver(this),Mw(T(this,ce),this.options)?oe(this,Ho,Al).call(this):this.updateResult(),oe(this,Zc,Mg).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Ig(T(this,ce),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Ig(T(this,ce),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,oe(this,eu,Ag).call(this),oe(this,tu,Dg).call(this),T(this,ce).removeObserver(this)}setOptions(e,n){const r=this.options,i=T(this,ce);if(this.options=T(this,Ut).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Wn(this.options.enabled,T(this,ce))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");oe(this,nu,Ng).call(this),T(this,ce).setOptions(this.options),r._defaulted&&!wf(this.options,r)&&T(this,Ut).getQueryCache().notify({type:"observerOptionsUpdated",query:T(this,ce),observer:this});const o=this.hasListeners();o&&Aw(T(this,ce),i,this.options,r)&&oe(this,Ho,Al).call(this),this.updateResult(n),o&&(T(this,ce)!==i||Wn(this.options.enabled,T(this,ce))!==Wn(r.enabled,T(this,ce))||ha(this.options.staleTime,T(this,ce))!==ha(r.staleTime,T(this,ce)))&&oe(this,Yc,Rg).call(this);const s=oe(this,Qc,Og).call(this);o&&(T(this,ce)!==i||Wn(this.options.enabled,T(this,ce))!==Wn(r.enabled,T(this,ce))||s!==T(this,_i))&&oe(this,Xc,Pg).call(this,s)}getOptimisticResult(e){const n=T(this,Ut).getQueryCache().build(T(this,Ut),e),r=this.createResult(n,e);return bN(this,r)&&(W(this,Tt,r),W(this,Oa,this.options),W(this,zo,T(this,ce).state)),r}getCurrentResult(){return T(this,Tt)}trackResult(e,n){const r={};return Object.keys(e).forEach(i=>{Object.defineProperty(r,i,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(i),n==null||n(i),e[i])})}),r}trackProp(e){T(this,Aa).add(e)}getCurrentQuery(){return T(this,ce)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=T(this,Ut).defaultQueryOptions(e),r=T(this,Ut).getQueryCache().build(T(this,Ut),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return oe(this,Ho,Al).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),T(this,Tt)))}createResult(e,n){var _;const r=T(this,ce),i=this.options,o=T(this,Tt),s=T(this,zo),a=T(this,Oa),c=e!==r?e.state:T(this,Gc),{state:u}=e;let d={...u},f=!1,p;if(n._optimisticResults){const P=this.hasListeners(),R=!P&&Mw(e,n),N=P&&Aw(e,r,n,i);(R||N)&&(d={...d,...Kk(u.data,e.options)}),n._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:m,errorUpdatedAt:g,status:x}=d;if(n.select&&d.data!==void 0)if(o&&d.data===(s==null?void 0:s.data)&&n.select===T(this,Jc))p=T(this,Pa);else try{W(this,Jc,n.select),p=n.select(d.data),p=Tg(o==null?void 0:o.data,p,n),W(this,Pa,p),W(this,mr,null)}catch(P){W(this,mr,P)}else p=d.data;if(n.placeholderData!==void 0&&p===void 0&&x==="pending"){let P;if(o!=null&&o.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData))P=o.data;else if(P=typeof n.placeholderData=="function"?n.placeholderData((_=T(this,Ma))==null?void 0:_.state.data,T(this,Ma)):n.placeholderData,n.select&&P!==void 0)try{P=n.select(P),W(this,mr,null)}catch(R){W(this,mr,R)}P!==void 0&&(x="success",p=Tg(o==null?void 0:o.data,P,n),f=!0)}T(this,mr)&&(m=T(this,mr),p=T(this,Pa),g=Date.now(),x="error");const v=d.fetchStatus==="fetching",w=x==="pending",S=x==="error",b=w&&v,C=p!==void 0,E={status:x,fetchStatus:d.fetchStatus,isPending:w,isSuccess:x==="success",isError:S,isInitialLoading:b,isLoading:b,data:p,dataUpdatedAt:d.dataUpdatedAt,error:m,errorUpdatedAt:g,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>c.dataUpdateCount||d.errorUpdateCount>c.errorUpdateCount,isFetching:v,isRefetching:v&&!w,isLoadingError:S&&!C,isPaused:d.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:S&&C,isStale:zv(e,n),refetch:this.refetch,promise:T(this,Ti)};if(this.options.experimental_prefetchInRender){const P=A=>{E.status==="error"?A.reject(E.error):E.data!==void 0&&A.resolve(E.data)},R=()=>{const A=W(this,Ti,E.promise=_g());P(A)},N=T(this,Ti);switch(N.status){case"pending":e.queryHash===r.queryHash&&P(N);break;case"fulfilled":(E.status==="error"||E.data!==N.value)&&R();break;case"rejected":(E.status!=="error"||E.error!==N.reason)&&R();break}}return E}updateResult(e){const n=T(this,Tt),r=this.createResult(T(this,ce),this.options);if(W(this,zo,T(this,ce).state),W(this,Oa,this.options),T(this,zo).data!==void 0&&W(this,Ma,T(this,ce)),wf(r,n))return;W(this,Tt,r);const i={},o=()=>{if(!n)return!0;const{notifyOnChangeProps:s}=this.options,a=typeof s=="function"?s():s;if(a==="all"||!a&&!T(this,Aa).size)return!0;const l=new Set(a??T(this,Aa));return this.options.throwOnError&&l.add("error"),Object.keys(T(this,Tt)).some(c=>{const u=c;return T(this,Tt)[u]!==n[u]&&l.has(u)})};(e==null?void 0:e.listeners)!==!1&&o()&&(i.listeners=!0),oe(this,Gf,Jk).call(this,{...i,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&oe(this,Zc,Mg).call(this)}},Ut=new WeakMap,ce=new WeakMap,Gc=new WeakMap,Tt=new WeakMap,zo=new WeakMap,Oa=new WeakMap,Ti=new WeakMap,mr=new WeakMap,Jc=new WeakMap,Pa=new WeakMap,Ma=new WeakMap,Uo=new WeakMap,Vo=new WeakMap,_i=new WeakMap,Aa=new WeakMap,Ho=new WeakSet,Al=function(e){oe(this,nu,Ng).call(this);let n=T(this,ce).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(xn)),n},Yc=new WeakSet,Rg=function(){oe(this,eu,Ag).call(this);const e=ha(this.options.staleTime,T(this,ce));if(ls||T(this,Tt).isStale||!kg(e))return;const r=Fk(T(this,Tt).dataUpdatedAt,e)+1;W(this,Uo,setTimeout(()=>{T(this,Tt).isStale||this.updateResult()},r))},Qc=new WeakSet,Og=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(T(this,ce)):this.options.refetchInterval)??!1},Xc=new WeakSet,Pg=function(e){oe(this,tu,Dg).call(this),W(this,_i,e),!(ls||Wn(this.options.enabled,T(this,ce))===!1||!kg(T(this,_i))||T(this,_i)===0)&&W(this,Vo,setInterval(()=>{(this.options.refetchIntervalInBackground||Bv.isFocused())&&oe(this,Ho,Al).call(this)},T(this,_i)))},Zc=new WeakSet,Mg=function(){oe(this,Yc,Rg).call(this),oe(this,Xc,Pg).call(this,oe(this,Qc,Og).call(this))},eu=new WeakSet,Ag=function(){T(this,Uo)&&(clearTimeout(T(this,Uo)),W(this,Uo,void 0))},tu=new WeakSet,Dg=function(){T(this,Vo)&&(clearInterval(T(this,Vo)),W(this,Vo,void 0))},nu=new WeakSet,Ng=function(){const e=T(this,Ut).getQueryCache().build(T(this,Ut),this.options);if(e===T(this,ce))return;const n=T(this,ce);W(this,ce,e),W(this,Gc,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},Gf=new WeakSet,Jk=function(e){We.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(T(this,Tt))}),T(this,Ut).getQueryCache().notify({query:T(this,ce),type:"observerResultsUpdated"})})},uS);function wN(t,e){return Wn(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function Mw(t,e){return wN(t,e)||t.state.data!==void 0&&Ig(t,e,e.refetchOnMount)}function Ig(t,e,n){if(Wn(e.enabled,t)!==!1){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&zv(t,e)}return!1}function Aw(t,e,n,r){return(t!==e||Wn(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&zv(t,n)}function zv(t,e){return Wn(e.enabled,t)!==!1&&t.isStaleByTime(ha(e.staleTime,t))}function bN(t,e){return!wf(t.getCurrentResult(),e)}var Ri,Oi,Vt,Fr,Da,$d,ru,jg,dS,SN=(dS=class extends al{constructor(n,r){super();J(this,Da);J(this,ru);J(this,Ri,void 0);J(this,Oi,void 0);J(this,Vt,void 0);J(this,Fr,void 0);W(this,Ri,n),this.setOptions(r),this.bindMethods(),oe(this,Da,$d).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var i;const r=this.options;this.options=T(this,Ri).defaultMutationOptions(n),wf(this.options,r)||T(this,Ri).getMutationCache().notify({type:"observerOptionsUpdated",mutation:T(this,Vt),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&cs(r.mutationKey)!==cs(this.options.mutationKey)?this.reset():((i=T(this,Vt))==null?void 0:i.state.status)==="pending"&&T(this,Vt).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=T(this,Vt))==null||n.removeObserver(this)}onMutationUpdate(n){oe(this,Da,$d).call(this),oe(this,ru,jg).call(this,n)}getCurrentResult(){return T(this,Oi)}reset(){var n;(n=T(this,Vt))==null||n.removeObserver(this),W(this,Vt,void 0),oe(this,Da,$d).call(this),oe(this,ru,jg).call(this)}mutate(n,r){var i;return W(this,Fr,r),(i=T(this,Vt))==null||i.removeObserver(this),W(this,Vt,T(this,Ri).getMutationCache().build(T(this,Ri),this.options)),T(this,Vt).addObserver(this),T(this,Vt).execute(n)}},Ri=new WeakMap,Oi=new WeakMap,Vt=new WeakMap,Fr=new WeakMap,Da=new WeakSet,$d=function(){var r;const n=((r=T(this,Vt))==null?void 0:r.state)??qk();W(this,Oi,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},ru=new WeakSet,jg=function(n){We.batch(()=>{var r,i,o,s,a,l,c,u;if(T(this,Fr)&&this.hasListeners()){const d=T(this,Oi).variables,f=T(this,Oi).context;(n==null?void 0:n.type)==="success"?((i=(r=T(this,Fr)).onSuccess)==null||i.call(r,n.data,d,f),(s=(o=T(this,Fr)).onSettled)==null||s.call(o,n.data,null,d,f)):(n==null?void 0:n.type)==="error"&&((l=(a=T(this,Fr)).onError)==null||l.call(a,n.error,d,f),(u=(c=T(this,Fr)).onSettled)==null||u.call(c,void 0,n.error,d,f))}this.listeners.forEach(d=>{d(T(this,Oi))})})},dS),Yk=y.createContext(void 0),xs=t=>{const e=y.useContext(Yk);if(t)return t;if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},Qk=({client:t,children:e})=>(y.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),h.jsx(Yk.Provider,{value:t,children:e})),Xk=y.createContext(!1),CN=()=>y.useContext(Xk);Xk.Provider;function kN(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var EN=y.createContext(kN()),TN=()=>y.useContext(EN);function Zk(t,e){return typeof t=="function"?t(...e):!!t}function Lg(){}var _N=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},RN=t=>{y.useEffect(()=>{t.clearReset()},[t])},ON=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:i})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(i&&t.data===void 0||Zk(n,[t.error,r])),PN=t=>{const e=t.staleTime;t.suspense&&(t.staleTime=typeof e=="function"?(...n)=>Math.max(e(...n),1e3):Math.max(e??1e3,1e3),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3)))},MN=(t,e)=>t.isLoading&&t.isFetching&&!e,AN=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,Dw=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function DN(t,e,n){var d,f,p,m,g;const r=xs(n),i=CN(),o=TN(),s=r.defaultQueryOptions(t);(f=(d=r.getDefaultOptions().queries)==null?void 0:d._experimental_beforeQuery)==null||f.call(d,s),s._optimisticResults=i?"isRestoring":"optimistic",PN(s),_N(s,o),RN(o);const a=!r.getQueryCache().get(s.queryHash),[l]=y.useState(()=>new e(r,s)),c=l.getOptimisticResult(s),u=!i&&t.subscribed!==!1;if(y.useSyncExternalStore(y.useCallback(x=>{const v=u?l.subscribe(We.batchCalls(x)):Lg;return l.updateResult(),v},[l,u]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),y.useEffect(()=>{l.setOptions(s,{listeners:!1})},[s,l]),AN(s,c))throw Dw(s,l,o);if(ON({result:c,errorResetBoundary:o,throwOnError:s.throwOnError,query:r.getQueryCache().get(s.queryHash),suspense:s.suspense}))throw c.error;if((m=(p=r.getDefaultOptions().queries)==null?void 0:p._experimental_afterQuery)==null||m.call(p,s,c),s.experimental_prefetchInRender&&!ls&&MN(c,i)){const x=a?Dw(s,l,o):(g=r.getQueryCache().get(s.queryHash))==null?void 0:g.promise;x==null||x.catch(Lg).finally(()=>{l.updateResult()})}return s.notifyOnChangeProps?c:l.trackResult(c)}function Rc(t,e){return DN(t,xN,e)}function Zl(t,e){const n=xs(e),[r]=y.useState(()=>new SN(n,t));y.useEffect(()=>{r.setOptions(t)},[r,t]);const i=y.useSyncExternalStore(y.useCallback(s=>r.subscribe(We.batchCalls(s)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),o=y.useCallback((s,a)=>{r.mutate(s,a).catch(Lg)},[r]);if(i.error&&Zk(r.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:o,mutateAsync:i.mutate}}const NN=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>as(()=>Promise.resolve().then(()=>ll),void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class Uv extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class IN extends Uv{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class jN extends Uv{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class LN extends Uv{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var $g;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})($g||($g={}));var $N=globalThis&&globalThis.__awaiter||function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{c(r.next(u))}catch(d){s(d)}}function l(u){try{c(r.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};class FN{constructor(e,{headers:n={},customFetch:r,region:i=$g.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=NN(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return $N(this,void 0,void 0,function*(){try{const{headers:i,method:o,body:s}=n;let a={},{region:l}=n;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let c;s&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&s instanceof Blob||s instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",c=s):typeof s=="string"?(a["Content-Type"]="text/plain",c=s):typeof FormData<"u"&&s instanceof FormData?c=s:(a["Content-Type"]="application/json",c=JSON.stringify(s)));const u=yield this.fetch(`${this.url}/${e}`,{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),i),body:c}).catch(m=>{throw new IN(m)}),d=u.headers.get("x-relay-error");if(d&&d==="true")throw new jN(u);if(!u.ok)throw new LN(u);let f=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),p;return f==="application/json"?p=yield u.json():f==="application/octet-stream"?p=yield u.blob():f==="text/event-stream"?p=u:f==="multipart/form-data"?p=yield u.formData():p=yield u.text(),{data:p,error:null}}catch(i){return{data:null,error:i}}})}}var Wt={},Vv={},hh={},fu={},ph={},mh={},BN=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},za=BN();const zN=za.fetch,eE=za.fetch.bind(za),tE=za.Headers,UN=za.Request,VN=za.Response,ll=Object.freeze(Object.defineProperty({__proto__:null,Headers:tE,Request:UN,Response:VN,default:eE,fetch:zN},Symbol.toStringTag,{value:"Module"})),HN=GO(ll);var gh={};Object.defineProperty(gh,"__esModule",{value:!0});let WN=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};gh.default=WN;var nE=Pn&&Pn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(mh,"__esModule",{value:!0});const KN=nE(HN),qN=nE(gh);let GN=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=KN.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=Object.assign({},this.headers),this.headers[e]=n,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{var s,a,l;let c=null,u=null,d=null,f=o.status,p=o.statusText;if(o.ok){if(this.method!=="HEAD"){const v=await o.text();v===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=v:u=JSON.parse(v))}const g=(s=this.headers.Prefer)===null||s===void 0?void 0:s.match(/count=(exact|planned|estimated)/),x=(a=o.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");g&&x&&x.length>1&&(d=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,d=null,f=406,p="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const g=await o.text();try{c=JSON.parse(g),Array.isArray(c)&&o.status===404&&(u=[],c=null,f=200,p="OK")}catch{o.status===404&&g===""?(f=204,p="No Content"):c={message:g}}if(c&&this.isMaybeSingle&&(!((l=c==null?void 0:c.details)===null||l===void 0)&&l.includes("0 rows"))&&(c=null,f=200,p="OK"),c&&this.shouldThrowOnError)throw new qN.default(c)}return{error:c,data:u,count:d,status:f,statusText:p}});return this.shouldThrowOnError||(i=i.catch(o=>{var s,a,l;return{error:{message:`${(s=o==null?void 0:o.name)!==null&&s!==void 0?s:"FetchError"}: ${o==null?void 0:o.message}`,details:`${(a=o==null?void 0:o.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=o==null?void 0:o.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,n)}returns(){return this}overrideTypes(){return this}};mh.default=GN;var JN=Pn&&Pn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ph,"__esModule",{value:!0});const YN=JN(mh);let QN=class extends YN.default{select(e){let n=!1;const r=(e??"*").split("").map(i=>/\s/.test(i)&&!n?"":(i==='"'&&(n=!n),i)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:i,referencedTable:o=i}={}){const s=o?`${o}.order`:"order",a=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${a?`${a},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:i=r}={}){const o=typeof i>"u"?"offset":`${i}.offset`,s=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(o,`${e}`),this.url.searchParams.set(s,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:i=!1,wal:o=!1,format:s="text"}={}){var a;const l=[e?"analyze":null,n?"verbose":null,r?"settings":null,i?"buffers":null,o?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${s}; for="${c}"; options=${l};`,s==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};ph.default=QN;var XN=Pn&&Pn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(fu,"__esModule",{value:!0});const ZN=XN(ph);let eI=class extends ZN.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:i}={}){let o="";i==="plain"?o="pl":i==="phrase"?o="ph":i==="websearch"&&(o="w");const s=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${o}fts${s}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};fu.default=eI;var tI=Pn&&Pn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(hh,"__esModule",{value:!0});const kl=tI(fu);let nI=class{constructor(e,{headers:n={},schema:r,fetch:i}){this.url=e,this.headers=n,this.schema=r,this.fetch=i}select(e,{head:n=!1,count:r}={}){const i=n?"HEAD":"GET";let o=!1;const s=(e??"*").split("").map(a=>/\s/.test(a)&&!o?"":(a==='"'&&(o=!o),a)).join("");return this.url.searchParams.set("select",s),r&&(this.headers.Prefer=`count=${r}`),new kl.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:n,defaultToNull:r=!0}={}){const i="POST",o=[];if(this.headers.Prefer&&o.push(this.headers.Prefer),n&&o.push(`count=${n}`),r||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(e)){const s=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(s.length>0){const a=[...new Set(s)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new kl.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:i,defaultToNull:o=!0}={}){const s="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&a.push(this.headers.Prefer),i&&a.push(`count=${i}`),o||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const l=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new kl.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:n}={}){const r="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),this.headers.Prefer=i.join(","),new kl.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const n="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new kl.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};hh.default=nI;var yh={},vh={};Object.defineProperty(vh,"__esModule",{value:!0});vh.version=void 0;vh.version="0.0.0-automated";Object.defineProperty(yh,"__esModule",{value:!0});yh.DEFAULT_HEADERS=void 0;const rI=vh;yh.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${rI.version}`};var rE=Pn&&Pn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Vv,"__esModule",{value:!0});const iI=rE(hh),oI=rE(fu),sI=yh;let aI=class iE{constructor(e,{headers:n={},schema:r,fetch:i}={}){this.url=e,this.headers=Object.assign(Object.assign({},sI.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=i}from(e){const n=new URL(`${this.url}/${e}`);return new iI.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new iE(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:i=!1,count:o}={}){let s;const a=new URL(`${this.url}/rpc/${e}`);let l;r||i?(s=r?"HEAD":"GET",Object.entries(n).filter(([u,d])=>d!==void 0).map(([u,d])=>[u,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([u,d])=>{a.searchParams.append(u,d)})):(s="POST",l=n);const c=Object.assign({},this.headers);return o&&(c.Prefer=`count=${o}`),new oI.default({method:s,url:a,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};Vv.default=aI;var cl=Pn&&Pn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Wt,"__esModule",{value:!0});Wt.PostgrestError=Wt.PostgrestBuilder=Wt.PostgrestTransformBuilder=Wt.PostgrestFilterBuilder=Wt.PostgrestQueryBuilder=Wt.PostgrestClient=void 0;const oE=cl(Vv);Wt.PostgrestClient=oE.default;const sE=cl(hh);Wt.PostgrestQueryBuilder=sE.default;const aE=cl(fu);Wt.PostgrestFilterBuilder=aE.default;const lE=cl(ph);Wt.PostgrestTransformBuilder=lE.default;const cE=cl(mh);Wt.PostgrestBuilder=cE.default;const uE=cl(gh);Wt.PostgrestError=uE.default;var lI=Wt.default={PostgrestClient:oE.default,PostgrestQueryBuilder:sE.default,PostgrestFilterBuilder:aE.default,PostgrestTransformBuilder:lE.default,PostgrestBuilder:cE.default,PostgrestError:uE.default};const{PostgrestClient:cI,PostgrestQueryBuilder:LH,PostgrestFilterBuilder:$H,PostgrestTransformBuilder:FH,PostgrestBuilder:BH,PostgrestError:zH}=lI,uI="2.11.2",dI={"X-Client-Info":`realtime-js/${uI}`},fI="1.0.0",dE=1e4,hI=1e3;var pa;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(pa||(pa={}));var rn;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(rn||(rn={}));var Vn;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Vn||(Vn={}));var Fg;(function(t){t.websocket="websocket"})(Fg||(Fg={}));var _o;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(_o||(_o={}));class pI{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const i=n.getUint8(1),o=n.getUint8(2);let s=this.HEADER_LENGTH+2;const a=r.decode(e.slice(s,s+i));s=s+i;const l=r.decode(e.slice(s,s+o));s=s+o;const c=JSON.parse(r.decode(e.slice(s,e.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class fE{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var be;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(be||(be={}));const Nw=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((o,s)=>(o[s]=mI(s,t,e,i),o),{})},mI=(t,e,n,r)=>{const i=e.find(a=>a.name===t),o=i==null?void 0:i.type,s=n[t];return o&&!r.includes(o)?hE(o,s):Bg(s)},hE=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return xI(e,n)}switch(t){case be.bool:return gI(e);case be.float4:case be.float8:case be.int2:case be.int4:case be.int8:case be.numeric:case be.oid:return yI(e);case be.json:case be.jsonb:return vI(e);case be.timestamp:return wI(e);case be.abstime:case be.date:case be.daterange:case be.int4range:case be.int8range:case be.money:case be.reltime:case be.text:case be.time:case be.timestamptz:case be.timetz:case be.tsrange:case be.tstzrange:return Bg(e);default:return Bg(e)}},Bg=t=>t,gI=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},yI=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},vI=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},xI=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let o;const s=t.slice(1,n);try{o=JSON.parse("["+s+"]")}catch{o=s?s.split(","):[]}return o.map(a=>hE(e,a))}return t},wI=t=>typeof t=="string"?t.replace(" ","T"):t,pE=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Ap{constructor(e,n,r={},i=dE){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Iw;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Iw||(Iw={}));class ec{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:o,onLeave:s,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ec.syncState(this.state,i,o,s),this.pendingDiffs.forEach(l=>{this.state=ec.syncDiff(this.state,l,o,s)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{const{onJoin:o,onLeave:s,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=ec.syncDiff(this.state,i,o,s),a())}),this.onJoin((i,o,s)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:s})}),this.onLeave((i,o,s)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const o=this.cloneDeep(e),s=this.transformState(n),a={},l={};return this.map(o,(c,u)=>{s[c]||(l[c]=u)}),this.map(s,(c,u)=>{const d=o[c];if(d){const f=u.map(x=>x.presence_ref),p=d.map(x=>x.presence_ref),m=u.filter(x=>p.indexOf(x.presence_ref)<0),g=d.filter(x=>f.indexOf(x.presence_ref)<0);m.length>0&&(a[c]=m),g.length>0&&(l[c]=g)}else a[c]=u}),this.syncDiff(o,{joins:a,leaves:l},r,i)}static syncDiff(e,n,r,i){const{joins:o,leaves:s}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(o,(a,l)=>{var c;const u=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),u.length>0){const d=e[a].map(p=>p.presence_ref),f=u.filter(p=>d.indexOf(p.presence_ref)<0);e[a].unshift(...f)}r(a,u,l)}),this.map(s,(a,l)=>{let c=e[a];if(!c)return;const u=l.map(d=>d.presence_ref);c=c.filter(d=>u.indexOf(d.presence_ref)<0),e[a]=c,i(a,c,l),c.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Yn;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Yn||(Yn={}));var jw;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(jw||(jw={}));var Ir;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Ir||(Ir={}));class Hv{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=rn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Ap(this,Vn.join,this.params,this.timeout),this.rejoinTimer=new fE(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=rn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=rn.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=rn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=rn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Vn.reply,{},(i,o)=>{this._trigger(this._replyEventName(o),i)}),this.presence=new ec(this),this.broadcastEndpointURL=pE(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:o,presence:s,private:a}}=this.params;this._onError(u=>e==null?void 0:e(Ir.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(Ir.CLOSED));const l={},c={broadcast:o,presence:s,postgres_changes:(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(u=>u.filter))!==null&&i!==void 0?i:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},l)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:u})=>{var d;if(this.socket.setAuth(),u===void 0){e==null||e(Ir.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,p=(d=f==null?void 0:f.length)!==null&&d!==void 0?d:0,m=[];for(let g=0;g<p;g++){const x=f[g],{filter:{event:v,schema:w,table:S,filter:b}}=x,C=u&&u[g];if(C&&C.event===v&&C.schema===w&&C.table===S&&C.filter===b)m.push(Object.assign(Object.assign({},x),{id:C.id}));else{this.unsubscribe(),e==null||e(Ir.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=m,e&&e(Ir.SUBSCRIBED);return}}).receive("error",u=>{e==null||e(Ir.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Ir.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this._on(e,n,r)}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){const{event:o,payload:s}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:s,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var s,a,l;const c=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(s=this.params)===null||s===void 0?void 0:s.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&o("ok"),c.receive("ok",()=>o("ok")),c.receive("error",()=>o("error")),c.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=rn.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Vn.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const i=new Ap(this,Vn.leave,{},e);i.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}async _fetchWithTimeout(e,n,r){const i=new AbortController,o=setTimeout(()=>i.abort(),r),s=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(o),s}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Ap(this,e,n,r);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,o;const s=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=Vn;if(r&&[a,l,c,u].indexOf(s)>=0&&r!==this._joinRef())return;let f=this._onMessage(s,n,r);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(p=>{var m,g,x;return((m=p.filter)===null||m===void 0?void 0:m.event)==="*"||((x=(g=p.filter)===null||g===void 0?void 0:g.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===s}).map(p=>p.callback(f,r)):(o=this.bindings[s])===null||o===void 0||o.filter(p=>{var m,g,x,v,w,S;if(["broadcast","presence","postgres_changes"].includes(s))if("id"in p){const b=p.id,C=(m=p.filter)===null||m===void 0?void 0:m.event;return b&&((g=n.ids)===null||g===void 0?void 0:g.includes(b))&&(C==="*"||(C==null?void 0:C.toLocaleLowerCase())===((x=n.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const b=(w=(v=p==null?void 0:p.filter)===null||v===void 0?void 0:v.event)===null||w===void 0?void 0:w.toLocaleLowerCase();return b==="*"||b===((S=n==null?void 0:n.event)===null||S===void 0?void 0:S.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===s}).map(p=>{if(typeof f=="object"&&"ids"in f){const m=f.data,{schema:g,table:x,commit_timestamp:v,type:w,errors:S}=m;f=Object.assign(Object.assign({},{schema:g,table:x,commit_timestamp:v,eventType:w,new:{},old:{},errors:S}),this._getPayloadRecords(m))}p.callback(f,r)})}_isClosed(){return this.state===rn.closed}_isJoined(){return this.state===rn.joined}_isJoining(){return this.state===rn.joining}_isLeaving(){return this.state===rn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),o={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&Hv.isEqual(i.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Vn.close,{},e)}_onError(e){this._on(Vn.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=rn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Nw(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Nw(e.columns,e.old_record)),n}}const bI=()=>{},SI=typeof WebSocket<"u",CI=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class kI{constructor(e,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=dI,this.params={},this.timeout=dE,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=bI,this.conn=null,this.sendBuffer=[],this.serializer=new pI,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=o=>{let s;return o?s=o:typeof fetch>"u"?s=(...a)=>as(()=>Promise.resolve().then(()=>ll),void 0).then(({default:l})=>l(...a)):s=fetch,(...a)=>s(...a)},this.endPoint=`${e}/${Fg.websocket}`,this.httpEndpoint=pE(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const i=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:o=>[1e3,2e3,5e3,1e4][o-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(o,s)=>s(JSON.stringify(o)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new fE(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(SI){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new EI(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),as(()=>import("./browser-4b8202e6.js").then(e=>e.b),[]).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:fI}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case pa.connecting:return _o.Connecting;case pa.open:return _o.Open;case pa.closing:return _o.Closing;default:return _o.Closed}}isConnected(){return this.connectionState()===_o.Open}channel(e,n={config:{}}){const r=new Hv(`realtime:${e}`,n,this);return this.channels.push(r),r}push(e){const{topic:n,event:r,payload:i,ref:o}=e,s=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${o})`,i),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(n){let r=null;try{r=JSON.parse(atob(n.split(".")[1]))}catch{}if(r&&r.exp&&!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`);this.accessTokenValue=n,this.channels.forEach(i=>{n&&i.updateJoinPayload({access_token:n}),i.joinedOnce&&i._isJoined()&&i._push(Vn.access_token,{access_token:n})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(hI,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:i,payload:o,ref:s}=n;s&&s===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${o.status||""} ${r} ${i} ${s&&"("+s+")"||""}`,o),this.channels.filter(a=>a._isMember(r)).forEach(a=>a._trigger(i,o,s)),this.stateChangeCallbacks.message.forEach(a=>a(n))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Vn.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([CI],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class EI{constructor(e,n,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=pa.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class Wv extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ge(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class TI extends Wv{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class zg extends Wv{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var _I=globalThis&&globalThis.__awaiter||function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{c(r.next(u))}catch(d){s(d)}}function l(u){try{c(r.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const mE=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>as(()=>Promise.resolve().then(()=>ll),void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},RI=()=>_I(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield as(()=>Promise.resolve().then(()=>ll),void 0)).Response:Response}),Ug=t=>{if(Array.isArray(t))return t.map(n=>Ug(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[i]=Ug(r)}),e};var ws=globalThis&&globalThis.__awaiter||function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{c(r.next(u))}catch(d){s(d)}}function l(u){try{c(r.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const Dp=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),OI=(t,e,n)=>ws(void 0,void 0,void 0,function*(){const r=yield RI();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(i=>{e(new TI(Dp(i),t.status||500))}).catch(i=>{e(new zg(Dp(i),i))}):e(new zg(Dp(t),t))}),PI=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(i.body=JSON.stringify(r)),Object.assign(Object.assign({},i),n))};function hu(t,e,n,r,i,o){return ws(this,void 0,void 0,function*(){return new Promise((s,a)=>{t(n,PI(e,r,i,o)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>s(l)).catch(l=>OI(l,a,r))})})}function Sf(t,e,n,r){return ws(this,void 0,void 0,function*(){return hu(t,"GET",e,n,r)})}function pi(t,e,n,r,i){return ws(this,void 0,void 0,function*(){return hu(t,"POST",e,r,i,n)})}function MI(t,e,n,r,i){return ws(this,void 0,void 0,function*(){return hu(t,"PUT",e,r,i,n)})}function AI(t,e,n,r){return ws(this,void 0,void 0,function*(){return hu(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function gE(t,e,n,r,i){return ws(this,void 0,void 0,function*(){return hu(t,"DELETE",e,r,i,n)})}var Ft=globalThis&&globalThis.__awaiter||function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{c(r.next(u))}catch(d){s(d)}}function l(u){try{c(r.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const DI={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Lw={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class NI{constructor(e,n={},r,i){this.url=e,this.headers=n,this.bucketId=r,this.fetch=mE(i)}uploadOrUpdate(e,n,r,i){return Ft(this,void 0,void 0,function*(){try{let o;const s=Object.assign(Object.assign({},Lw),i);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(s.upsert)});const l=s.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",s.cacheControl),l&&o.append("metadata",this.encodeMetadata(l)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.append("cacheControl",s.cacheControl),l&&o.append("metadata",this.encodeMetadata(l))):(o=r,a["cache-control"]=`max-age=${s.cacheControl}`,a["content-type"]=s.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i!=null&&i.headers&&(a=Object.assign(Object.assign({},a),i.headers));const c=this._removeEmptyFolders(n),u=this._getFinalPath(c),d=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:o,headers:a},s!=null&&s.duplex?{duplex:s.duplex}:{})),f=yield d.json();return d.ok?{data:{path:c,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(o){if(Ge(o))return{data:null,error:o};throw o}})}upload(e,n,r){return Ft(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,i){return Ft(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),s=this._getFinalPath(o),a=new URL(this.url+`/object/upload/sign/${s}`);a.searchParams.set("token",n);try{let l;const c=Object.assign({upsert:Lw.upsert},i),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const d=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:u}),f=yield d.json();return d.ok?{data:{path:o,fullPath:f.Key},error:null}:{data:null,error:f}}catch(l){if(Ge(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,n){return Ft(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const o=yield pi(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),s=new URL(this.url+o.url),a=s.searchParams.get("token");if(!a)throw new Wv("No token returned by API");return{data:{signedUrl:s.toString(),path:e,token:a},error:null}}catch(r){if(Ge(r))return{data:null,error:r};throw r}})}update(e,n,r){return Ft(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return Ft(this,void 0,void 0,function*(){try{return{data:yield pi(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(Ge(i))return{data:null,error:i};throw i}})}copy(e,n,r){return Ft(this,void 0,void 0,function*(){try{return{data:{path:(yield pi(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(Ge(i))return{data:null,error:i};throw i}})}createSignedUrl(e,n,r){return Ft(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),o=yield pi(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${s}`)},{data:o,error:null}}catch(i){if(Ge(i))return{data:null,error:i};throw i}})}createSignedUrls(e,n,r){return Ft(this,void 0,void 0,function*(){try{const i=yield pi(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(s=>Object.assign(Object.assign({},s),{signedUrl:s.signedURL?encodeURI(`${this.url}${s.signedURL}${o}`):null})),error:null}}catch(i){if(Ge(i))return{data:null,error:i};throw i}})}download(e,n){return Ft(this,void 0,void 0,function*(){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),s=o?`?${o}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield Sf(this.fetch,`${this.url}/${i}/${a}${s}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Ge(a))return{data:null,error:a};throw a}})}info(e){return Ft(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield Sf(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Ug(r),error:null}}catch(r){if(Ge(r))return{data:null,error:r};throw r}})}exists(e){return Ft(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield AI(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Ge(r)&&r instanceof zg){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),i=[],o=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";o!==""&&i.push(o);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&i.push(l);let c=i.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${c}`)}}}remove(e){return Ft(this,void 0,void 0,function*(){try{return{data:yield gE(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(Ge(n))return{data:null,error:n};throw n}})}list(e,n,r){return Ft(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},DI),n),{prefix:e||""});return{data:yield pi(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(Ge(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const II="2.7.1",jI={"X-Client-Info":`storage-js/${II}`};var Ms=globalThis&&globalThis.__awaiter||function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{c(r.next(u))}catch(d){s(d)}}function l(u){try{c(r.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};class LI{constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},jI),n),this.fetch=mE(r)}listBuckets(){return Ms(this,void 0,void 0,function*(){try{return{data:yield Sf(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Ge(e))return{data:null,error:e};throw e}})}getBucket(e){return Ms(this,void 0,void 0,function*(){try{return{data:yield Sf(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(Ge(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return Ms(this,void 0,void 0,function*(){try{return{data:yield pi(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Ge(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return Ms(this,void 0,void 0,function*(){try{return{data:yield MI(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Ge(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Ms(this,void 0,void 0,function*(){try{return{data:yield pi(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Ge(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Ms(this,void 0,void 0,function*(){try{return{data:yield gE(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(Ge(n))return{data:null,error:n};throw n}})}}class $I extends LI{constructor(e,n={},r){super(e,n,r)}from(e){return new NI(this.url,this.headers,e,this.fetch)}}const FI="2.49.1";let Dl="";typeof Deno<"u"?Dl="deno":typeof document<"u"?Dl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Dl="react-native":Dl="node";const BI={"X-Client-Info":`supabase-js-${Dl}/${FI}`},zI={headers:BI},UI={schema:"public"},VI={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},HI={};var WI=globalThis&&globalThis.__awaiter||function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{c(r.next(u))}catch(d){s(d)}}function l(u){try{c(r.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const KI=t=>{let e;return t?e=t:typeof fetch>"u"?e=eE:e=fetch,(...n)=>e(...n)},qI=()=>typeof Headers>"u"?tE:Headers,GI=(t,e,n)=>{const r=KI(n),i=qI();return(o,s)=>WI(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:t;let c=new i(s==null?void 0:s.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(o,Object.assign(Object.assign({},s),{headers:c}))})};var JI=globalThis&&globalThis.__awaiter||function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{c(r.next(u))}catch(d){s(d)}}function l(u){try{c(r.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};function YI(t){return t.replace(/\/$/,"")}function QI(t,e){const{db:n,auth:r,realtime:i,global:o}=t,{db:s,auth:a,realtime:l,global:c}=e,u={db:Object.assign(Object.assign({},s),n),auth:Object.assign(Object.assign({},a),r),realtime:Object.assign(Object.assign({},l),i),global:Object.assign(Object.assign({},c),o),accessToken:()=>JI(this,void 0,void 0,function*(){return""})};return t.accessToken?u.accessToken=t.accessToken:delete u.accessToken,u}const yE="2.68.0",zs=30*1e3,Vg=3,Np=Vg*zs,XI="http://localhost:9999",ZI="supabase.auth.token",e2={"X-Client-Info":`gotrue-js/${yE}`},Hg="X-Supabase-Api-Version",vE={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function t2(t){return Math.round(Date.now()/1e3)+t}function n2(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const cr=()=>typeof window<"u"&&typeof document<"u",bo={tested:!1,writable:!1},tc=()=>{if(!cr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(bo.tested)return bo.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),bo.tested=!0,bo.writable=!0}catch{bo.tested=!0,bo.writable=!1}return bo.writable};function r2(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,o)=>{e[o]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const xE=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>as(()=>Promise.resolve().then(()=>ll),void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},i2=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",wE=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Zu=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},ed=async(t,e)=>{await t.removeItem(e)};function o2(t){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n="",r,i,o,s,a,l,c,u=0;for(t=t.replace("-","+").replace("_","/");u<t.length;)s=e.indexOf(t.charAt(u++)),a=e.indexOf(t.charAt(u++)),l=e.indexOf(t.charAt(u++)),c=e.indexOf(t.charAt(u++)),r=s<<2|a>>4,i=(a&15)<<4|l>>2,o=(l&3)<<6|c,n=n+String.fromCharCode(r),l!=64&&i!=0&&(n=n+String.fromCharCode(i)),c!=64&&o!=0&&(n=n+String.fromCharCode(o));return n}class xh{constructor(){this.promise=new xh.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}xh.promiseConstructor=Promise;function $w(t){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,n=t.split(".");if(n.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(n[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=n[1];return JSON.parse(o2(r))}async function s2(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function a2(t,e){return new Promise((r,i)=>{(async()=>{for(let o=0;o<1/0;o++)try{const s=await t(o);if(!e(o,null,s)){r(s);return}}catch(s){if(!e(o,s)){i(s);return}}})()})}function l2(t){return("0"+t.toString(16)).substr(-2)}function c2(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let o=0;o<56;o++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,l2).join("")}async function u2(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(o=>String.fromCharCode(o)).join("")}function d2(t){return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function f2(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await u2(t);return d2(n)}async function As(t,e,n=!1){const r=c2();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await wE(t,`${e}-code-verifier`,i);const o=await f2(r);return[o,r===o?"plain":"s256"]}const h2=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function p2(t){const e=t.headers.get(Hg);if(!e||!e.match(h2))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class Kv extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function se(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class m2 extends Kv{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function g2(t){return se(t)&&t.name==="AuthApiError"}class bE extends Kv{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class bs extends Kv{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}}class li extends bs{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function y2(t){return se(t)&&t.name==="AuthSessionMissingError"}class Ip extends bs{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class td extends bs{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class nd extends bs{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function v2(t){return se(t)&&t.name==="AuthImplicitGrantRedirectError"}class Fw extends bs{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Wg extends bs{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function jp(t){return se(t)&&t.name==="AuthRetryableFetchError"}class Bw extends bs{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}var x2=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const Eo=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),w2=[502,503,504];async function zw(t){var e;if(!i2(t))throw new Wg(Eo(t),0);if(w2.includes(t.status))throw new Wg(Eo(t),t.status);let n;try{n=await t.json()}catch(o){throw new bE(Eo(o),o)}let r;const i=p2(t);if(i&&i.getTime()>=vE["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Bw(Eo(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new li}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,s)=>o&&typeof s=="string",!0))throw new Bw(Eo(n),t.status,n.weak_password.reasons);throw new m2(Eo(n),t.status||500,r)}const b2=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function ue(t,e,n,r){var i;const o=Object.assign({},r==null?void 0:r.headers);o[Hg]||(o[Hg]=vE["2024-01-01"].name),r!=null&&r.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const s=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(s.redirect_to=r.redirectTo);const a=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",l=await S2(t,e,n+a,{headers:o,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function S2(t,e,n,r,i,o){const s=b2(e,r,i,o);let a;try{a=await t(n,Object.assign({},s))}catch(l){throw console.error(l),new Wg(Eo(l),0)}if(a.ok||await zw(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await zw(l)}}function ci(t){var e;let n=null;T2(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=t2(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function Uw(t){const e=ci(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function xi(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function C2(t){return{data:t,error:null}}function k2(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o}=t,s=x2(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o},l=Object.assign({},s);return{data:{properties:a,user:l},error:null}}function E2(t){return t}function T2(t){return t.access_token&&t.refresh_token&&t.expires_in}var _2=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class R2{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=xE(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n="global"){try{return await ue(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(se(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await ue(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:xi})}catch(r){if(se(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=_2(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await ue(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:k2,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(se(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await ue(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:xi})}catch(n){if(se(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,o,s,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await ue(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:E2});if(u.error)throw u.error;const d=await u.json(),f=(s=u.headers.get("x-total-count"))!==null&&s!==void 0?s:0,p=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(m=>{const g=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(m.split(";")[1].split("=")[1]);c[`${x}Page`]=g}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(se(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){try{return await ue(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:xi})}catch(n){if(se(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){try{return await ue(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:xi})}catch(r){if(se(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){try{return await ue(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:xi})}catch(r){if(se(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:n,error:r}=await ue(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(se(n))return{data:null,error:n};throw n}}async _deleteFactor(e){try{return{data:await ue(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(se(n))return{data:null,error:n};throw n}}}const O2={getItem:t=>tc()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{tc()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{tc()&&globalThis.localStorage.removeItem(t)}};function Vw(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function P2(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Ds={debug:!!(globalThis&&tc()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class SE extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class M2 extends SE{}async function A2(t,e,n){Ds.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Ds.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){Ds.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{Ds.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw Ds.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new M2(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Ds.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}P2();const D2={url:XI,storageKey:ZI,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:e2,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Hw(t,e,n){return await n()}class Oc{constructor(e){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Oc.nextInstanceID,Oc.nextInstanceID+=1,this.instanceID>0&&cr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},D2),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new R2({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=xE(i.fetch),this.lock=i.lock||Hw,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:cr()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=A2:this.lock=Hw,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:tc()?this.storage=O2:(this.memoryStorage={},this.storage=Vw(this.memoryStorage)):(this.memoryStorage={},this.storage=Vw(this.memoryStorage)),cr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${yE}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=r2(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),cr()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:o}=await this._getSessionFromURL(n,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),v2(o)){const l=(e=o.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:s,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",s,"redirect type",a),await this._saveSession(s),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return se(n)?{error:n}:{error:new bE("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{const o=await ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:ci}),{data:s,error:a}=o;if(a||!s)return{data:{user:null,session:null},error:a};const l=s.session,c=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(o){if(se(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(e){var n,r,i;try{let o;if("email"in e){const{email:u,password:d,options:f}=e;let p=null,m=null;this.flowType==="pkce"&&([p,m]=await As(this.storage,this.storageKey)),o=await ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:u,password:d,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:m},xform:ci})}else if("phone"in e){const{phone:u,password:d,options:f}=e;o=await ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(i=f==null?void 0:f.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:ci})}else throw new td("You must provide either an email or phone number and a password");const{data:s,error:a}=o;if(a||!s)return{data:{user:null,session:null},error:a};const l=s.session,c=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(o){if(se(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(e){try{let n;if("email"in e){const{email:o,password:s,options:a}=e;n=await ue(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Uw})}else if("phone"in e){const{phone:o,password:s,options:a}=e;n=await ue(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Uw})}else throw new td("You must provide either an email or phone number and a password");const{data:r,error:i}=n;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Ip}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(se(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,i,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const n=await Zu(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:o,error:s}=await ue(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:ci});if(await ed(this.storage,`${this.storageKey}-code-verifier`),s)throw s;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new Ip}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:i??null}),error:s})}catch(o){if(se(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(e){try{const{options:n,provider:r,token:i,access_token:o,nonce:s}=e,a=await ue(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:o,nonce:s,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:ci}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Ip}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(n){if(se(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,i,o,s;try{if("email"in e){const{email:a,options:l}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await As(this.storage,this.storageKey));const{error:d}=await ue(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:u}=await ue(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(o=l==null?void 0:l.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(s=l==null?void 0:l.channel)!==null&&s!==void 0?s:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new td("You must provide either an email or phone number.")}catch(a){if(se(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var n,r;try{let i,o;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,o=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:s,error:a}=await ue(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:i,xform:ci});if(a)throw a;if(!s)throw new Error("An error occurred on token verification.");const l=s.session,c=s.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(se(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var n,r,i;try{let o=null,s=null;return this.flowType==="pkce"&&([o,s]=await As(this.storage,this.storageKey)),await ue(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:s}),headers:this.headers,xform:C2})}catch(o){if(se(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new li;const{error:i}=await ue(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(se(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:o}=e,{error:s}=await ue(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:s}}else if("phone"in e){const{phone:r,type:i,options:o}=e,{data:s,error:a}=await ue(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:s==null?void 0:s.message_id},error:a}}throw new td("You must provide either an email or phone number and a type")}catch(n){if(se(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Zu(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Np:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let s=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,c,u)=>(!s&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),s=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,u))})}return{data:{session:e},error:null}}const{session:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ue(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:xi}):await this._useSession(async n=>{var r,i,o;const{data:s,error:a}=n;if(a)throw a;return!(!((r=s.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new li}:await ue(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0,xform:xi})})}catch(n){if(se(n))return y2(n)&&(await this._removeSession(),await ed(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:o}=r;if(o)throw o;if(!i.session)throw new li;const s=i.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await As(this.storage,this.storageKey));const{data:c,error:u}=await ue(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:s.access_token,xform:xi});if(u)throw u;return s.user=c.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),{data:{user:s.user},error:null}})}catch(r){if(se(r))return{data:{user:null},error:r};throw r}}_decodeJWT(e){return $w(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new li;const n=Date.now()/1e3;let r=n,i=!0,o=null;const s=$w(e.access_token);if(s.exp&&(r=s.exp,i=r<=n),i){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};o=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;o={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(n){if(se(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:s,error:a}=n;if(a)throw a;e=(r=s.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new li;const{session:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(se(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!cr())throw new nd("No browser detected.");if(e.error||e.error_description||e.error_code)throw new nd(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Fw("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new nd("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Fw("No code detected.");const{data:w,error:S}=await this._exchangeCodeForSession(e.code);if(S)throw S;const b=new URL(window.location.href);return b.searchParams.delete("code"),window.history.replaceState(window.history.state,"",b.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:o,refresh_token:s,expires_in:a,expires_at:l,token_type:c}=e;if(!o||!a||!s||!c)throw new nd("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(a);let f=u+d;l&&(f=parseInt(l));const p=f-u;p*1e3<=zs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${d}s`);const m=f-d;u-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,f,u):u-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,f,u);const{data:g,error:x}=await this._getUser(o);if(x)throw x;const v={provider_token:r,provider_refresh_token:i,access_token:o,expires_in:d,expires_at:f,refresh_token:s,token_type:c,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:v,redirectType:e.type},error:null}}catch(r){if(se(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Zu(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return{error:o};const s=(r=i.session)===null||r===void 0?void 0:r.access_token;if(s){const{error:a}=await this.admin.signOut(s,e);if(a&&!(g2(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await ed(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=n2(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:o},error:s}=n;if(s)throw s;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await As(this.storage,this.storageKey,!0));try{return await ue(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(se(o))return{data:null,error:o};throw o}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(se(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:i}=await this._useSession(async o=>{var s,a,l,c,u;const{data:d,error:f}=o;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await ue(this.fetch,"GET",p,{headers:this.headers,jwt:(u=(c=d.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(i)throw i;return cr()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(se(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:o,error:s}=n;if(s)throw s;return await ue(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(se(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await a2(async i=>(i>0&&await s2(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await ue(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ci})),(i,o)=>{const s=200*Math.pow(2,i);return o&&jp(o)&&Date.now()+s-r<zs})}catch(r){if(this._debug(n,"error",r),se(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),cr()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await Zu(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const i=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<Np;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${Np}s`),i){if(this.autoRefreshToken&&r.refresh_token){const{error:o}=await this._callRefreshToken(r.refresh_token);o&&(console.error(o),jp(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new li;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new xh;const{data:o,error:s}=await this._refreshAccessToken(e);if(s)throw s;if(!o.session)throw new li;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const a={session:o.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(o){if(this._debug(i,"error",o),se(o)){const s={session:null,error:o};return jp(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(s),s}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const o=[],s=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(l){o.push(l)}});if(await Promise.all(s),o.length>0){for(let a=0;a<o.length;a+=1)console.error(o[a]);throw o[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await wE(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await ed(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&cr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),zs);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/zs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${zs}ms, refresh threshold is ${Vg} ticks`),i<=Vg&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof SE)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!cr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,s]=await As(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(s)}`});i.push(a.toString())}if(r!=null&&r.queryParams){const o=new URLSearchParams(r.queryParams);i.push(o.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;return o?{data:null,error:o}:await ue(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(se(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:o,error:s}=n;if(s)return{data:null,error:s};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:c}=await ue(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(n){if(se(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return{data:null,error:o};const{data:s,error:a}=await ue(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+s.expires_in},s)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",s),{data:s,error:a})})}catch(n){if(se(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;return o?{data:null,error:o}:await ue(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(se(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],i=r.filter(s=>s.factor_type==="totp"&&s.status==="verified"),o=r.filter(s=>s.factor_type==="phone"&&s.status==="verified");return{data:{all:r,totp:i,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:i},error:o}=e;if(o)return{data:null,error:o};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const s=this._decodeJWT(i.access_token);let a=null;s.aal&&(a=s.aal);let l=a;((r=(n=i.user.factors)===null||n===void 0?void 0:n.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=s.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}}Oc.nextInstanceID=0;const N2=Oc;class I2 extends N2{constructor(e){super(e)}}var j2=globalThis&&globalThis.__awaiter||function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{c(r.next(u))}catch(d){s(d)}}function l(u){try{c(r.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};class L2{constructor(e,n,r){var i,o,s;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const a=YI(e);this.realtimeUrl=`${a}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${a}/auth/v1`,this.storageUrl=`${a}/storage/v1`,this.functionsUrl=`${a}/functions/v1`;const l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,c={db:UI,realtime:HI,auth:Object.assign(Object.assign({},VI),{storageKey:l}),global:zI},u=QI(r??{},c);this.storageKey=(i=u.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(o=u.global.headers)!==null&&o!==void 0?o:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(d,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((s=u.auth)!==null&&s!==void 0?s:{},this.headers,u.global.fetch),this.fetch=GI(n,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new cI(`${a}/rest/v1`,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),u.accessToken||this._listenForAuthEvents()}get functions(){return new FN(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new $I(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return j2(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,storageKey:o,flowType:s,lock:a,debug:l},c,u){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new I2({url:this.authUrl,headers:Object.assign(Object.assign({},d),c),storageKey:o,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,flowType:s,lock:a,debug:l,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new kI(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const $2=(t,e,n)=>new L2(t,e,n);function F2(){const t="production";return{apiUrl:"https://api.eastmedical.ai",wsUrl:{}.VITE_WS_URL||"ws://localhost:3000",supabaseUrl:"https://apnxgktdaiqoesqyseiz.supabase.co",supabaseAnonKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFwbnhna3RkYWlxb2VzcXlzZWl6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDExMzQxNjEsImV4cCI6MjA1NjcxMDE2MX0.XhGhD7ESMUFhZso3wY_ee_WHGWde5v748qFDAhgSQ04",environment:t}}const Qi=F2(),Xi=$2(Qi.supabaseUrl,Qi.supabaseAnonKey,{realtime:{params:{eventsPerSecond:10}},auth:{persistSession:!0,autoRefreshToken:!0}});function Be(){return Xi}const CE=y.createContext(void 0);function B2({children:t}){const e=Be(),[n,r]=y.useState(null),[i,o]=y.useState(!0),s=xs();y.useEffect(()=>{e.auth.getSession().then(({data:{session:d}})=>{r((d==null?void 0:d.user)??null),o(!1)});const{data:{subscription:u}}=e.auth.onAuthStateChange((d,f)=>{r((f==null?void 0:f.user)??null),d==="SIGNED_OUT"&&s.clear()});return()=>{u.unsubscribe()}},[e,s]);const c={user:n,loading:i,signIn:async(u,d)=>{const{data:f,error:p}=await e.auth.signInWithPassword({email:u,password:d});if(p)throw p;return f},signOut:async()=>{const{error:u}=await e.auth.signOut();if(u)throw u;s.clear()}};return h.jsx(CE.Provider,{value:c,children:t})}const rd=(...t)=>{};function z2({visitId:t,onMessage:e}){const[n,r]=y.useState([]),i=y.useRef(!1),o=y.useRef(null),s=y.useCallback(async()=>{if(!t||t==="")return;const{data:a,error:l}=await Xi.from("notes").select("*").eq("visit_id",t).order("created_at",{ascending:!0});l||a&&(rd(`Fetched ${a.length} notes`),r(a),i.current=!0,a.forEach(c=>e==null?void 0:e(c)))},[t,e]);return y.useEffect(()=>{if(!t||t===""){r([]),i.current=!1;return}i.current||s(),o.current&&(o.current.unsubscribe(),o.current=null);const a=Xi.channel(`notes_list_${t}`).on("postgres_changes",{event:"*",schema:"public",table:"notes",filter:`visit_id=eq.${t}`},l=>{switch(rd("Received realtime event:",l.eventType,l),l.eventType){case Yn.INSERT:{const c=l.new;r(u=>{if(u.some(f=>f.id===c.id))return u;const d=[...u,c].sort((f,p)=>new Date(f.created_at).getTime()-new Date(p.created_at).getTime());return e==null||e(c),d});break}case Yn.UPDATE:{const c=l.new;r(u=>{const d=u.map(f=>f.id===c.id?c:f);return JSON.stringify(d)===JSON.stringify(u)?u:(e==null||e(c),d)});break}case Yn.DELETE:{const c=l.old;r(u=>{const d=u.filter(f=>f.id!==c.id);return d.length,u.length,d});break}default:rd("Unhandled event type:",l.eventType);break}}).subscribe(l=>{});return o.current=a,()=>{a.unsubscribe(),o.current=null}},[t,s,e]),y.useEffect(()=>{rd("Notes state updated:",n.length,"notes")},[n]),n}const ri={container:{display:"flex",gap:"24px",height:"100%"},transcriptPanel:{flex:1,display:"flex",flexDirection:"column",backgroundColor:"white",borderRadius:"6px",border:"1px solid #e5e7eb",padding:"16px",overflow:"auto"},contextPanel:{flex:1,display:"flex",flexDirection:"column",backgroundColor:"white",borderRadius:"6px",border:"1px solid #e5e7eb",padding:"16px",overflow:"auto"},text:{fontSize:"16px",color:"#374151",lineHeight:"1.5",whiteSpace:"pre-wrap",margin:0},contentContainer:{display:"flex",flexDirection:"column",height:"100%"},contextTitle:{fontSize:"18px",fontWeight:600,color:"#111827",marginBottom:"12px"},contextContent:{fontSize:"16px",lineHeight:"1.5",color:"#374151",whiteSpace:"pre-wrap",flex:1}};function U2({transcription:t="",placeholder:e="Your transcription will appear here as you speak...",isTranscribing:n,visit:r}){const[i,o]=y.useState(""),s=y.useRef([]),a=y.useRef(null),l=y.useRef(0),c=y.useRef(t),d=z2({visitId:(r==null?void 0:r.id)||"",onMessage:y.useCallback(x=>{console.log("[LiveTranscriptionDisplay] Received context note update:",x)},[])}).filter(x=>x.type==="ai_context").sort((x,v)=>new Date(v.created_at).getTime()-new Date(x.created_at).getTime())[0],f=y.useCallback(()=>{a.current&&(window.clearTimeout(a.current),a.current=null)},[]);y.useEffect(()=>{o(""),s.current=[],l.current=0,c.current="",f()},[r==null?void 0:r.id,f]);const p=y.useCallback((x,v)=>{const w=100+Math.random()*100,S=Math.min(x.length*10,100),b=/[,.!?]$/.test(x)?200:0,C=Math.max(.7,1-v/200);return(w+S+b)*C},[]),m=y.useCallback(()=>{const x=s.current;if(x.length>0){const v=x[0];if(s.current=x.slice(1),l.current+=1,o(w=>{const S=w.length>0&&!/[\s\u4e00-\u9fff]$/.test(w)&&!/^[\u4e00-\u9fff]/.test(v);return w+(S?" ":"")+v}),s.current.length>0){const w=p(v,l.current);f(),a.current=window.setTimeout(m,w)}else f()}},[p,f]),g=y.useCallback(x=>{if(!x)return[];const w=x.replace(/([\u4e00-\u9fff])/g," $1 ").split(/\s+/).filter(Boolean),S=[];for(const b of w)if(/[\u4e00-\u9fff]/.test(b)){const C=b.split("");S.push(...C)}else S.push(b);return S},[]);return y.useEffect(()=>{if(!n){o(t),f();return}if(t===c.current)return;if(c.current=t,!t){console.log("[LiveTranscriptionDisplay] Resetting display - no transcription"),o(""),s.current=[],l.current=0,f();return}const x=g(t);if(x.length<l.current){console.log("[LiveTranscriptionDisplay] Reset detected"),f(),o(t),s.current=[],l.current=x.length;return}if(x.length>l.current){console.log("[LiveTranscriptionDisplay] New words detected:",{newWordsCount:x.length-l.current});const v=x.slice(l.current);s.current=v,a.current||m()}},[t,n,f,g,m]),y.useEffect(()=>()=>{f()},[f]),h.jsxs("div",{style:ri.container,children:[h.jsxs("div",{style:ri.transcriptPanel,children:[h.jsx("div",{style:ri.contextTitle,children:"Transcript"}),h.jsx("div",{style:ri.contentContainer,children:h.jsx("p",{style:ri.text,children:i||t||e})})]}),h.jsxs("div",{style:ri.contextPanel,children:[h.jsx("div",{style:ri.contextTitle,children:"Context"}),h.jsx("div",{style:ri.contextContent,children:(d==null?void 0:d.content)||"No context available yet..."})]})]})}const Ct={modalOverlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},modalContent:{backgroundColor:"white",padding:"24px",borderRadius:"8px",width:"90%",maxWidth:"600px",maxHeight:"80vh",display:"flex",flexDirection:"column"},header:{marginBottom:"16px"},title:{fontSize:"18px",fontWeight:"600",color:"#111827",marginBottom:"8px"},description:{fontSize:"14px",color:"#6b7280"},templateList:{overflowY:"auto",flex:1,marginBottom:"16px",padding:"8px 0"},templateItem:{padding:"12px 16px",borderRadius:"6px",cursor:"pointer",transition:"all 0.2s ease",marginBottom:"8px",border:"1px solid #e5e7eb",minHeight:"48px",display:"flex","&:hover":{backgroundColor:"#f3f4f6"}},templateName:{fontSize:"16px",fontWeight:"500",color:"#111827",marginBottom:"4px"},templateDescription:{fontSize:"14px",color:"#6b7280"},footer:{display:"flex",justifyContent:"flex-end",gap:"8px",borderTop:"1px solid #e5e7eb",paddingTop:"16px"},button:{padding:"8px 16px",borderRadius:"6px",border:"none",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"all 0.2s ease"},cancelButton:{backgroundColor:"#f3f4f6",color:"#374151","&:hover":{backgroundColor:"#e5e7eb"}},generateButton:{backgroundColor:"#3b82f6",color:"white","&:hover":{backgroundColor:"#2563eb"}},disabledButton:{opacity:.5,cursor:"not-allowed","&:hover":{backgroundColor:"#3b82f6"}}};function V2({isOpen:t,onClose:e,onGenerate:n,existingTemplateIds:r=[]}){const[i,o]=y.useState([]),[s,a]=y.useState(null),[l,c]=y.useState(!0),u=Be();return y.useEffect(()=>{t&&(async()=>{try{const{data:f,error:p}=await u.from("template_library").select("*").order("name");if(p)throw p;const m=(f==null?void 0:f.filter(g=>!r.includes(g.id)))||[];console.log("Available templates:",m),o(m)}catch(f){console.error("Error fetching templates:",f)}finally{c(!1)}})()},[t,u,r]),t?h.jsx("div",{style:Ct.modalOverlay,onClick:e,children:h.jsxs("div",{style:Ct.modalContent,onClick:d=>d.stopPropagation(),children:[h.jsxs("div",{style:Ct.header,children:[h.jsx("h2",{style:Ct.title,children:"Select Template"}),h.jsx("p",{style:Ct.description,children:"Choose a template to generate a new note"})]}),h.jsx("div",{style:Ct.templateList,children:l?h.jsx("div",{children:"Loading templates..."}):i.length===0?h.jsx("div",{children:"No templates available"}):i.map(d=>h.jsxs("div",{style:{...Ct.templateItem,...(s==null?void 0:s.id)===d.id?{backgroundColor:"#f3f4f6",borderColor:"#3b82f6"}:{}},onClick:()=>a(d),children:[h.jsx("div",{style:Ct.templateName,children:d.name}),d.description&&h.jsx("div",{style:Ct.templateDescription,children:d.description})]},d.id))}),h.jsxs("div",{style:Ct.footer,children:[h.jsx("button",{style:{...Ct.button,...Ct.cancelButton},onClick:e,children:"Cancel"}),h.jsx("button",{style:{...Ct.button,...Ct.generateButton,...!s||l?Ct.disabledButton:{}},onClick:()=>s&&n(s),disabled:!s||l,children:"Generate Note"})]})]})}):null}function ot(t){this.content=t}ot.prototype={constructor:ot,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),o=r.content.slice();return i==-1?o.push(n||t,e):(o[i+1]=e,n&&(o[i]=n)),new ot(o)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new ot(n)},addToStart:function(t,e){return new ot([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new ot(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),o=r.find(t);return i.splice(o==-1?i.length:o,0,e,n),new ot(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=ot.from(t),t.size?new ot(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=ot.from(t),t.size?new ot(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=ot.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};ot.from=function(t){if(t instanceof ot)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new ot(e)};function kE(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),o=e.child(r);if(i==o){n+=i.nodeSize;continue}if(!i.sameMarkup(o))return n;if(i.isText&&i.text!=o.text){for(let s=0;i.text[s]==o.text[s];s++)n++;return n}if(i.content.size||o.content.size){let s=kE(i.content,o.content,n+1);if(s!=null)return s}n+=i.nodeSize}}function EE(t,e,n,r){for(let i=t.childCount,o=e.childCount;;){if(i==0||o==0)return i==o?null:{a:n,b:r};let s=t.child(--i),a=e.child(--o),l=s.nodeSize;if(s==a){n-=l,r-=l;continue}if(!s.sameMarkup(a))return{a:n,b:r};if(s.isText&&s.text!=a.text){let c=0,u=Math.min(s.text.length,a.text.length);for(;c<u&&s.text[s.text.length-c-1]==a.text[a.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(s.content.size||a.content.size){let c=EE(s.content,a.content,n-1,r-1);if(c)return c}n-=l,r-=l}}class F{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,o){for(let s=0,a=0;a<n;s++){let l=this.content[s],c=a+l.nodeSize;if(c>e&&r(l,i+a,o||null,s)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,n-u),r,i+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let o="",s=!0;return this.nodesBetween(e,n,(a,l)=>{let c=a.isText?a.text.slice(Math.max(e,l)-l,n-l):a.isLeaf?i?typeof i=="function"?i(a):i:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&r&&(s?s=!1:o+=r),o+=c},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),o=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),o=1);o<e.content.length;o++)i.push(e.content[o]);return new F(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let o=0,s=0;s<n;o++){let a=this.content[o],l=s+a.nodeSize;l>e&&((s<e||l>n)&&(a.isText?a=a.cut(Math.max(0,e-s),Math.min(a.text.length,n-s)):a=a.cut(Math.max(0,e-s-1),Math.min(a.content.size,n-s-1))),r.push(a),i+=a.nodeSize),s=l}return new F(r,i)}cutByIndex(e,n){return e==n?F.empty:e==0&&n==this.content.length?this:new F(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),o=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new F(i,o)}addToStart(e){return new F([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new F(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return kE(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return EE(this,e,n,r)}findIndex(e,n=-1){if(e==0)return id(0,e);if(e==this.size)return id(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let o=this.child(r),s=i+o.nodeSize;if(s>=e)return s==e||n>0?id(r+1,s):id(r,i);i=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return F.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new F(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return F.empty;let n,r=0;for(let i=0;i<e.length;i++){let o=e[i];r+=o.nodeSize,i&&o.isText&&e[i-1].sameMarkup(o)?(n||(n=e.slice(0,i)),n[n.length-1]=o.withText(n[n.length-1].text+o.text)):n&&n.push(o)}return new F(n||e,r)}static from(e){if(!e)return F.empty;if(e instanceof F)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new F([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}F.empty=new F([],0);const Lp={index:0,offset:0};function id(t,e){return Lp.index=t,Lp.offset=e,Lp}function Cf(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!Cf(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!Cf(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let xe=class Kg{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let o=e[i];if(this.eq(o))return e;if(this.type.excludes(o.type))n||(n=e.slice(0,i));else{if(o.type.excludes(this.type))return e;!r&&o.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(o)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Cf(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Kg.none;if(e instanceof Kg)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};xe.none=[];class kf extends Error{}class K{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=_E(this.content,e+this.openStart,n);return r&&new K(r,this.openStart,this.openEnd)}removeBetween(e,n){return new K(TE(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return K.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new K(F.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let o=e.firstChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=e.lastChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.lastChild)i++;return new K(e,r,i)}}K.empty=new K(F.empty,0,0);function TE(t,e,n){let{index:r,offset:i}=t.findIndex(e),o=t.maybeChild(r),{index:s,offset:a}=t.findIndex(n);if(i==e||o.isText){if(a!=n&&!t.child(s).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=s)throw new RangeError("Removing non-flat range");return t.replaceChild(r,o.copy(TE(o.content,e-i-1,n-i-1)))}function _E(t,e,n,r){let{index:i,offset:o}=t.findIndex(e),s=t.maybeChild(i);if(o==e||s.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));let a=_E(s.content,e-o-1,n);return a&&t.replaceChild(i,s.copy(a))}function H2(t,e,n){if(n.openStart>t.depth)throw new kf("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new kf("Inconsistent open depths");return RE(t,e,n,0)}function RE(t,e,n,r){let i=t.index(r),o=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let s=RE(t,e,n,r+1);return o.copy(o.content.replaceChild(i,s))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let s=t.parent,a=s.content;return Go(s,a.cut(0,t.parentOffset).append(n.content).append(a.cut(e.parentOffset)))}else{let{start:s,end:a}=W2(n,t);return Go(o,PE(t,s,a,e,r))}else return Go(o,Ef(t,e,r))}function OE(t,e){if(!e.type.compatibleContent(t.type))throw new kf("Cannot join "+e.type.name+" onto "+t.type.name)}function qg(t,e,n){let r=t.node(n);return OE(r,e.node(n)),r}function qo(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function nc(t,e,n,r){let i=(e||t).node(n),o=0,s=e?e.index(n):i.childCount;t&&(o=t.index(n),t.depth>n?o++:t.textOffset&&(qo(t.nodeAfter,r),o++));for(let a=o;a<s;a++)qo(i.child(a),r);e&&e.depth==n&&e.textOffset&&qo(e.nodeBefore,r)}function Go(t,e){return t.type.checkContent(e),t.copy(e)}function PE(t,e,n,r,i){let o=t.depth>i&&qg(t,e,i+1),s=r.depth>i&&qg(n,r,i+1),a=[];return nc(null,t,i,a),o&&s&&e.index(i)==n.index(i)?(OE(o,s),qo(Go(o,PE(t,e,n,r,i+1)),a)):(o&&qo(Go(o,Ef(t,e,i+1)),a),nc(e,n,i,a),s&&qo(Go(s,Ef(n,r,i+1)),a)),nc(r,null,i,a),new F(a)}function Ef(t,e,n){let r=[];if(nc(null,t,n,r),t.depth>n){let i=qg(t,e,n+1);qo(Go(i,Ef(t,e,n+1)),r)}return nc(e,null,n,r),new F(r)}function W2(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let o=n-1;o>=0;o--)i=e.node(o).copy(F.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class Pc{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let o=0;o<e;o++)i+=r.child(o).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return xe.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let a=r;r=i,i=a}let o=r.marks;for(var s=0;s<o.length;s++)o[s].type.spec.inclusive===!1&&(!i||!o[s].isInSet(i.marks))&&(o=o[s--].removeFromSet(o));return o}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!i||!r[o].isInSet(i.marks))&&(r=r[o--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new Tf(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,o=n;for(let s=e;;){let{index:a,offset:l}=s.content.findIndex(o),c=o-l;if(r.push(s,a,i+l),!c||(s=s.child(a),s.isText))break;o=c-1,i+=l+1}return new Pc(n,r,o)}static resolveCached(e,n){let r=Ww.get(e);if(r)for(let o=0;o<r.elts.length;o++){let s=r.elts[o];if(s.pos==n)return s}else Ww.set(e,r=new K2);let i=r.elts[r.i]=Pc.resolve(e,n);return r.i=(r.i+1)%q2,i}}class K2{constructor(){this.elts=[],this.i=0}}const q2=12,Ww=new WeakMap;class Tf{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const G2=Object.create(null);let Vi=class Gg{constructor(e,n,r,i=xe.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||F.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&Cf(this.attrs,n||e.defaultAttrs||G2)&&xe.sameSet(this.marks,r||xe.none)}copy(e=null){return e==this.content?this:new Gg(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Gg(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return K.empty;let i=this.resolve(e),o=this.resolve(n),s=r?0:i.sharedDepth(n),a=i.start(s),c=i.node(s).content.cut(i.pos-a,o.pos-a);return new K(c,i.depth-s,o.depth-s)}replace(e,n,r){return H2(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return Pc.resolveCached(this,e)}resolveNoCache(e){return Pc.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,o=>(r.isInSet(o.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),ME(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=F.empty,i=0,o=r.childCount){let s=this.contentMatchAt(e).matchFragment(r,i,o),a=s&&s.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=i;l<o;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let o=this.contentMatchAt(e).matchType(r),s=o&&o.matchFragment(this.content,n);return s?s.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=xe.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!xe.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=F.fromJSON(e,n.content),o=e.nodeType(n.type).create(n.attrs,i,r);return o.type.checkAttrs(o.attrs),o}};Vi.prototype.text=void 0;class _f extends Vi{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):ME(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new _f(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new _f(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function ME(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class us{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new J2(e,n);if(r.next==null)return us.empty;let i=AE(r);r.next&&r.err("Unexpected trailing text");let o=nj(tj(i));return rj(o,r),o}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let o=n;i&&o<r;o++)i=i.matchType(e.child(o).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function o(s,a){let l=s.matchFragment(e,r);if(l&&(!n||l.validEnd))return F.from(a.map(c=>c.createAndFill()));for(let c=0;c<s.next.length;c++){let{type:u,next:d}=s.next[c];if(!(u.isText||u.hasRequiredAttrs())&&i.indexOf(d)==-1){i.push(d);let f=o(d,a.concat(u));if(f)return f}}return null}return o(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),o=i.match;if(o.matchType(e)){let s=[];for(let a=i;a.type;a=a.via)s.push(a.type);return s.reverse()}for(let s=0;s<o.next.length;s++){let{type:a,next:l}=o.next[s];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!i.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:i}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let o=i+(r.validEnd?"*":" ")+" ";for(let s=0;s<r.next.length;s++)o+=(s?", ":"")+r.next[s].type.name+"->"+e.indexOf(r.next[s].next);return o}).join(`
`)}}us.empty=new us(!0);class J2{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function AE(t){let e=[];do e.push(Y2(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function Y2(t){let e=[];do e.push(Q2(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function Q2(t){let e=ej(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=X2(t,e);else break;return e}function Kw(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function X2(t,e){let n=Kw(t),r=n;return t.eat(",")&&(t.next!="}"?r=Kw(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function Z2(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let o in n){let s=n[o];s.isInGroup(e)&&i.push(s)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function ej(t){if(t.eat("(")){let e=AE(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=Z2(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function tj(t){let e=[[]];return i(o(t,0),n()),e;function n(){return e.push([])-1}function r(s,a,l){let c={term:l,to:a};return e[s].push(c),c}function i(s,a){s.forEach(l=>l.to=a)}function o(s,a){if(s.type=="choice")return s.exprs.reduce((l,c)=>l.concat(o(c,a)),[]);if(s.type=="seq")for(let l=0;;l++){let c=o(s.exprs[l],a);if(l==s.exprs.length-1)return c;i(c,a=n())}else if(s.type=="star"){let l=n();return r(a,l),i(o(s.expr,l),l),[r(l)]}else if(s.type=="plus"){let l=n();return i(o(s.expr,a),l),i(o(s.expr,l),l),[r(l)]}else{if(s.type=="opt")return[r(a)].concat(o(s.expr,a));if(s.type=="range"){let l=a;for(let c=0;c<s.min;c++){let u=n();i(o(s.expr,l),u),l=u}if(s.max==-1)i(o(s.expr,l),l);else for(let c=s.min;c<s.max;c++){let u=n();r(l,u),i(o(s.expr,l),u),l=u}return[r(l)]}else{if(s.type=="name")return[r(a,void 0,s.value)];throw new Error("Unknown expr type")}}}}function DE(t,e){return e-t}function qw(t,e){let n=[];return r(e),n.sort(DE);function r(i){let o=t[i];if(o.length==1&&!o[0].term)return r(o[0].to);n.push(i);for(let s=0;s<o.length;s++){let{term:a,to:l}=o[s];!a&&n.indexOf(l)==-1&&r(l)}}}function nj(t){let e=Object.create(null);return n(qw(t,0));function n(r){let i=[];r.forEach(s=>{t[s].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let u=0;u<i.length;u++)i[u][0]==a&&(c=i[u][1]);qw(t,l).forEach(u=>{c||i.push([a,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let o=e[r.join(",")]=new us(r.indexOf(t.length-1)>-1);for(let s=0;s<i.length;s++){let a=i[s][1].sort(DE);o.next.push({type:i[s][0],next:e[a.join(",")]||n(a)})}return o}}function rj(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],o=!i.validEnd,s=[];for(let a=0;a<i.next.length;a++){let{type:l,next:c}=i.next[a];s.push(l.name),o&&!(l.isText||l.hasRequiredAttrs())&&(o=!1),r.indexOf(c)==-1&&r.push(c)}o&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function NE(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function IE(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let o=t[r];if(o.hasDefault)i=o.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function jE(t,e,n,r){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in t){let o=t[i];o.validate&&o.validate(e[i])}}function LE(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new oj(t,r,e[r]);return n}let Gw=class $E{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=LE(e,r.attrs),this.defaultAttrs=NE(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==us.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:IE(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Vi(this,this.computeAttrs(e),F.from(n),xe.setFrom(r))}createChecked(e=null,n,r){return n=F.from(n),this.checkContent(n),new Vi(this,this.computeAttrs(e),n,xe.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=F.from(n),n.size){let s=this.contentMatch.fillBefore(n);if(!s)return null;n=s.append(n)}let i=this.contentMatch.matchFragment(n),o=i&&i.fillBefore(F.empty,!0);return o?new Vi(this,e,n.append(o),xe.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){jE(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:xe.none:e}static compile(e,n){let r=Object.create(null);e.forEach((o,s)=>r[o]=new $E(o,n,s));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function ij(t,e,n){let r=n.split("|");return i=>{let o=i===null?"null":typeof i;if(r.indexOf(o)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${o}`)}}class oj{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?ij(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class wh{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=LE(e,i.attrs),this.excluded=null;let o=NE(this.attrs);this.instance=o?new xe(this,o):null}create(e=null){return!e&&this.instance?this.instance:new xe(this,IE(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((o,s)=>r[o]=new wh(o,i++,n,s)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){jE(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class FE{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=ot.from(e.nodes),n.marks=ot.from(e.marks||{}),this.nodes=Gw.compile(this.spec.nodes,this),this.marks=wh.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let o=this.nodes[i],s=o.spec.content||"",a=o.spec.marks;if(o.contentMatch=r[s]||(r[s]=us.parse(s,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=a=="_"?null:a?Jw(this,a.split(" ")):a==""||!o.inlineContent?[]:null}for(let i in this.marks){let o=this.marks[i],s=o.spec.excludes;o.excluded=s==null?[o]:s==""?[]:Jw(this,s.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof Gw){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new _f(r,r.defaultAttrs,e,xe.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeFromJSON(e){return Vi.fromJSON(this,e)}markFromJSON(e){return xe.fromJSON(this,e)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function Jw(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],o=t.marks[i],s=o;if(o)n.push(o);else for(let a in t.marks){let l=t.marks[a];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&n.push(s=l)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function sj(t){return t.tag!=null}function aj(t){return t.style!=null}class Hi{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(sj(i))this.tags.push(i);else if(aj(i)){let o=/[^=]*/.exec(i.style)[0];r.indexOf(o)<0&&r.push(o),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let o=e.nodes[i.node];return o.contentMatch.matchType(o)})}parse(e,n={}){let r=new Qw(this,n,!1);return r.addAll(e,xe.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new Qw(this,n,!0);return r.addAll(e,xe.none,n.from,n.to),K.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let o=this.tags[i];if(uj(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||n.matchesContext(o.context))){if(o.getAttrs){let s=o.getAttrs(e);if(s===!1)continue;o.attrs=s||void 0}return o}}}matchStyle(e,n,r,i){for(let o=i?this.styles.indexOf(i)+1:0;o<this.styles.length;o++){let s=this.styles[o],a=s.style;if(!(a.indexOf(e)!=0||s.context&&!r.matchesContext(s.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=n))){if(s.getAttrs){let l=s.getAttrs(n);if(l===!1)continue;s.attrs=l||void 0}return s}}}static schemaRules(e){let n=[];function r(i){let o=i.priority==null?50:i.priority,s=0;for(;s<n.length;s++){let a=n[s];if((a.priority==null?50:a.priority)<o)break}n.splice(s,0,i)}for(let i in e.marks){let o=e.marks[i].spec.parseDOM;o&&o.forEach(s=>{r(s=Xw(s)),s.mark||s.ignore||s.clearMark||(s.mark=i)})}for(let i in e.nodes){let o=e.nodes[i].spec.parseDOM;o&&o.forEach(s=>{r(s=Xw(s)),s.node||s.ignore||s.mark||(s.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Hi(e,Hi.schemaRules(e)))}}const BE={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},lj={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},zE={ol:!0,ul:!0},Mc=1,Jg=2,rc=4;function Yw(t,e,n){return e!=null?(e?Mc:0)|(e==="full"?Jg:0):t&&t.whitespace=="pre"?Mc|Jg:n&~rc}class od{constructor(e,n,r,i,o,s){this.type=e,this.attrs=n,this.marks=r,this.solid=i,this.options=s,this.content=[],this.activeMarks=xe.none,this.match=o||(s&rc?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(F.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Mc)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let o=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-i[0].length))}}let n=F.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(F.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!BE.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class Qw{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,o,s=Yw(null,n.preserveWhitespace,0)|(r?rc:0);i?o=new od(i.type,i.attrs,xe.none,!0,n.topMatch||i.type.contentMatch,s):r?o=new od(null,null,xe.none,!0,null,s):o=new od(e.schema.topNodeType,null,xe.none,!0,null,s),this.nodes=[o],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,i=this.top,o=i.options&Jg?"full":this.localPreserveWS||(i.options&Mc)>0;if(o==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(o)o!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let s=i.content[i.content.length-1],a=e.previousSibling;(!s||a&&a.nodeName=="BR"||s.isText&&/[ \t\r\n\u000c]$/.test(s.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let i=this.localPreserveWS,o=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let s=e.nodeName.toLowerCase(),a;zE.hasOwnProperty(s)&&this.parser.normalizeLists&&cj(e);let l=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,r));e:if(l?l.ignore:lj.hasOwnProperty(s))this.findInside(e),this.ignoreFallback(e,n);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(e=l.skip);let c,u=this.needsBlock;if(BE.hasOwnProperty(s))o.content.length&&o.content[0].isInline&&this.open&&(this.open--,o=this.top),c=!0,o.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let d=l&&l.skip?n:this.readStyles(e,n);d&&this.addAll(e,d),c&&this.sync(o),this.needsBlock=u}else{let c=this.readStyles(e,n);c&&this.addElementByRule(e,l,c,l.consuming===!1?a:void 0)}this.localPreserveWS=i}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let o=this.parser.matchedStyles[i],s=r.getPropertyValue(o);if(s)for(let a=void 0;;){let l=this.parser.matchStyle(o,s,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?n=n.filter(c=>!l.clearMark(c)):n=n.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return n}addElementByRule(e,n,r,i){let o,s;if(n.node)if(s=this.parser.schema.nodes[n.node],s.isLeaf)this.insertNode(s.create(n.attrs),r)||this.leafFallback(e,r);else{let l=this.enter(s,n.attrs||null,r,n.preserveWhitespace);l&&(o=!0,r=l)}else{let l=this.parser.schema.marks[n.mark];r=r.concat(l.create(n.attrs))}let a=this.top;if(s&&s.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,r));else{let l=e;typeof n.contentElement=="string"?l=e.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(e):n.contentElement&&(l=n.contentElement),this.findAround(e,l,!0),this.addAll(l,r),this.findAround(e,l,!1)}o&&this.sync(a)&&this.open--}addAll(e,n,r,i){let o=r||0;for(let s=r?e.childNodes[r]:e.firstChild,a=i==null?null:e.childNodes[i];s!=a;s=s.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(s,n);this.findAtPoint(e,o)}findPlace(e,n){let r,i;for(let o=this.open;o>=0;o--){let s=this.nodes[o],a=s.findWrapping(e);if(a&&(!r||r.length>a.length)&&(r=a,i=s,!a.length)||s.solid)break}if(!r)return null;this.sync(i);for(let o=0;o<r.length;o++)n=this.enterInner(r[o],null,n,!1);return n}insertNode(e,n){if(e.isInline&&this.needsBlock&&!this.top.type){let i=this.textblockFromContext();i&&(n=this.enterInner(i,null,n))}let r=this.findPlace(e,n);if(r){this.closeExtra();let i=this.top;i.match&&(i.match=i.match.matchType(e.type));let o=xe.none;for(let s of r.concat(e.marks))(i.type?i.type.allowsMarkType(s.type):Zw(s.type,e.type))&&(o=s.addToSet(o));return i.content.push(e.mark(o)),!0}return!1}enter(e,n,r,i){let o=this.findPlace(e.create(n),r);return o&&(o=this.enterInner(e,n,r,!0,i)),o}enterInner(e,n,r,i=!1,o){this.closeExtra();let s=this.top;s.match=s.match&&s.match.matchType(e);let a=Yw(e,o,s.options);s.options&rc&&s.content.length==0&&(a|=rc);let l=xe.none;return r=r.filter(c=>(s.type?s.type.allowsMarkType(c.type):Zw(c.type,e))?(l=c.addToSet(l),!1):!0),this.nodes.push(new od(e,n,l,i,null,a)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=Mc)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(i?0:1),s=(a,l)=>{for(;a>=0;a--){let c=n[a];if(c==""){if(a==n.length-1||a==0)continue;for(;l>=o;l--)if(s(a-1,l))return!0;return!1}else{let u=l>0||l==0&&i?this.nodes[l].type:r&&l>=o?r.node(l-o).type:null;if(!u||u.name!=c&&!u.isInGroup(c))return!1;l--}}return!0};return s(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function cj(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&zE.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function uj(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function Xw(t){let e={};for(let n in t)e[n]=t[n];return e}function Zw(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let o=[],s=a=>{o.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||o.indexOf(u)<0&&s(u))return!0}};if(s(i.contentMatch))return!0}}class Ss{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=$p(n).createDocumentFragment());let i=r,o=[];return e.forEach(s=>{if(o.length||s.marks.length){let a=0,l=0;for(;a<o.length&&l<s.marks.length;){let c=s.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(o[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<o.length;)i=o.pop()[1];for(;l<s.marks.length;){let c=s.marks[l++],u=this.serializeMark(c,s.isInline,n);u&&(o.push([c,i]),i.appendChild(u.dom),i=u.contentDOM||u.dom)}}i.appendChild(this.serializeNodeInner(s,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=Fd($p(n),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let o=this.serializeMark(e.marks[i],e.isInline,n);o&&((o.contentDOM||o.dom).appendChild(r),r=o.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&Fd($p(r),i(e,n),null,e.attrs)}static renderSpec(e,n,r=null,i){return Fd(e,n,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Ss(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=eb(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return eb(e.marks)}}function eb(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function $p(t){return t.document||window.document}const tb=new WeakMap;function dj(t){let e=tb.get(t);return e===void 0&&tb.set(t,e=fj(t)),e}function fj(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(t),e}function Fd(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],o;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(o=dj(r))&&o.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let s=i.indexOf(" ");s>0&&(n=i.slice(0,s),i=i.slice(s+1));let a,l=n?t.createElementNS(n,i):t.createElement(i),c=e[1],u=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){u=2;for(let d in c)if(c[d]!=null){let f=d.indexOf(" ");f>0?l.setAttributeNS(d.slice(0,f),d.slice(f+1),c[d]):l.setAttribute(d,c[d])}}for(let d=u;d<e.length;d++){let f=e[d];if(f===0){if(d<e.length-1||d>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:p,contentDOM:m}=Fd(t,f,n,r);if(l.appendChild(p),m){if(a)throw new RangeError("Multiple content holes");a=m}}}return{dom:l,contentDOM:a}}const UE=65535,VE=Math.pow(2,16);function hj(t,e){return t+e*VE}function nb(t){return t&UE}function pj(t){return(t-(t&UE))/VE}const HE=1,WE=2,Bd=4,KE=8;class Yg{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&KE)>0}get deletedBefore(){return(this.delInfo&(HE|Bd))>0}get deletedAfter(){return(this.delInfo&(WE|Bd))>0}get deletedAcross(){return(this.delInfo&Bd)>0}}class an{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&an.empty)return an.empty}recover(e){let n=0,r=nb(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+pj(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,o=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>e)break;let c=this.ranges[a+o],u=this.ranges[a+s],d=l+c;if(e<=d){let f=c?e==l?-1:e==d?1:n:n,p=l+i+(f<0?0:u);if(r)return p;let m=e==(n<0?l:d)?null:hj(a/3,e-l),g=e==l?WE:e==d?HE:Bd;return(n<0?e!=l:e!=d)&&(g|=KE),new Yg(p,g,m)}i+=u-c}return r?e+i:new Yg(e+i,0,null)}touches(e,n){let r=0,i=nb(n),o=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let c=this.ranges[a+o],u=l+c;if(e<=u&&a==i*3)return!0;r+=this.ranges[a+s]-c}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,o=0;i<this.ranges.length;i+=3){let s=this.ranges[i],a=s-(this.inverted?o:0),l=s+(this.inverted?0:o),c=this.ranges[i+n],u=this.ranges[i+r];e(a,a+c,l,l+u),o+=u-c}}invert(){return new an(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?an.empty:new an(e<0?[0,-e,0]:[0,0,e])}}an.empty=new an([]);class Ac{constructor(e,n,r=0,i=e?e.length:0){this.mirror=n,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new Ac(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let i=e.getMirror(n);this.appendMap(e._maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e._maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new Ac;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let o=this.from;o<this.to;o++){let s=this._maps[o],a=s.mapResult(e,n);if(a.recover!=null){let l=this.getMirror(o);if(l!=null&&l>o&&l<this.to){o=l,e=this._maps[l].recover(a.recover);continue}}i|=a.delInfo,e=a.pos}return r?e:new Yg(e,i,null)}}const Fp=Object.create(null);class wt{getMap(){return an.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Fp[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Fp)throw new RangeError("Duplicate use of step JSON ID "+e);return Fp[e]=n,n.prototype.jsonID=e,n}}class Ue{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new Ue(e,null)}static fail(e){return new Ue(null,e)}static fromReplace(e,n,r,i){try{return Ue.ok(e.replace(n,r,i))}catch(o){if(o instanceof kf)return Ue.fail(o.message);throw o}}}function qv(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let o=t.child(i);o.content.size&&(o=o.copy(qv(o.content,e,o))),o.isInline&&(o=e(o,n,i)),r.push(o)}return F.fromArray(r)}class Ai extends wt{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),o=new K(qv(n.content,(s,a)=>!s.isAtom||!a.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),i),n.openStart,n.openEnd);return Ue.fromReplace(e,this.from,this.to,o)}invert(){return new xr(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Ai(n.pos,r.pos,this.mark)}merge(e){return e instanceof Ai&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Ai(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Ai(n.from,n.to,e.markFromJSON(n.mark))}}wt.jsonID("addMark",Ai);class xr extends wt{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new K(qv(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return Ue.fromReplace(e,this.from,this.to,r)}invert(){return new Ai(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new xr(n.pos,r.pos,this.mark)}merge(e){return e instanceof xr&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new xr(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new xr(n.from,n.to,e.markFromJSON(n.mark))}}wt.jsonID("removeMark",xr);class Di extends wt{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Ue.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Ue.fromReplace(e,this.pos,this.pos+1,new K(F.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new Di(this.pos,n.marks[i]);return new Di(this.pos,this.mark)}}return new Ua(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Di(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Di(n.pos,e.markFromJSON(n.mark))}}wt.jsonID("addNodeMark",Di);class Ua extends wt{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Ue.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Ue.fromReplace(e,this.pos,this.pos+1,new K(F.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new Di(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Ua(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Ua(n.pos,e.markFromJSON(n.mark))}}wt.jsonID("removeNodeMark",Ua);class Ye extends wt{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&Qg(e,this.from,this.to)?Ue.fail("Structure replace would overwrite content"):Ue.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new an([this.from,this.to-this.from,this.slice.size])}invert(e){return new Ye(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new Ye(n.pos,Math.max(n.pos,r.pos),this.slice)}merge(e){if(!(e instanceof Ye)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?K.empty:new K(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Ye(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?K.empty:new K(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Ye(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Ye(n.from,n.to,K.fromJSON(e,n.slice),!!n.structure)}}wt.jsonID("replace",Ye);class Xe extends wt{constructor(e,n,r,i,o,s,a=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=s,this.structure=a}apply(e){if(this.structure&&(Qg(e,this.from,this.gapFrom)||Qg(e,this.gapTo,this.to)))return Ue.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Ue.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Ue.fromReplace(e,this.from,this.to,r):Ue.fail("Content does not fit in gap")}getMap(){return new an([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new Xe(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),o=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||o>r.pos?null:new Xe(n.pos,r.pos,i,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Xe(n.from,n.to,n.gapFrom,n.gapTo,K.fromJSON(e,n.slice),n.insert,!!n.structure)}}wt.jsonID("replaceAround",Xe);function Qg(t,e,n){let r=t.resolve(e),i=n-e,o=r.depth;for(;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0){let s=r.node(o).maybeChild(r.indexAfter(o));for(;i>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,i--}}return!1}function mj(t,e,n,r){let i=[],o=[],s,a;t.doc.nodesBetween(e,n,(l,c,u)=>{if(!l.isInline)return;let d=l.marks;if(!r.isInSet(d)&&u.type.allowsMarkType(r.type)){let f=Math.max(c,e),p=Math.min(c+l.nodeSize,n),m=r.addToSet(d);for(let g=0;g<d.length;g++)d[g].isInSet(m)||(s&&s.to==f&&s.mark.eq(d[g])?s.to=p:i.push(s=new xr(f,p,d[g])));a&&a.to==f?a.to=p:o.push(a=new Ai(f,p,r))}}),i.forEach(l=>t.step(l)),o.forEach(l=>t.step(l))}function gj(t,e,n,r){let i=[],o=0;t.doc.nodesBetween(e,n,(s,a)=>{if(!s.isInline)return;o++;let l=null;if(r instanceof wh){let c=s.marks,u;for(;u=r.isInSet(c);)(l||(l=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(s.marks)&&(l=[r]):l=s.marks;if(l&&l.length){let c=Math.min(a+s.nodeSize,n);for(let u=0;u<l.length;u++){let d=l[u],f;for(let p=0;p<i.length;p++){let m=i[p];m.step==o-1&&d.eq(i[p].style)&&(f=m)}f?(f.to=c,f.step=o):i.push({style:d,from:Math.max(a,e),to:c,step:o})}}}),i.forEach(s=>t.step(new xr(s.from,s.to,s.style)))}function Gv(t,e,n,r=n.contentMatch,i=!0){let o=t.doc.nodeAt(e),s=[],a=e+1;for(let l=0;l<o.childCount;l++){let c=o.child(l),u=a+c.nodeSize,d=r.matchType(c.type);if(!d)s.push(new Ye(a,u,K.empty));else{r=d;for(let f=0;f<c.marks.length;f++)n.allowsMarkType(c.marks[f].type)||t.step(new xr(a,u,c.marks[f]));if(i&&c.isText&&n.whitespace!="pre"){let f,p=/\r?\n|\r/g,m;for(;f=p.exec(c.text);)m||(m=new K(F.from(n.schema.text(" ",n.allowedMarks(c.marks))),0,0)),s.push(new Ye(a+f.index,a+f.index+f[0].length,m))}}a=u}if(!r.validEnd){let l=r.fillBefore(F.empty,!0);t.replace(a,a,new K(l,0,0))}for(let l=s.length-1;l>=0;l--)t.step(s[l])}function yj(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function ul(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let i=t.$from.node(r),o=t.$from.index(r),s=t.$to.indexAfter(r);if(r<t.depth&&i.canReplace(o,s,n))return r;if(r==0||i.type.spec.isolating||!yj(i,o,s))break}return null}function vj(t,e,n){let{$from:r,$to:i,depth:o}=e,s=r.before(o+1),a=i.after(o+1),l=s,c=a,u=F.empty,d=0;for(let m=o,g=!1;m>n;m--)g||r.index(m)>0?(g=!0,u=F.from(r.node(m).copy(u)),d++):l--;let f=F.empty,p=0;for(let m=o,g=!1;m>n;m--)g||i.after(m+1)<i.end(m)?(g=!0,f=F.from(i.node(m).copy(f)),p++):c++;t.step(new Xe(l,c,s,a,new K(u.append(f),d,p),u.size-d,!0))}function Jv(t,e,n=null,r=t){let i=xj(t,e),o=i&&wj(r,e);return o?i.map(rb).concat({type:e,attrs:n}).concat(o.map(rb)):null}function rb(t){return{type:t,attrs:null}}function xj(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.contentMatchAt(r).findWrapping(e);if(!o)return null;let s=o.length?o[0]:e;return n.canReplaceWith(r,i,s)?o:null}function wj(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.child(r),s=e.contentMatch.findWrapping(o.type);if(!s)return null;let l=(s.length?s[s.length-1]:e).contentMatch;for(let c=r;l&&c<i;c++)l=l.matchType(n.child(c).type);return!l||!l.validEnd?null:s}function bj(t,e,n){let r=F.empty;for(let s=n.length-1;s>=0;s--){if(r.size){let a=n[s].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=F.from(n[s].type.create(n[s].attrs,r))}let i=e.start,o=e.end;t.step(new Xe(i,o,i,o,new K(r,0,0),n.length,!0))}function Sj(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=t.steps.length;t.doc.nodesBetween(e,n,(s,a)=>{let l=typeof i=="function"?i(s):i;if(s.isTextblock&&!s.hasMarkup(r,l)&&Cj(t.doc,t.mapping.slice(o).map(a),r)){let c=null;if(r.schema.linebreakReplacement){let p=r.whitespace=="pre",m=!!r.contentMatch.matchType(r.schema.linebreakReplacement);p&&!m?c=!1:!p&&m&&(c=!0)}c===!1&&GE(t,s,a,o),Gv(t,t.mapping.slice(o).map(a,1),r,void 0,c===null);let u=t.mapping.slice(o),d=u.map(a,1),f=u.map(a+s.nodeSize,1);return t.step(new Xe(d,f,d+1,f-1,new K(F.from(r.create(l,null,s.marks)),0,0),1,!0)),c===!0&&qE(t,s,a,o),!1}})}function qE(t,e,n,r){e.forEach((i,o)=>{if(i.isText){let s,a=/\r?\n|\r/g;for(;s=a.exec(i.text);){let l=t.mapping.slice(r).map(n+1+o+s.index);t.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function GE(t,e,n,r){e.forEach((i,o)=>{if(i.type==i.type.schema.linebreakReplacement){let s=t.mapping.slice(r).map(n+1+o);t.replaceWith(s,s+1,e.type.schema.text(`
`))}})}function Cj(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function kj(t,e,n,r,i){let o=t.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");n||(n=o.type);let s=n.create(r,null,i||o.marks);if(o.isLeaf)return t.replaceWith(e,e+o.nodeSize,s);if(!n.validContent(o.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new Xe(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new K(F.from(s),0,0),1,!0))}function ma(t,e,n=1,r){let i=t.resolve(e),o=i.depth-n,s=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!s.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,u=n-2;c>o;c--,u--){let d=i.node(c),f=i.index(c);if(d.type.spec.isolating)return!1;let p=d.content.cutByIndex(f,d.childCount),m=r&&r[u+1];m&&(p=p.replaceChild(0,m.type.create(m.attrs)));let g=r&&r[u]||d;if(!d.canReplace(f+1,d.childCount)||!g.type.validContent(p))return!1}let a=i.indexAfter(o),l=r&&r[0];return i.node(o).canReplaceWith(a,a,l?l.type:i.node(o+1).type)}function Ej(t,e,n=1,r){let i=t.doc.resolve(e),o=F.empty,s=F.empty;for(let a=i.depth,l=i.depth-n,c=n-1;a>l;a--,c--){o=F.from(i.node(a).copy(o));let u=r&&r[c];s=F.from(u?u.type.create(u.attrs,s):i.node(a).copy(s))}t.step(new Ye(e,e,new K(o.append(s),n,n),!0))}function lo(t,e){let n=t.resolve(e),r=n.index();return JE(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function Tj(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let i=0;i<e.childCount;i++){let o=e.child(i),s=o.type==r?t.type.schema.nodes.text:o.type;if(n=n.matchType(s),!n||!t.type.allowsMarks(o.marks))return!1}return n.validEnd}function JE(t,e){return!!(t&&e&&!t.isLeaf&&Tj(t,e))}function bh(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let o,s,a=r.index(i);if(i==r.depth?(o=r.nodeBefore,s=r.nodeAfter):n>0?(o=r.node(i+1),a++,s=r.node(i).maybeChild(a)):(o=r.node(i).maybeChild(a-1),s=r.node(i+1)),o&&!o.isTextblock&&JE(o,s)&&r.node(i).canReplace(a,a+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function _j(t,e,n){let r=null,{linebreakReplacement:i}=t.doc.type.schema,o=t.doc.resolve(e-n),s=o.node().type;if(i&&s.inlineContent){let u=s.whitespace=="pre",d=!!s.contentMatch.matchType(i);u&&!d?r=!1:!u&&d&&(r=!0)}let a=t.steps.length;if(r===!1){let u=t.doc.resolve(e+n);GE(t,u.node(),u.before(),a)}s.inlineContent&&Gv(t,e+n-1,s,o.node().contentMatchAt(o.index()),r==null);let l=t.mapping.slice(a),c=l.map(e-n);if(t.step(new Ye(c,l.map(e+n,-1),K.empty,!0)),r===!0){let u=t.doc.resolve(c);qE(t,u.node(),u.before(),t.steps.length)}return t}function Rj(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let o=r.index(i);if(r.node(i).canReplaceWith(o,o,n))return r.before(i+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let o=r.indexAfter(i);if(r.node(i).canReplaceWith(o,o,n))return r.after(i+1);if(o<r.node(i).childCount)return null}return null}function YE(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let o=0;o<n.openStart;o++)i=i.firstChild.content;for(let o=1;o<=(n.openStart==0&&n.size?2:1);o++)for(let s=r.depth;s>=0;s--){let a=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,l=r.index(s)+(a>0?1:0),c=r.node(s),u=!1;if(o==1)u=c.canReplace(l,l,i);else{let d=c.contentMatchAt(l).findWrapping(i.firstChild.type);u=d&&c.canReplaceWith(l,l,d[0])}if(u)return a==0?r.pos:a<0?r.before(s+1):r.after(s+1)}return null}function Sh(t,e,n=e,r=K.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),o=t.resolve(n);return QE(i,o,r)?new Ye(e,n,r):new Oj(i,o,r).fit()}function QE(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class Oj{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=F.empty;for(let i=0;i<=e.depth;i++){let o=e.node(i);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=F.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let o=this.placed,s=r.depth,a=i.depth;for(;s&&a&&o.childCount==1;)o=o.firstChild.content,s--,a--;let l=new K(o,s,a);return e>-1?new Xe(r.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new Ye(r.pos,i.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let o=n.firstChild;if(n.childCount>1&&(i=0),o.type.spec.isolating&&i<=r){e=r;break}n=o.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,o=null;r?(o=Bp(this.unplaced.content,r-1).firstChild,i=o.content):i=this.unplaced.content;let s=i.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],u,d=null;if(n==1&&(s?c.matchType(s.type)||(d=c.fillBefore(F.from(s),!1)):o&&l.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:a,parent:o,inject:d};if(n==2&&s&&(u=c.findWrapping(s.type)))return{sliceDepth:r,frontierDepth:a,parent:o,wrap:u};if(o&&c.matchType(o.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=Bp(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new K(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=Bp(e,n);if(i.childCount<=1&&n>0){let o=e.size-n<=n+i.size;this.unplaced=new K(Nl(e,n-1,1),n-1,o?n-1:r)}else this.unplaced=new K(Nl(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:o}){for(;this.depth>n;)this.closeFrontierNode();if(o)for(let g=0;g<o.length;g++)this.openFrontierNode(o[g]);let s=this.unplaced,a=r?r.content:s.content,l=s.openStart-e,c=0,u=[],{match:d,type:f}=this.frontier[n];if(i){for(let g=0;g<i.childCount;g++)u.push(i.child(g));d=d.matchFragment(i)}let p=a.size+e-(s.content.size-s.openEnd);for(;c<a.childCount;){let g=a.child(c),x=d.matchType(g.type);if(!x)break;c++,(c>1||l==0||g.content.size)&&(d=x,u.push(XE(g.mark(f.allowedMarks(g.marks)),c==1?l:0,c==a.childCount?p:-1)))}let m=c==a.childCount;m||(p=-1),this.placed=Il(this.placed,n,F.from(u)),this.frontier[n].match=d,m&&p<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let g=0,x=a;g<p;g++){let v=x.lastChild;this.frontier.push({type:v.type,match:v.contentMatchAt(v.childCount)}),x=v.content}this.unplaced=m?e==0?K.empty:new K(Nl(s.content,e-1,1),e-1,p<0?s.openEnd:e-1):new K(Nl(s.content,e,c),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!zp(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],o=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),s=zp(e,n,i,r,o);if(s){for(let a=n-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],u=zp(e,a,c,l,!0);if(!u||u.childCount)continue e}return{depth:n,fit:s,move:o?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Il(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),o=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,o)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=Il(this.placed,this.depth,F.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(F.empty,!0);n.childCount&&(this.placed=Il(this.placed,this.frontier.length,n))}}function Nl(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(Nl(t.firstChild.content,e-1,n)))}function Il(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(Il(t.lastChild.content,e-1,n)))}function Bp(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function XE(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,XE(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(F.empty,!0)))),t.copy(r)}function zp(t,e,n,r,i){let o=t.node(e),s=i?t.indexAfter(e):t.index(e);if(s==o.childCount&&!n.compatibleContent(o.type))return null;let a=r.fillBefore(o.content,!0,s);return a&&!Pj(n,o.content,s)?a:null}function Pj(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function Mj(t){return t.spec.defining||t.spec.definingForContent}function Aj(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),o=t.doc.resolve(n);if(QE(i,o,r))return t.step(new Ye(e,n,r));let s=eT(i,t.doc.resolve(n));s[s.length-1]==0&&s.pop();let a=-(i.depth+1);s.unshift(a);for(let f=i.depth,p=i.pos-1;f>0;f--,p--){let m=i.node(f).type.spec;if(m.defining||m.definingAsContext||m.isolating)break;s.indexOf(f)>-1?a=f:i.before(f)==p&&s.splice(1,0,-f)}let l=s.indexOf(a),c=[],u=r.openStart;for(let f=r.content,p=0;;p++){let m=f.firstChild;if(c.push(m),p==r.openStart)break;f=m.content}for(let f=u-1;f>=0;f--){let p=c[f],m=Mj(p.type);if(m&&!p.sameMarkup(i.node(Math.abs(a)-1)))u=f;else if(m||!p.type.isTextblock)break}for(let f=r.openStart;f>=0;f--){let p=(f+u+1)%(r.openStart+1),m=c[p];if(m)for(let g=0;g<s.length;g++){let x=s[(g+l)%s.length],v=!0;x<0&&(v=!1,x=-x);let w=i.node(x-1),S=i.index(x-1);if(w.canReplaceWith(S,S,m.type,m.marks))return t.replace(i.before(x),v?o.after(x):n,new K(ZE(r.content,0,r.openStart,p),p,r.openEnd))}}let d=t.steps.length;for(let f=s.length-1;f>=0&&(t.replace(e,n,r),!(t.steps.length>d));f--){let p=s[f];p<0||(e=i.before(p),n=o.after(p))}}function ZE(t,e,n,r,i){if(e<n){let o=t.firstChild;t=t.replaceChild(0,o.copy(ZE(o.content,e+1,n,r,o)))}if(e>r){let o=i.contentMatchAt(0),s=o.fillBefore(t).append(t);t=s.append(o.matchFragment(s).fillBefore(F.empty,!0))}return t}function Dj(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=Rj(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new K(F.from(r),0,0))}function Nj(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),o=eT(r,i);for(let s=0;s<o.length;s++){let a=o[s],l=s==o.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return t.delete(r.start(a),i.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),i.indexAfter(a-1))))return t.delete(r.before(a),i.after(a))}for(let s=1;s<=r.depth&&s<=i.depth;s++)if(e-r.start(s)==r.depth-s&&n>r.end(s)&&i.end(s)-n!=i.depth-s&&r.start(s-1)==i.start(s-1)&&r.node(s-1).canReplace(r.index(s-1),i.index(s-1)))return t.delete(r.before(s),n);t.delete(e,n)}function eT(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let o=t.start(i);if(o<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(o==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==o-1)&&n.push(i)}return n}class ga extends wt{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return Ue.fail("No node at attribute step's position");let r=Object.create(null);for(let o in n.attrs)r[o]=n.attrs[o];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return Ue.fromReplace(e,this.pos,this.pos+1,new K(F.from(i),0,n.isLeaf?0:1))}getMap(){return an.empty}invert(e){return new ga(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new ga(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new ga(n.pos,n.attr,n.value)}}wt.jsonID("attr",ga);class Dc extends wt{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return Ue.ok(r)}getMap(){return an.empty}invert(e){return new Dc(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Dc(n.attr,n.value)}}wt.jsonID("docAttr",Dc);let Va=class extends Error{};Va=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};Va.prototype=Object.create(Error.prototype);Va.prototype.constructor=Va;Va.prototype.name="TransformError";class Ij{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Ac}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new Va(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=K.empty){let i=Sh(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new K(F.from(r),0,0))}delete(e,n){return this.replace(e,n,K.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return Aj(this,e,n,r),this}replaceRangeWith(e,n,r){return Dj(this,e,n,r),this}deleteRange(e,n){return Nj(this,e,n),this}lift(e,n){return vj(this,e,n),this}join(e,n=1){return _j(this,e,n),this}wrap(e,n){return bj(this,e,n),this}setBlockType(e,n=e,r,i=null){return Sj(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return kj(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new ga(e,n,r)),this}setDocAttribute(e,n){return this.step(new Dc(e,n)),this}addNodeMark(e,n){return this.step(new Di(e,n)),this}removeNodeMark(e,n){if(!(n instanceof xe)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n=n.isInSet(r.marks),!n)return this}return this.step(new Ua(e,n)),this}split(e,n=1,r){return Ej(this,e,n,r),this}addMark(e,n,r){return mj(this,e,n,r),this}removeMark(e,n,r){return gj(this,e,n,r),this}clearIncompatible(e,n,r){return Gv(this,e,n,r),this}}const Up=Object.create(null);class ie{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new jj(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=K.empty){let r=n.content.lastChild,i=null;for(let a=0;a<n.openEnd;a++)i=r,r=r.lastChild;let o=e.steps.length,s=this.ranges;for(let a=0;a<s.length;a++){let{$from:l,$to:c}=s[a],u=e.mapping.slice(o);e.replaceRange(u.map(l.pos),u.map(c.pos),a?K.empty:n),a==0&&sb(e,o,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){let{$from:s,$to:a}=i[o],l=e.mapping.slice(r),c=l.map(s.pos),u=l.map(a.pos);o?e.deleteRange(c,u):(e.replaceRangeWith(c,u,n),sb(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new re(e):Us(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let o=e.depth-1;o>=0;o--){let s=n<0?Us(e.node(0),e.node(o),e.before(o+1),e.index(o),n,r):Us(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,n,r);if(s)return s}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new Tn(e.node(0))}static atStart(e){return Us(e,e,0,0,1)||new Tn(e)}static atEnd(e){return Us(e,e,e.content.size,e.childCount,-1)||new Tn(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Up[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Up)throw new RangeError("Duplicate use of selection JSON ID "+e);return Up[e]=n,n.prototype.jsonID=e,n}getBookmark(){return re.between(this.$anchor,this.$head).getBookmark()}}ie.prototype.visible=!0;class jj{constructor(e,n){this.$from=e,this.$to=n}}let ib=!1;function ob(t){!ib&&!t.parent.inlineContent&&(ib=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class re extends ie{constructor(e,n=e){ob(e),ob(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return ie.near(r);let i=e.resolve(n.map(this.anchor));return new re(i.parent.inlineContent?i:r,r)}replace(e,n=K.empty){if(super.replace(e,n),n==K.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof re&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Ch(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new re(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let o=ie.findFrom(n,r,!0)||ie.findFrom(n,-r,!0);if(o)n=o.$head;else return ie.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(ie.findFrom(e,-r,!0)||ie.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new re(e,n)}}ie.jsonID("text",re);class Ch{constructor(e,n){this.anchor=e,this.head=n}map(e){return new Ch(e.map(this.anchor),e.map(this.head))}resolve(e){return re.between(e.resolve(this.anchor),e.resolve(this.head))}}class Z extends ie{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),o=e.resolve(i);return r?ie.near(o):new Z(o)}content(){return new K(F.from(this.node),0,0)}eq(e){return e instanceof Z&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Yv(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Z(e.resolve(n.anchor))}static create(e,n){return new Z(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Z.prototype.visible=!1;ie.jsonID("node",Z);class Yv{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new Ch(r,r):new Yv(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&Z.isSelectable(r)?new Z(n):ie.near(n)}}class Tn extends ie{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=K.empty){if(n==K.empty){e.delete(0,e.doc.content.size);let r=ie.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new Tn(e)}map(e){return new Tn(e)}eq(e){return e instanceof Tn}getBookmark(){return Lj}}ie.jsonID("all",Tn);const Lj={map(){return this},resolve(t){return new Tn(t)}};function Us(t,e,n,r,i,o=!1){if(e.inlineContent)return re.create(t,n);for(let s=r-(i>0?0:1);i>0?s<e.childCount:s>=0;s+=i){let a=e.child(s);if(a.isAtom){if(!o&&Z.isSelectable(a))return Z.create(t,n-(i<0?a.nodeSize:0))}else{let l=Us(t,a,n+i,i<0?a.childCount:0,i,o);if(l)return l}n+=a.nodeSize*i}return null}function sb(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof Ye||i instanceof Xe))return;let o=t.mapping.maps[r],s;o.forEach((a,l,c,u)=>{s==null&&(s=u)}),t.setSelection(ie.near(t.doc.resolve(s),n))}const ab=1,sd=2,lb=4;class $j extends Ij{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|ab)&~sd,this.storedMarks=null,this}get selectionSet(){return(this.updated&ab)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=sd,this}ensureMarks(e){return xe.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&sd)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~sd,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||xe.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!e)return this.deleteRange(n,r);let o=this.storedMarks;if(!o){let s=this.doc.resolve(n);o=r==n?s.marks():s.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,o)),this.selection.empty||this.setSelection(ie.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=lb,this}get scrolledIntoView(){return(this.updated&lb)>0}}function cb(t,e){return!e||!t?t:t.bind(e)}class jl{constructor(e,n,r){this.name=e,this.init=cb(n.init,r),this.apply=cb(n.apply,r)}}const Fj=[new jl("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new jl("selection",{init(t,e){return t.selection||ie.atStart(e.doc)},apply(t){return t.selection}}),new jl("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new jl("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class Vp{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Fj.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new jl(r.key,r.spec.state,r))})}}class ia{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let o=!1;for(let s=0;s<this.config.plugins.length;s++){let a=this.config.plugins[s];if(a.spec.appendTransaction){let l=i?i[s].n:0,c=i?i[s].state:this,u=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,c,r);if(u&&r.filterTransaction(u,s)){if(u.setMeta("appendedTransaction",e),!i){i=[];for(let d=0;d<this.config.plugins.length;d++)i.push(d<s?{state:r,n:n.length}:{state:this,n:0})}n.push(u),r=r.applyInner(u),o=!0}i&&(i[s]={state:r,n:n.length})}}if(!o)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new ia(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let o=r[i];n[o.name]=o.apply(e,this[o.name],this,n)}return n}get tr(){return new $j(this)}static create(e){let n=new Vp(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new ia(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new Vp(this.schema,e.plugins),r=n.fields,i=new ia(n);for(let o=0;o<r.length;o++){let s=r[o].name;i[s]=this.hasOwnProperty(s)?this[s]:r[o].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],o=i.spec.state;o&&o.toJSON&&(n[r]=o.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new Vp(e.schema,e.plugins),o=new ia(i);return i.fields.forEach(s=>{if(s.name=="doc")o.doc=Vi.fromJSON(e.schema,n.doc);else if(s.name=="selection")o.selection=ie.fromJSON(o.doc,n.selection);else if(s.name=="storedMarks")n.storedMarks&&(o.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],c=l.spec.state;if(l.key==s.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){o[s.name]=c.fromJSON.call(l,e,n[a],o);return}}o[s.name]=s.init(e,o)}}),o}}function tT(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=tT(i,e,{})),n[r]=i}return n}class ut{constructor(e){this.spec=e,this.props={},e.props&&tT(e.props,this,this.props),this.key=e.key?e.key.key:nT("plugin")}getState(e){return e[this.key]}}const Hp=Object.create(null);function nT(t){return t in Hp?t+"$"+ ++Hp[t]:(Hp[t]=0,t+"$")}class mn{constructor(e="key"){this.key=nT(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const st=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Ha=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let Xg=null;const jr=function(t,e,n){let r=Xg||(Xg=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},Bj=function(){Xg=null},ds=function(t,e,n,r){return n&&(ub(t,e,n,r,-1)||ub(t,e,n,r,1))},zj=/^(img|br|input|textarea|hr)$/i;function ub(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:Cn(t))){let o=t.parentNode;if(!o||o.nodeType!=1||pu(t)||zj.test(t.nodeName)||t.contentEditable=="false")return!1;e=st(t)+(i<0?0:1),t=o}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.contentEditable=="false")return!1;e=i<0?Cn(t):0}else return!1}}function Cn(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Uj(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=Cn(t)}else if(t.parentNode&&!pu(t))e=st(t),t=t.parentNode;else return null}}function Vj(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!pu(t))e=st(t)+1,t=t.parentNode;else return null}}function Hj(t,e,n){for(let r=e==0,i=e==Cn(t);r||i;){if(t==n)return!0;let o=st(t);if(t=t.parentNode,!t)return!1;r=r&&o==0,i=i&&o==Cn(t)}}function pu(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const kh=function(t){return t.focusNode&&ds(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Ro(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function Wj(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Kj(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(Cn(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(Cn(r.startContainer),r.startOffset)}}}const kr=typeof navigator<"u"?navigator:null,db=typeof document<"u"?document:null,co=kr&&kr.userAgent||"",Zg=/Edge\/(\d+)/.exec(co),rT=/MSIE \d/.exec(co),ey=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(co),Qt=!!(rT||ey||Zg),Wi=rT?document.documentMode:ey?+ey[1]:Zg?+Zg[1]:0,Xn=!Qt&&/gecko\/(\d+)/i.test(co);Xn&&+(/Firefox\/(\d+)/.exec(co)||[0,0])[1];const ty=!Qt&&/Chrome\/(\d+)/.exec(co),vt=!!ty,iT=ty?+ty[1]:0,Ot=!Qt&&!!kr&&/Apple Computer/.test(kr.vendor),Wa=Ot&&(/Mobile\/\w+/.test(co)||!!kr&&kr.maxTouchPoints>2),wn=Wa||(kr?/Mac/.test(kr.platform):!1),qj=kr?/Win/.test(kr.platform):!1,Ur=/Android \d/.test(co),mu=!!db&&"webkitFontSmoothing"in db.documentElement.style,Gj=mu?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function Jj(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Ar(t,e){return typeof t=="number"?t:t[e]}function Yj(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function fb(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,o=t.dom.ownerDocument;for(let s=n||t.dom;s;){if(s.nodeType!=1){s=Ha(s);continue}let a=s,l=a==o.body,c=l?Jj(o):Yj(a),u=0,d=0;if(e.top<c.top+Ar(r,"top")?d=-(c.top-e.top+Ar(i,"top")):e.bottom>c.bottom-Ar(r,"bottom")&&(d=e.bottom-e.top>c.bottom-c.top?e.top+Ar(i,"top")-c.top:e.bottom-c.bottom+Ar(i,"bottom")),e.left<c.left+Ar(r,"left")?u=-(c.left-e.left+Ar(i,"left")):e.right>c.right-Ar(r,"right")&&(u=e.right-c.right+Ar(i,"right")),u||d)if(l)o.defaultView.scrollBy(u,d);else{let p=a.scrollLeft,m=a.scrollTop;d&&(a.scrollTop+=d),u&&(a.scrollLeft+=u);let g=a.scrollLeft-p,x=a.scrollTop-m;e={left:e.left-g,top:e.top-x,right:e.right-g,bottom:e.bottom-x}}let f=l?"fixed":getComputedStyle(s).position;if(/^(fixed|sticky)$/.test(f))break;s=f=="absolute"?s.offsetParent:Ha(s)}}function Qj(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let o=(e.left+e.right)/2,s=n+1;s<Math.min(innerHeight,e.bottom);s+=5){let a=t.root.elementFromPoint(o,s);if(!a||a==t.dom||!t.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=n-20){r=a,i=l.top;break}}return{refDOM:r,refTop:i,stack:oT(t.dom)}}function oT(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=Ha(r));return e}function Xj({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;sT(n,r==0?0:r-e)}function sT(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:o}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=o&&(r.scrollLeft=o)}}let Ns=null;function Zj(t){if(t.setActive)return t.setActive();if(Ns)return t.focus(Ns);let e=oT(t);t.focus(Ns==null?{get preventScroll(){return Ns={preventScroll:!0},!0}}:void 0),Ns||(Ns=!1,sT(e,0))}function aT(t,e){let n,r=2e8,i,o=0,s=e.top,a=e.top,l,c;for(let u=t.firstChild,d=0;u;u=u.nextSibling,d++){let f;if(u.nodeType==1)f=u.getClientRects();else if(u.nodeType==3)f=jr(u).getClientRects();else continue;for(let p=0;p<f.length;p++){let m=f[p];if(m.top<=s&&m.bottom>=a){s=Math.max(m.bottom,s),a=Math.min(m.top,a);let g=m.left>e.left?m.left-e.left:m.right<e.left?e.left-m.right:0;if(g<r){n=u,r=g,i=g&&n.nodeType==3?{left:m.right<e.left?m.right:m.left,top:e.top}:e,u.nodeType==1&&g&&(o=d+(e.left>=(m.left+m.right)/2?1:0));continue}}else m.top>e.top&&!l&&m.left<=e.left&&m.right>=e.left&&(l=u,c={left:Math.max(m.left,Math.min(m.right,e.left)),top:m.top});!n&&(e.left>=m.right&&e.top>=m.top||e.left>=m.left&&e.top>=m.bottom)&&(o=d+1)}}return!n&&l&&(n=l,i=c,r=0),n&&n.nodeType==3?eL(n,i):!n||r&&n.nodeType==1?{node:t,offset:o}:aT(n,i)}function eL(t,e){let n=t.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(t,i+1),r.setStart(t,i);let o=ui(r,1);if(o.top!=o.bottom&&Qv(e,o))return{node:t,offset:i+(e.left>=(o.left+o.right)/2?1:0)}}return{node:t,offset:0}}function Qv(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function tL(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function nL(t,e,n){let{node:r,offset:i}=aT(e,n),o=-1;if(r.nodeType==1&&!r.firstChild){let s=r.getBoundingClientRect();o=s.left!=s.right&&n.left>(s.left+s.right)/2?1:-1}return t.docView.posFromDOM(r,i,o)}function rL(t,e,n,r){let i=-1;for(let o=e,s=!1;o!=t.dom;){let a=t.docView.nearestDesc(o,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&(!s&&l.left>r.left||l.top>r.top?i=a.posBefore:(!s&&l.right<r.left||l.bottom<r.top)&&(i=a.posAfter),s=!0),!a.contentDOM&&i<0&&!a.node.isText))return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;o=a.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function lT(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),o=i;;){let s=t.childNodes[o];if(s.nodeType==1){let a=s.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(Qv(e,c))return lT(s,e,c)}}if((o=(o+1)%r)==i)break}return t}function iL(t,e){let n=t.dom.ownerDocument,r,i=0,o=Kj(n,e.left,e.top);o&&({node:r,offset:i}=o);let s=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),a;if(!s||!t.dom.contains(s.nodeType!=1?s.parentNode:s)){let c=t.dom.getBoundingClientRect();if(!Qv(e,c)||(s=lT(t.dom,e,c),!s))return null}if(Ot)for(let c=s;r&&c;c=Ha(c))c.draggable&&(r=void 0);if(s=tL(s,e),r){if(Xn&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let u=r.childNodes[i],d;u.nodeName=="IMG"&&(d=u.getBoundingClientRect()).right<=e.left&&d.bottom>e.top&&i++}let c;mu&&i&&r.nodeType==1&&(c=r.childNodes[i-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&i--,r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(a=rL(t,r,i,e))}a==null&&(a=nL(t,s,e));let l=t.docView.nearestDesc(s,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function hb(t){return t.top<t.bottom||t.left<t.right}function ui(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(hb(r))return r}return Array.prototype.find.call(n,hb)||t.getBoundingClientRect()}const oL=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function cT(t,e,n){let{node:r,offset:i,atom:o}=t.docView.domFromPos(e,n<0?-1:1),s=mu||Xn;if(r.nodeType==3)if(s&&(oL.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let l=ui(jr(r,i,i),n);if(Xn&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let c=ui(jr(r,i-1,i-1),-1);if(c.top==l.top){let u=ui(jr(r,i,i+1),-1);if(u.top!=l.top)return El(u,u.left<c.left)}}return l}else{let l=i,c=i,u=n<0?1:-1;return n<0&&!i?(c++,u=-1):n>=0&&i==r.nodeValue.length?(l--,u=1):n<0?l--:c++,El(ui(jr(r,l,c),u),u<0)}if(!t.state.doc.resolve(e-(o||0)).parent.inlineContent){if(o==null&&i&&(n<0||i==Cn(r))){let l=r.childNodes[i-1];if(l.nodeType==1)return Wp(l.getBoundingClientRect(),!1)}if(o==null&&i<Cn(r)){let l=r.childNodes[i];if(l.nodeType==1)return Wp(l.getBoundingClientRect(),!0)}return Wp(r.getBoundingClientRect(),n>=0)}if(o==null&&i&&(n<0||i==Cn(r))){let l=r.childNodes[i-1],c=l.nodeType==3?jr(l,Cn(l)-(s?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return El(ui(c,1),!1)}if(o==null&&i<Cn(r)){let l=r.childNodes[i];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?jr(l,0,s?0:1):l.nodeType==1?l:null:null;if(c)return El(ui(c,-1),!0)}return El(ui(r.nodeType==3?jr(r):r,-n),n>=0)}function El(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function Wp(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function uT(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function sL(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return uT(t,e,()=>{let{node:o}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(o,!0);if(!a)break;if(a.node.isBlock){o=a.contentDOM||a.dom;break}o=a.dom.parentNode}let s=cT(t,i.pos,1);for(let a=o.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=jr(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let u=l[c];if(u.bottom>u.top+1&&(n=="up"?s.top-u.top>(u.bottom-s.top)*2:u.bottom-s.bottom>(s.bottom-u.top)*2))return!1}}return!0})}const aL=/[\u0590-\u08ac]/;function lL(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,o=!i,s=i==r.parent.content.size,a=t.domSelection();return a?!aL.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?o:s:uT(t,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:u,anchorOffset:d}=t.domSelectionRange(),f=a.caretBidiLevel;a.modify("move",n,"character");let p=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:m,focusOffset:g}=t.domSelectionRange(),x=m&&!p.contains(m.nodeType==1?m:m.parentNode)||l==m&&c==g;try{a.collapse(u,d),l&&(l!=u||c!=d)&&a.extend&&a.extend(l,c)}catch{}return f!=null&&(a.caretBidiLevel=f),x}):r.pos==r.start()||r.pos==r.end()}let pb=null,mb=null,gb=!1;function cL(t,e,n){return pb==e&&mb==n?gb:(pb=e,mb=n,gb=n=="up"||n=="down"?sL(t,e,n):lL(t,e,n))}const _n=0,yb=1,No=2,Er=3;class gu{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=_n,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let o,s;if(e==this.contentDOM)o=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&!((s=o.pmViewDesc)&&s.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(s)+s.size:this.posAtStart}else{let o,s;if(e==this.contentDOM)o=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&!((s=o.pmViewDesc)&&s.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(s):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>st(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!1;break}if(o.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!0;break}if(o.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let o=this.getDesc(i),s;if(o&&(!n||o.node))if(r&&(s=o.nodeDOM)&&!(s.nodeType==1?s.contains(e.nodeType==1?e:e.parentNode):s==e))r=!1;else return o}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let o=this.getDesc(i);if(o)return o.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],o=r+i.size;if(r==e&&o!=r){for(;!i.border&&i.children.length;)for(let s=0;s<i.children.length;s++){let a=i.children[s];if(a.size){i=a;break}}return i}if(e<o)return i.descAt(e-r-i.border);r=o}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let o=0;r<this.children.length;r++){let s=this.children[r],a=o+s.size;if(a>e||s instanceof fT){i=e-o;break}o=a}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let o;r&&!(o=this.children[r-1]).size&&o instanceof dT&&o.side>=0;r--);if(n<=0){let o,s=!0;for(;o=r?this.children[r-1]:null,!(!o||o.dom.parentNode==this.contentDOM);r--,s=!1);return o&&n&&s&&!o.border&&!o.domAtom?o.domFromPos(o.size,n):{node:this.contentDOM,offset:o?st(o.dom)+1:0}}else{let o,s=!0;for(;o=r<this.children.length?this.children[r]:null,!(!o||o.dom.parentNode==this.contentDOM);r++,s=!1);return o&&s&&!o.border&&!o.domAtom?o.domFromPos(0,n):{node:this.contentDOM,offset:o?st(o.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,o=-1;for(let s=r,a=0;;a++){let l=this.children[a],c=s+l.size;if(i==-1&&e<=c){let u=s+l.border;if(e>=u&&n<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,n,u);e=s;for(let d=a;d>0;d--){let f=this.children[d-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){i=st(f.dom)+1;break}e-=f.size}i==-1&&(i=0)}if(i>-1&&(c>n||a==this.children.length-1)){n=c;for(let u=a+1;u<this.children.length;u++){let d=this.children[u];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){o=st(d.dom);break}n+=d.size}o==-1&&(o=this.contentDOM.childNodes.length);break}s=c}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let o=Math.min(e,n),s=Math.max(e,n);for(let p=0,m=0;p<this.children.length;p++){let g=this.children[p],x=m+g.size;if(o>m&&s<x)return g.setSelection(e-m-g.border,n-m-g.border,r,i);m=x}let a=this.domFromPos(e,e?-1:1),l=n==e?a:this.domFromPos(n,n?-1:1),c=r.root.getSelection(),u=r.domSelectionRange(),d=!1;if((Xn||Ot)&&e==n){let{node:p,offset:m}=a;if(p.nodeType==3){if(d=!!(m&&p.nodeValue[m-1]==`
`),d&&m==p.nodeValue.length)for(let g=p,x;g;g=g.parentNode){if(x=g.nextSibling){x.nodeName=="BR"&&(a=l={node:x.parentNode,offset:st(x)+1});break}let v=g.pmViewDesc;if(v&&v.node&&v.node.isBlock)break}}else{let g=p.childNodes[m-1];d=g&&(g.nodeName=="BR"||g.contentEditable=="false")}}if(Xn&&u.focusNode&&u.focusNode!=l.node&&u.focusNode.nodeType==1){let p=u.focusNode.childNodes[u.focusOffset];p&&p.contentEditable=="false"&&(i=!0)}if(!(i||d&&Ot)&&ds(a.node,a.offset,u.anchorNode,u.anchorOffset)&&ds(l.node,l.offset,u.focusNode,u.focusOffset))return;let f=!1;if((c.extend||e==n)&&!d){c.collapse(a.node,a.offset);try{e!=n&&c.extend(l.node,l.offset),f=!0}catch{}}if(!f){if(e>n){let m=a;a=l,l=m}let p=document.createRange();p.setEnd(l.node,l.offset),p.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(p)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let o=this.children[i],s=r+o.size;if(r==s?e<=s&&n>=r:e<s&&n>r){let a=r+o.border,l=s-o.border;if(e>=a&&n<=l){this.dirty=e==r||n==s?No:yb,e==a&&n==l&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=Er:o.markDirty(e-a,n-a);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?No:Er}r=s}this.dirty=No}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?No:yb;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class dT extends gu{constructor(e,n,r,i){let o,s=n.type.toDOM;if(typeof s=="function"&&(s=s(r,()=>{if(!o)return i;if(o.parent)return o.parent.posBeforeChild(o)})),!n.type.spec.raw){if(s.nodeType!=1){let a=document.createElement("span");a.appendChild(s),s=a}s.contentEditable="false",s.classList.add("ProseMirror-widget")}super(e,[],s,null),this.widget=n,this.widget=n,o=this}matchesWidget(e){return this.dirty==_n&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class uL extends gu{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class fs extends gu{constructor(e,n,r,i,o){super(e,[],r,i),this.mark=n,this.spec=o}static create(e,n,r,i){let o=i.nodeViews[n.type.name],s=o&&o(n,i,r);return(!s||!s.dom)&&(s=Ss.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new fs(e,n,s.dom,s.contentDOM||s.dom,s)}parseRule(){return this.dirty&Er||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Er&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=_n){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=_n}}slice(e,n,r){let i=fs.create(this.parent,this.mark,!0,r),o=this.children,s=this.size;n<s&&(o=ry(o,n,s,r)),e>0&&(o=ry(o,0,e,r));for(let a=0;a<o.length;a++)o[a].parent=i;return i.children=o,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Ki extends gu{constructor(e,n,r,i,o,s,a,l,c){super(e,[],o,s),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=a}static create(e,n,r,i,o,s){let a=o.nodeViews[n.type.name],l,c=a&&a(n,o,()=>{if(!l)return s;if(l.parent)return l.parent.posBeforeChild(l)},r,i),u=c&&c.dom,d=c&&c.contentDOM;if(n.isText){if(!u)u=document.createTextNode(n.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:d}=Ss.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!d&&!n.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),n.type.spec.draggable&&(u.draggable=!0));let f=u;return u=mT(u,r,n),c?l=new dL(e,n,r,i,u,d||null,f,c,o,s+1):n.isText?new Eh(e,n,r,i,u,f,o):new Ki(e,n,r,i,u,d||null,f,o,s+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>F.empty)}return e}matchesNode(e,n,r){return this.dirty==_n&&e.eq(this.node)&&Rf(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,o=e.composing?this.localCompositionInfo(e,n):null,s=o&&o.pos>-1?o:null,a=o&&o.pos<0,l=new hL(this,s&&s.node,e);gL(this.node,this.innerDeco,(c,u,d)=>{c.spec.marks?l.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!d&&l.syncToMarks(u==this.node.childCount?xe.none:this.node.child(u).marks,r,e),l.placeWidget(c,e,i)},(c,u,d,f)=>{l.syncToMarks(c.marks,r,e);let p;l.findNodeMatch(c,u,d,f)||a&&e.state.selection.from>i&&e.state.selection.to<i+c.nodeSize&&(p=l.findIndexWithChild(o.node))>-1&&l.updateNodeAt(c,u,d,p,e)||l.updateNextNode(c,u,d,e,f,i)||l.addNode(c,u,d,e,i),i+=c.nodeSize}),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==No)&&(s&&this.protectLocalComposition(e,s),hT(this.contentDOM,this.children,e),Wa&&yL(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof re)||r<n||i>n+this.node.content.size)return null;let o=e.input.compositionNode;if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let s=o.nodeValue,a=vL(this.node.content,s,r-n,i-n);return a<0?null:{node:o,pos:a,text:s}}else return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let o=n;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let s=new uL(this,o,n,i);e.input.compositionNodes.push(s),this.children=ry(this.children,r,r+i.length,e,s)}update(e,n,r,i){return this.dirty==Er||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=_n}updateOuterDeco(e){if(Rf(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=pT(this.dom,this.nodeDOM,ny(this.outerDeco,this.node,n),ny(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function vb(t,e,n,r,i){mT(r,e,t);let o=new Ki(void 0,t,e,n,r,r,r,i,0);return o.contentDOM&&o.updateChildren(i,0),o}class Eh extends Ki{constructor(e,n,r,i,o,s,a){super(e,n,r,i,o,null,s,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==Er||this.dirty!=_n&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=_n||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=_n,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),o=document.createTextNode(i.text);return new Eh(this.parent,i,this.outerDeco,this.innerDeco,o,o,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=Er)}get domAtom(){return!1}isText(e){return this.node.text==e}}class fT extends gu{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==_n&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class dL extends Ki{constructor(e,n,r,i,o,s,a,l,c,u){super(e,n,r,i,o,s,a,c,u),this.spec=l}update(e,n,r,i){if(this.dirty==Er)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let o=this.spec.update(e,n,r);return o&&this.updateInner(e,n,r,i),o}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function hT(t,e,n){let r=t.firstChild,i=!1;for(let o=0;o<e.length;o++){let s=e[o],a=s.dom;if(a.parentNode==t){for(;a!=r;)r=xb(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(a,r);if(s instanceof fs){let l=r?r.previousSibling:t.lastChild;hT(s.contentDOM,s.children,n),r=l?l.nextSibling:t.firstChild}}for(;r;)r=xb(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const ic=function(t){t&&(this.nodeName=t)};ic.prototype=Object.create(null);const Io=[new ic];function ny(t,e,n){if(t.length==0)return Io;let r=n?Io[0]:new ic,i=[r];for(let o=0;o<t.length;o++){let s=t[o].type.attrs;if(s){s.nodeName&&i.push(r=new ic(s.nodeName));for(let a in s){let l=s[a];l!=null&&(n&&i.length==1&&i.push(r=new ic(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return i}function pT(t,e,n,r){if(n==Io&&r==Io)return e;let i=e;for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(o){let l;a&&a.nodeName==s.nodeName&&i!=t&&(l=i.parentNode)&&l.nodeName.toLowerCase()==s.nodeName||(l=document.createElement(s.nodeName),l.pmIsDeco=!0,l.appendChild(i),a=Io[0]),i=l}fL(i,a||Io[0],s)}return i}function fL(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let o=0;o<r.length;o++)i.indexOf(r[o])==-1&&t.classList.remove(r[o]);for(let o=0;o<i.length;o++)r.indexOf(i[o])==-1&&t.classList.add(i[o]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function mT(t,e,n){return pT(t,t,Io,ny(e,n,t.nodeType!=1))}function Rf(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function xb(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class hL{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=pL(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let i=0,o=this.stack.length>>1,s=Math.min(o,e.length);for(;i<s&&(i==o-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<o;)this.destroyRest(),this.top.dirty=_n,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[o])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=fs.create(this.top,e[o],n,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,o++}}findNodeMatch(e,n,r,i){let o=-1,s;if(i>=this.preMatch.index&&(s=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&s.matchesNode(e,n,r))o=this.top.children.indexOf(s,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,n,r)&&!this.preMatch.matched.has(c)){o=a;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(e,n,r,i,o){let s=this.top.children[i];return s.dirty==Er&&s.dom==s.contentDOM&&(s.dirty=No),s.update(e,n,r,o)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,o,s){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof Ki){let c=this.preMatch.matched.get(l);if(c!=null&&c!=o)return!1;let u=l.dom,d,f=this.isLocked(u)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=Er&&Rf(n,l.outerDeco));if(!f&&l.update(e,n,r,i))return this.destroyBetween(this.index,a),l.dom!=u&&(this.changed=!0),this.index++,!0;if(!f&&(d=this.recreateWrapper(l,e,n,r,i,s)))return this.destroyBetween(this.index,a),this.top.children[this.index]=d,d.contentDOM&&(d.dirty=No,d.updateChildren(i,s+1),d.dirty=_n),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,i,o,s){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!Rf(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let a=Ki.create(this.top,n,r,i,o,s);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,n,r,i,o){let s=Ki.create(this.top,e,n,r,i,o);s.contentDOM&&s.updateChildren(i,o+1),this.top.children.splice(this.index++,0,s),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let o=new dT(this.top,e,n,r);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof fs;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof Eh)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Ot||vt)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new fT(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function pL(t,e){let n=e,r=n.children.length,i=t.childCount,o=new Map,s=[];e:for(;i>0;){let a;for(;;)if(r){let c=n.children[r-1];if(c instanceof fs)n=c,r=c.children.length;else{a=c,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=t.child(i-1))break;--i,o.set(a,i),s.push(a)}}return{index:i,matched:o,matches:s.reverse()}}function mL(t,e){return t.type.side-e.type.side}function gL(t,e,n,r){let i=e.locals(t),o=0;if(i.length==0){for(let c=0;c<t.childCount;c++){let u=t.child(c);r(u,i,e.forChild(o,u),c),o+=u.nodeSize}return}let s=0,a=[],l=null;for(let c=0;;){let u,d;for(;s<i.length&&i[s].to==o;){let x=i[s++];x.widget&&(u?(d||(d=[u])).push(x):u=x)}if(u)if(d){d.sort(mL);for(let x=0;x<d.length;x++)n(d[x],c,!!l)}else n(u,c,!!l);let f,p;if(l)p=-1,f=l,l=null;else if(c<t.childCount)p=c,f=t.child(c++);else break;for(let x=0;x<a.length;x++)a[x].to<=o&&a.splice(x--,1);for(;s<i.length&&i[s].from<=o&&i[s].to>o;)a.push(i[s++]);let m=o+f.nodeSize;if(f.isText){let x=m;s<i.length&&i[s].from<x&&(x=i[s].from);for(let v=0;v<a.length;v++)a[v].to<x&&(x=a[v].to);x<m&&(l=f.cut(x-o),f=f.cut(0,x-o),m=x,p=-1)}else for(;s<i.length&&i[s].to<m;)s++;let g=f.isInline&&!f.isLeaf?a.filter(x=>!x.inline):a.slice();r(f,g,e.forChild(o,f),p),o=m}}function yL(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function vL(t,e,n,r){for(let i=0,o=0;i<t.childCount&&o<=r;){let s=t.child(i++),a=o;if(o+=s.nodeSize,!s.isText)continue;let l=s.text;for(;i<t.childCount;){let c=t.child(i++);if(o+=c.nodeSize,!c.isText)break;l+=c.text}if(o>=n){if(o>=r&&l.slice(r-e.length-a,r-a)==e)return r-e.length;let c=a<r?l.lastIndexOf(e,r-a-1):-1;if(c>=0&&c+e.length+a>=n)return a+c;if(n==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function ry(t,e,n,r,i){let o=[];for(let s=0,a=0;s<t.length;s++){let l=t[s],c=a,u=a+=l.size;c>=n||u<=e?o.push(l):(c<e&&o.push(l.slice(0,e-c,r)),i&&(o.push(i),i=void 0),u>n&&o.push(l.slice(n-c,l.size,r)))}return o}function Xv(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),o=i&&i.size==0,s=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(s<0)return null;let a=r.resolve(s),l,c;if(kh(n)){for(l=s;i&&!i.node;)i=i.parent;let d=i.node;if(i&&d.isAtom&&Z.isSelectable(d)&&i.parent&&!(d.isInline&&Hj(n.focusNode,n.focusOffset,i.dom))){let f=i.posBefore;c=new Z(s==f?a:r.resolve(f))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let d=s,f=s;for(let p=0;p<n.rangeCount;p++){let m=n.getRangeAt(p);d=Math.min(d,t.docView.posFromDOM(m.startContainer,m.startOffset,1)),f=Math.max(f,t.docView.posFromDOM(m.endContainer,m.endOffset,-1))}if(d<0)return null;[l,s]=f==t.state.selection.anchor?[f,d]:[d,f],a=r.resolve(s)}else l=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(l<0)return null}let u=r.resolve(l);if(!c){let d=e=="pointer"||t.state.selection.head<a.pos&&!o?1:-1;c=Zv(t,u,a,d)}return c}function gT(t){return t.editable?t.hasFocus():vT(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Kr(t,e=!1){let n=t.state.selection;if(yT(t,n),!!gT(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&vt){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&ds(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)wL(t);else{let{anchor:r,head:i}=n,o,s;wb&&!(n instanceof re)&&(n.$from.parent.inlineContent||(o=bb(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(s=bb(t,n.to))),t.docView.setSelection(r,i,t,e),wb&&(o&&Sb(o),s&&Sb(s)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&xL(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const wb=Ot||vt&&iT<63;function bb(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,o=r?n.childNodes[r-1]:null;if(Ot&&i&&i.contentEditable=="false")return Kp(i);if((!i||i.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(i)return Kp(i);if(o)return Kp(o)}}function Kp(t){return t.contentEditable="true",Ot&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function Sb(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function xL(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!gT(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function wL(t){let e=t.domSelection(),n=document.createRange();if(!e)return;let r=t.cursorWrapper.dom,i=r.nodeName=="IMG";i?n.setStart(r.parentNode,st(r)+1):n.setStart(r,0),n.collapse(!0),e.removeAllRanges(),e.addRange(n),!i&&!t.state.selection.visible&&Qt&&Wi<=11&&(r.disabled=!0,r.disabled=!1)}function yT(t,e){if(e instanceof Z){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(Cb(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else Cb(t)}function Cb(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function Zv(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||re.between(e,n,r)}function kb(t){return t.editable&&!t.hasFocus()?!1:vT(t)}function vT(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function bL(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return ds(e.node,e.offset,n.anchorNode,n.anchorOffset)}function iy(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),o=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return o&&ie.findFrom(o,e)}function mi(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function Eb(t,e,n){let r=t.state.selection;if(r instanceof re)if(n.indexOf("s")>-1){let{$head:i}=r,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let s=t.state.doc.resolve(i.pos+o.nodeSize*(e<0?-1:1));return mi(t,new re(r.$anchor,s))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=iy(t.state,e);return i&&i instanceof Z?mi(t,i):!1}else if(!(wn&&n.indexOf("m")>-1)){let i=r.$head,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,s;if(!o||o.isText)return!1;let a=e<0?i.pos-o.nodeSize:i.pos;return o.isAtom||(s=t.docView.descAt(a))&&!s.contentDOM?Z.isSelectable(o)?mi(t,new Z(e<0?t.state.doc.resolve(i.pos-o.nodeSize):i)):mu?mi(t,new re(t.state.doc.resolve(e<0?a:a+o.nodeSize))):!1:!1}}else return!1;else{if(r instanceof Z&&r.node.isInline)return mi(t,new re(e>0?r.$to:r.$from));{let i=iy(t.state,e);return i?mi(t,i):!1}}}function Of(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function oc(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function Is(t,e){return e<0?SL(t):CL(t)}function SL(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,o,s=!1;for(Xn&&n.nodeType==1&&r<Of(n)&&oc(n.childNodes[r],-1)&&(s=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(oc(a,-1))i=n,o=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(xT(n))break;{let a=n.previousSibling;for(;a&&oc(a,-1);)i=n.parentNode,o=st(a),a=a.previousSibling;if(a)n=a,r=Of(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}s?oy(t,n,r):i&&oy(t,i,o)}function CL(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=Of(n),o,s;for(;;)if(r<i){if(n.nodeType!=1)break;let a=n.childNodes[r];if(oc(a,1))o=n,s=++r;else break}else{if(xT(n))break;{let a=n.nextSibling;for(;a&&oc(a,1);)o=a.parentNode,s=st(a)+1,a=a.nextSibling;if(a)n=a,r=0,i=Of(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}o&&oy(t,o,s)}function xT(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function kL(t,e){for(;t&&e==t.childNodes.length&&!pu(t);)e=st(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function EL(t,e){for(;t&&!e&&!pu(t);)e=st(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function oy(t,e,n){if(e.nodeType!=3){let o,s;(s=kL(e,n))?(e=s,n=0):(o=EL(e,n))&&(e=o,n=o.nodeValue.length)}let r=t.domSelection();if(!r)return;if(kh(r)){let o=document.createRange();o.setEnd(e,n),o.setStart(e,n),r.removeAllRanges(),r.addRange(o)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&Kr(t)},50)}function Tb(t,e){let n=t.state.doc.resolve(e);if(!(vt||qj)&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let o=t.coordsAtPos(e-1),s=(o.top+o.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(o.left-i.left)>1)return o.left<i.left?"ltr":"rtl"}if(e<n.end()){let o=t.coordsAtPos(e+1),s=(o.top+o.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(o.left-i.left)>1)return o.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function _b(t,e,n){let r=t.state.selection;if(r instanceof re&&!r.empty||n.indexOf("s")>-1||wn&&n.indexOf("m")>-1)return!1;let{$from:i,$to:o}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let s=iy(t.state,e);if(s&&s instanceof Z)return mi(t,s)}if(!i.parent.inlineContent){let s=e<0?i:o,a=r instanceof Tn?ie.near(s,e):ie.findFrom(s,e);return a?mi(t,a):!1}return!1}function Rb(t,e){if(!(t.state.selection instanceof re))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let o=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(o&&!o.isText){let s=t.state.tr;return e<0?s.delete(n.pos-o.nodeSize,n.pos):s.delete(n.pos,n.pos+o.nodeSize),t.dispatch(s),!0}return!1}function Ob(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function TL(t){if(!Ot||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;Ob(t,r,"true"),setTimeout(()=>Ob(t,r,"false"),20)}return!1}function _L(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function RL(t,e){let n=e.keyCode,r=_L(e);if(n==8||wn&&n==72&&r=="c")return Rb(t,-1)||Is(t,-1);if(n==46&&!e.shiftKey||wn&&n==68&&r=="c")return Rb(t,1)||Is(t,1);if(n==13||n==27)return!0;if(n==37||wn&&n==66&&r=="c"){let i=n==37?Tb(t,t.state.selection.from)=="ltr"?-1:1:-1;return Eb(t,i,r)||Is(t,i)}else if(n==39||wn&&n==70&&r=="c"){let i=n==39?Tb(t,t.state.selection.from)=="ltr"?1:-1:1;return Eb(t,i,r)||Is(t,i)}else{if(n==38||wn&&n==80&&r=="c")return _b(t,-1,r)||Is(t,-1);if(n==40||wn&&n==78&&r=="c")return TL(t)||_b(t,1,r)||Is(t,1);if(r==(wn?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function e0(t,e){t.someProp("transformCopied",p=>{e=p(e,t)});let n=[],{content:r,openStart:i,openEnd:o}=e;for(;i>1&&o>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,o--;let p=r.firstChild;n.push(p.type.name,p.attrs!=p.type.defaultAttrs?p.attrs:null),r=p.content}let s=t.someProp("clipboardSerializer")||Ss.fromSchema(t.state.schema),a=ET(),l=a.createElement("div");l.appendChild(s.serializeFragment(r,{document:a}));let c=l.firstChild,u,d=0;for(;c&&c.nodeType==1&&(u=kT[c.nodeName.toLowerCase()]);){for(let p=u.length-1;p>=0;p--){let m=a.createElement(u[p]);for(;l.firstChild;)m.appendChild(l.firstChild);l.appendChild(m),d++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${i} ${o}${d?` -${d}`:""} ${JSON.stringify(n)}`);let f=t.someProp("clipboardTextSerializer",p=>p(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:f,slice:e}}function wT(t,e,n,r,i){let o=i.parent.type.spec.code,s,a;if(!n&&!e)return null;let l=e&&(r||o||!n);if(l){if(t.someProp("transformPastedText",f=>{e=f(e,o||r,t)}),o)return e?new K(F.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):K.empty;let d=t.someProp("clipboardTextParser",f=>f(e,i,r,t));if(d)a=d;else{let f=i.marks(),{schema:p}=t.state,m=Ss.fromSchema(p);s=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(g=>{let x=s.appendChild(document.createElement("p"));g&&x.appendChild(m.serializeNode(p.text(g,f)))})}}else t.someProp("transformPastedHTML",d=>{n=d(n,t)}),s=AL(n),mu&&DL(s);let c=s&&s.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let d=+u[3];d>0;d--){let f=s.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;s=f}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||Hi.fromSchema(t.state.schema)).parseSlice(s,{preserveWhitespace:!!(l||u),context:i,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!OL.test(f.parentNode.nodeName)?{ignore:!0}:null}})),u)a=NL(Pb(a,+u[1],+u[2]),u[4]);else if(a=K.maxOpen(PL(a.content,i),!0),a.openStart||a.openEnd){let d=0,f=0;for(let p=a.content.firstChild;d<a.openStart&&!p.type.spec.isolating;d++,p=p.firstChild);for(let p=a.content.lastChild;f<a.openEnd&&!p.type.spec.isolating;f++,p=p.lastChild);a=Pb(a,d,f)}return t.someProp("transformPasted",d=>{a=d(a,t)}),a}const OL=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function PL(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),o,s=[];if(t.forEach(a=>{if(!s)return;let l=i.findWrapping(a.type),c;if(!l)return s=null;if(c=s.length&&o.length&&ST(l,o,a,s[s.length-1],0))s[s.length-1]=c;else{s.length&&(s[s.length-1]=CT(s[s.length-1],o.length));let u=bT(a,l);s.push(u),i=i.matchType(u.type),o=l}}),s)return F.from(s)}return t}function bT(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,F.from(t));return t}function ST(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let o=ST(t,e,n,r.lastChild,i+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(F.from(bT(n,t,i+1))))}}function CT(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,CT(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(F.empty,!0);return t.copy(n.append(r))}function sy(t,e,n,r,i,o){let s=e<0?t.firstChild:t.lastChild,a=s.content;return t.childCount>1&&(o=0),i<r-1&&(a=sy(a,e,n,r,i+1,o)),i>=n&&(a=e<0?s.contentMatchAt(0).fillBefore(a,o<=i).append(a):a.append(s.contentMatchAt(s.childCount).fillBefore(F.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,s.copy(a))}function Pb(t,e,n){return e<t.openStart&&(t=new K(sy(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new K(sy(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const kT={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Mb=null;function ET(){return Mb||(Mb=document.implementation.createHTMLDocument("title"))}let qp=null;function ML(t){let e=window.trustedTypes;return e?(qp||(qp=e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),qp.createHTML(t)):t}function AL(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=ET().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&kT[r[1].toLowerCase()])&&(t=i.map(o=>"<"+o+">").join("")+t+i.map(o=>"</"+o+">").reverse().join("")),n.innerHTML=ML(t),i)for(let o=0;o<i.length;o++)n=n.querySelector(i[o])||n;return n}function DL(t){let e=t.querySelectorAll(vt?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function NL(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:o,openEnd:s}=t;for(let a=r.length-2;a>=0;a-=2){let l=n.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;i=F.from(l.create(r[a+1],i)),o++,s++}return new K(i,o,s)}const Pt={},Mt={},IL={touchstart:!0,touchmove:!0};class jL{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function LL(t){for(let e in Pt){let n=Pt[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{FL(t,r)&&!t0(t,r)&&(t.editable||!(r.type in Mt))&&n(t,r)},IL[e]?{passive:!0}:void 0)}Ot&&t.dom.addEventListener("input",()=>null),ay(t)}function Ni(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function $L(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function ay(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>t0(t,r))})}function t0(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function FL(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function BL(t,e){!t0(t,e)&&Pt[e.type]&&(t.editable||!(e.type in Mt))&&Pt[e.type](t,e)}Mt.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!_T(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(Ur&&vt&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),Wa&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,Ro(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||RL(t,n)?n.preventDefault():Ni(t,"key")};Mt.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Mt.keypress=(t,e)=>{let n=e;if(_T(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||wn&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof re)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode);!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",o=>o(t,r.$from.pos,r.$to.pos,i))&&t.dispatch(t.state.tr.insertText(i).scrollIntoView()),n.preventDefault()}};function Th(t){return{left:t.clientX,top:t.clientY}}function zL(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function n0(t,e,n,r,i){if(r==-1)return!1;let o=t.state.doc.resolve(r);for(let s=o.depth+1;s>0;s--)if(t.someProp(e,a=>s>o.depth?a(t,n,o.nodeAfter,o.before(s),i,!0):a(t,n,o.node(s),o.before(s),i,!1)))return!0;return!1}function ya(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);n=="pointer"&&r.setMeta("pointer",!0),t.dispatch(r)}function UL(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&Z.isSelectable(r)?(ya(t,new Z(n),"pointer"),!0):!1}function VL(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof Z&&(r=n.node);let o=t.state.doc.resolve(e);for(let s=o.depth+1;s>0;s--){let a=s>o.depth?o.nodeAfter:o.node(s);if(Z.isSelectable(a)){r&&n.$from.depth>0&&s>=n.$from.depth&&o.before(n.$from.depth+1)==n.$from.pos?i=o.before(n.$from.depth):i=o.before(s);break}}return i!=null?(ya(t,Z.create(t.state.doc,i),"pointer"),!0):!1}function HL(t,e,n,r,i){return n0(t,"handleClickOn",e,n,r)||t.someProp("handleClick",o=>o(t,e,r))||(i?VL(t,n):UL(t,n))}function WL(t,e,n,r){return n0(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function KL(t,e,n,r){return n0(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||qL(t,n,r)}function qL(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(ya(t,re.create(r,0,r.content.size),"pointer"),!0):!1;let i=r.resolve(e);for(let o=i.depth+1;o>0;o--){let s=o>i.depth?i.nodeAfter:i.node(o),a=i.before(o);if(s.inlineContent)ya(t,re.create(r,a+1,a+1+s.content.size),"pointer");else if(Z.isSelectable(s))ya(t,Z.create(r,a),"pointer");else continue;return!0}}function r0(t){return Pf(t)}const TT=wn?"metaKey":"ctrlKey";Pt.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=r0(t),i=Date.now(),o="singleClick";i-t.input.lastClick.time<500&&zL(n,t.input.lastClick)&&!n[TT]&&(t.input.lastClick.type=="singleClick"?o="doubleClick":t.input.lastClick.type=="doubleClick"&&(o="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:o};let s=t.posAtCoords(Th(n));s&&(o=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new GL(t,s,n,!!r)):(o=="doubleClick"?WL:KL)(t,s.pos,s.inside,n)?n.preventDefault():Ni(t,"pointer"))};class GL{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[TT],this.allowDefault=r.shiftKey;let o,s;if(n.inside>-1)o=e.state.doc.nodeAt(n.inside),s=n.inside;else{let u=e.state.doc.resolve(n.pos);o=u.parent,s=u.depth?u.before():0}const a=i?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&l.dom.nodeType==1?l.dom:null;let{selection:c}=e.state;(r.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||c instanceof Z&&c.from<=s&&c.to>s)&&(this.mightDrag={node:o,pos:s,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Xn&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Ni(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Kr(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(Th(e))),this.updateAllowDefault(e),this.allowDefault||!n?Ni(this.view,"pointer"):HL(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Ot&&this.mightDrag&&!this.mightDrag.node.isAtom||vt&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(ya(this.view,ie.near(this.view.state.doc.resolve(n.pos)),"pointer"),e.preventDefault()):Ni(this.view,"pointer")}move(e){this.updateAllowDefault(e),Ni(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Pt.touchstart=t=>{t.input.lastTouch=Date.now(),r0(t),Ni(t,"pointer")};Pt.touchmove=t=>{t.input.lastTouch=Date.now(),Ni(t,"pointer")};Pt.contextmenu=t=>r0(t);function _T(t,e){return t.composing?!0:Ot&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const JL=Ur?5e3:-1;Mt.compositionstart=Mt.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof re&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),Pf(t,!0),t.markCursor=null;else if(Pf(t,!e.selection.empty),Xn&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,o=r.focusOffset;i&&i.nodeType==1&&o!=0;){let s=o<0?i.lastChild:i.childNodes[o-1];if(!s)break;if(s.nodeType==3){let a=t.domSelection();a&&a.collapse(s,s.nodeValue.length);break}else i=s,o=-1}}t.input.composing=!0}RT(t,JL)};Mt.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,RT(t,20))};function RT(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>Pf(t),e))}function OT(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=QL());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function YL(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=Uj(e.focusNode,e.focusOffset),r=Vj(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,o=t.domObserver.lastChangedTextNode;if(n==o||r==o)return o;if(!i||!i.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let s=n.pmViewDesc;if(!(!s||!s.isText(n.nodeValue)))return r}}return n||r}function QL(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Pf(t,e=!1){if(!(Ur&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),OT(t),e||t.docView&&t.docView.dirty){let n=Xv(t);return n&&!n.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!t.state.selection.empty?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function XL(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const Nc=Qt&&Wi<15||Wa&&Gj<604;Pt.copy=Mt.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let o=Nc?null:n.clipboardData,s=r.content(),{dom:a,text:l}=e0(t,s);o?(n.preventDefault(),o.clearData(),o.setData("text/html",a.innerHTML),o.setData("text/plain",l)):XL(t,a),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function ZL(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function e$(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Ic(t,r.value,null,i,e):Ic(t,r.textContent,r.innerHTML,i,e)},50)}function Ic(t,e,n,r,i){let o=wT(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,i,o||K.empty)))return!0;if(!o)return!1;let s=ZL(o),a=s?t.state.tr.replaceSelectionWith(s,r):t.state.tr.replaceSelection(o);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function PT(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Mt.paste=(t,e)=>{let n=e;if(t.composing&&!Ur)return;let r=Nc?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&Ic(t,PT(r),r.getData("text/html"),i,n)?n.preventDefault():e$(t,n)};class MT{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const AT=wn?"altKey":"ctrlKey";Pt.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,o=i.empty?null:t.posAtCoords(Th(n)),s;if(!(o&&o.pos>=i.from&&o.pos<=(i instanceof Z?i.to-1:i.to))){if(r&&r.mightDrag)s=Z.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let d=t.docView.nearestDesc(n.target,!0);d&&d.node.type.spec.draggable&&d!=t.docView&&(s=Z.create(t.state.doc,d.posBefore))}}let a=(s||t.state.selection).content(),{dom:l,text:c,slice:u}=e0(t,a);(!n.dataTransfer.files.length||!vt||iT>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Nc?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",Nc||n.dataTransfer.setData("text/plain",c),t.dragging=new MT(u,!n[AT],s)};Pt.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Mt.dragover=Mt.dragenter=(t,e)=>e.preventDefault();Mt.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let i=t.posAtCoords(Th(n));if(!i)return;let o=t.state.doc.resolve(i.pos),s=r&&r.slice;s?t.someProp("transformPasted",m=>{s=m(s,t)}):s=wT(t,PT(n.dataTransfer),Nc?null:n.dataTransfer.getData("text/html"),!1,o);let a=!!(r&&!n[AT]);if(t.someProp("handleDrop",m=>m(t,n,s||K.empty,a))){n.preventDefault();return}if(!s)return;n.preventDefault();let l=s?YE(t.state.doc,o.pos,s):o.pos;l==null&&(l=o.pos);let c=t.state.tr;if(a){let{node:m}=r;m?m.replace(c):c.deleteSelection()}let u=c.mapping.map(l),d=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,f=c.doc;if(d?c.replaceRangeWith(u,u,s.content.firstChild):c.replaceRange(u,u,s),c.doc.eq(f))return;let p=c.doc.resolve(u);if(d&&Z.isSelectable(s.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(s.content.firstChild))c.setSelection(new Z(p));else{let m=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((g,x,v,w)=>m=w),c.setSelection(Zv(t,p,c.doc.resolve(m)))}t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))};Pt.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Kr(t)},20))};Pt.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};Pt.beforeinput=(t,e)=>{if(vt&&Ur&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",o=>o(t,Ro(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in Mt)Pt[t]=Mt[t];function jc(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class Mf{constructor(e,n){this.toDOM=e,this.spec=n||Jo,this.side=this.spec.side||0}map(e,n,r,i){let{pos:o,deleted:s}=e.mapResult(n.from+i,this.side<0?-1:1);return s?null:new qt(o-r,o-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Mf&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&jc(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class qi{constructor(e,n){this.attrs=e,this.spec=n||Jo}map(e,n,r,i){let o=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,s=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return o>=s?null:new qt(o,s,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof qi&&jc(this.attrs,e.attrs)&&jc(this.spec,e.spec)}static is(e){return e.type instanceof qi}destroy(){}}class i0{constructor(e,n){this.attrs=e,this.spec=n||Jo}map(e,n,r,i){let o=e.mapResult(n.from+i,1);if(o.deleted)return null;let s=e.mapResult(n.to+i,-1);return s.deleted||s.pos<=o.pos?null:new qt(o.pos-r,s.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),o;return i==n.from&&!(o=e.child(r)).isText&&i+o.nodeSize==n.to}eq(e){return this==e||e instanceof i0&&jc(this.attrs,e.attrs)&&jc(this.spec,e.spec)}destroy(){}}class qt{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new qt(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new qt(e,e,new Mf(n,r))}static inline(e,n,r,i){return new qt(e,n,new qi(r,i))}static node(e,n,r,i){return new qt(e,n,new i0(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof qi}get widget(){return this.type instanceof Mf}}const Vs=[],Jo={};class Le{constructor(e,n){this.local=e.length?e:Vs,this.children=n.length?n:Vs}static create(e,n){return n.length?Af(n,e,0,Jo):gt}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,o){for(let s=0;s<this.local.length;s++){let a=this.local[s];a.from<=n&&a.to>=e&&(!o||o(a.spec))&&r.push(a.copy(a.from+i,a.to+i))}for(let s=0;s<this.children.length;s+=3)if(this.children[s]<n&&this.children[s+1]>e){let a=this.children[s]+1;this.children[s+2].findInner(e-a,n-a,r,i+a,o)}}map(e,n,r){return this==gt||e.maps.length==0?this:this.mapInner(e,n,0,0,r||Jo)}mapInner(e,n,r,i,o){let s;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,i);l&&l.type.valid(n,l)?(s||(s=[])).push(l):o.onRemove&&o.onRemove(this.local[a].spec)}return this.children.length?t$(this.children,s||[],e,n,r,i,o):s?new Le(s.sort(Yo),Vs):gt}add(e,n){return n.length?this==gt?Le.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,o=0;e.forEach((a,l)=>{let c=l+r,u;if(u=NT(n,a,c)){for(i||(i=this.children.slice());o<i.length&&i[o]<l;)o+=3;i[o]==l?i[o+2]=i[o+2].addInner(a,u,c+1):i.splice(o,0,l,l+a.nodeSize,Af(u,a,c+1,Jo)),o+=3}});let s=DT(o?IT(n):n,-r);for(let a=0;a<s.length;a++)s[a].type.valid(e,s[a])||s.splice(a--,1);return new Le(s.length?this.local.concat(s).sort(Yo):this.local,i||this.children)}remove(e){return e.length==0||this==gt?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let o=0;o<r.length;o+=3){let s,a=r[o]+n,l=r[o+1]+n;for(let u=0,d;u<e.length;u++)(d=e[u])&&d.from>a&&d.to<l&&(e[u]=null,(s||(s=[])).push(d));if(!s)continue;r==this.children&&(r=this.children.slice());let c=r[o+2].removeInner(s,a+1);c!=gt?r[o+2]=c:(r.splice(o,3),o-=3)}if(i.length){for(let o=0,s;o<e.length;o++)if(s=e[o])for(let a=0;a<i.length;a++)i[a].eq(s,n)&&(i==this.local&&(i=this.local.slice()),i.splice(a--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new Le(i,r):gt}forChild(e,n){if(this==gt)return this;if(n.isLeaf)return Le.empty;let r,i;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let o=e+1,s=o+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<s&&l.to>o&&l.type instanceof qi){let c=Math.max(o,l.from)-o,u=Math.min(s,l.to)-o;c<u&&(i||(i=[])).push(l.copy(c,u))}}if(i){let a=new Le(i.sort(Yo),Vs);return r?new wi([a,r]):a}return r||gt}eq(e){if(this==e)return!0;if(!(e instanceof Le)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return o0(this.localsInner(e))}localsInner(e){if(this==gt)return Vs;if(e.inlineContent||!this.local.some(qi.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof qi||n.push(this.local[r]);return n}forEachSet(e){e(this)}}Le.empty=new Le([],[]);Le.removeOverlap=o0;const gt=Le.empty;class wi{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,Jo));return wi.from(r)}forChild(e,n){if(n.isLeaf)return Le.empty;let r=[];for(let i=0;i<this.members.length;i++){let o=this.members[i].forChild(e,n);o!=gt&&(o instanceof wi?r=r.concat(o.members):r.push(o))}return wi.from(r)}eq(e){if(!(e instanceof wi)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let o=this.members[i].localsInner(e);if(o.length)if(!n)n=o;else{r&&(n=n.slice(),r=!1);for(let s=0;s<o.length;s++)n.push(o[s])}}return n?o0(r?n:n.sort(Yo)):Vs}static from(e){switch(e.length){case 0:return gt;case 1:return e[0];default:return new wi(e.every(n=>n instanceof Le)?e:e.reduce((n,r)=>n.concat(r instanceof Le?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function t$(t,e,n,r,i,o,s){let a=t.slice();for(let c=0,u=o;c<n.maps.length;c++){let d=0;n.maps[c].forEach((f,p,m,g)=>{let x=g-m-(p-f);for(let v=0;v<a.length;v+=3){let w=a[v+1];if(w<0||f>w+u-d)continue;let S=a[v]+u-d;p>=S?a[v+1]=f<=S?-2:-1:f>=u&&x&&(a[v]+=x,a[v+1]+=x)}d+=x}),u=n.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let u=n.map(t[c]+o),d=u-i;if(d<0||d>=r.content.size){l=!0;continue}let f=n.map(t[c+1]+o,-1),p=f-i,{index:m,offset:g}=r.content.findIndex(d),x=r.maybeChild(m);if(x&&g==d&&g+x.nodeSize==p){let v=a[c+2].mapInner(n,x,u+1,t[c]+o+1,s);v!=gt?(a[c]=d,a[c+1]=p,a[c+2]=v):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=n$(a,t,e,n,i,o,s),u=Af(c,r,0,s);e=u.local;for(let d=0;d<a.length;d+=3)a[d+1]<0&&(a.splice(d,3),d-=3);for(let d=0,f=0;d<u.children.length;d+=3){let p=u.children[d];for(;f<a.length&&a[f]<p;)f+=3;a.splice(f,0,u.children[d],u.children[d+1],u.children[d+2])}}return new Le(e.sort(Yo),a)}function DT(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new qt(i.from+e,i.to+e,i.type))}return n}function n$(t,e,n,r,i,o,s){function a(l,c){for(let u=0;u<l.local.length;u++){let d=l.local[u].map(r,i,c);d?n.push(d):s.onRemove&&s.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&a(t[l+2],e[l]+o+1);return n}function NT(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let o=0,s;o<t.length;o++)(s=t[o])&&s.from>n&&s.to<r&&((i||(i=[])).push(s),t[o]=null);return i}function IT(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function Af(t,e,n,r){let i=[],o=!1;e.forEach((a,l)=>{let c=NT(t,a,l+n);if(c){o=!0;let u=Af(c,a,n+l+1,r);u!=gt&&i.push(l,l+a.nodeSize,u)}});let s=DT(o?IT(t):t,-n).sort(Yo);for(let a=0;a<s.length;a++)s[a].type.valid(e,s[a])||(r.onRemove&&r.onRemove(s[a].spec),s.splice(a--,1));return s.length||i.length?new Le(s,i):gt}function Yo(t,e){return t.from-e.from||t.to-e.to}function o0(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let o=e[i];if(o.from==r.from){o.to!=r.to&&(e==t&&(e=t.slice()),e[i]=o.copy(o.from,r.to),Ab(e,i+1,o.copy(r.to,o.to)));continue}else{o.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,o.from),Ab(e,i,r.copy(o.from,r.to)));break}}}return e}function Ab(t,e,n){for(;e<t.length&&Yo(n,t[e])>0;)e++;t.splice(e,0,n)}function Gp(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=gt&&e.push(r)}),t.cursorWrapper&&e.push(Le.create(t.state.doc,[t.cursorWrapper.deco])),wi.from(e)}const r$={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},i$=Qt&&Wi<=11;class o${constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class s${constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new o$,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);Qt&&Wi<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),i$&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,r$)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(kb(this.view)){if(this.suppressingSelectionUpdates)return Kr(this.view);if(Qt&&Wi<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&ds(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let o=e.focusNode;o;o=Ha(o))n.add(o);for(let o=e.anchorNode;o;o=Ha(o))if(n.has(o)){r=o;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&kb(e)&&!this.ignoreSelectionChange(r),o=-1,s=-1,a=!1,l=[];if(e.editable)for(let u=0;u<n.length;u++){let d=this.registerMutation(n[u],l);d&&(o=o<0?d.from:Math.min(d.from,o),s=s<0?d.to:Math.max(d.to,s),d.typeOver&&(a=!0))}if(Xn&&l.length){let u=l.filter(d=>d.nodeName=="BR");if(u.length==2){let[d,f]=u;d.parentNode&&d.parentNode.parentNode==f.parentNode?f.remove():d.remove()}else{let{focusNode:d}=this.currentSelection;for(let f of u){let p=f.parentNode;p&&p.nodeName=="LI"&&(!d||c$(e,d)!=p)&&f.remove()}}}let c=null;o<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&kh(r)&&(c=Xv(e))&&c.eq(ie.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Kr(e),this.currentSelection.set(r),e.scrollToSelection()):(o>-1||i)&&(o>-1&&(e.docView.markDirty(o,s),a$(e)),this.handleDOMChange(o,s,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Kr(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++){let d=e.addedNodes[u];n.push(d),d.nodeType==3&&(this.lastChangedTextNode=d)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,o=e.nextSibling;if(Qt&&Wi<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:d,nextSibling:f}=e.addedNodes[u];(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(i=d),(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(o=f)}let s=i&&i.parentNode==e.target?st(i)+1:0,a=r.localPosFromDOM(e.target,s,-1),l=o&&o.parentNode==e.target?st(o):e.target.childNodes.length,c=r.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let Db=new WeakMap,Nb=!1;function a$(t){if(!Db.has(t)&&(Db.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=Xn,Nb)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Nb=!0}}function Ib(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,o=e.endOffset,s=t.domAtPos(t.state.selection.anchor);return ds(s.node,s.offset,i,o)&&([n,r,i,o]=[i,o,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:o}}function l$(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return Ib(t,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?Ib(t,n):null}function c$(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function u$(t,e,n){let{node:r,fromOffset:i,toOffset:o,from:s,to:a}=t.docView.parseRange(e,n),l=t.domSelectionRange(),c,u=l.anchorNode;if(u&&t.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:l.anchorOffset}],kh(l)||c.push({node:l.focusNode,offset:l.focusOffset})),vt&&t.input.lastKeyCode===8)for(let x=o;x>i;x--){let v=r.childNodes[x-1],w=v.pmViewDesc;if(v.nodeName=="BR"&&!w){o=x;break}if(!w||w.size)break}let d=t.state.doc,f=t.someProp("domParser")||Hi.fromSchema(t.state.schema),p=d.resolve(s),m=null,g=f.parse(r,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:i,to:o,preserveWhitespace:p.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:d$,context:p});if(c&&c[0].pos!=null){let x=c[0].pos,v=c[1]&&c[1].pos;v==null&&(v=x),m={anchor:x+s,head:v+s}}return{doc:g,sel:m,from:s,to:a}}function d$(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(Ot&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||Ot&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const f$=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function h$(t,e,n,r,i){let o=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let P=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,R=Xv(t,P);if(R&&!t.state.selection.eq(R)){if(vt&&Ur&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",A=>A(t,Ro(13,"Enter"))))return;let N=t.state.tr.setSelection(R);P=="pointer"?N.setMeta("pointer",!0):P=="key"&&N.scrollIntoView(),o&&N.setMeta("composition",o),t.dispatch(N)}return}let s=t.state.doc.resolve(e),a=s.sharedDepth(n);e=s.before(a+1),n=t.state.doc.resolve(n).after(a+1);let l=t.state.selection,c=u$(t,e,n),u=t.state.doc,d=u.slice(c.from,c.to),f,p;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(f=t.state.selection.to,p="end"):(f=t.state.selection.from,p="start"),t.input.lastKeyCode=null;let m=g$(d.content,c.doc.content,c.from,f,p);if(m&&t.input.domChangeCount++,(Wa&&t.input.lastIOSEnter>Date.now()-225||Ur)&&i.some(P=>P.nodeType==1&&!f$.test(P.nodeName))&&(!m||m.endA>=m.endB)&&t.someProp("handleKeyDown",P=>P(t,Ro(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!m)if(r&&l instanceof re&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))m={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let P=jb(t,t.state.doc,c.sel);if(P&&!P.eq(t.state.selection)){let R=t.state.tr.setSelection(P);o&&R.setMeta("composition",o),t.dispatch(R)}}return}t.state.selection.from<t.state.selection.to&&m.start==m.endB&&t.state.selection instanceof re&&(m.start>t.state.selection.from&&m.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?m.start=t.state.selection.from:m.endA<t.state.selection.to&&m.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(m.endB+=t.state.selection.to-m.endA,m.endA=t.state.selection.to)),Qt&&Wi<=11&&m.endB==m.start+1&&m.endA==m.start&&m.start>c.from&&c.doc.textBetween(m.start-c.from-1,m.start-c.from+1)==" "&&(m.start--,m.endA--,m.endB--);let g=c.doc.resolveNoCache(m.start-c.from),x=c.doc.resolveNoCache(m.endB-c.from),v=u.resolve(m.start),w=g.sameParent(x)&&g.parent.inlineContent&&v.end()>=m.endA,S;if((Wa&&t.input.lastIOSEnter>Date.now()-225&&(!w||i.some(P=>P.nodeName=="DIV"||P.nodeName=="P"))||!w&&g.pos<c.doc.content.size&&!g.sameParent(x)&&(S=ie.findFrom(c.doc.resolve(g.pos+1),1,!0))&&S.head==x.pos)&&t.someProp("handleKeyDown",P=>P(t,Ro(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>m.start&&m$(u,m.start,m.endA,g,x)&&t.someProp("handleKeyDown",P=>P(t,Ro(8,"Backspace")))){Ur&&vt&&t.domObserver.suppressSelectionUpdates();return}vt&&m.endB==m.start&&(t.input.lastChromeDelete=Date.now()),Ur&&!w&&g.start()!=x.start()&&x.parentOffset==0&&g.depth==x.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==m.endA&&(m.endB-=2,x=c.doc.resolveNoCache(m.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(P){return P(t,Ro(13,"Enter"))})},20));let b=m.start,C=m.endA,k,E,_;if(w){if(g.pos==x.pos)Qt&&Wi<=11&&g.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>Kr(t),20)),k=t.state.tr.delete(b,C),E=u.resolve(m.start).marksAcross(u.resolve(m.endA));else if(m.endA==m.endB&&(_=p$(g.parent.content.cut(g.parentOffset,x.parentOffset),v.parent.content.cut(v.parentOffset,m.endA-v.start()))))k=t.state.tr,_.type=="add"?k.addMark(b,C,_.mark):k.removeMark(b,C,_.mark);else if(g.parent.child(g.index()).isText&&g.index()==x.index()-(x.textOffset?0:1)){let P=g.parent.textBetween(g.parentOffset,x.parentOffset);if(t.someProp("handleTextInput",R=>R(t,b,C,P)))return;k=t.state.tr.insertText(P,b,C)}}if(k||(k=t.state.tr.replace(b,C,c.doc.slice(m.start-c.from,m.endB-c.from))),c.sel){let P=jb(t,k.doc,c.sel);P&&!(vt&&t.composing&&P.empty&&(m.start!=m.endB||t.input.lastChromeDelete<Date.now()-100)&&(P.head==b||P.head==k.mapping.map(C)-1)||Qt&&P.empty&&P.head==b)&&k.setSelection(P)}E&&k.ensureMarks(E),o&&k.setMeta("composition",o),t.dispatch(k.scrollIntoView())}function jb(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:Zv(t,e.resolve(n.anchor),e.resolve(n.head))}function p$(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,o=r,s,a,l;for(let u=0;u<r.length;u++)i=r[u].removeFromSet(i);for(let u=0;u<n.length;u++)o=n[u].removeFromSet(o);if(i.length==1&&o.length==0)a=i[0],s="add",l=u=>u.mark(a.addToSet(u.marks));else if(i.length==0&&o.length==1)a=o[0],s="remove",l=u=>u.mark(a.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(l(e.child(u)));if(F.from(c).eq(t))return{mark:a,type:s}}function m$(t,e,n,r,i){if(n-e<=i.pos-r.pos||Jp(r,!0,!1)<i.pos)return!1;let o=t.resolve(e);if(!r.parent.isTextblock){let a=o.nodeAfter;return a!=null&&n==e+a.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let s=t.resolve(Jp(o,!0,!0));return!s.parent.isTextblock||s.pos>n||Jp(s,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(s.parent.content)}function Jp(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let o=t.node(r).maybeChild(t.indexAfter(r));for(;o&&!o.isLeaf;)o=o.firstChild,i++}return i}function g$(t,e,n,r,i){let o=t.findDiffStart(e,n);if(o==null)return null;let{a:s,b:a}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let l=Math.max(0,o-Math.min(s,a));r-=s+l-o}if(s<o&&t.size<e.size){let l=r<=o&&r>=s?o-r:0;o-=l,o&&o<e.size&&Lb(e.textBetween(o-1,o+1))&&(o+=l?1:-1),a=o+(a-s),s=o}else if(a<o){let l=r<=o&&r>=a?o-r:0;o-=l,o&&o<t.size&&Lb(t.textBetween(o-1,o+1))&&(o+=l?1:-1),s=o+(s-a),a=o}return{start:o,endA:s,endB:a}}function Lb(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class y${constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new jL,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(Ub),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Bb(this),Fb(this),this.nodeViews=zb(this),this.docView=vb(this.state.doc,$b(this),Gp(this),this.dom,this),this.domObserver=new s$(this,(r,i,o,s)=>h$(this,r,i,o,s)),this.domObserver.start(),LL(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&ay(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(Ub),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let i=this.state,o=!1,s=!1;e.storedMarks&&this.composing&&(OT(this),s=!0),this.state=e;let a=i.plugins!=e.plugins||this._props.plugins!=n.plugins;if(a||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let p=zb(this);x$(p,this.nodeViews)&&(this.nodeViews=p,o=!0)}(a||n.handleDOMEvents!=this._props.handleDOMEvents)&&ay(this),this.editable=Bb(this),Fb(this);let l=Gp(this),c=$b(this),u=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",d=o||!this.docView.matchesNode(e.doc,c,l);(d||!e.selection.eq(i.selection))&&(s=!0);let f=u=="preserve"&&s&&this.dom.style.overflowAnchor==null&&Qj(this);if(s){this.domObserver.stop();let p=d&&(Qt||vt)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&v$(i.selection,e.selection);if(d){let m=vt?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=YL(this)),(o||!this.docView.update(e.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=vb(e.doc,c,l,this.dom,this)),m&&!this.trackWrites&&(p=!0)}p||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&bL(this))?Kr(this,p):(yT(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():f&&Xj(f)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof Z){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&fb(this,n.getBoundingClientRect(),e)}else fb(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let o=r.from+(this.state.doc.content.size-n.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==r.node&&(i=o)}this.dragging=new MT(e.slice,e.move,i<0?void 0:Z.create(this.state.doc,i))}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let s=0;s<this.directPlugins.length;s++){let a=this.directPlugins[s].props[e];if(a!=null&&(i=n?n(a):a))return i}let o=this.state.plugins;if(o)for(let s=0;s<o.length;s++){let a=o[s].props[e];if(a!=null&&(i=n?n(a):a))return i}}hasFocus(){if(Qt){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&Zj(this.dom),Kr(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return iL(this,e)}coordsAtPos(e,n=1){return cT(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return cL(this,n||this.state,e)}pasteHTML(e,n){return Ic(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return Ic(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return e0(this,e)}destroy(){this.docView&&($L(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Gp(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,Bj())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return BL(this,e)}dispatch(e){let n=this._props.dispatchTransaction;n?n.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?Ot&&this.root.nodeType===11&&Wj(this.dom.ownerDocument)==this.dom&&l$(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function $b(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[qt.node(0,t.state.doc.content.size,e)]}function Fb(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:qt.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function Bb(t){return!t.someProp("editable",e=>e(t.state)===!1)}function v$(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function zb(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function x$(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function Ub(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Zi={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Df={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},w$=typeof navigator<"u"&&/Mac/.test(navigator.platform),b$=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var at=0;at<10;at++)Zi[48+at]=Zi[96+at]=String(at);for(var at=1;at<=24;at++)Zi[at+111]="F"+at;for(var at=65;at<=90;at++)Zi[at]=String.fromCharCode(at+32),Df[at]=String.fromCharCode(at);for(var Yp in Zi)Df.hasOwnProperty(Yp)||(Df[Yp]=Zi[Yp]);function S$(t){var e=w$&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||b$&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Df:Zi)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const C$=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function k$(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,o,s;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))o=!0;else if(/^mod$/i.test(l))C$?s=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),s&&(n="Meta-"+n),o&&(n="Shift-"+n),n}function E$(t){let e=Object.create(null);for(let n in t)e[k$(n)]=t[n];return e}function Qp(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function T$(t){return new ut({props:{handleKeyDown:jT(t)}})}function jT(t){let e=E$(t);return function(n,r){let i=S$(r),o,s=e[Qp(i,r)];if(s&&s(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let a=e[Qp(i,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.shiftKey||r.altKey||r.metaKey||i.charCodeAt(0)>127)&&(o=Zi[r.keyCode])&&o!=i){let a=e[Qp(o,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}const _$=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function LT(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const R$=(t,e,n)=>{let r=LT(t,n);if(!r)return!1;let i=s0(r);if(!i){let s=r.blockRange(),a=s&&ul(s);return a==null?!1:(e&&e(t.tr.lift(s,a).scrollIntoView()),!0)}let o=i.nodeBefore;if(zT(t,i,e,-1))return!0;if(r.parent.content.size==0&&(Ka(o,"end")||Z.isSelectable(o)))for(let s=r.depth;;s--){let a=Sh(t.doc,r.before(s),r.after(s),K.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=t.tr.step(a);l.setSelection(Ka(o,"end")?ie.findFrom(l.doc.resolve(l.mapping.map(i.pos,-1)),-1):Z.create(l.doc,i.pos-o.nodeSize)),e(l.scrollIntoView())}return!0}if(s==1||r.node(s-1).childCount>1)break}return o.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-o.nodeSize,i.pos).scrollIntoView()),!0):!1},O$=(t,e,n)=>{let r=LT(t,n);if(!r)return!1;let i=s0(r);return i?$T(t,i,e):!1},P$=(t,e,n)=>{let r=FT(t,n);if(!r)return!1;let i=a0(r);return i?$T(t,i,e):!1};function $T(t,e,n){let r=e.nodeBefore,i=r,o=e.pos-1;for(;!i.isTextblock;o--){if(i.type.spec.isolating)return!1;let u=i.lastChild;if(!u)return!1;i=u}let s=e.nodeAfter,a=s,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let u=a.firstChild;if(!u)return!1;a=u}let c=Sh(t.doc,o,l,K.empty);if(!c||c.from!=o||c instanceof Ye&&c.slice.size>=l-o)return!1;if(n){let u=t.tr.step(c);u.setSelection(re.create(u.doc,o)),n(u.scrollIntoView())}return!0}function Ka(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const M$=(t,e,n)=>{let{$head:r,empty:i}=t.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;o=s0(r)}let s=o&&o.nodeBefore;return!s||!Z.isSelectable(s)?!1:(e&&e(t.tr.setSelection(Z.create(t.doc,o.pos-s.nodeSize)).scrollIntoView()),!0)};function s0(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function FT(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const A$=(t,e,n)=>{let r=FT(t,n);if(!r)return!1;let i=a0(r);if(!i)return!1;let o=i.nodeAfter;if(zT(t,i,e,1))return!0;if(r.parent.content.size==0&&(Ka(o,"start")||Z.isSelectable(o))){let s=Sh(t.doc,r.before(),r.after(),K.empty);if(s&&s.slice.size<s.to-s.from){if(e){let a=t.tr.step(s);a.setSelection(Ka(o,"start")?ie.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):Z.create(a.doc,a.mapping.map(i.pos))),e(a.scrollIntoView())}return!0}}return o.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+o.nodeSize).scrollIntoView()),!0):!1},D$=(t,e,n)=>{let{$head:r,empty:i}=t.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;o=a0(r)}let s=o&&o.nodeAfter;return!s||!Z.isSelectable(s)?!1:(e&&e(t.tr.setSelection(Z.create(t.doc,o.pos)).scrollIntoView()),!0)};function a0(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const N$=(t,e)=>{let n=t.selection,r=n instanceof Z,i;if(r){if(n.node.isTextblock||!lo(t.doc,n.from))return!1;i=n.from}else if(i=bh(t.doc,n.from,-1),i==null)return!1;if(e){let o=t.tr.join(i);r&&o.setSelection(Z.create(o.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(o.scrollIntoView())}return!0},I$=(t,e)=>{let n=t.selection,r;if(n instanceof Z){if(n.node.isTextblock||!lo(t.doc,n.to))return!1;r=n.to}else if(r=bh(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},j$=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),o=i&&ul(i);return o==null?!1:(e&&e(t.tr.lift(i,o).scrollIntoView()),!0)},L$=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function BT(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const $$=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),o=n.indexAfter(-1),s=BT(i.contentMatchAt(o));if(!s||!i.canReplaceWith(o,o,s))return!1;if(e){let a=n.after(),l=t.tr.replaceWith(a,a,s.createAndFill());l.setSelection(ie.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},F$=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof Tn||r.parent.inlineContent||i.parent.inlineContent)return!1;let o=BT(i.parent.contentMatchAt(i.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let s=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,a=t.tr.insert(s,o.createAndFill());a.setSelection(re.create(a.doc,s+1)),e(a.scrollIntoView())}return!0},B$=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let o=n.before();if(ma(t.doc,o))return e&&e(t.tr.split(o).scrollIntoView()),!0}let r=n.blockRange(),i=r&&ul(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)},z$=(t,e)=>{let{$from:n,to:r}=t.selection,i,o=n.sharedDepth(r);return o==0?!1:(i=n.before(o),e&&e(t.tr.setSelection(Z.create(t.doc,i))),!0)};function U$(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,o=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(o-1,o)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(i.isTextblock||lo(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function zT(t,e,n,r){let i=e.nodeBefore,o=e.nodeAfter,s,a,l=i.type.spec.isolating||o.type.spec.isolating;if(!l&&U$(t,e,n))return!0;let c=!l&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(s=(a=i.contentMatchAt(i.childCount)).findWrapping(o.type))&&a.matchType(s[0]||o.type).validEnd){if(n){let p=e.pos+o.nodeSize,m=F.empty;for(let v=s.length-1;v>=0;v--)m=F.from(s[v].create(null,m));m=F.from(i.copy(m));let g=t.tr.step(new Xe(e.pos-1,p,e.pos,p,new K(m,1,0),s.length,!0)),x=g.doc.resolve(p+2*s.length);x.nodeAfter&&x.nodeAfter.type==i.type&&lo(g.doc,x.pos)&&g.join(x.pos),n(g.scrollIntoView())}return!0}let u=o.type.spec.isolating||r>0&&l?null:ie.findFrom(e,1),d=u&&u.$from.blockRange(u.$to),f=d&&ul(d);if(f!=null&&f>=e.depth)return n&&n(t.tr.lift(d,f).scrollIntoView()),!0;if(c&&Ka(o,"start",!0)&&Ka(i,"end")){let p=i,m=[];for(;m.push(p),!p.isTextblock;)p=p.lastChild;let g=o,x=1;for(;!g.isTextblock;g=g.firstChild)x++;if(p.canReplace(p.childCount,p.childCount,g.content)){if(n){let v=F.empty;for(let S=m.length-1;S>=0;S--)v=F.from(m[S].copy(v));let w=t.tr.step(new Xe(e.pos-m.length,e.pos+o.nodeSize,e.pos+x,e.pos+o.nodeSize-x,new K(v,m.length,0),0,!0));n(w.scrollIntoView())}return!0}}return!1}function UT(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,o=i.depth;for(;i.node(o).isInline;){if(!o)return!1;o--}return i.node(o).isTextblock?(n&&n(e.tr.setSelection(re.create(e.doc,t<0?i.start(o):i.end(o)))),!0):!1}}const V$=UT(-1),H$=UT(1);function W$(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,s=i.blockRange(o),a=s&&Jv(s,t,e);return a?(r&&r(n.tr.wrap(s,a).scrollIntoView()),!0):!1}}function Vb(t,e=null){return function(n,r){let i=!1;for(let o=0;o<n.selection.ranges.length&&!i;o++){let{$from:{pos:s},$to:{pos:a}}=n.selection.ranges[o];n.doc.nodesBetween(s,a,(l,c)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)i=!0;else{let u=n.doc.resolve(c),d=u.index();i=u.parent.canReplaceWith(d,d+1,t)}})}if(!i)return!1;if(r){let o=n.tr;for(let s=0;s<n.selection.ranges.length;s++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[s];o.setBlockType(a,l,t,e)}r(o.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function K$(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,s=i.blockRange(o);if(!s)return!1;let a=r?n.tr:null;return q$(a,s,t,e)?(r&&r(a.scrollIntoView()),!0):!1}}function q$(t,e,n,r=null){let i=!1,o=e,s=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let l=s.resolve(e.start-2);o=new Tf(l,l,e.depth),e.endIndex<e.parent.childCount&&(e=new Tf(e.$from,s.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let a=Jv(o,n,r,e);return a?(t&&G$(t,e,a,i,n),!0):!1}function G$(t,e,n,r,i){let o=F.empty;for(let u=n.length-1;u>=0;u--)o=F.from(n[u].type.create(n[u].attrs,o));t.step(new Xe(e.start-(r?2:0),e.end,e.start,e.end,new K(o,0,0),n.length,!0));let s=0;for(let u=0;u<n.length;u++)n[u].type==i&&(s=u+1);let a=n.length-s,l=e.start+n.length-(r?2:0),c=e.parent;for(let u=e.startIndex,d=e.endIndex,f=!0;u<d;u++,f=!1)!f&&ma(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=c.child(u).nodeSize;return t}function J$(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,s=>s.childCount>0&&s.firstChild.type==t);return o?n?r.node(o.depth-1).type==t?Y$(e,n,t,o):Q$(e,n,o):!0:!1}}function Y$(t,e,n,r){let i=t.tr,o=r.end,s=r.$to.end(r.depth);o<s&&(i.step(new Xe(o-1,s,o,s,new K(F.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Tf(i.doc.resolve(r.$from.pos),i.doc.resolve(s),r.depth));const a=ul(r);if(a==null)return!1;i.lift(r,a);let l=i.doc.resolve(i.mapping.map(o,-1)-1);return lo(i.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&i.join(l.pos),e(i.scrollIntoView()),!0}function Q$(t,e,n){let r=t.tr,i=n.parent;for(let p=n.end,m=n.endIndex-1,g=n.startIndex;m>g;m--)p-=i.child(m).nodeSize,r.delete(p-1,p+1);let o=r.doc.resolve(n.start),s=o.nodeAfter;if(r.mapping.map(n.end)!=n.start+o.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==i.childCount,c=o.node(-1),u=o.index(-1);if(!c.canReplace(u+(a?0:1),u+1,s.content.append(l?F.empty:F.from(i))))return!1;let d=o.pos,f=d+s.nodeSize;return r.step(new Xe(d-(a?1:0),f+(l?1:0),d+1,f-1,new K((a?F.empty:F.from(i.copy(F.empty))).append(l?F.empty:F.from(i.copy(F.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function X$(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,c=>c.childCount>0&&c.firstChild.type==t);if(!o)return!1;let s=o.startIndex;if(s==0)return!1;let a=o.parent,l=a.child(s-1);if(l.type!=t)return!1;if(n){let c=l.lastChild&&l.lastChild.type==a.type,u=F.from(c?t.create():null),d=new K(F.from(t.create(null,F.from(a.type.create(null,u)))),c?3:1,0),f=o.start,p=o.end;n(e.tr.step(new Xe(f-(c?3:1),p,f,p,d,1,!0)).scrollIntoView())}return!0}}function _h(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:o}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return o},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,o=n.storedMarks,n}}}class Rh{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:r}=this,{view:i}=n,{tr:o}=r,s=this.buildProps(o);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...u)=>{const d=l(...u)(s);return!o.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(o),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:r,editor:i,state:o}=this,{view:s}=i,a=[],l=!!e,c=e||o.tr,u=()=>(!l&&n&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(c),a.every(f=>f===!0)),d={...Object.fromEntries(Object.entries(r).map(([f,p])=>[f,(...g)=>{const x=this.buildProps(c,n),v=p(...g)(x);return a.push(v),d}])),run:u};return d}createCan(e){const{rawCommands:n,state:r}=this,i=!1,o=e||r.tr,s=this.buildProps(o,i);return{...Object.fromEntries(Object.entries(n).map(([l,c])=>[l,(...u)=>c(...u)({...s,dispatch:void 0})])),chain:()=>this.createChain(o,i)}}buildProps(e,n=!0){const{rawCommands:r,editor:i,state:o}=this,{view:s}=i,a={tr:e,editor:i,view:s,state:_h({state:o,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e,n),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...u)=>c(...u)(a)]))}};return a}}class Z${constructor(){this.callbacks={}}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),this}emit(e,...n){const r=this.callbacks[e];return r&&r.forEach(i=>i.apply(this,n)),this}off(e,n){const r=this.callbacks[e];return r&&(n?this.callbacks[e]=r.filter(i=>i!==n):delete this.callbacks[e]),this}once(e,n){const r=(...i)=>{this.off(e,r),n.apply(this,i)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}}function G(t,e,n){return t.config[e]===void 0&&t.parent?G(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?G(t.parent,e,n):null}):t.config[e]}function Oh(t){const e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function VT(t){const e=[],{nodeExtensions:n,markExtensions:r}=Oh(t),i=[...n,...r],o={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(s=>{const a={name:s.name,options:s.options,storage:s.storage,extensions:i},l=G(s,"addGlobalAttributes",a);if(!l)return;l().forEach(u=>{u.types.forEach(d=>{Object.entries(u.attributes).forEach(([f,p])=>{e.push({type:d,name:f,attribute:{...o,...p}})})})})}),i.forEach(s=>{const a={name:s.name,options:s.options,storage:s.storage},l=G(s,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([u,d])=>{const f={...o,...d};typeof(f==null?void 0:f.default)=="function"&&(f.default=f.default()),f!=null&&f.isRequired&&(f==null?void 0:f.default)===void 0&&delete f.default,e.push({type:s.name,name:u,attribute:f})})}),e}function et(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function At(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([i,o])=>{if(!r[i]){r[i]=o;return}if(i==="class"){const a=o?String(o).split(" "):[],l=r[i]?r[i].split(" "):[],c=a.filter(u=>!l.includes(u));r[i]=[...l,...c].join(" ")}else if(i==="style"){const a=o?o.split(";").map(u=>u.trim()).filter(Boolean):[],l=r[i]?r[i].split(";").map(u=>u.trim()).filter(Boolean):[],c=new Map;l.forEach(u=>{const[d,f]=u.split(":").map(p=>p.trim());c.set(d,f)}),a.forEach(u=>{const[d,f]=u.split(":").map(p=>p.trim());c.set(d,f)}),r[i]=Array.from(c.entries()).map(([u,d])=>`${u}: ${d}`).join("; ")}else r[i]=o}),r},{})}function ly(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>At(n,r),{})}function HT(t){return typeof t=="function"}function ae(t,e=void 0,...n){return HT(t)?e?t.bind(e)(...n):t(...n):t}function e3(t={}){return Object.keys(t).length===0&&t.constructor===Object}function t3(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function Hb(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const i=e.reduce((o,s)=>{const a=s.attribute.parseHTML?s.attribute.parseHTML(n):t3(n.getAttribute(s.name));return a==null?o:{...o,[s.name]:a}},{});return{...r,...i}}}}function Wb(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&e3(n)?!1:n!=null))}function n3(t,e){var n;const r=VT(t),{nodeExtensions:i,markExtensions:o}=Oh(t),s=(n=i.find(c=>G(c,"topNode")))===null||n===void 0?void 0:n.name,a=Object.fromEntries(i.map(c=>{const u=r.filter(v=>v.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},f=t.reduce((v,w)=>{const S=G(w,"extendNodeSchema",d);return{...v,...S?S(c):{}}},{}),p=Wb({...f,content:ae(G(c,"content",d)),marks:ae(G(c,"marks",d)),group:ae(G(c,"group",d)),inline:ae(G(c,"inline",d)),atom:ae(G(c,"atom",d)),selectable:ae(G(c,"selectable",d)),draggable:ae(G(c,"draggable",d)),code:ae(G(c,"code",d)),whitespace:ae(G(c,"whitespace",d)),linebreakReplacement:ae(G(c,"linebreakReplacement",d)),defining:ae(G(c,"defining",d)),isolating:ae(G(c,"isolating",d)),attrs:Object.fromEntries(u.map(v=>{var w;return[v.name,{default:(w=v==null?void 0:v.attribute)===null||w===void 0?void 0:w.default}]}))}),m=ae(G(c,"parseHTML",d));m&&(p.parseDOM=m.map(v=>Hb(v,u)));const g=G(c,"renderHTML",d);g&&(p.toDOM=v=>g({node:v,HTMLAttributes:ly(v,u)}));const x=G(c,"renderText",d);return x&&(p.toText=x),[c.name,p]})),l=Object.fromEntries(o.map(c=>{const u=r.filter(x=>x.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},f=t.reduce((x,v)=>{const w=G(v,"extendMarkSchema",d);return{...x,...w?w(c):{}}},{}),p=Wb({...f,inclusive:ae(G(c,"inclusive",d)),excludes:ae(G(c,"excludes",d)),group:ae(G(c,"group",d)),spanning:ae(G(c,"spanning",d)),code:ae(G(c,"code",d)),attrs:Object.fromEntries(u.map(x=>{var v;return[x.name,{default:(v=x==null?void 0:x.attribute)===null||v===void 0?void 0:v.default}]}))}),m=ae(G(c,"parseHTML",d));m&&(p.parseDOM=m.map(x=>Hb(x,u)));const g=G(c,"renderHTML",d);return g&&(p.toDOM=x=>g({mark:x,HTMLAttributes:ly(x,u)})),[c.name,p]}));return new FE({topNode:s,nodes:a,marks:l})}function Xp(t,e){return e.nodes[t]||e.marks[t]||null}function Kb(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function l0(t,e){const n=Ss.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}const r3=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(i,o,s,a)=>{var l,c;const u=((c=(l=i.type.spec).toText)===null||c===void 0?void 0:c.call(l,{node:i,pos:o,parent:s,index:a}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?u:u.slice(0,Math.max(0,r-o))}),n};function c0(t){return Object.prototype.toString.call(t)==="[object RegExp]"}class Ph{constructor(e){this.find=e.find,this.handler=e.handler}}const i3=(t,e)=>{if(c0(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function ad(t){var e;const{editor:n,from:r,to:i,text:o,rules:s,plugin:a}=t,{view:l}=n;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||!((e=c.nodeBefore||c.nodeAfter)===null||e===void 0)&&e.marks.find(f=>f.type.spec.code))return!1;let u=!1;const d=r3(c)+o;return s.forEach(f=>{if(u)return;const p=i3(d,f.find);if(!p)return;const m=l.state.tr,g=_h({state:l.state,transaction:m}),x={from:r-(p[0].length-o.length),to:i},{commands:v,chain:w,can:S}=new Rh({editor:n,state:g});f.handler({state:g,range:x,match:p,commands:v,chain:w,can:S})===null||!m.steps.length||(m.setMeta(a,{transform:m,from:r,to:i,text:o}),l.dispatch(m),u=!0)}),u}function o3(t){const{editor:e,rules:n}=t,r=new ut({state:{init(){return null},apply(i,o,s){const a=i.getMeta(r);if(a)return a;const l=i.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:u}=l;typeof u=="string"?u=u:u=l0(F.from(u),s.schema);const{from:d}=l,f=d+u.length;ad({editor:e,from:d,to:f,text:u,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:o}},props:{handleTextInput(i,o,s,a){return ad({editor:e,from:o,to:s,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:o}=i.state.selection;o&&ad({editor:e,from:o.pos,to:o.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,o){if(o.key!=="Enter")return!1;const{$cursor:s}=i.state.selection;return s?ad({editor:e,from:s.pos,to:s.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function s3(t){return Object.prototype.toString.call(t).slice(8,-1)}function ld(t){return s3(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function Mh(t,e){const n={...t};return ld(t)&&ld(e)&&Object.keys(e).forEach(r=>{ld(e[r])&&ld(t[r])?n[r]=Mh(t[r],e[r]):n[r]=e[r]}),n}class eo{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ae(G(this,"addOptions",{name:this.name}))),this.storage=ae(G(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new eo(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>Mh(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new eo(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=ae(G(n,"addOptions",{name:n.name})),n.storage=ae(G(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const s=i.marks();if(!!!s.find(c=>(c==null?void 0:c.type.name)===n.name))return!1;const l=s.find(c=>(c==null?void 0:c.type.name)===n.name);return l&&r.removeStoredMark(l),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}}function a3(t){return typeof t=="number"}class l3{constructor(e){this.find=e.find,this.handler=e.handler}}const c3=(t,e,n)=>{if(c0(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(i=>{const o=[i.text];return o.index=i.index,o.input=t,o.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),o.push(i.replaceWith)),o}):[]};function u3(t){const{editor:e,state:n,from:r,to:i,rule:o,pasteEvent:s,dropEvent:a}=t,{commands:l,chain:c,can:u}=new Rh({editor:e,state:n}),d=[];return n.doc.nodesBetween(r,i,(p,m)=>{if(!p.isTextblock||p.type.spec.code)return;const g=Math.max(r,m),x=Math.min(i,m+p.content.size),v=p.textBetween(g-m,x-m,void 0,"");c3(v,o.find,s).forEach(S=>{if(S.index===void 0)return;const b=g+S.index+1,C=b+S[0].length,k={from:n.tr.mapping.map(b),to:n.tr.mapping.map(C)},E=o.handler({state:n,range:k,match:S,commands:l,chain:c,can:u,pasteEvent:s,dropEvent:a});d.push(E)})}),d.every(p=>p!==null)}let cd=null;const d3=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)===null||e===void 0||e.setData("text/html",t),n};function f3(t){const{editor:e,rules:n}=t;let r=null,i=!1,o=!1,s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const l=({state:u,from:d,to:f,rule:p,pasteEvt:m})=>{const g=u.tr,x=_h({state:u,transaction:g});if(!(!u3({editor:e,state:x,from:Math.max(d-1,0),to:f.b-1,rule:p,pasteEvent:m,dropEvent:a})||!g.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,g}};return n.map(u=>new ut({view(d){const f=m=>{var g;r=!((g=d.dom.parentElement)===null||g===void 0)&&g.contains(m.target)?d.dom.parentElement:null,r&&(cd=e)},p=()=>{cd&&(cd=null)};return window.addEventListener("dragstart",f),window.addEventListener("dragend",p),{destroy(){window.removeEventListener("dragstart",f),window.removeEventListener("dragend",p)}}},props:{handleDOMEvents:{drop:(d,f)=>{if(o=r===d.dom.parentElement,a=f,!o){const p=cd;p&&setTimeout(()=>{const m=p.state.selection;m&&p.commands.deleteRange({from:m.from,to:m.to})},10)}return!1},paste:(d,f)=>{var p;const m=(p=f.clipboardData)===null||p===void 0?void 0:p.getData("text/html");return s=f,i=!!(m!=null&&m.includes("data-pm-slice")),!1}}},appendTransaction:(d,f,p)=>{const m=d[0],g=m.getMeta("uiEvent")==="paste"&&!i,x=m.getMeta("uiEvent")==="drop"&&!o,v=m.getMeta("applyPasteRules"),w=!!v;if(!g&&!x&&!w)return;if(w){let{text:C}=v;typeof C=="string"?C=C:C=l0(F.from(C),p.schema);const{from:k}=v,E=k+C.length,_=d3(C);return l({rule:u,state:p,from:k,to:{b:E},pasteEvt:_})}const S=f.doc.content.findDiffStart(p.doc.content),b=f.doc.content.findDiffEnd(p.doc.content);if(!(!a3(S)||!b||S===b.b))return l({rule:u,state:p,from:S,to:b,pasteEvt:s})}}))}function h3(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}class oa{constructor(e,n){this.splittableMarks=[],this.editor=n,this.extensions=oa.resolve(e),this.schema=n3(this.extensions,n),this.setupExtensions()}static resolve(e){const n=oa.sort(oa.flatten(e)),r=h3(n.map(i=>i.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),n}static flatten(e){return e.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},i=G(n,"addExtensions",r);return i?[n,...this.flatten(i())]:n}).flat(10)}static sort(e){return e.sort((r,i)=>{const o=G(r,"priority")||100,s=G(i,"priority")||100;return o>s?-1:o<s?1:0})}get commands(){return this.extensions.reduce((e,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:Xp(n.name,this.schema)},i=G(n,"addCommands",r);return i?{...e,...i()}:e},{})}get plugins(){const{editor:e}=this,n=oa.sort([...this.extensions].reverse()),r=[],i=[],o=n.map(s=>{const a={name:s.name,options:s.options,storage:s.storage,editor:e,type:Xp(s.name,this.schema)},l=[],c=G(s,"addKeyboardShortcuts",a);let u={};if(s.type==="mark"&&G(s,"exitable",a)&&(u.ArrowRight=()=>eo.handleExit({editor:e,mark:s})),c){const g=Object.fromEntries(Object.entries(c()).map(([x,v])=>[x,()=>v({editor:e})]));u={...u,...g}}const d=T$(u);l.push(d);const f=G(s,"addInputRules",a);Kb(s,e.options.enableInputRules)&&f&&r.push(...f());const p=G(s,"addPasteRules",a);Kb(s,e.options.enablePasteRules)&&p&&i.push(...p());const m=G(s,"addProseMirrorPlugins",a);if(m){const g=m();l.push(...g)}return l}).flat();return[o3({editor:e,rules:r}),...f3({editor:e,rules:i}),...o]}get attributes(){return VT(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:n}=Oh(this.extensions);return Object.fromEntries(n.filter(r=>!!G(r,"addNodeView")).map(r=>{const i=this.attributes.filter(l=>l.type===r.name),o={name:r.name,options:r.options,storage:r.storage,editor:e,type:et(r.name,this.schema)},s=G(r,"addNodeView",o);if(!s)return[];const a=(l,c,u,d,f)=>{const p=ly(l,i);return s()({node:l,view:c,getPos:u,decorations:d,innerDecorations:f,editor:e,extension:r,HTMLAttributes:p})};return[r.name,a]}))}setupExtensions(){this.extensions.forEach(e=>{var n;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:Xp(e.name,this.schema)};e.type==="mark"&&(!((n=ae(G(e,"keepOnSplit",r)))!==null&&n!==void 0)||n)&&this.splittableMarks.push(e.name);const i=G(e,"onBeforeCreate",r),o=G(e,"onCreate",r),s=G(e,"onUpdate",r),a=G(e,"onSelectionUpdate",r),l=G(e,"onTransaction",r),c=G(e,"onFocus",r),u=G(e,"onBlur",r),d=G(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),o&&this.editor.on("create",o),s&&this.editor.on("update",s),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),c&&this.editor.on("focus",c),u&&this.editor.on("blur",u),d&&this.editor.on("destroy",d)})}}class tt{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ae(G(this,"addOptions",{name:this.name}))),this.storage=ae(G(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new tt(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>Mh(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new tt({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=ae(G(n,"addOptions",{name:n.name})),n.storage=ae(G(n,"addStorage",{name:n.name,options:n.options})),n}}function WT(t,e,n){const{from:r,to:i}=e,{blockSeparator:o=`

`,textSerializers:s={}}=n||{};let a="";return t.nodesBetween(r,i,(l,c,u,d)=>{var f;l.isBlock&&c>r&&(a+=o);const p=s==null?void 0:s[l.type.name];if(p)return u&&(a+=p({node:l,pos:c,parent:u,index:d,range:e})),!1;l.isText&&(a+=(f=l==null?void 0:l.text)===null||f===void 0?void 0:f.slice(Math.max(r,c)-c,i-c))}),a}function KT(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}const p3=tt.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new ut({key:new mn("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:o}=i,s=Math.min(...o.map(u=>u.$from.pos)),a=Math.max(...o.map(u=>u.$to.pos)),l=KT(n);return WT(r,{from:s,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),m3=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),g3=(t=!1)=>({commands:e})=>e.setContent("",t),y3=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:o,$to:s})=>{t.doc.nodesBetween(o.pos,s.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=e,d=c.resolve(u.map(l)),f=c.resolve(u.map(l+a.nodeSize)),p=d.blockRange(f);if(!p)return;const m=ul(p);if(a.type.isTextblock){const{defaultType:g}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(p.start,g)}(m||m===0)&&e.lift(p,m)})}),!0},v3=t=>e=>t(e),x3=()=>({state:t,dispatch:e})=>F$(t,e),w3=(t,e)=>({editor:n,tr:r})=>{const{state:i}=n,o=i.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const s=r.mapping.map(e);return r.insert(s,o.content),r.setSelection(new re(r.doc.resolve(s-1))),!0},b3=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let o=i.depth;o>0;o-=1)if(i.node(o).type===r.type){if(e){const a=i.before(o),l=i.after(o);t.delete(a,l).scrollIntoView()}return!0}return!1},S3=t=>({tr:e,state:n,dispatch:r})=>{const i=et(t,n.schema),o=e.selection.$anchor;for(let s=o.depth;s>0;s-=1)if(o.node(s).type===i){if(r){const l=o.before(s),c=o.after(s);e.delete(l,c).scrollIntoView()}return!0}return!1},C3=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},k3=()=>({state:t,dispatch:e})=>_$(t,e),E3=()=>({commands:t})=>t.keyboardShortcut("Enter"),T3=()=>({state:t,dispatch:e})=>$$(t,e);function Nf(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:c0(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function qT(t,e,n={}){return t.find(r=>r.type===e&&Nf(Object.fromEntries(Object.keys(n).map(i=>[i,r.attrs[i]])),n))}function qb(t,e,n={}){return!!qT(t,e,n)}function u0(t,e,n){var r;if(!t||!e)return;let i=t.parent.childAfter(t.parentOffset);if((!i.node||!i.node.marks.some(u=>u.type===e))&&(i=t.parent.childBefore(t.parentOffset)),!i.node||!i.node.marks.some(u=>u.type===e)||(n=n||((r=i.node.marks[0])===null||r===void 0?void 0:r.attrs),!qT([...i.node.marks],e,n)))return;let s=i.index,a=t.start()+i.offset,l=s+1,c=a+i.node.nodeSize;for(;s>0&&qb([...t.parent.child(s-1).marks],e,n);)s-=1,a-=t.parent.child(s).nodeSize;for(;l<t.parent.childCount&&qb([...t.parent.child(l).marks],e,n);)c+=t.parent.child(l).nodeSize,l+=1;return{from:a,to:c}}function uo(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const _3=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const o=uo(t,r.schema),{doc:s,selection:a}=n,{$from:l,from:c,to:u}=a;if(i){const d=u0(l,o,e);if(d&&d.from<=c&&d.to>=u){const f=re.create(s,d.from,d.to);n.setSelection(f)}}return!0},R3=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function d0(t){return t instanceof re}function Vr(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function GT(t,e=null){if(!e)return null;const n=ie.atStart(t),r=ie.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const i=n.from,o=r.to;return e==="all"?re.create(t,Vr(0,i,o),Vr(t.content.size,i,o)):re.create(t,Vr(e,i,o),Vr(e,i,o))}function O3(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function f0(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const P3=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:o})=>{e={scrollIntoView:!0,...e};const s=()=>{(f0()||O3())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(o&&t===null&&!d0(n.state.selection))return s(),!0;const a=GT(i.doc,t)||n.state.selection,l=n.state.selection.eq(a);return o&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),s()),!0},M3=(t,e)=>n=>t.every((r,i)=>e(r,{...n,index:i})),A3=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),JT=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&JT(r)}return t};function ud(t){const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return JT(n)}function If(t,e,n){if(t instanceof Vi||t instanceof F)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,i=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return F.fromArray(t.map(a=>e.nodeFromJSON(a)));const s=e.nodeFromJSON(t);return n.errorOnInvalidContent&&s.check(),s}catch(o){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:o});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",o),If("",e,n)}if(i){if(n.errorOnInvalidContent){let s=!1,a="";const l=new FE({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(s=!0,a=typeof c=="string"?c:c.outerHTML,null)}]}})});if(n.slice?Hi.fromSchema(l).parseSlice(ud(t),n.parseOptions):Hi.fromSchema(l).parse(ud(t),n.parseOptions),n.errorOnInvalidContent&&s)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const o=Hi.fromSchema(e);return n.slice?o.parseSlice(ud(t),n.parseOptions).content:o.parse(ud(t),n.parseOptions)}return If("",e,n)}function D3(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof Ye||i instanceof Xe))return;const o=t.mapping.maps[r];let s=0;o.forEach((a,l,c,u)=>{s===0&&(s=u)}),t.setSelection(ie.near(t.doc.resolve(s),n))}const N3=t=>!("type"in t),I3=(t,e,n)=>({tr:r,dispatch:i,editor:o})=>{var s;if(i){n={parseOptions:o.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let a;try{a=If(e,o.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions},errorOnInvalidContent:(s=n.errorOnInvalidContent)!==null&&s!==void 0?s:o.options.enableContentCheck})}catch(m){return o.emit("contentError",{editor:o,error:m,disableCollaboration:()=>{o.storage.collaboration&&(o.storage.collaboration.isDisabled=!0)}}),!1}let{from:l,to:c}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},u=!0,d=!0;if((N3(a)?a:[a]).forEach(m=>{m.check(),u=u?m.isText&&m.marks.length===0:!1,d=d?m.isBlock:!1}),l===c&&d){const{parent:m}=r.doc.resolve(l);m.isTextblock&&!m.type.spec.code&&!m.childCount&&(l-=1,c+=1)}let p;if(u){if(Array.isArray(e))p=e.map(m=>m.text||"").join("");else if(e instanceof F){let m="";e.forEach(g=>{g.text&&(m+=g.text)}),p=m}else typeof e=="object"&&e&&e.text?p=e.text:p=e;r.insertText(p,l,c)}else p=a,r.replaceWith(l,c,p);n.updateSelection&&D3(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:l,text:p}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:l,text:p})}return!0},j3=()=>({state:t,dispatch:e})=>N$(t,e),L3=()=>({state:t,dispatch:e})=>I$(t,e),$3=()=>({state:t,dispatch:e})=>R$(t,e),F3=()=>({state:t,dispatch:e})=>A$(t,e),B3=()=>({state:t,dispatch:e,tr:n})=>{try{const r=bh(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},z3=()=>({state:t,dispatch:e,tr:n})=>{try{const r=bh(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},U3=()=>({state:t,dispatch:e})=>O$(t,e),V3=()=>({state:t,dispatch:e})=>P$(t,e);function YT(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function H3(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,i,o,s;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))o=!0;else if(/^mod$/i.test(l))f0()||YT()?s=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),s&&(n=`Meta-${n}`),o&&(n=`Shift-${n}`),n}const W3=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const o=H3(t).split(/-(?!$)/),s=o.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:s==="Space"?" ":s,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,a))});return l==null||l.steps.forEach(c=>{const u=c.map(r.mapping);u&&i&&r.maybeStep(u)}),!0};function Lc(t,e,n={}){const{from:r,to:i,empty:o}=t.selection,s=e?et(e,t.schema):null,a=[];t.doc.nodesBetween(r,i,(d,f)=>{if(d.isText)return;const p=Math.max(r,f),m=Math.min(i,f+d.nodeSize);a.push({node:d,from:p,to:m})});const l=i-r,c=a.filter(d=>s?s.name===d.node.type.name:!0).filter(d=>Nf(d.node.attrs,n,{strict:!1}));return o?!!c.length:c.reduce((d,f)=>d+f.to-f.from,0)>=l}const K3=(t,e={})=>({state:n,dispatch:r})=>{const i=et(t,n.schema);return Lc(n,i,e)?j$(n,r):!1},q3=()=>({state:t,dispatch:e})=>B$(t,e),G3=t=>({state:e,dispatch:n})=>{const r=et(t,e.schema);return J$(r)(e,n)},J3=()=>({state:t,dispatch:e})=>L$(t,e);function Ah(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function Gb(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}const Y3=(t,e)=>({tr:n,state:r,dispatch:i})=>{let o=null,s=null;const a=Ah(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(o=et(t,r.schema)),a==="mark"&&(s=uo(t,r.schema)),i&&n.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{o&&o===c.type&&n.setNodeMarkup(u,void 0,Gb(c.attrs,e)),s&&c.marks.length&&c.marks.forEach(d=>{s===d.type&&n.addMark(u,u+c.nodeSize,s.create(Gb(d.attrs,e)))})})}),!0):!1},Q3=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),X3=()=>({tr:t,dispatch:e})=>{if(e){const n=new Tn(t.doc);t.setSelection(n)}return!0},Z3=()=>({state:t,dispatch:e})=>M$(t,e),eF=()=>({state:t,dispatch:e})=>D$(t,e),tF=()=>({state:t,dispatch:e})=>z$(t,e),nF=()=>({state:t,dispatch:e})=>H$(t,e),rF=()=>({state:t,dispatch:e})=>V$(t,e);function cy(t,e,n={},r={}){return If(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}const iF=(t,e=!1,n={},r={})=>({editor:i,tr:o,dispatch:s,commands:a})=>{var l,c;const{doc:u}=o;if(n.preserveWhitespace!=="full"){const d=cy(t,i.schema,n,{errorOnInvalidContent:(l=r.errorOnInvalidContent)!==null&&l!==void 0?l:i.options.enableContentCheck});return s&&o.replaceWith(0,u.content.size,d).setMeta("preventUpdate",!e),!0}return s&&o.setMeta("preventUpdate",!e),a.insertContentAt({from:0,to:u.content.size},t,{parseOptions:n,errorOnInvalidContent:(c=r.errorOnInvalidContent)!==null&&c!==void 0?c:i.options.enableContentCheck})};function QT(t,e){const n=uo(e,t.schema),{from:r,to:i,empty:o}=t.selection,s=[];o?(t.storedMarks&&s.push(...t.storedMarks),s.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,l=>{s.push(...l.marks)});const a=s.find(l=>l.type.name===n.name);return a?{...a.attrs}:{}}function oF(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function sF(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function h0(t){return e=>sF(e.$from,t)}function aF(t,e){const n={from:0,to:t.content.size};return WT(t,n,e)}function lF(t,e){const n=et(e,t.schema),{from:r,to:i}=t.selection,o=[];t.doc.nodesBetween(r,i,a=>{o.push(a)});const s=o.reverse().find(a=>a.type.name===n.name);return s?{...s.attrs}:{}}function cF(t,e){const n=Ah(typeof e=="string"?e:e.name,t.schema);return n==="node"?lF(t,e):n==="mark"?QT(t,e):{}}function XT(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(i=>{const o=n.resolve(t),s=u0(o,i.type);s&&r.push({mark:i,...s})}):n.nodesBetween(t,e,(i,o)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(s=>({from:o,to:o+i.nodeSize,mark:s})))}),r}function zd(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=t.find(o=>o.type===e&&o.name===r);return i?i.attribute.keepOnSplit:!1}))}function uy(t,e,n={}){const{empty:r,ranges:i}=t.selection,o=e?uo(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(d=>o?o.name===d.type.name:!0).find(d=>Nf(d.attrs,n,{strict:!1}));let s=0;const a=[];if(i.forEach(({$from:d,$to:f})=>{const p=d.pos,m=f.pos;t.doc.nodesBetween(p,m,(g,x)=>{if(!g.isText&&!g.marks.length)return;const v=Math.max(p,x),w=Math.min(m,x+g.nodeSize),S=w-v;s+=S,a.push(...g.marks.map(b=>({mark:b,from:v,to:w})))})}),s===0)return!1;const l=a.filter(d=>o?o.name===d.mark.type.name:!0).filter(d=>Nf(d.mark.attrs,n,{strict:!1})).reduce((d,f)=>d+f.to-f.from,0),c=a.filter(d=>o?d.mark.type!==o&&d.mark.type.excludes(o):!0).reduce((d,f)=>d+f.to-f.from,0);return(l>0?l+c:l)>=s}function uF(t,e,n={}){if(!e)return Lc(t,null,n)||uy(t,null,n);const r=Ah(e,t.schema);return r==="node"?Lc(t,e,n):r==="mark"?uy(t,e,n):!1}function Jb(t,e){const{nodeExtensions:n}=Oh(e),r=n.find(s=>s.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},o=ae(G(r,"group",i));return typeof o!="string"?!1:o.split(" ").includes("list")}function Dh(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!==null&&r!==void 0?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let i=!0;return t.content.forEach(o=>{i!==!1&&(Dh(o,{ignoreWhitespace:n,checkChildren:e})||(i=!1))}),i}return!1}function ZT(t){return t instanceof Z}function dF(t,e,n){const i=t.state.doc.content.size,o=Vr(e,0,i),s=Vr(n,0,i),a=t.coordsAtPos(o),l=t.coordsAtPos(s,-1),c=Math.min(a.top,l.top),u=Math.max(a.bottom,l.bottom),d=Math.min(a.left,l.left),f=Math.max(a.right,l.right),p=f-d,m=u-c,v={top:c,bottom:u,left:d,right:f,width:p,height:m,x:d,y:c};return{...v,toJSON:()=>v}}function fF(t,e,n){var r;const{selection:i}=e;let o=null;if(d0(i)&&(o=i.$cursor),o){const a=(r=t.storedMarks)!==null&&r!==void 0?r:o.marks();return!!n.isInSet(a)||!a.some(l=>l.type.excludes(n))}const{ranges:s}=i;return s.some(({$from:a,$to:l})=>{let c=a.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(a.pos,l.pos,(u,d,f)=>{if(c)return!1;if(u.isInline){const p=!f||f.type.allowsMarkType(n),m=!!n.isInSet(u.marks)||!u.marks.some(g=>g.type.excludes(n));c=p&&m}return!c}),c})}const hF=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:o}=n,{empty:s,ranges:a}=o,l=uo(t,r.schema);if(i)if(s){const c=QT(r,l);n.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;r.doc.nodesBetween(u,d,(f,p)=>{const m=Math.max(p,u),g=Math.min(p+f.nodeSize,d);f.marks.find(v=>v.type===l)?f.marks.forEach(v=>{l===v.type&&n.addMark(m,g,l.create({...v.attrs,...e}))}):n.addMark(m,g,l.create(e))})});return fF(r,n,l)},pF=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),mF=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const o=et(t,n.schema);let s;return n.selection.$anchor.sameParent(n.selection.$head)&&(s=n.selection.$anchor.parent.attrs),o.isTextblock?i().command(({commands:a})=>Vb(o,{...s,...e})(n)?!0:a.clearNodes()).command(({state:a})=>Vb(o,{...s,...e})(a,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},gF=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,i=Vr(t,0,r.content.size),o=Z.create(r,i);e.setSelection(o)}return!0},yF=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:i,to:o}=typeof t=="number"?{from:t,to:t}:t,s=re.atStart(r).from,a=re.atEnd(r).to,l=Vr(i,s,a),c=Vr(o,s,a),u=re.create(r,l,c);e.setSelection(u)}return!0},vF=t=>({state:e,dispatch:n})=>{const r=et(t,e.schema);return X$(r)(e,n)};function Yb(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e==null?void 0:e.includes(i.type.name));t.tr.ensureMarks(r)}}const xF=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{const{selection:o,doc:s}=e,{$from:a,$to:l}=o,c=i.extensionManager.attributes,u=zd(c,a.node().type.name,a.node().attrs);if(o instanceof Z&&o.node.isBlock)return!a.parentOffset||!ma(s,a.pos)?!1:(r&&(t&&Yb(n,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const d=l.parentOffset===l.parent.content.size,f=a.depth===0?void 0:oF(a.node(-1).contentMatchAt(a.indexAfter(-1)));let p=d&&f?[{type:f,attrs:u}]:void 0,m=ma(e.doc,e.mapping.map(a.pos),1,p);if(!p&&!m&&ma(e.doc,e.mapping.map(a.pos),1,f?[{type:f}]:void 0)&&(m=!0,p=f?[{type:f,attrs:u}]:void 0),r){if(m&&(o instanceof re&&e.deleteSelection(),e.split(e.mapping.map(a.pos),1,p),f&&!d&&!a.parentOffset&&a.parent.type!==f)){const g=e.mapping.map(a.before()),x=e.doc.resolve(g);a.node(-1).canReplaceWith(x.index(),x.index()+1,f)&&e.setNodeMarkup(e.mapping.map(a.before()),f)}t&&Yb(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return m},wF=(t,e={})=>({tr:n,state:r,dispatch:i,editor:o})=>{var s;const a=et(t,r.schema),{$from:l,$to:c}=r.selection,u=r.selection.node;if(u&&u.isBlock||l.depth<2||!l.sameParent(c))return!1;const d=l.node(-1);if(d.type!==a)return!1;const f=o.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(i){let v=F.empty;const w=l.index(-1)?1:l.index(-2)?2:3;for(let _=l.depth-w;_>=l.depth-3;_-=1)v=F.from(l.node(_).copy(v));const S=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,b={...zd(f,l.node().type.name,l.node().attrs),...e},C=((s=a.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(b))||void 0;v=v.append(F.from(a.createAndFill(null,C)||void 0));const k=l.before(l.depth-(w-1));n.replace(k,l.after(-S),new K(v,4-w,0));let E=-1;n.doc.nodesBetween(k,n.doc.content.size,(_,P)=>{if(E>-1)return!1;_.isTextblock&&_.content.size===0&&(E=P+1)}),E>-1&&n.setSelection(re.near(n.doc.resolve(E))),n.scrollIntoView()}return!0}const p=c.pos===l.end()?d.contentMatchAt(0).defaultType:null,m={...zd(f,d.type.name,d.attrs),...e},g={...zd(f,l.node().type.name,l.node().attrs),...e};n.delete(l.pos,c.pos);const x=p?[{type:a,attrs:m},{type:p,attrs:g}]:[{type:a,attrs:m}];if(!ma(n.doc,l.pos,2))return!1;if(i){const{selection:v,storedMarks:w}=r,{splittableMarks:S}=o.extensionManager,b=w||v.$to.parentOffset&&v.$from.marks();if(n.split(l.pos,2,x).scrollIntoView(),!b||!i)return!0;const C=b.filter(k=>S.includes(k.type.name));n.ensureMarks(C)}return!0},Zp=(t,e)=>{const n=h0(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&lo(t.doc,n.pos)&&t.join(n.pos),!0},em=(t,e)=>{const n=h0(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&lo(t.doc,r)&&t.join(r),!0},bF=(t,e,n,r={})=>({editor:i,tr:o,state:s,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:d,splittableMarks:f}=i.extensionManager,p=et(t,s.schema),m=et(e,s.schema),{selection:g,storedMarks:x}=s,{$from:v,$to:w}=g,S=v.blockRange(w),b=x||g.$to.parentOffset&&g.$from.marks();if(!S)return!1;const C=h0(k=>Jb(k.type.name,d))(g);if(S.depth>=1&&C&&S.depth-C.depth<=1){if(C.node.type===p)return c.liftListItem(m);if(Jb(C.node.type.name,d)&&p.validContent(C.node.content)&&a)return l().command(()=>(o.setNodeMarkup(C.pos,p),!0)).command(()=>Zp(o,p)).command(()=>em(o,p)).run()}return!n||!b||!a?l().command(()=>u().wrapInList(p,r)?!0:c.clearNodes()).wrapInList(p,r).command(()=>Zp(o,p)).command(()=>em(o,p)).run():l().command(()=>{const k=u().wrapInList(p,r),E=b.filter(_=>f.includes(_.type.name));return o.ensureMarks(E),k?!0:c.clearNodes()}).wrapInList(p,r).command(()=>Zp(o,p)).command(()=>em(o,p)).run()},SF=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:o=!1}=n,s=uo(t,r.schema);return uy(r,s,e)?i.unsetMark(s,{extendEmptyMarkRange:o}):i.setMark(s,e)},CF=(t,e,n={})=>({state:r,commands:i})=>{const o=et(t,r.schema),s=et(e,r.schema),a=Lc(r,o,n);let l;return r.selection.$anchor.sameParent(r.selection.$head)&&(l=r.selection.$anchor.parent.attrs),a?i.setNode(s,l):i.setNode(o,{...l,...n})},kF=(t,e={})=>({state:n,commands:r})=>{const i=et(t,n.schema);return Lc(n,i,e)?r.lift(i):r.wrapIn(i,e)},EF=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let o;if(i.spec.isInputRules&&(o=i.getState(t))){if(e){const s=t.tr,a=o.transform;for(let l=a.steps.length-1;l>=0;l-=1)s.step(a.steps[l].invert(a.docs[l]));if(o.text){const l=s.doc.resolve(o.from).marks();s.replaceWith(o.from,o.to,t.schema.text(o.text,l))}else s.delete(o.from,o.to)}return!0}}return!1},TF=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(o=>{t.removeMark(o.$from.pos,o.$to.pos)}),!0},_F=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var o;const{extendEmptyMarkRange:s=!1}=e,{selection:a}=n,l=uo(t,r.schema),{$from:c,empty:u,ranges:d}=a;if(!i)return!0;if(u&&s){let{from:f,to:p}=a;const m=(o=c.marks().find(x=>x.type===l))===null||o===void 0?void 0:o.attrs,g=u0(c,l,m);g&&(f=g.from,p=g.to),n.removeMark(f,p,l)}else d.forEach(f=>{n.removeMark(f.$from.pos,f.$to.pos,l)});return n.removeStoredMark(l),!0},RF=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let o=null,s=null;const a=Ah(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(o=et(t,r.schema)),a==="mark"&&(s=uo(t,r.schema)),i&&n.selection.ranges.forEach(l=>{const c=l.$from.pos,u=l.$to.pos;let d,f,p,m;n.selection.empty?r.doc.nodesBetween(c,u,(g,x)=>{o&&o===g.type&&(p=Math.max(x,c),m=Math.min(x+g.nodeSize,u),d=x,f=g)}):r.doc.nodesBetween(c,u,(g,x)=>{x<c&&o&&o===g.type&&(p=Math.max(x,c),m=Math.min(x+g.nodeSize,u),d=x,f=g),x>=c&&x<=u&&(o&&o===g.type&&n.setNodeMarkup(x,void 0,{...g.attrs,...e}),s&&g.marks.length&&g.marks.forEach(v=>{if(s===v.type){const w=Math.max(x,c),S=Math.min(x+g.nodeSize,u);n.addMark(w,S,s.create({...v.attrs,...e}))}}))}),f&&(d!==void 0&&n.setNodeMarkup(d,void 0,{...f.attrs,...e}),s&&f.marks.length&&f.marks.forEach(g=>{s===g.type&&n.addMark(p,m,s.create({...g.attrs,...e}))}))}),!0):!1},OF=(t,e={})=>({state:n,dispatch:r})=>{const i=et(t,n.schema);return W$(i,e)(n,r)},PF=(t,e={})=>({state:n,dispatch:r})=>{const i=et(t,n.schema);return K$(i,e)(n,r)};var MF=Object.freeze({__proto__:null,blur:m3,clearContent:g3,clearNodes:y3,command:v3,createParagraphNear:x3,cut:w3,deleteCurrentNode:b3,deleteNode:S3,deleteRange:C3,deleteSelection:k3,enter:E3,exitCode:T3,extendMarkRange:_3,first:R3,focus:P3,forEach:M3,insertContent:A3,insertContentAt:I3,joinBackward:$3,joinDown:L3,joinForward:F3,joinItemBackward:B3,joinItemForward:z3,joinTextblockBackward:U3,joinTextblockForward:V3,joinUp:j3,keyboardShortcut:W3,lift:K3,liftEmptyBlock:q3,liftListItem:G3,newlineInCode:J3,resetAttributes:Y3,scrollIntoView:Q3,selectAll:X3,selectNodeBackward:Z3,selectNodeForward:eF,selectParentNode:tF,selectTextblockEnd:nF,selectTextblockStart:rF,setContent:iF,setMark:hF,setMeta:pF,setNode:mF,setNodeSelection:gF,setTextSelection:yF,sinkListItem:vF,splitBlock:xF,splitListItem:wF,toggleList:bF,toggleMark:SF,toggleNode:CF,toggleWrap:kF,undoInputRule:EF,unsetAllMarks:TF,unsetMark:_F,updateAttributes:RF,wrapIn:OF,wrapInList:PF});const AF=tt.create({name:"commands",addCommands(){return{...MF}}}),DF=tt.create({name:"drop",addProseMirrorPlugins(){return[new ut({key:new mn("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),NF=tt.create({name:"editable",addProseMirrorPlugins(){return[new ut({key:new mn("editable"),props:{editable:()=>this.editor.options.editable}})]}}),IF=tt.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new ut({key:new mn("focusEvents"),props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),jF=tt.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:s})=>[()=>s.undoInputRule(),()=>s.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:d}=l,{pos:f,parent:p}=d,m=d.parent.isTextblock&&f>0?a.doc.resolve(f-1):d,g=m.parent.type.spec.isolating,x=d.pos-d.parentOffset,v=g&&m.parent.childCount===1?x===d.pos:ie.atStart(c).from===f;return!u||!p.type.isTextblock||p.textContent.length||!v||v&&d.parent.type.name==="paragraph"?!1:s.clearNodes()}),()=>s.deleteSelection(),()=>s.joinBackward(),()=>s.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:s})=>[()=>s.deleteSelection(),()=>s.deleteCurrentNode(),()=>s.joinForward(),()=>s.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:s})=>[()=>s.newlineInCode(),()=>s.createParagraphNear(),()=>s.liftEmptyBlock(),()=>s.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},o={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return f0()||YT()?o:i},addProseMirrorPlugins(){return[new ut({key:new mn("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(g=>g.getMeta("composition")))return;const r=t.some(g=>g.docChanged)&&!e.doc.eq(n.doc),i=t.some(g=>g.getMeta("preventClearDocument"));if(!r||i)return;const{empty:o,from:s,to:a}=e.selection,l=ie.atStart(e.doc).from,c=ie.atEnd(e.doc).to;if(o||!(s===l&&a===c)||!Dh(n.doc))return;const f=n.tr,p=_h({state:n,transaction:f}),{commands:m}=new Rh({editor:this.editor,state:p});if(m.clearNodes(),!!f.steps.length)return f}})]}}),LF=tt.create({name:"paste",addProseMirrorPlugins(){return[new ut({key:new mn("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),$F=tt.create({name:"tabindex",addProseMirrorPlugins(){return[new ut({key:new mn("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class Oo{get name(){return this.node.type.name}constructor(e,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=i}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new Oo(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Oo(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Oo(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,o=n.isAtom&&!n.isText,s=this.pos+r+(o?0:1),a=this.resolvedPos.doc.resolve(s);if(!i&&a.depth<=this.depth)return;const l=new Oo(a,this.editor,i,i?n:null);i&&(l.actualDepth=this.depth+1),e.push(new Oo(a,this.editor,i,i?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(n).length>0){const o=i.node.attrs,s=Object.keys(n);for(let a=0;a<s.length;a+=1){const l=s[a];if(o[l]!==n[l])break}}else r=i;i=i.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const o=Object.keys(n);return this.children.forEach(s=>{r&&i.length>0||(s.node.type.name===e&&o.every(l=>n[l]===s.node.attrs[l])&&i.push(s),!(r&&i.length>0)&&(i=i.concat(s.querySelectorAll(e,n,r))))}),i}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}}const FF=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function BF(t,e,n){const r=document.querySelector(`style[data-tiptap-style${n?`-${n}`:""}]`);if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute(`data-tiptap-style${n?`-${n}`:""}`,""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}class zF extends Z${constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:r,moved:i})=>this.options.onDrop(n,r,i)),this.on("paste",({event:n,slice:r})=>this.options.onPaste(n,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=BF(FF,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,n=!0){this.setOptions({editable:e}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,n){const r=HT(n)?n(e,[...this.state.plugins]):[...this.state.plugins,e],i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}unregisterPlugin(e){if(this.isDestroyed)return;const n=this.state.plugins;let r=n;if([].concat(e).forEach(o=>{const s=typeof o=="string"?`${o}$`:o.key;r=n.filter(a=>!a.key.startsWith(s))}),n.length===r.length)return;const i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}createExtensionManager(){var e,n;const i=[...this.options.enableCoreExtensions?[NF,p3.configure({blockSeparator:(n=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||n===void 0?void 0:n.blockSeparator}),AF,IF,jF,$F,DF,LF].filter(o=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[o.name]!==!1:!0):[],...this.options.extensions].filter(o=>["extension","node","mark"].includes(o==null?void 0:o.type));this.extensionManager=new oa(i,this)}createCommandManager(){this.commandManager=new Rh({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let n;try{n=cy(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(s){if(!(s instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(s.message))throw s;this.emit("contentError",{editor:this,error:s,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(a=>a.name!=="collaboration"),this.createExtensionManager()}}),n=cy(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=GT(n,this.options.autofocus);this.view=new y$(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:ia.create({doc:n,selection:r||void 0})});const i=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(i),this.createNodeViews(),this.prependClass();const o=this.view.dom;o.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(s=>{var a;return(a=this.capturedTransaction)===null||a===void 0?void 0:a.step(s)});return}const n=this.state.apply(e),r=!this.state.selection.eq(n.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:n}),this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=e.getMeta("focus"),o=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),o&&this.emit("blur",{editor:this,event:o.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return cF(this.state,e)}isActive(e,n){const r=typeof e=="string"?e:null,i=typeof e=="string"?n:e;return uF(this.state,r,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return l0(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:n=`

`,textSerializers:r={}}=e||{};return aF(this.state.doc,{blockSeparator:n,textSerializers:{...KT(this.schema),...r}})}get isEmpty(){return Dh(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,n))||null}$nodes(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,n))||null}$pos(e){const n=this.state.doc.resolve(e);return new Oo(n,this)}get $doc(){return this.$pos(0)}}function qa(t){return new Ph({find:t.find,handler:({state:e,range:n,match:r})=>{const i=ae(t.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:o}=e,s=r[r.length-1],a=r[0];if(s){const l=a.search(/\S/),c=n.from+a.indexOf(s),u=c+s.length;if(XT(n.from,n.to,e.doc).filter(p=>p.mark.type.excluded.find(g=>g===t.type&&g!==p.mark.type)).filter(p=>p.to>c).length)return null;u<n.to&&o.delete(u,n.to),c>n.from&&o.delete(n.from+l,c);const f=n.from+l+s.length;o.addMark(n.from+l,f,t.type.create(i||{})),o.removeStoredMark(t.type)}}})}function UF(t){return new Ph({find:t.find,handler:({state:e,range:n,match:r})=>{const i=ae(t.getAttributes,void 0,r)||{},{tr:o}=e,s=n.from;let a=n.to;const l=t.type.create(i);if(r[1]){const c=r[0].lastIndexOf(r[1]);let u=s+c;u>a?u=a:a=u+r[1].length;const d=r[0][r[0].length-1];o.insertText(d,s+r[0].length-1),o.replaceWith(u,a,l)}else if(r[0]){const c=t.type.isInline?s:s-1;o.insert(c,t.type.create(i)).delete(o.mapping.map(s),o.mapping.map(a))}o.scrollIntoView()}})}function dy(t){return new Ph({find:t.find,handler:({state:e,range:n,match:r})=>{const i=e.doc.resolve(n.from),o=ae(t.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,o)}})}function $c(t){return new Ph({find:t.find,handler:({state:e,range:n,match:r,chain:i})=>{const o=ae(t.getAttributes,void 0,r)||{},s=e.tr.delete(n.from,n.to),l=s.doc.resolve(n.from).blockRange(),c=l&&Jv(l,t.type,o);if(!c)return null;if(s.wrap(l,c),t.keepMarks&&t.editor){const{selection:d,storedMarks:f}=e,{splittableMarks:p}=t.editor.extensionManager,m=f||d.$to.parentOffset&&d.$from.marks();if(m){const g=m.filter(x=>p.includes(x.type.name));s.ensureMarks(g)}}if(t.keepAttributes){const d=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(d,o).run()}const u=s.doc.resolve(n.from-1).nodeBefore;u&&u.type===t.type&&lo(s.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,u))&&s.join(n.from-1)}})}let ir=class fy{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ae(G(this,"addOptions",{name:this.name}))),this.storage=ae(G(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new fy(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>Mh(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new fy(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=ae(G(n,"addOptions",{name:n.name})),n.storage=ae(G(n,"addStorage",{name:n.name,options:n.options})),n}};function Ga(t){return new l3({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:i})=>{const o=ae(t.getAttributes,void 0,r,i);if(o===!1||o===null)return null;const{tr:s}=e,a=r[r.length-1],l=r[0];let c=n.to;if(a){const u=l.search(/\S/),d=n.from+l.indexOf(a),f=d+a.length;if(XT(n.from,n.to,e.doc).filter(m=>m.mark.type.excluded.find(x=>x===t.type&&x!==m.mark.type)).filter(m=>m.to>d).length)return null;f<n.to&&s.delete(f,n.to),d>n.from&&s.delete(n.from+u,d),c=n.from+u+a.length,s.addMark(n.from+u,c,t.type.create(o||{})),s.removeStoredMark(t.type)}}})}function VF(t){return t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}var Xt="top",Nn="bottom",In="right",Zt="left",p0="auto",yu=[Xt,Nn,In,Zt],Ja="start",Fc="end",HF="clippingParents",e_="viewport",Tl="popper",WF="reference",Qb=yu.reduce(function(t,e){return t.concat([e+"-"+Ja,e+"-"+Fc])},[]),t_=[].concat(yu,[p0]).reduce(function(t,e){return t.concat([e,e+"-"+Ja,e+"-"+Fc])},[]),KF="beforeRead",qF="read",GF="afterRead",JF="beforeMain",YF="main",QF="afterMain",XF="beforeWrite",ZF="write",eB="afterWrite",tB=[KF,qF,GF,JF,YF,QF,XF,ZF,eB];function Tr(t){return t?(t.nodeName||"").toLowerCase():null}function fn(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function hs(t){var e=fn(t).Element;return t instanceof e||t instanceof Element}function Rn(t){var e=fn(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function m0(t){if(typeof ShadowRoot>"u")return!1;var e=fn(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function nB(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},i=e.attributes[n]||{},o=e.elements[n];!Rn(o)||!Tr(o)||(Object.assign(o.style,r),Object.keys(i).forEach(function(s){var a=i[s];a===!1?o.removeAttribute(s):o.setAttribute(s,a===!0?"":a)}))})}function rB(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],o=e.attributes[r]||{},s=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),a=s.reduce(function(l,c){return l[c]="",l},{});!Rn(i)||!Tr(i)||(Object.assign(i.style,a),Object.keys(o).forEach(function(l){i.removeAttribute(l)}))})}}const n_={name:"applyStyles",enabled:!0,phase:"write",fn:nB,effect:rB,requires:["computeStyles"]};function Sr(t){return t.split("-")[0]}var Qo=Math.max,jf=Math.min,Ya=Math.round;function hy(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function r_(){return!/^((?!chrome|android).)*safari/i.test(hy())}function Qa(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),i=1,o=1;e&&Rn(t)&&(i=t.offsetWidth>0&&Ya(r.width)/t.offsetWidth||1,o=t.offsetHeight>0&&Ya(r.height)/t.offsetHeight||1);var s=hs(t)?fn(t):window,a=s.visualViewport,l=!r_()&&n,c=(r.left+(l&&a?a.offsetLeft:0))/i,u=(r.top+(l&&a?a.offsetTop:0))/o,d=r.width/i,f=r.height/o;return{width:d,height:f,top:u,right:c+d,bottom:u+f,left:c,x:c,y:u}}function g0(t){var e=Qa(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function i_(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&m0(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Qr(t){return fn(t).getComputedStyle(t)}function iB(t){return["table","td","th"].indexOf(Tr(t))>=0}function fo(t){return((hs(t)?t.ownerDocument:t.document)||window.document).documentElement}function Nh(t){return Tr(t)==="html"?t:t.assignedSlot||t.parentNode||(m0(t)?t.host:null)||fo(t)}function Xb(t){return!Rn(t)||Qr(t).position==="fixed"?null:t.offsetParent}function oB(t){var e=/firefox/i.test(hy()),n=/Trident/i.test(hy());if(n&&Rn(t)){var r=Qr(t);if(r.position==="fixed")return null}var i=Nh(t);for(m0(i)&&(i=i.host);Rn(i)&&["html","body"].indexOf(Tr(i))<0;){var o=Qr(i);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||e&&o.willChange==="filter"||e&&o.filter&&o.filter!=="none")return i;i=i.parentNode}return null}function vu(t){for(var e=fn(t),n=Xb(t);n&&iB(n)&&Qr(n).position==="static";)n=Xb(n);return n&&(Tr(n)==="html"||Tr(n)==="body"&&Qr(n).position==="static")?e:n||oB(t)||e}function y0(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function sc(t,e,n){return Qo(t,jf(e,n))}function sB(t,e,n){var r=sc(t,e,n);return r>n?n:r}function o_(){return{top:0,right:0,bottom:0,left:0}}function s_(t){return Object.assign({},o_(),t)}function a_(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var aB=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,s_(typeof e!="number"?e:a_(e,yu))};function lB(t){var e,n=t.state,r=t.name,i=t.options,o=n.elements.arrow,s=n.modifiersData.popperOffsets,a=Sr(n.placement),l=y0(a),c=[Zt,In].indexOf(a)>=0,u=c?"height":"width";if(!(!o||!s)){var d=aB(i.padding,n),f=g0(o),p=l==="y"?Xt:Zt,m=l==="y"?Nn:In,g=n.rects.reference[u]+n.rects.reference[l]-s[l]-n.rects.popper[u],x=s[l]-n.rects.reference[l],v=vu(o),w=v?l==="y"?v.clientHeight||0:v.clientWidth||0:0,S=g/2-x/2,b=d[p],C=w-f[u]-d[m],k=w/2-f[u]/2+S,E=sc(b,k,C),_=l;n.modifiersData[r]=(e={},e[_]=E,e.centerOffset=E-k,e)}}function cB(t){var e=t.state,n=t.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||i_(e.elements.popper,i)&&(e.elements.arrow=i))}const uB={name:"arrow",enabled:!0,phase:"main",fn:lB,effect:cB,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Xa(t){return t.split("-")[1]}var dB={top:"auto",right:"auto",bottom:"auto",left:"auto"};function fB(t,e){var n=t.x,r=t.y,i=e.devicePixelRatio||1;return{x:Ya(n*i)/i||0,y:Ya(r*i)/i||0}}function Zb(t){var e,n=t.popper,r=t.popperRect,i=t.placement,o=t.variation,s=t.offsets,a=t.position,l=t.gpuAcceleration,c=t.adaptive,u=t.roundOffsets,d=t.isFixed,f=s.x,p=f===void 0?0:f,m=s.y,g=m===void 0?0:m,x=typeof u=="function"?u({x:p,y:g}):{x:p,y:g};p=x.x,g=x.y;var v=s.hasOwnProperty("x"),w=s.hasOwnProperty("y"),S=Zt,b=Xt,C=window;if(c){var k=vu(n),E="clientHeight",_="clientWidth";if(k===fn(n)&&(k=fo(n),Qr(k).position!=="static"&&a==="absolute"&&(E="scrollHeight",_="scrollWidth")),k=k,i===Xt||(i===Zt||i===In)&&o===Fc){b=Nn;var P=d&&k===C&&C.visualViewport?C.visualViewport.height:k[E];g-=P-r.height,g*=l?1:-1}if(i===Zt||(i===Xt||i===Nn)&&o===Fc){S=In;var R=d&&k===C&&C.visualViewport?C.visualViewport.width:k[_];p-=R-r.width,p*=l?1:-1}}var N=Object.assign({position:a},c&&dB),A=u===!0?fB({x:p,y:g},fn(n)):{x:p,y:g};if(p=A.x,g=A.y,l){var I;return Object.assign({},N,(I={},I[b]=w?"0":"",I[S]=v?"0":"",I.transform=(C.devicePixelRatio||1)<=1?"translate("+p+"px, "+g+"px)":"translate3d("+p+"px, "+g+"px, 0)",I))}return Object.assign({},N,(e={},e[b]=w?g+"px":"",e[S]=v?p+"px":"",e.transform="",e))}function hB(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=r===void 0?!0:r,o=n.adaptive,s=o===void 0?!0:o,a=n.roundOffsets,l=a===void 0?!0:a,c={placement:Sr(e.placement),variation:Xa(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Zb(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:s,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Zb(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const pB={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:hB,data:{}};var dd={passive:!0};function mB(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,o=i===void 0?!0:i,s=r.resize,a=s===void 0?!0:s,l=fn(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&c.forEach(function(u){u.addEventListener("scroll",n.update,dd)}),a&&l.addEventListener("resize",n.update,dd),function(){o&&c.forEach(function(u){u.removeEventListener("scroll",n.update,dd)}),a&&l.removeEventListener("resize",n.update,dd)}}const gB={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:mB,data:{}};var yB={left:"right",right:"left",bottom:"top",top:"bottom"};function Ud(t){return t.replace(/left|right|bottom|top/g,function(e){return yB[e]})}var vB={start:"end",end:"start"};function e1(t){return t.replace(/start|end/g,function(e){return vB[e]})}function v0(t){var e=fn(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function x0(t){return Qa(fo(t)).left+v0(t).scrollLeft}function xB(t,e){var n=fn(t),r=fo(t),i=n.visualViewport,o=r.clientWidth,s=r.clientHeight,a=0,l=0;if(i){o=i.width,s=i.height;var c=r_();(c||!c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:o,height:s,x:a+x0(t),y:l}}function wB(t){var e,n=fo(t),r=v0(t),i=(e=t.ownerDocument)==null?void 0:e.body,o=Qo(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=Qo(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+x0(t),l=-r.scrollTop;return Qr(i||n).direction==="rtl"&&(a+=Qo(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:s,x:a,y:l}}function w0(t){var e=Qr(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function l_(t){return["html","body","#document"].indexOf(Tr(t))>=0?t.ownerDocument.body:Rn(t)&&w0(t)?t:l_(Nh(t))}function ac(t,e){var n;e===void 0&&(e=[]);var r=l_(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),o=fn(r),s=i?[o].concat(o.visualViewport||[],w0(r)?r:[]):r,a=e.concat(s);return i?a:a.concat(ac(Nh(s)))}function py(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function bB(t,e){var n=Qa(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function t1(t,e,n){return e===e_?py(xB(t,n)):hs(e)?bB(e,n):py(wB(fo(t)))}function SB(t){var e=ac(Nh(t)),n=["absolute","fixed"].indexOf(Qr(t).position)>=0,r=n&&Rn(t)?vu(t):t;return hs(r)?e.filter(function(i){return hs(i)&&i_(i,r)&&Tr(i)!=="body"}):[]}function CB(t,e,n,r){var i=e==="clippingParents"?SB(t):[].concat(e),o=[].concat(i,[n]),s=o[0],a=o.reduce(function(l,c){var u=t1(t,c,r);return l.top=Qo(u.top,l.top),l.right=jf(u.right,l.right),l.bottom=jf(u.bottom,l.bottom),l.left=Qo(u.left,l.left),l},t1(t,s,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function c_(t){var e=t.reference,n=t.element,r=t.placement,i=r?Sr(r):null,o=r?Xa(r):null,s=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,l;switch(i){case Xt:l={x:s,y:e.y-n.height};break;case Nn:l={x:s,y:e.y+e.height};break;case In:l={x:e.x+e.width,y:a};break;case Zt:l={x:e.x-n.width,y:a};break;default:l={x:e.x,y:e.y}}var c=i?y0(i):null;if(c!=null){var u=c==="y"?"height":"width";switch(o){case Ja:l[c]=l[c]-(e[u]/2-n[u]/2);break;case Fc:l[c]=l[c]+(e[u]/2-n[u]/2);break}}return l}function Bc(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=r===void 0?t.placement:r,o=n.strategy,s=o===void 0?t.strategy:o,a=n.boundary,l=a===void 0?HF:a,c=n.rootBoundary,u=c===void 0?e_:c,d=n.elementContext,f=d===void 0?Tl:d,p=n.altBoundary,m=p===void 0?!1:p,g=n.padding,x=g===void 0?0:g,v=s_(typeof x!="number"?x:a_(x,yu)),w=f===Tl?WF:Tl,S=t.rects.popper,b=t.elements[m?w:f],C=CB(hs(b)?b:b.contextElement||fo(t.elements.popper),l,u,s),k=Qa(t.elements.reference),E=c_({reference:k,element:S,strategy:"absolute",placement:i}),_=py(Object.assign({},S,E)),P=f===Tl?_:k,R={top:C.top-P.top+v.top,bottom:P.bottom-C.bottom+v.bottom,left:C.left-P.left+v.left,right:P.right-C.right+v.right},N=t.modifiersData.offset;if(f===Tl&&N){var A=N[i];Object.keys(R).forEach(function(I){var O=[In,Nn].indexOf(I)>=0?1:-1,L=[Xt,Nn].indexOf(I)>=0?"y":"x";R[I]+=A[L]*O})}return R}function kB(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=n.boundary,o=n.rootBoundary,s=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?t_:l,u=Xa(r),d=u?a?Qb:Qb.filter(function(m){return Xa(m)===u}):yu,f=d.filter(function(m){return c.indexOf(m)>=0});f.length===0&&(f=d);var p=f.reduce(function(m,g){return m[g]=Bc(t,{placement:g,boundary:i,rootBoundary:o,padding:s})[Sr(g)],m},{});return Object.keys(p).sort(function(m,g){return p[m]-p[g]})}function EB(t){if(Sr(t)===p0)return[];var e=Ud(t);return[e1(t),e,e1(e)]}function TB(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,o=i===void 0?!0:i,s=n.altAxis,a=s===void 0?!0:s,l=n.fallbackPlacements,c=n.padding,u=n.boundary,d=n.rootBoundary,f=n.altBoundary,p=n.flipVariations,m=p===void 0?!0:p,g=n.allowedAutoPlacements,x=e.options.placement,v=Sr(x),w=v===x,S=l||(w||!m?[Ud(x)]:EB(x)),b=[x].concat(S).reduce(function(he,_e){return he.concat(Sr(_e)===p0?kB(e,{placement:_e,boundary:u,rootBoundary:d,padding:c,flipVariations:m,allowedAutoPlacements:g}):_e)},[]),C=e.rects.reference,k=e.rects.popper,E=new Map,_=!0,P=b[0],R=0;R<b.length;R++){var N=b[R],A=Sr(N),I=Xa(N)===Ja,O=[Xt,Nn].indexOf(A)>=0,L=O?"width":"height",$=Bc(e,{placement:N,boundary:u,rootBoundary:d,altBoundary:f,padding:c}),H=O?I?In:Zt:I?Nn:Xt;C[L]>k[L]&&(H=Ud(H));var M=Ud(H),D=[];if(o&&D.push($[A]<=0),a&&D.push($[H]<=0,$[M]<=0),D.every(function(he){return he})){P=N,_=!1;break}E.set(N,D)}if(_)for(var B=m?3:1,Q=function(_e){var Ce=b.find(function(je){var bt=E.get(je);if(bt)return bt.slice(0,_e).every(function(Ve){return Ve})});if(Ce)return P=Ce,"break"},U=B;U>0;U--){var ee=Q(U);if(ee==="break")break}e.placement!==P&&(e.modifiersData[r]._skip=!0,e.placement=P,e.reset=!0)}}const _B={name:"flip",enabled:!0,phase:"main",fn:TB,requiresIfExists:["offset"],data:{_skip:!1}};function n1(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function r1(t){return[Xt,In,Nn,Zt].some(function(e){return t[e]>=0})}function RB(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,o=e.modifiersData.preventOverflow,s=Bc(e,{elementContext:"reference"}),a=Bc(e,{altBoundary:!0}),l=n1(s,r),c=n1(a,i,o),u=r1(l),d=r1(c);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}const OB={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:RB};function PB(t,e,n){var r=Sr(t),i=[Zt,Xt].indexOf(r)>=0?-1:1,o=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,s=o[0],a=o[1];return s=s||0,a=(a||0)*i,[Zt,In].indexOf(r)>=0?{x:a,y:s}:{x:s,y:a}}function MB(t){var e=t.state,n=t.options,r=t.name,i=n.offset,o=i===void 0?[0,0]:i,s=t_.reduce(function(u,d){return u[d]=PB(d,e.rects,o),u},{}),a=s[e.placement],l=a.x,c=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[r]=s}const AB={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:MB};function DB(t){var e=t.state,n=t.name;e.modifiersData[n]=c_({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const NB={name:"popperOffsets",enabled:!0,phase:"read",fn:DB,data:{}};function IB(t){return t==="x"?"y":"x"}function jB(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,o=i===void 0?!0:i,s=n.altAxis,a=s===void 0?!1:s,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,d=n.padding,f=n.tether,p=f===void 0?!0:f,m=n.tetherOffset,g=m===void 0?0:m,x=Bc(e,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),v=Sr(e.placement),w=Xa(e.placement),S=!w,b=y0(v),C=IB(b),k=e.modifiersData.popperOffsets,E=e.rects.reference,_=e.rects.popper,P=typeof g=="function"?g(Object.assign({},e.rects,{placement:e.placement})):g,R=typeof P=="number"?{mainAxis:P,altAxis:P}:Object.assign({mainAxis:0,altAxis:0},P),N=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,A={x:0,y:0};if(k){if(o){var I,O=b==="y"?Xt:Zt,L=b==="y"?Nn:In,$=b==="y"?"height":"width",H=k[b],M=H+x[O],D=H-x[L],B=p?-_[$]/2:0,Q=w===Ja?E[$]:_[$],U=w===Ja?-_[$]:-E[$],ee=e.elements.arrow,he=p&&ee?g0(ee):{width:0,height:0},_e=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:o_(),Ce=_e[O],je=_e[L],bt=sc(0,E[$],he[$]),Ve=S?E[$]/2-B-bt-Ce-R.mainAxis:Q-bt-Ce-R.mainAxis,$t=S?-E[$]/2+B+bt+je+R.mainAxis:U+bt+je+R.mainAxis,Or=e.elements.arrow&&vu(e.elements.arrow),mo=Or?b==="y"?Or.clientTop||0:Or.clientLeft||0:0,Ln=(I=N==null?void 0:N[b])!=null?I:0,go=H+Ve-Ln-mo,Ts=H+$t-Ln,yo=sc(p?jf(M,go):M,H,p?Qo(D,Ts):D);k[b]=yo,A[b]=yo-H}if(a){var vo,_s=b==="x"?Xt:Zt,Pr=b==="x"?Nn:In,Mr=k[C],ti=C==="y"?"height":"width",hl=Mr+x[_s],xo=Mr-x[Pr],pl=[Xt,Zt].indexOf(v)!==-1,_u=(vo=N==null?void 0:N[C])!=null?vo:0,Ru=pl?hl:Mr-E[ti]-_[ti]-_u+R.altAxis,Ou=pl?Mr+E[ti]+_[ti]-_u-R.altAxis:xo,Pu=p&&pl?sB(Ru,Mr,Ou):sc(p?Ru:hl,Mr,p?Ou:xo);k[C]=Pu,A[C]=Pu-Mr}e.modifiersData[r]=A}}const LB={name:"preventOverflow",enabled:!0,phase:"main",fn:jB,requiresIfExists:["offset"]};function $B(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function FB(t){return t===fn(t)||!Rn(t)?v0(t):$B(t)}function BB(t){var e=t.getBoundingClientRect(),n=Ya(e.width)/t.offsetWidth||1,r=Ya(e.height)/t.offsetHeight||1;return n!==1||r!==1}function zB(t,e,n){n===void 0&&(n=!1);var r=Rn(e),i=Rn(e)&&BB(e),o=fo(e),s=Qa(t,i,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((Tr(e)!=="body"||w0(o))&&(a=FB(e)),Rn(e)?(l=Qa(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):o&&(l.x=x0(o))),{x:s.left+a.scrollLeft-l.x,y:s.top+a.scrollTop-l.y,width:s.width,height:s.height}}function UB(t){var e=new Map,n=new Set,r=[];t.forEach(function(o){e.set(o.name,o)});function i(o){n.add(o.name);var s=[].concat(o.requires||[],o.requiresIfExists||[]);s.forEach(function(a){if(!n.has(a)){var l=e.get(a);l&&i(l)}}),r.push(o)}return t.forEach(function(o){n.has(o.name)||i(o)}),r}function VB(t){var e=UB(t);return tB.reduce(function(n,r){return n.concat(e.filter(function(i){return i.phase===r}))},[])}function HB(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function WB(t){var e=t.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var i1={placement:"bottom",modifiers:[],strategy:"absolute"};function o1(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function KB(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,i=e.defaultOptions,o=i===void 0?i1:i;return function(a,l,c){c===void 0&&(c=o);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},i1,o),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},d=[],f=!1,p={state:u,setOptions:function(v){var w=typeof v=="function"?v(u.options):v;g(),u.options=Object.assign({},o,u.options,w),u.scrollParents={reference:hs(a)?ac(a):a.contextElement?ac(a.contextElement):[],popper:ac(l)};var S=VB(WB([].concat(r,u.options.modifiers)));return u.orderedModifiers=S.filter(function(b){return b.enabled}),m(),p.update()},forceUpdate:function(){if(!f){var v=u.elements,w=v.reference,S=v.popper;if(o1(w,S)){u.rects={reference:zB(w,vu(S),u.options.strategy==="fixed"),popper:g0(S)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(R){return u.modifiersData[R.name]=Object.assign({},R.data)});for(var b=0;b<u.orderedModifiers.length;b++){if(u.reset===!0){u.reset=!1,b=-1;continue}var C=u.orderedModifiers[b],k=C.fn,E=C.options,_=E===void 0?{}:E,P=C.name;typeof k=="function"&&(u=k({state:u,options:_,name:P,instance:p})||u)}}}},update:HB(function(){return new Promise(function(x){p.forceUpdate(),x(u)})}),destroy:function(){g(),f=!0}};if(!o1(a,l))return p;p.setOptions(c).then(function(x){!f&&c.onFirstUpdate&&c.onFirstUpdate(x)});function m(){u.orderedModifiers.forEach(function(x){var v=x.name,w=x.options,S=w===void 0?{}:w,b=x.effect;if(typeof b=="function"){var C=b({state:u,name:v,instance:p,options:S}),k=function(){};d.push(C||k)}})}function g(){d.forEach(function(x){return x()}),d=[]}return p}}var qB=[gB,NB,pB,n_,AB,_B,LB,uB,OB],GB=KB({defaultModifiers:qB}),JB="tippy-box",u_="tippy-content",YB="tippy-backdrop",d_="tippy-arrow",f_="tippy-svg-arrow",To={passive:!0,capture:!0},h_=function(){return document.body};function tm(t,e,n){if(Array.isArray(t)){var r=t[e];return r??(Array.isArray(n)?n[e]:n)}return t}function b0(t,e){var n={}.toString.call(t);return n.indexOf("[object")===0&&n.indexOf(e+"]")>-1}function p_(t,e){return typeof t=="function"?t.apply(void 0,e):t}function s1(t,e){if(e===0)return t;var n;return function(r){clearTimeout(n),n=setTimeout(function(){t(r)},e)}}function QB(t){return t.split(/\s+/).filter(Boolean)}function Hs(t){return[].concat(t)}function a1(t,e){t.indexOf(e)===-1&&t.push(e)}function XB(t){return t.filter(function(e,n){return t.indexOf(e)===n})}function ZB(t){return t.split("-")[0]}function Lf(t){return[].slice.call(t)}function l1(t){return Object.keys(t).reduce(function(e,n){return t[n]!==void 0&&(e[n]=t[n]),e},{})}function lc(){return document.createElement("div")}function Ih(t){return["Element","Fragment"].some(function(e){return b0(t,e)})}function e4(t){return b0(t,"NodeList")}function t4(t){return b0(t,"MouseEvent")}function n4(t){return!!(t&&t._tippy&&t._tippy.reference===t)}function r4(t){return Ih(t)?[t]:e4(t)?Lf(t):Array.isArray(t)?t:Lf(document.querySelectorAll(t))}function nm(t,e){t.forEach(function(n){n&&(n.style.transitionDuration=e+"ms")})}function c1(t,e){t.forEach(function(n){n&&n.setAttribute("data-state",e)})}function i4(t){var e,n=Hs(t),r=n[0];return r!=null&&(e=r.ownerDocument)!=null&&e.body?r.ownerDocument:document}function o4(t,e){var n=e.clientX,r=e.clientY;return t.every(function(i){var o=i.popperRect,s=i.popperState,a=i.props,l=a.interactiveBorder,c=ZB(s.placement),u=s.modifiersData.offset;if(!u)return!0;var d=c==="bottom"?u.top.y:0,f=c==="top"?u.bottom.y:0,p=c==="right"?u.left.x:0,m=c==="left"?u.right.x:0,g=o.top-r+d>l,x=r-o.bottom-f>l,v=o.left-n+p>l,w=n-o.right-m>l;return g||x||v||w})}function rm(t,e,n){var r=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(i){t[r](i,n)})}function u1(t,e){for(var n=e;n;){var r;if(t.contains(n))return!0;n=n.getRootNode==null||(r=n.getRootNode())==null?void 0:r.host}return!1}var gr={isTouch:!1},d1=0;function s4(){gr.isTouch||(gr.isTouch=!0,window.performance&&document.addEventListener("mousemove",m_))}function m_(){var t=performance.now();t-d1<20&&(gr.isTouch=!1,document.removeEventListener("mousemove",m_)),d1=t}function a4(){var t=document.activeElement;if(n4(t)){var e=t._tippy;t.blur&&!e.state.isVisible&&t.blur()}}function l4(){document.addEventListener("touchstart",s4,To),window.addEventListener("blur",a4)}var c4=typeof window<"u"&&typeof document<"u",u4=c4?!!window.msCrypto:!1,d4={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},f4={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},qn=Object.assign({appendTo:h_,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},d4,f4),h4=Object.keys(qn),p4=function(e){var n=Object.keys(e);n.forEach(function(r){qn[r]=e[r]})};function g_(t){var e=t.plugins||[],n=e.reduce(function(r,i){var o=i.name,s=i.defaultValue;if(o){var a;r[o]=t[o]!==void 0?t[o]:(a=qn[o])!=null?a:s}return r},{});return Object.assign({},t,n)}function m4(t,e){var n=e?Object.keys(g_(Object.assign({},qn,{plugins:e}))):h4,r=n.reduce(function(i,o){var s=(t.getAttribute("data-tippy-"+o)||"").trim();if(!s)return i;if(o==="content")i[o]=s;else try{i[o]=JSON.parse(s)}catch{i[o]=s}return i},{});return r}function f1(t,e){var n=Object.assign({},e,{content:p_(e.content,[t])},e.ignoreAttributes?{}:m4(t,e.plugins));return n.aria=Object.assign({},qn.aria,n.aria),n.aria={expanded:n.aria.expanded==="auto"?e.interactive:n.aria.expanded,content:n.aria.content==="auto"?e.interactive?null:"describedby":n.aria.content},n}var g4=function(){return"innerHTML"};function my(t,e){t[g4()]=e}function h1(t){var e=lc();return t===!0?e.className=d_:(e.className=f_,Ih(t)?e.appendChild(t):my(e,t)),e}function p1(t,e){Ih(e.content)?(my(t,""),t.appendChild(e.content)):typeof e.content!="function"&&(e.allowHTML?my(t,e.content):t.textContent=e.content)}function gy(t){var e=t.firstElementChild,n=Lf(e.children);return{box:e,content:n.find(function(r){return r.classList.contains(u_)}),arrow:n.find(function(r){return r.classList.contains(d_)||r.classList.contains(f_)}),backdrop:n.find(function(r){return r.classList.contains(YB)})}}function y_(t){var e=lc(),n=lc();n.className=JB,n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=lc();r.className=u_,r.setAttribute("data-state","hidden"),p1(r,t.props),e.appendChild(n),n.appendChild(r),i(t.props,t.props);function i(o,s){var a=gy(e),l=a.box,c=a.content,u=a.arrow;s.theme?l.setAttribute("data-theme",s.theme):l.removeAttribute("data-theme"),typeof s.animation=="string"?l.setAttribute("data-animation",s.animation):l.removeAttribute("data-animation"),s.inertia?l.setAttribute("data-inertia",""):l.removeAttribute("data-inertia"),l.style.maxWidth=typeof s.maxWidth=="number"?s.maxWidth+"px":s.maxWidth,s.role?l.setAttribute("role",s.role):l.removeAttribute("role"),(o.content!==s.content||o.allowHTML!==s.allowHTML)&&p1(c,t.props),s.arrow?u?o.arrow!==s.arrow&&(l.removeChild(u),l.appendChild(h1(s.arrow))):l.appendChild(h1(s.arrow)):u&&l.removeChild(u)}return{popper:e,onUpdate:i}}y_.$$tippy=!0;var y4=1,fd=[],im=[];function v4(t,e){var n=f1(t,Object.assign({},qn,g_(l1(e)))),r,i,o,s=!1,a=!1,l=!1,c=!1,u,d,f,p=[],m=s1(go,n.interactiveDebounce),g,x=y4++,v=null,w=XB(n.plugins),S={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},b={id:x,reference:t,popper:lc(),popperInstance:v,props:n,state:S,plugins:w,clearDelayTimeouts:Ru,setProps:Ou,setContent:Pu,show:zO,hide:UO,hideWithInteractivity:VO,enable:pl,disable:_u,unmount:HO,destroy:WO};if(!n.render)return b;var C=n.render(b),k=C.popper,E=C.onUpdate;k.setAttribute("data-tippy-root",""),k.id="tippy-"+b.id,b.popper=k,t._tippy=b,k._tippy=b;var _=w.map(function(j){return j.fn(b)}),P=t.hasAttribute("aria-expanded");return Or(),B(),H(),M("onCreate",[b]),n.showOnCreate&&hl(),k.addEventListener("mouseenter",function(){b.props.interactive&&b.state.isVisible&&b.clearDelayTimeouts()}),k.addEventListener("mouseleave",function(){b.props.interactive&&b.props.trigger.indexOf("mouseenter")>=0&&O().addEventListener("mousemove",m)}),b;function R(){var j=b.props.touch;return Array.isArray(j)?j:[j,0]}function N(){return R()[0]==="hold"}function A(){var j;return!!((j=b.props.render)!=null&&j.$$tippy)}function I(){return g||t}function O(){var j=I().parentNode;return j?i4(j):document}function L(){return gy(k)}function $(j){return b.state.isMounted&&!b.state.isVisible||gr.isTouch||u&&u.type==="focus"?0:tm(b.props.delay,j?0:1,qn.delay)}function H(j){j===void 0&&(j=!1),k.style.pointerEvents=b.props.interactive&&!j?"":"none",k.style.zIndex=""+b.props.zIndex}function M(j,Y,ne){if(ne===void 0&&(ne=!0),_.forEach(function(de){de[j]&&de[j].apply(de,Y)}),ne){var pe;(pe=b.props)[j].apply(pe,Y)}}function D(){var j=b.props.aria;if(j.content){var Y="aria-"+j.content,ne=k.id,pe=Hs(b.props.triggerTarget||t);pe.forEach(function(de){var St=de.getAttribute(Y);if(b.state.isVisible)de.setAttribute(Y,St?St+" "+ne:ne);else{var yn=St&&St.replace(ne,"").trim();yn?de.setAttribute(Y,yn):de.removeAttribute(Y)}})}}function B(){if(!(P||!b.props.aria.expanded)){var j=Hs(b.props.triggerTarget||t);j.forEach(function(Y){b.props.interactive?Y.setAttribute("aria-expanded",b.state.isVisible&&Y===I()?"true":"false"):Y.removeAttribute("aria-expanded")})}}function Q(){O().removeEventListener("mousemove",m),fd=fd.filter(function(j){return j!==m})}function U(j){if(!(gr.isTouch&&(l||j.type==="mousedown"))){var Y=j.composedPath&&j.composedPath()[0]||j.target;if(!(b.props.interactive&&u1(k,Y))){if(Hs(b.props.triggerTarget||t).some(function(ne){return u1(ne,Y)})){if(gr.isTouch||b.state.isVisible&&b.props.trigger.indexOf("click")>=0)return}else M("onClickOutside",[b,j]);b.props.hideOnClick===!0&&(b.clearDelayTimeouts(),b.hide(),a=!0,setTimeout(function(){a=!1}),b.state.isMounted||Ce())}}}function ee(){l=!0}function he(){l=!1}function _e(){var j=O();j.addEventListener("mousedown",U,!0),j.addEventListener("touchend",U,To),j.addEventListener("touchstart",he,To),j.addEventListener("touchmove",ee,To)}function Ce(){var j=O();j.removeEventListener("mousedown",U,!0),j.removeEventListener("touchend",U,To),j.removeEventListener("touchstart",he,To),j.removeEventListener("touchmove",ee,To)}function je(j,Y){Ve(j,function(){!b.state.isVisible&&k.parentNode&&k.parentNode.contains(k)&&Y()})}function bt(j,Y){Ve(j,Y)}function Ve(j,Y){var ne=L().box;function pe(de){de.target===ne&&(rm(ne,"remove",pe),Y())}if(j===0)return Y();rm(ne,"remove",d),rm(ne,"add",pe),d=pe}function $t(j,Y,ne){ne===void 0&&(ne=!1);var pe=Hs(b.props.triggerTarget||t);pe.forEach(function(de){de.addEventListener(j,Y,ne),p.push({node:de,eventType:j,handler:Y,options:ne})})}function Or(){N()&&($t("touchstart",Ln,{passive:!0}),$t("touchend",Ts,{passive:!0})),QB(b.props.trigger).forEach(function(j){if(j!=="manual")switch($t(j,Ln),j){case"mouseenter":$t("mouseleave",Ts);break;case"focus":$t(u4?"focusout":"blur",yo);break;case"focusin":$t("focusout",yo);break}})}function mo(){p.forEach(function(j){var Y=j.node,ne=j.eventType,pe=j.handler,de=j.options;Y.removeEventListener(ne,pe,de)}),p=[]}function Ln(j){var Y,ne=!1;if(!(!b.state.isEnabled||vo(j)||a)){var pe=((Y=u)==null?void 0:Y.type)==="focus";u=j,g=j.currentTarget,B(),!b.state.isVisible&&t4(j)&&fd.forEach(function(de){return de(j)}),j.type==="click"&&(b.props.trigger.indexOf("mouseenter")<0||s)&&b.props.hideOnClick!==!1&&b.state.isVisible?ne=!0:hl(j),j.type==="click"&&(s=!ne),ne&&!pe&&xo(j)}}function go(j){var Y=j.target,ne=I().contains(Y)||k.contains(Y);if(!(j.type==="mousemove"&&ne)){var pe=ti().concat(k).map(function(de){var St,yn=de._tippy,Rs=(St=yn.popperInstance)==null?void 0:St.state;return Rs?{popperRect:de.getBoundingClientRect(),popperState:Rs,props:n}:null}).filter(Boolean);o4(pe,j)&&(Q(),xo(j))}}function Ts(j){var Y=vo(j)||b.props.trigger.indexOf("click")>=0&&s;if(!Y){if(b.props.interactive){b.hideWithInteractivity(j);return}xo(j)}}function yo(j){b.props.trigger.indexOf("focusin")<0&&j.target!==I()||b.props.interactive&&j.relatedTarget&&k.contains(j.relatedTarget)||xo(j)}function vo(j){return gr.isTouch?N()!==j.type.indexOf("touch")>=0:!1}function _s(){Pr();var j=b.props,Y=j.popperOptions,ne=j.placement,pe=j.offset,de=j.getReferenceClientRect,St=j.moveTransition,yn=A()?gy(k).arrow:null,Rs=de?{getBoundingClientRect:de,contextElement:de.contextElement||I()}:t,ax={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(Mu){var Os=Mu.state;if(A()){var KO=L(),tp=KO.box;["placement","reference-hidden","escaped"].forEach(function(Au){Au==="placement"?tp.setAttribute("data-placement",Os.placement):Os.attributes.popper["data-popper-"+Au]?tp.setAttribute("data-"+Au,""):tp.removeAttribute("data-"+Au)}),Os.attributes.popper={}}}},wo=[{name:"offset",options:{offset:pe}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!St}},ax];A()&&yn&&wo.push({name:"arrow",options:{element:yn,padding:3}}),wo.push.apply(wo,(Y==null?void 0:Y.modifiers)||[]),b.popperInstance=GB(Rs,k,Object.assign({},Y,{placement:ne,onFirstUpdate:f,modifiers:wo}))}function Pr(){b.popperInstance&&(b.popperInstance.destroy(),b.popperInstance=null)}function Mr(){var j=b.props.appendTo,Y,ne=I();b.props.interactive&&j===h_||j==="parent"?Y=ne.parentNode:Y=p_(j,[ne]),Y.contains(k)||Y.appendChild(k),b.state.isMounted=!0,_s()}function ti(){return Lf(k.querySelectorAll("[data-tippy-root]"))}function hl(j){b.clearDelayTimeouts(),j&&M("onTrigger",[b,j]),_e();var Y=$(!0),ne=R(),pe=ne[0],de=ne[1];gr.isTouch&&pe==="hold"&&de&&(Y=de),Y?r=setTimeout(function(){b.show()},Y):b.show()}function xo(j){if(b.clearDelayTimeouts(),M("onUntrigger",[b,j]),!b.state.isVisible){Ce();return}if(!(b.props.trigger.indexOf("mouseenter")>=0&&b.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(j.type)>=0&&s)){var Y=$(!1);Y?i=setTimeout(function(){b.state.isVisible&&b.hide()},Y):o=requestAnimationFrame(function(){b.hide()})}}function pl(){b.state.isEnabled=!0}function _u(){b.hide(),b.state.isEnabled=!1}function Ru(){clearTimeout(r),clearTimeout(i),cancelAnimationFrame(o)}function Ou(j){if(!b.state.isDestroyed){M("onBeforeUpdate",[b,j]),mo();var Y=b.props,ne=f1(t,Object.assign({},Y,l1(j),{ignoreAttributes:!0}));b.props=ne,Or(),Y.interactiveDebounce!==ne.interactiveDebounce&&(Q(),m=s1(go,ne.interactiveDebounce)),Y.triggerTarget&&!ne.triggerTarget?Hs(Y.triggerTarget).forEach(function(pe){pe.removeAttribute("aria-expanded")}):ne.triggerTarget&&t.removeAttribute("aria-expanded"),B(),H(),E&&E(Y,ne),b.popperInstance&&(_s(),ti().forEach(function(pe){requestAnimationFrame(pe._tippy.popperInstance.forceUpdate)})),M("onAfterUpdate",[b,j])}}function Pu(j){b.setProps({content:j})}function zO(){var j=b.state.isVisible,Y=b.state.isDestroyed,ne=!b.state.isEnabled,pe=gr.isTouch&&!b.props.touch,de=tm(b.props.duration,0,qn.duration);if(!(j||Y||ne||pe)&&!I().hasAttribute("disabled")&&(M("onShow",[b],!1),b.props.onShow(b)!==!1)){if(b.state.isVisible=!0,A()&&(k.style.visibility="visible"),H(),_e(),b.state.isMounted||(k.style.transition="none"),A()){var St=L(),yn=St.box,Rs=St.content;nm([yn,Rs],0)}f=function(){var wo;if(!(!b.state.isVisible||c)){if(c=!0,k.offsetHeight,k.style.transition=b.props.moveTransition,A()&&b.props.animation){var ep=L(),Mu=ep.box,Os=ep.content;nm([Mu,Os],de),c1([Mu,Os],"visible")}D(),B(),a1(im,b),(wo=b.popperInstance)==null||wo.forceUpdate(),M("onMount",[b]),b.props.animation&&A()&&bt(de,function(){b.state.isShown=!0,M("onShown",[b])})}},Mr()}}function UO(){var j=!b.state.isVisible,Y=b.state.isDestroyed,ne=!b.state.isEnabled,pe=tm(b.props.duration,1,qn.duration);if(!(j||Y||ne)&&(M("onHide",[b],!1),b.props.onHide(b)!==!1)){if(b.state.isVisible=!1,b.state.isShown=!1,c=!1,s=!1,A()&&(k.style.visibility="hidden"),Q(),Ce(),H(!0),A()){var de=L(),St=de.box,yn=de.content;b.props.animation&&(nm([St,yn],pe),c1([St,yn],"hidden"))}D(),B(),b.props.animation?A()&&je(pe,b.unmount):b.unmount()}}function VO(j){O().addEventListener("mousemove",m),a1(fd,m),m(j)}function HO(){b.state.isVisible&&b.hide(),b.state.isMounted&&(Pr(),ti().forEach(function(j){j._tippy.unmount()}),k.parentNode&&k.parentNode.removeChild(k),im=im.filter(function(j){return j!==b}),b.state.isMounted=!1,M("onHidden",[b]))}function WO(){b.state.isDestroyed||(b.clearDelayTimeouts(),b.unmount(),mo(),delete t._tippy,b.state.isDestroyed=!0,M("onDestroy",[b]))}}function xu(t,e){e===void 0&&(e={});var n=qn.plugins.concat(e.plugins||[]);l4();var r=Object.assign({},e,{plugins:n}),i=r4(t),o=i.reduce(function(s,a){var l=a&&v4(a,r);return l&&s.push(l),s},[]);return Ih(t)?o[0]:o}xu.defaultProps=qn;xu.setDefaultProps=p4;xu.currentInput=gr;Object.assign({},n_,{effect:function(e){var n=e.state,r={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(n.elements.popper.style,r.popper),n.styles=r,n.elements.arrow&&Object.assign(n.elements.arrow.style,r.arrow)}});xu.setDefaultProps({render:y_});class x4{constructor({editor:e,element:n,view:r,tippyOptions:i={},updateDelay:o=250,shouldShow:s}){this.preventHide=!1,this.shouldShow=({view:a,state:l,from:c,to:u})=>{const{doc:d,selection:f}=l,{empty:p}=f,m=!d.textBetween(c,u).length&&d0(l.selection),g=this.element.contains(document.activeElement);return!(!(a.hasFocus()||g)||p||m||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:a})=>{var l;if(this.preventHide){this.preventHide=!1;return}a!=null&&a.relatedTarget&&(!((l=this.element.parentNode)===null||l===void 0)&&l.contains(a.relatedTarget))||(a==null?void 0:a.relatedTarget)!==this.editor.view.dom&&this.hide()},this.tippyBlurHandler=a=>{this.blurHandler({event:a})},this.handleDebouncedUpdate=(a,l)=>{const c=!(l!=null&&l.selection.eq(a.state.selection)),u=!(l!=null&&l.doc.eq(a.state.doc));!c&&!u||(this.updateDebounceTimer&&clearTimeout(this.updateDebounceTimer),this.updateDebounceTimer=window.setTimeout(()=>{this.updateHandler(a,c,u,l)},this.updateDelay))},this.updateHandler=(a,l,c,u)=>{var d,f,p;const{state:m,composing:g}=a,{selection:x}=m;if(g||!l&&!c)return;this.createTooltip();const{ranges:w}=x,S=Math.min(...w.map(k=>k.$from.pos)),b=Math.max(...w.map(k=>k.$to.pos));if(!((d=this.shouldShow)===null||d===void 0?void 0:d.call(this,{editor:this.editor,element:this.element,view:a,state:m,oldState:u,from:S,to:b}))){this.hide();return}(f=this.tippy)===null||f===void 0||f.setProps({getReferenceClientRect:((p=this.tippyOptions)===null||p===void 0?void 0:p.getReferenceClientRect)||(()=>{if(ZT(m.selection)){let k=a.nodeDOM(S);if(k){const E=k.dataset.nodeViewWrapper?k:k.querySelector("[data-node-view-wrapper]");if(E&&(k=E.firstChild),k)return k.getBoundingClientRect()}}return dF(a,S,b)})}),this.show()},this.editor=e,this.element=n,this.view=r,this.updateDelay=o,s&&(this.shouldShow=s),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=i,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){const{element:e}=this.editor.options,n=!!e.parentElement;this.tippy||!n||(this.tippy=xu(e,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"top",hideOnClick:"toggle",...this.tippyOptions}),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",this.tippyBlurHandler))}update(e,n){const{state:r}=e,i=r.selection.from!==r.selection.to;if(this.updateDelay>0&&i){this.handleDebouncedUpdate(e,n);return}const o=!(n!=null&&n.selection.eq(e.state.selection)),s=!(n!=null&&n.doc.eq(e.state.doc));this.updateHandler(e,o,s,n)}show(){var e;(e=this.tippy)===null||e===void 0||e.show()}hide(){var e;(e=this.tippy)===null||e===void 0||e.hide()}destroy(){var e,n;!((e=this.tippy)===null||e===void 0)&&e.popper.firstChild&&this.tippy.popper.firstChild.removeEventListener("blur",this.tippyBlurHandler),(n=this.tippy)===null||n===void 0||n.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const v_=t=>new ut({key:typeof t.pluginKey=="string"?new mn(t.pluginKey):t.pluginKey,view:e=>new x4({view:e,...t})});tt.create({name:"bubbleMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"bubbleMenu",updateDelay:void 0,shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[v_({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,updateDelay:this.options.updateDelay,shouldShow:this.options.shouldShow})]:[]}});function w4(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var x_={exports:{}},om={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m1;function b4(){if(m1)return om;m1=1;var t=ve;function e(d,f){return d===f&&(d!==0||1/d===1/f)||d!==d&&f!==f}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,o=t.useLayoutEffect,s=t.useDebugValue;function a(d,f){var p=f(),m=r({inst:{value:p,getSnapshot:f}}),g=m[0].inst,x=m[1];return o(function(){g.value=p,g.getSnapshot=f,l(g)&&x({inst:g})},[d,p,f]),i(function(){return l(g)&&x({inst:g}),d(function(){l(g)&&x({inst:g})})},[d]),s(p),p}function l(d){var f=d.getSnapshot;d=d.value;try{var p=f();return!n(d,p)}catch{return!0}}function c(d,f){return f()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:a;return om.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:u,om}x_.exports=b4();var S0=x_.exports;const S4=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},C4=({contentComponent:t})=>{const e=S0.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return ve.createElement(ve.Fragment,null,Object.values(e))};function k4(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:Ek.createPortal(r.reactElement,r.element,n)},t.forEach(i=>i())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(i=>i())}}}class E4 extends ve.Component{constructor(e){var n;super(e),this.editorContentRef=ve.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((n=e.editor)===null||n===void 0)&&n.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const n=this.editorContentRef.current;n.append(...e.options.element.childNodes),e.setOptions({element:n}),e.contentComponent=k4(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;const n=document.createElement("div");n.append(...e.options.element.childNodes),e.setOptions({element:n})}render(){const{editor:e,innerRef:n,...r}=this.props;return ve.createElement(ve.Fragment,null,ve.createElement("div",{ref:S4(n,this.editorContentRef),...r}),(e==null?void 0:e.contentComponent)&&ve.createElement(C4,{contentComponent:e.contentComponent}))}}const T4=y.forwardRef((t,e)=>{const n=ve.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return ve.createElement(E4,{key:n,innerRef:e,...t})}),_4=ve.memo(T4);var R4=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!t(e[i],n[i]))return!1;return!0}if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;for(i of e.entries())if(!t(i[1],n.get(i[0])))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(n)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(e[i]!==n[i])return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(o=Object.keys(e),r=o.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;i--!==0;){var s=o[i];if(!(s==="_owner"&&e.$$typeof)&&!t(e[s],n[s]))return!1}return!0}return e!==e&&n!==n},O4=w4(R4),w_={exports:{}},sm={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g1;function P4(){if(g1)return sm;g1=1;var t=ve,e=S0;function n(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,o=t.useRef,s=t.useEffect,a=t.useMemo,l=t.useDebugValue;return sm.useSyncExternalStoreWithSelector=function(c,u,d,f,p){var m=o(null);if(m.current===null){var g={hasValue:!1,value:null};m.current=g}else g=m.current;m=a(function(){function v(k){if(!w){if(w=!0,S=k,k=f(k),p!==void 0&&g.hasValue){var E=g.value;if(p(E,k))return b=E}return b=k}if(E=b,r(S,k))return E;var _=f(k);return p!==void 0&&p(E,_)?E:(S=k,b=_)}var w=!1,S,b,C=d===void 0?null:d;return[function(){return v(u())},C===null?void 0:function(){return v(C())}]},[u,d,f,p]);var x=i(c,m[0],m[1]);return s(function(){g.hasValue=!0,g.value=x},[x]),l(x),x},sm}w_.exports=P4();var M4=w_.exports;const A4=typeof window<"u"?y.useLayoutEffect:y.useEffect;class D4{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const n=()=>{this.transactionNumber+=1,this.subscribers.forEach(i=>i())},r=this.editor;return r.on("transaction",n),()=>{r.off("transaction",n)}}}}function N4(t){var e;const[n]=y.useState(()=>new D4(t.editor)),r=M4.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,t.selector,(e=t.equalityFn)!==null&&e!==void 0?e:O4);return A4(()=>n.watch(t.editor),[t.editor,n]),y.useDebugValue(r),r}const I4=!1,yy=typeof window>"u",j4=yy||!!(typeof window<"u"&&window.next);class C0{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){if(this.options.current.immediatelyRender===void 0)return yy||j4?null:this.createEditor();if(this.options.current.immediatelyRender&&yy&&I4)throw new Error("Tiptap Error: SSR has been detected, and `immediatelyRender` has been set to `true` this is an unsupported configuration that may result in errors, explicitly set `immediatelyRender` to `false` to avoid hydration mismatches.");return this.options.current.immediatelyRender?this.createEditor():null}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var i,o;return(o=(i=this.options.current).onBeforeCreate)===null||o===void 0?void 0:o.call(i,...r)},onBlur:(...r)=>{var i,o;return(o=(i=this.options.current).onBlur)===null||o===void 0?void 0:o.call(i,...r)},onCreate:(...r)=>{var i,o;return(o=(i=this.options.current).onCreate)===null||o===void 0?void 0:o.call(i,...r)},onDestroy:(...r)=>{var i,o;return(o=(i=this.options.current).onDestroy)===null||o===void 0?void 0:o.call(i,...r)},onFocus:(...r)=>{var i,o;return(o=(i=this.options.current).onFocus)===null||o===void 0?void 0:o.call(i,...r)},onSelectionUpdate:(...r)=>{var i,o;return(o=(i=this.options.current).onSelectionUpdate)===null||o===void 0?void 0:o.call(i,...r)},onTransaction:(...r)=>{var i,o;return(o=(i=this.options.current).onTransaction)===null||o===void 0?void 0:o.call(i,...r)},onUpdate:(...r)=>{var i,o;return(o=(i=this.options.current).onUpdate)===null||o===void 0?void 0:o.call(i,...r)},onContentError:(...r)=>{var i,o;return(o=(i=this.options.current).onContentError)===null||o===void 0?void 0:o.call(i,...r)},onDrop:(...r)=>{var i,o;return(o=(i=this.options.current).onDrop)===null||o===void 0?void 0:o.call(i,...r)},onPaste:(...r)=>{var i,o;return(o=(i=this.options.current).onPaste)===null||o===void 0?void 0:o.call(i,...r)}};return new zF(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,n){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&n.extensions?e.extensions.length!==n.extensions.length?!1:e.extensions.every((i,o)=>{var s;return i===((s=n.extensions)===null||s===void 0?void 0:s[o])}):e[r]===n[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?C0.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,i)=>r===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===e&&this.setEditor(null))},1)}}function L4(t={},e=[]){const n=y.useRef(t);n.current=t;const[r]=y.useState(()=>new C0(n)),i=S0.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return y.useDebugValue(i),y.useEffect(r.onRender(e)),N4({editor:i,selector:({transactionNumber:o})=>t.shouldRerenderOnTransaction===!1?null:t.immediatelyRender&&o===0?0:o+1}),i}const b_=y.createContext({editor:null});b_.Consumer;const $4=()=>y.useContext(b_),F4=t=>{const[e,n]=y.useState(null),{editor:r}=$4();return y.useEffect(()=>{var i;if(!e||!((i=t.editor)===null||i===void 0)&&i.isDestroyed||r!=null&&r.isDestroyed)return;const{pluginKey:o="bubbleMenu",editor:s,tippyOptions:a={},updateDelay:l,shouldShow:c=null}=t,u=s||r;if(!u){console.warn("BubbleMenu component is not rendered inside of an editor component or does not have editor prop.");return}const d=v_({updateDelay:l,editor:u,element:e,pluginKey:o,shouldShow:c,tippyOptions:a});return u.registerPlugin(d),()=>{u.unregisterPlugin(o)}},[t.editor,r,e]),ve.createElement("div",{ref:n,className:t.className,style:{visibility:"hidden"}},t.children)},B4=y.createContext({onDragStart:void 0}),z4=()=>y.useContext(B4);ve.forwardRef((t,e)=>{const{onDragStart:n}=z4(),r=t.as||"div";return ve.createElement(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});const U4=/^\s*>\s$/,V4=ir.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return["blockquote",At(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[$c({find:U4,type:this.type})]}}),H4=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,W4=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,K4=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,q4=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,G4=eo.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",At(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[qa({find:H4,type:this.type}),qa({find:K4,type:this.type})]},addPasteRules(){return[Ga({find:W4,type:this.type}),Ga({find:q4,type:this.type})]}}),J4="listItem",y1="textStyle",v1=/^\s*([-+*])\s$/,Y4=ir.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",At(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(J4,this.editor.getAttributes(y1)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=$c({find:v1,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=$c({find:v1,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(y1),editor:this.editor})),[t]}}),Q4=/(^|[^`])`([^`]+)`(?!`)/,X4=/(^|[^`])`([^`]+)`(?!`)/g,Z4=eo.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",At(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[qa({find:Q4,type:this.type})]},addPasteRules(){return[Ga({find:X4,type:this.type})]}}),ez=/^```([a-z]+)?[\s\n]$/,tz=/^~~~([a-z]+)?[\s\n]$/,nz=ir.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options,o=[...((e=t.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(s=>s.startsWith(n)).map(s=>s.replace(n,""))[0];return o||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",At(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const o=r.parentOffset===r.parent.nodeSize-2,s=r.parent.textContent.endsWith(`

`);return!o||!s?!1:t.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:i,empty:o}=n;if(!o||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const a=i.after();return a===void 0?!1:r.nodeAt(a)?t.commands.command(({tr:c})=>(c.setSelection(ie.near(r.resolve(a))),!0)):t.commands.exitCode()}}},addInputRules(){return[dy({find:ez,type:this.type,getAttributes:t=>({language:t[1]})}),dy({find:tz,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new ut({key:new mn("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,o=i==null?void 0:i.mode;if(!n||!o)return!1;const{tr:s,schema:a}=t.state,l=a.text(n.replace(/\r\n?/g,`
`));return s.replaceSelectionWith(this.type.create({language:o},l)),s.selection.$from.parent.type!==this.type&&s.setSelection(re.near(s.doc.resolve(Math.max(0,s.selection.from-2)))),s.setMeta("paste",!0),t.dispatch(s),!0}}})]}}),rz=ir.create({name:"doc",topNode:!0,content:"block+"});function iz(t={}){return new ut({view(e){return new oz(e,t)}})}class oz{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let o=s=>{this[i](s)};return e.dom.addEventListener(i,o),{name:i,handler:o}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r;if(n){let a=e.nodeBefore,l=e.nodeAfter;if(a||l){let c=this.editorView.nodeDOM(this.cursorPos-(a?a.nodeSize:0));if(c){let u=c.getBoundingClientRect(),d=a?u.bottom:u.top;a&&l&&(d=(d+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),r={left:u.left,right:u.right,top:d-this.width/2,bottom:d+this.width/2}}}}if(!r){let a=this.editorView.coordsAtPos(this.cursorPos);r={left:a.left-this.width/2,right:a.left+this.width/2,top:a.top,bottom:a.bottom}}let i=this.editorView.dom.offsetParent;this.element||(this.element=i.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let o,s;if(!i||i==document.body&&getComputedStyle(i).position=="static")o=-pageXOffset,s=-pageYOffset;else{let a=i.getBoundingClientRect();o=a.left-i.scrollLeft,s=a.top-i.scrollTop}this.element.style.left=r.left-o+"px",this.element.style.top=r.top-s+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,o=typeof i=="function"?i(this.editorView,n,e):i;if(n&&!o){let s=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=YE(this.editorView.state.doc,s,this.editorView.dragging.slice);a!=null&&(s=a)}this.setCursor(s),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}const sz=tt.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[iz(this.options)]}});class Ie extends ie{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return Ie.valid(r)?new Ie(r):ie.near(r)}content(){return K.empty}eq(e){return e instanceof Ie&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Ie(e.resolve(n.pos))}getBookmark(){return new k0(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!az(e)||!lz(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&Ie.valid(e))return e;let i=e.pos,o=null;for(let s=e.depth;;s--){let a=e.node(s);if(n>0?e.indexAfter(s)<a.childCount:e.index(s)>0){o=a.child(n>0?e.indexAfter(s):e.index(s)-1);break}else if(s==0)return null;i+=n;let l=e.doc.resolve(i);if(Ie.valid(l))return l}for(;;){let s=n>0?o.firstChild:o.lastChild;if(!s){if(o.isAtom&&!o.isText&&!Z.isSelectable(o)){e=e.doc.resolve(i+o.nodeSize*n),r=!1;continue e}break}o=s,i+=n;let a=e.doc.resolve(i);if(Ie.valid(a))return a}return null}}}Ie.prototype.visible=!1;Ie.findFrom=Ie.findGapCursorFrom;ie.jsonID("gapcursor",Ie);class k0{constructor(e){this.pos=e}map(e){return new k0(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return Ie.valid(n)?new Ie(n):ie.near(n)}}function az(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function lz(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function cz(){return new ut({props:{decorations:hz,createSelectionBetween(t,e,n){return e.pos==n.pos&&Ie.valid(n)?new Ie(n):null},handleClick:dz,handleKeyDown:uz,handleDOMEvents:{beforeinput:fz}}})}const uz=jT({ArrowLeft:hd("horiz",-1),ArrowRight:hd("horiz",1),ArrowUp:hd("vert",-1),ArrowDown:hd("vert",1)});function hd(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,o){let s=r.selection,a=e>0?s.$to:s.$from,l=s.empty;if(s instanceof re){if(!o.endOfTextblock(n)||a.depth==0)return!1;l=!1,a=r.doc.resolve(e>0?a.after():a.before())}let c=Ie.findGapCursorFrom(a,e,l);return c?(i&&i(r.tr.setSelection(new Ie(c))),!0):!1}}function dz(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!Ie.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&Z.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new Ie(r))),!0)}function fz(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof Ie))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=F.empty;for(let s=r.length-1;s>=0;s--)i=F.from(r[s].createAndFill(null,i));let o=t.state.tr.replace(n.pos,n.pos,new K(i,0,0));return o.setSelection(re.near(o.doc.resolve(n.pos+1))),t.dispatch(o),!1}function hz(t){if(!(t.selection instanceof Ie))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Le.create(t.doc,[qt.widget(t.selection.head,e,{key:"gapcursor"})])}const pz=tt.create({name:"gapCursor",addProseMirrorPlugins(){return[cz()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=ae(G(t,"allowGapCursor",n)))!==null&&e!==void 0?e:null}}}),mz=ir.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",At(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:o}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:s}=this.options,{splittableMarks:a}=r.extensionManager,l=o||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:u})=>{if(u&&l&&s){const d=l.filter(f=>a.includes(f.type.name));c.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),gz=ir.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,At(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>dy({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}});var $f=200,Ze=function(){};Ze.prototype.append=function(e){return e.length?(e=Ze.from(e),!this.length&&e||e.length<$f&&this.leafAppend(e)||this.length<$f&&e.leafPrepend(this)||this.appendInner(e)):this};Ze.prototype.prepend=function(e){return e.length?Ze.from(e).append(this):this};Ze.prototype.appendInner=function(e){return new yz(this,e)};Ze.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?Ze.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};Ze.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Ze.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};Ze.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(o,s){return i.push(e(o,s))},n,r),i};Ze.from=function(e){return e instanceof Ze?e:e&&e.length?new S_(e):Ze.empty};var S_=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,o){return i==0&&o==this.length?this:new e(this.values.slice(i,o))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,o,s,a){for(var l=o;l<s;l++)if(i(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(i,o,s,a){for(var l=o-1;l>=s;l--)if(i(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=$f)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=$f)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(Ze);Ze.empty=new S_([]);var yz=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,o,s){var a=this.left.length;if(i<a&&this.left.forEachInner(r,i,Math.min(o,a),s)===!1||o>a&&this.right.forEachInner(r,Math.max(i-a,0),Math.min(this.length,o)-a,s+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,o,s){var a=this.left.length;if(i>a&&this.right.forEachInvertedInner(r,i-a,Math.max(o,a)-a,s+a)===!1||o<a&&this.left.forEachInvertedInner(r,Math.min(i,a),o,s)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var o=this.left.length;return i<=o?this.left.slice(r,i):r>=o?this.right.slice(r-o,i-o):this.left.slice(r,o).append(this.right.slice(0,i-o))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(Ze);const vz=500;let zc=class Ws{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,o;n&&(i=this.remapping(r,this.items.length),o=i.maps.length);let s=e.tr,a,l,c=[],u=[];return this.items.forEach((d,f)=>{if(!d.step){i||(i=this.remapping(r,f+1),o=i.maps.length),o--,u.push(d);return}if(i){u.push(new ii(d.map));let p=d.step.map(i.slice(o)),m;p&&s.maybeStep(p).doc&&(m=s.mapping.maps[s.mapping.maps.length-1],c.push(new ii(m,void 0,void 0,c.length+u.length))),o--,m&&i.appendMap(m,o)}else s.maybeStep(d.step);if(d.selection)return a=i?d.selection.map(i.slice(o)):d.selection,l=new Ws(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:s,selection:a}}addTransform(e,n,r,i){let o=[],s=this.eventCount,a=this.items,l=!i&&a.length?a.get(a.length-1):null;for(let u=0;u<e.steps.length;u++){let d=e.steps[u].invert(e.docs[u]),f=new ii(e.mapping.maps[u],d,n),p;(p=l&&l.merge(f))&&(f=p,u?o.pop():a=a.slice(0,a.length-1)),o.push(f),n&&(s++,n=void 0),i||(l=f)}let c=s-r.depth;return c>wz&&(a=xz(a,c),s-=c),new Ws(a.append(o),s)}remapping(e,n){let r=new Ac;return this.items.forEach((i,o)=>{let s=i.mirrorOffset!=null&&o-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,s)},e,n),r}addMaps(e){return this.eventCount==0?this:new Ws(this.items.append(e.map(n=>new ii(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),o=e.mapping,s=e.steps.length,a=this.eventCount;this.items.forEach(f=>{f.selection&&a--},i);let l=n;this.items.forEach(f=>{let p=o.getMirror(--l);if(p==null)return;s=Math.min(s,p);let m=o.maps[p];if(f.step){let g=e.steps[p].invert(e.docs[p]),x=f.selection&&f.selection.map(o.slice(l+1,p));x&&a++,r.push(new ii(m,g,x))}else r.push(new ii(m))},i);let c=[];for(let f=n;f<s;f++)c.push(new ii(o.maps[f]));let u=this.items.slice(0,i).append(c).append(r),d=new Ws(u,a);return d.emptyItemCount()>vz&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],o=0;return this.items.forEach((s,a)=>{if(a>=e)i.push(s),s.selection&&o++;else if(s.step){let l=s.step.map(n.slice(r)),c=l&&l.getMap();if(r--,c&&n.appendMap(c,r),l){let u=s.selection&&s.selection.map(n.slice(r));u&&o++;let d=new ii(c.invert(),l,u),f,p=i.length-1;(f=i.length&&i[p].merge(d))?i[p]=f:i.push(d)}}else s.map&&r--},this.items.length,0),new Ws(Ze.from(i.reverse()),o)}};zc.empty=new zc(Ze.empty,0);function xz(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}let ii=class C_{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new C_(n.getMap().invert(),n,this.selection)}}};class gi{constructor(e,n,r,i,o){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=o}}const wz=20;function bz(t,e,n,r){let i=n.getMeta(Xo),o;if(i)return i.historyState;n.getMeta(kz)&&(t=new gi(t.done,t.undone,null,0,-1));let s=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(s&&s.getMeta(Xo))return s.getMeta(Xo).redo?new gi(t.done.addTransform(n,void 0,r,Vd(e)),t.undone,x1(n.mapping.maps),t.prevTime,t.prevComposition):new gi(t.done,t.undone.addTransform(n,void 0,r,Vd(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(s&&s.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),l=t.prevTime==0||!s&&t.prevComposition!=a&&(t.prevTime<(n.time||0)-r.newGroupDelay||!Sz(n,t.prevRanges)),c=s?am(t.prevRanges,n.mapping):x1(n.mapping.maps);return new gi(t.done.addTransform(n,l?e.selection.getBookmark():void 0,r,Vd(e)),zc.empty,c,n.time,a??t.prevComposition)}else return(o=n.getMeta("rebased"))?new gi(t.done.rebased(n,o),t.undone.rebased(n,o),am(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new gi(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),am(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function Sz(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let o=0;o<e.length;o+=2)r<=e[o+1]&&i>=e[o]&&(n=!0)}),n}function x1(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,i,o,s)=>e.push(o,s));return e}function am(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),o=e.map(t[r+1],-1);i<=o&&n.push(i,o)}return n}function Cz(t,e,n){let r=Vd(e),i=Xo.get(e).spec.config,o=(n?t.undone:t.done).popEvent(e,r);if(!o)return null;let s=o.selection.resolve(o.transform.doc),a=(n?t.done:t.undone).addTransform(o.transform,e.selection.getBookmark(),i,r),l=new gi(n?a:o.remaining,n?o.remaining:a,null,0,-1);return o.transform.setSelection(s).setMeta(Xo,{redo:n,historyState:l})}let lm=!1,w1=null;function Vd(t){let e=t.plugins;if(w1!=e){lm=!1,w1=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){lm=!0;break}}return lm}const Xo=new mn("history"),kz=new mn("closeHistory");function Ez(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new ut({key:Xo,state:{init(){return new gi(zc.empty,zc.empty,null,0,-1)},apply(e,n,r){return bz(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?E_:r=="historyRedo"?T_:null;return i?(n.preventDefault(),i(e.state,e.dispatch)):!1}}}})}function k_(t,e){return(n,r)=>{let i=Xo.getState(n);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(r){let o=Cz(i,n,t);o&&r(e?o.scrollIntoView():o)}return!0}}const E_=k_(!1,!0),T_=k_(!0,!0),Tz=tt.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>E_(t,e),redo:()=>({state:t,dispatch:e})=>T_(t,e)}},addProseMirrorPlugins(){return[Ez(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),_z=ir.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",At(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{const{selection:n}=e,{$from:r,$to:i}=n,o=t();return r.parentOffset===0?o.insertContentAt({from:Math.max(r.pos-1,0),to:i.pos},{type:this.name}):ZT(n)?o.insertContentAt(i.pos,{type:this.name}):o.insertContent({type:this.name}),o.command(({tr:s,dispatch:a})=>{var l;if(a){const{$to:c}=s.selection,u=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?s.setSelection(re.create(s.doc,c.pos+1)):c.nodeAfter.isBlock?s.setSelection(Z.create(s.doc,c.pos)):s.setSelection(re.create(s.doc,c.pos));else{const d=(l=c.parent.type.contentMatch.defaultType)===null||l===void 0?void 0:l.create();d&&(s.insert(u,d),s.setSelection(re.create(s.doc,u+1)))}s.scrollIntoView()}return!0}).run()}}},addInputRules(){return[UF({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),Rz=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,Oz=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,Pz=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,Mz=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,Az=eo.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",At(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[qa({find:Rz,type:this.type}),qa({find:Pz,type:this.type})]},addPasteRules(){return[Ga({find:Oz,type:this.type}),Ga({find:Mz,type:this.type})]}}),Dz=ir.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",At(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),Nz="listItem",b1="textStyle",S1=/^(\d+)\.\s$/,Iz=ir.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:void 0,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",At(this.options.HTMLAttributes,n),0]:["ol",At(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Nz,this.editor.getAttributes(b1)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=$c({find:S1,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=$c({find:S1,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(b1)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),jz=ir.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",At(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),Lz=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,$z=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,Fz=eo.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",At(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[qa({find:Lz,type:this.type})]},addPasteRules(){return[Ga({find:$z,type:this.type})]}}),Bz=ir.create({name:"text",group:"inline"}),zz=tt.create({name:"starterKit",addExtensions(){var t,e,n,r,i,o,s,a,l,c,u,d,f,p,m,g,x,v;const w=[];return this.options.bold!==!1&&w.push(G4.configure((t=this.options)===null||t===void 0?void 0:t.bold)),this.options.blockquote!==!1&&w.push(V4.configure((e=this.options)===null||e===void 0?void 0:e.blockquote)),this.options.bulletList!==!1&&w.push(Y4.configure((n=this.options)===null||n===void 0?void 0:n.bulletList)),this.options.code!==!1&&w.push(Z4.configure((r=this.options)===null||r===void 0?void 0:r.code)),this.options.codeBlock!==!1&&w.push(nz.configure((i=this.options)===null||i===void 0?void 0:i.codeBlock)),this.options.document!==!1&&w.push(rz.configure((o=this.options)===null||o===void 0?void 0:o.document)),this.options.dropcursor!==!1&&w.push(sz.configure((s=this.options)===null||s===void 0?void 0:s.dropcursor)),this.options.gapcursor!==!1&&w.push(pz.configure((a=this.options)===null||a===void 0?void 0:a.gapcursor)),this.options.hardBreak!==!1&&w.push(mz.configure((l=this.options)===null||l===void 0?void 0:l.hardBreak)),this.options.heading!==!1&&w.push(gz.configure((c=this.options)===null||c===void 0?void 0:c.heading)),this.options.history!==!1&&w.push(Tz.configure((u=this.options)===null||u===void 0?void 0:u.history)),this.options.horizontalRule!==!1&&w.push(_z.configure((d=this.options)===null||d===void 0?void 0:d.horizontalRule)),this.options.italic!==!1&&w.push(Az.configure((f=this.options)===null||f===void 0?void 0:f.italic)),this.options.listItem!==!1&&w.push(Dz.configure((p=this.options)===null||p===void 0?void 0:p.listItem)),this.options.orderedList!==!1&&w.push(Iz.configure((m=this.options)===null||m===void 0?void 0:m.orderedList)),this.options.paragraph!==!1&&w.push(jz.configure((g=this.options)===null||g===void 0?void 0:g.paragraph)),this.options.strike!==!1&&w.push(Fz.configure((x=this.options)===null||x===void 0?void 0:x.strike)),this.options.text!==!1&&w.push(Bz.configure((v=this.options)===null||v===void 0?void 0:v.text)),w}}),Uz=tt.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new ut({key:new mn("placeholder"),props:{decorations:({doc:t,selection:e})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=e,i=[];if(!n)return null;const o=this.editor.isEmpty;return t.descendants((s,a)=>{const l=r>=a&&r<=a+s.nodeSize,c=!s.isLeaf&&Dh(s);if((l||!this.options.showOnlyCurrent)&&c){const u=[this.options.emptyNodeClass];o&&u.push(this.options.emptyEditorClass);const d=qt.node(a,a+s.nodeSize,{class:u.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:s,pos:a,hasAnchor:l}):this.options.placeholder});i.push(d)}return this.options.includeChildren}),Le.create(t,i)}}})]}});function Vz(t){var e;const{char:n,allowSpaces:r,allowToIncludeChar:i,allowedPrefixes:o,startOfLine:s,$position:a}=t,l=r&&!i,c=VF(n),u=new RegExp(`\\s${c}$`),d=s?"^":"",f=i?"":c,p=l?new RegExp(`${d}${c}.*?(?=\\s${f}|$)`,"gm"):new RegExp(`${d}(?:^)?${c}[^\\s${f}]*`,"gm"),m=((e=a.nodeBefore)===null||e===void 0?void 0:e.isText)&&a.nodeBefore.text;if(!m)return null;const g=a.pos-m.length,x=Array.from(m.matchAll(p)).pop();if(!x||x.input===void 0||x.index===void 0)return null;const v=x.input.slice(Math.max(0,x.index-1),x.index),w=new RegExp(`^[${o==null?void 0:o.join("")}\0]?$`).test(v);if(o!==null&&!w)return null;const S=g+x.index;let b=S+x[0].length;return l&&u.test(m.slice(b-1,b+1))&&(x[0]+=" ",b+=1),S<a.pos&&b>=a.pos?{range:{from:S,to:b},query:x[0].slice(n.length),text:x[0]}:null}const Hz=new mn("suggestion");function Wz({pluginKey:t=Hz,editor:e,char:n="@",allowSpaces:r=!1,allowToIncludeChar:i=!1,allowedPrefixes:o=[" "],startOfLine:s=!1,decorationTag:a="span",decorationClass:l="suggestion",command:c=()=>null,items:u=()=>[],render:d=()=>({}),allow:f=()=>!0,findSuggestionMatch:p=Vz}){let m;const g=d==null?void 0:d(),x=new ut({key:t,view(){return{update:async(v,w)=>{var S,b,C,k,E,_,P;const R=(S=this.key)===null||S===void 0?void 0:S.getState(w),N=(b=this.key)===null||b===void 0?void 0:b.getState(v.state),A=R.active&&N.active&&R.range.from!==N.range.from,I=!R.active&&N.active,O=R.active&&!N.active,L=!I&&!O&&R.query!==N.query,$=I||A&&L,H=L||A,M=O||A&&L;if(!$&&!H&&!M)return;const D=M&&!$?R:N,B=v.dom.querySelector(`[data-decoration-id="${D.decorationId}"]`);m={editor:e,range:D.range,query:D.query,text:D.text,items:[],command:Q=>c({editor:e,range:D.range,props:Q}),decorationNode:B,clientRect:B?()=>{var Q;const{decorationId:U}=(Q=this.key)===null||Q===void 0?void 0:Q.getState(e.state),ee=v.dom.querySelector(`[data-decoration-id="${U}"]`);return(ee==null?void 0:ee.getBoundingClientRect())||null}:null},$&&((C=g==null?void 0:g.onBeforeStart)===null||C===void 0||C.call(g,m)),H&&((k=g==null?void 0:g.onBeforeUpdate)===null||k===void 0||k.call(g,m)),(H||$)&&(m.items=await u({editor:e,query:D.query})),M&&((E=g==null?void 0:g.onExit)===null||E===void 0||E.call(g,m)),H&&((_=g==null?void 0:g.onUpdate)===null||_===void 0||_.call(g,m)),$&&((P=g==null?void 0:g.onStart)===null||P===void 0||P.call(g,m))},destroy:()=>{var v;m&&((v=g==null?void 0:g.onExit)===null||v===void 0||v.call(g,m))}}},state:{init(){return{active:!1,range:{from:0,to:0},query:null,text:null,composing:!1}},apply(v,w,S,b){const{isEditable:C}=e,{composing:k}=e.view,{selection:E}=v,{empty:_,from:P}=E,R={...w};if(R.composing=k,C&&(_||e.view.composing)){(P<w.range.from||P>w.range.to)&&!k&&!w.composing&&(R.active=!1);const N=p({char:n,allowSpaces:r,allowToIncludeChar:i,allowedPrefixes:o,startOfLine:s,$position:E.$from}),A=`id_${Math.floor(Math.random()*4294967295)}`;N&&f({editor:e,state:b,range:N.range,isActive:w.active})?(R.active=!0,R.decorationId=w.decorationId?w.decorationId:A,R.range=N.range,R.query=N.query,R.text=N.text):R.active=!1}else R.active=!1;return R.active||(R.decorationId=null,R.range={from:0,to:0},R.query=null,R.text=null),R}},props:{handleKeyDown(v,w){var S;const{active:b,range:C}=x.getState(v.state);return b&&((S=g==null?void 0:g.onKeyDown)===null||S===void 0?void 0:S.call(g,{view:v,event:w,range:C}))||!1},decorations(v){const{active:w,range:S,decorationId:b}=x.getState(v);return w?Le.create(v.doc,[qt.inline(S.from,S.to,{nodeName:a,class:l,"data-decoration-id":b})]):null}}});return x}function E0(t,e){if(typeof t!="function"){const[n,r]=y.useState(t);return y.useEffect(()=>{const i=setTimeout(()=>{r(t)},e);return()=>{clearTimeout(i)}},[t,e]),n}return y.useCallback((...n)=>{const r=t,i=setTimeout(()=>{r(...n)},e);return()=>{clearTimeout(i)}},[t,e])}function Kz(t){return/<(.|\n)*?>/g.test(t.trim())}function qz(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Gz(t){return`<p>${qz(t).split(/\r?\n/).join("<br/>")}</p>`}const Jz=tt.create({name:"slashCommand",addOptions(){return{snippets:[],suggestion:{char:"/",command:({editor:e,range:n,props:r})=>{r.command({editor:e,range:n})},items:({query:e,editor:n})=>{var o;const r=n.extensionManager.extensions.find(s=>s.name==="slashCommand");return(((o=r==null?void 0:r.options)==null?void 0:o.snippets)||[]).filter(s=>s.command.toLowerCase().includes(e.toLowerCase())).map(s=>({title:s.command,previewText:s.text,command:({editor:a,range:l})=>{a.chain().focus().deleteRange(l).insertContent(s.text).run()}}))},render:()=>{let e,n=0,r;return{onStart:i=>{var s;r=i,e=document.createElement("div"),e.style.cssText=`
            position: absolute;
            z-index: 100;
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 6px;
            padding: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            min-width: 300px;
            max-width: 400px;
          `,r.items.forEach((a,l)=>{var f;const c=document.createElement("button");c.style.cssText=`
              display: flex;
              width: 100%;
              align-items: center;
              gap: 8px;
              text-align: left;
              padding: 8px 12px;
              border: none;
              background: none;
              cursor: pointer;
              border-radius: 4px;
              ${l===n?"background-color: #f3f4f6;":""}
            `;const u=document.createElement("div");u.textContent=a.title,u.style.cssText=`
              font-weight: 500;
              color: #1f2937;
              flex-shrink: 0;
            `;const d=document.createElement("div");d.textContent=(f=a.previewText)!=null&&f.length&&a.previewText.length>100?a.previewText.substring(0,100)+"...":a.previewText||"",d.style.cssText=`
              font-size: 14px;
              color: #6b7280;
              white-space: nowrap;
              overflow: hidden;
              text-overflow: ellipsis;
            `,c.appendChild(u),c.appendChild(d),c.addEventListener("click",()=>{r.command(a),e.remove()}),e.appendChild(c)}),document.body.appendChild(e);const o=(s=r.clientRect)==null?void 0:s.call(r);o&&(e.style.top=`${o.top+window.scrollY-e.offsetHeight-10}px`,e.style.left=`${o.left+window.scrollX}px`)},onUpdate:i=>{var s;r=i;const o=(s=r.clientRect)==null?void 0:s.call(r);o&&(e.style.top=`${o.top+window.scrollY-e.offsetHeight-10}px`,e.style.left=`${o.left+window.scrollX}px`)},onKeyDown:({event:i})=>i.key==="ArrowDown"?(n=(n+1)%e.children.length,Array.from(e.children).forEach((o,s)=>{o.style.backgroundColor=s===n?"#f3f4f6":""}),!0):i.key==="ArrowUp"?(n=(n-1+e.children.length)%e.children.length,Array.from(e.children).forEach((o,s)=>{o.style.backgroundColor=s===n?"#f3f4f6":""}),!0):i.key==="Enter"&&e.children.length>0?(r.command(r.items[n]),e.remove(),!0):!1,onExit:()=>{e.remove()}}}}}},addProseMirrorPlugins(){return[Wz({editor:this.editor,...this.options.suggestion})]}}),js={editor:{flex:1,width:"100%",height:"100%",fontSize:"16px",lineHeight:"1.5",color:"#374151",outline:"none",cursor:"text",display:"flex",flexDirection:"column",position:"relative",overflow:"auto",backgroundColor:"#ffffff","& .ProseMirror":{outline:"none !important",border:"none !important",flex:1,padding:"12px",whiteSpace:"pre-wrap",overflowY:"auto",overflowX:"hidden","& .preserve-whitespace":{whiteSpace:"pre-wrap"},"&:focus":{outline:"none !important",border:"none !important"},"&.ProseMirror-focused":{outline:"none !important",border:"none !important"}}},bubbleMenu:{display:"flex",gap:"8px",backgroundColor:"white",padding:"8px",borderRadius:"6px",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb"},menuButton:{padding:"4px 8px",backgroundColor:"transparent",border:"none",borderRadius:"4px",cursor:"pointer",color:"#6b7280","&:hover":{backgroundColor:"#f3f4f6"}},copyButton:{position:"absolute",right:"8px",top:"8px",padding:"4px 8px",backgroundColor:"#f3f4f6",borderRadius:"4px",cursor:"pointer",fontSize:"14px",color:"#6b7280","&:hover":{backgroundColor:"#e5e7eb"}},editorToolbar:{display:"flex",gap:"8px",alignItems:"center",marginBottom:"8px",height:"36px"},toolbarButton:{padding:"4px 8px",backgroundColor:"#f3f4f6",border:"1px solid #e5e7eb",borderRadius:"4px",cursor:"pointer",fontSize:"14px",color:"#6b7280",display:"flex",alignItems:"center",gap:"4px","&:hover":{backgroundColor:"#e5e7eb"},"&:disabled":{opacity:.5,cursor:"not-allowed"}}};function C1(t){return t.trim()?Kz(t)?t:Gz(t):""}function cm({content:t,onChange:e,readOnly:n=!1,placeholder:r="Start typing...",snippets:i=[],onEditorReady:o}){const[s,a]=y.useState(""),l=y.useRef(!1),c=y.useRef(t),u=y.useMemo(()=>C1(t),[t]),d=L4({extensions:[zz.configure({}),Uz.configure({placeholder:r}),Jz.configure({snippets:i})],editorProps:{attributes:{class:"focus:outline-none"}},content:u,onUpdate:({editor:p})=>{l.current||(l.current=!0);const m=p.getHTML();a(m)},editable:!n});y.useEffect(()=>{d&&o&&o(d)},[d,o]),y.useEffect(()=>{if(d&&t!==c.current&&!l.current){const p=C1(t);d.commands.setContent(p),c.current=t}},[t,d]);const f=E0(s,1e3);return y.useEffect(()=>{f&&l.current&&e&&(e(f),l.current=!1,c.current=f)},[f,e]),d?h.jsxs("div",{style:{height:"100%",display:"flex",flexDirection:"column"},children:[!n&&h.jsx(F4,{editor:d,tippyOptions:{duration:100},children:h.jsxs("div",{style:js.bubbleMenu,children:[h.jsx("button",{onClick:()=>d.chain().focus().toggleBold().run(),className:d.isActive("bold")?"is-active":"",style:js.menuButton,children:"Bold"}),h.jsx("button",{onClick:()=>d.chain().focus().toggleItalic().run(),className:d.isActive("italic")?"is-active":"",style:js.menuButton,children:"Italic"}),h.jsx("button",{onClick:()=>d.chain().focus().toggleBulletList().run(),className:d.isActive("bulletList")?"is-active":"",style:js.menuButton,children:"Bullet List"}),h.jsx("button",{onClick:()=>d.chain().focus().toggleOrderedList().run(),className:d.isActive("orderedList")?"is-active":"",style:js.menuButton,children:"Numbered List"})]})}),h.jsx(_4,{editor:d,style:js.editor})]}):null}const te={container:{padding:"32px 32px 0",width:"100%",height:"100%",backgroundColor:"#fff",overflow:"hidden",display:"flex",flexDirection:"column"},section:{maxWidth:"1200px",margin:"0 auto",width:"100%",height:"100%",display:"flex",flexDirection:"column"},header:{flex:"0 0 auto"},contentContainer:{flex:1,overflow:"auto",minHeight:0},title:{fontSize:"16px",fontWeight:"500",marginBottom:"8px",color:"#1f2937"},tabs:{display:"flex",gap:"24px",marginBottom:"16px",borderBottom:"1px solid #e5e7eb"},tab:{padding:"12px 0",fontSize:"14px",color:"#6b7280",cursor:"pointer",borderBottomWidth:"2px",borderBottomStyle:"solid",borderBottomColor:"transparent",marginBottom:"-1px"},activeTab:{color:"#2563eb",borderBottomColor:"#2563eb"},formGrid:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",columnGap:"24px",rowGap:"8px"},field:{marginBottom:"8px"},label:{display:"block",fontSize:"14px",color:"#4b5563",marginBottom:"8px"},sublabel:{display:"block",fontSize:"14px",color:"#6b7280",marginBottom:"8px"},select:{width:"100%",padding:"8px 12px",fontSize:"14px",border:"1px solid #d1d5db",borderRadius:"6px",color:"#1f2937",backgroundColor:"#fff",cursor:"pointer",appearance:"none",backgroundImage:'url("data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2224%22%20height%3D%2224%22%20viewBox%3D%220%200%2024%2024%22%20fill%3D%22none%22%20stroke%3D%22%236b7280%22%20stroke-width%3D%222%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%3E%3Cpolyline%20points%3D%226%209%2012%2015%2018%209%22%3E%3C%2Fpolyline%3E%3C%2Fsvg%3E")',backgroundRepeat:"no-repeat",backgroundPosition:"right 8px center",backgroundSize:"16px",paddingRight:"32px"},input:{width:"100%",padding:"8px 12px",fontSize:"14px",border:"1px solid #d1d5db",borderRadius:"6px",color:"#1f2937",backgroundColor:"#fff","&:focus":{outline:"none",borderColor:"#2563eb",boxShadow:"0 0 0 2px rgba(37, 99, 235, 0.2)"}},sectionTitle:{fontSize:"16px",fontWeight:"500",marginTop:"8px",color:"#1f2937"}};function Cs(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var Yz=["color"],T0=y.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Cs(t,Yz);return y.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),y.createElement("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Qz=["color"],sa=y.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Cs(t,Qz);return y.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),y.createElement("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Xz=["color"],Zz=y.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Cs(t,Xz);return y.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),y.createElement("path",{d:"M8.625 2.5C8.625 3.12132 8.12132 3.625 7.5 3.625C6.87868 3.625 6.375 3.12132 6.375 2.5C6.375 1.87868 6.87868 1.375 7.5 1.375C8.12132 1.375 8.625 1.87868 8.625 2.5ZM8.625 7.5C8.625 8.12132 8.12132 8.625 7.5 8.625C6.87868 8.625 6.375 8.12132 6.375 7.5C6.375 6.87868 6.87868 6.375 7.5 6.375C8.12132 6.375 8.625 6.87868 8.625 7.5ZM7.5 13.625C8.12132 13.625 8.625 13.1213 8.625 12.5C8.625 11.8787 8.12132 11.375 7.5 11.375C6.87868 11.375 6.375 11.8787 6.375 12.5C6.375 13.1213 6.87868 13.625 7.5 13.625Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),e6=["color"],t6=y.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Cs(t,e6);return y.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),y.createElement("path",{d:"M11.8536 1.14645C11.6583 0.951184 11.3417 0.951184 11.1465 1.14645L3.71455 8.57836C3.62459 8.66832 3.55263 8.77461 3.50251 8.89155L2.04044 12.303C1.9599 12.491 2.00189 12.709 2.14646 12.8536C2.29103 12.9981 2.50905 13.0401 2.69697 12.9596L6.10847 11.4975C6.2254 11.4474 6.3317 11.3754 6.42166 11.2855L13.8536 3.85355C14.0488 3.65829 14.0488 3.34171 13.8536 3.14645L11.8536 1.14645ZM4.42166 9.28547L11.5 2.20711L12.7929 3.5L5.71455 10.5784L4.21924 11.2192L3.78081 10.7808L4.42166 9.28547Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),n6=["color"],Ff=y.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Cs(t,n6);return y.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),y.createElement("path",{d:"M8 2.75C8 2.47386 7.77614 2.25 7.5 2.25C7.22386 2.25 7 2.47386 7 2.75V7H2.75C2.47386 7 2.25 7.22386 2.25 7.5C2.25 7.77614 2.47386 8 2.75 8H7V12.25C7 12.5261 7.22386 12.75 7.5 12.75C7.77614 12.75 8 12.5261 8 12.25V8H12.25C12.5261 8 12.75 7.77614 12.75 7.5C12.75 7.22386 12.5261 7 12.25 7H8V2.75Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),r6=["color"],i6=y.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Cs(t,r6);return y.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),y.createElement("path",{d:"M7.49998 0.849976C7.22383 0.849976 6.99998 1.07383 6.99998 1.34998V3.52234C6.99998 3.79848 7.22383 4.02234 7.49998 4.02234C7.77612 4.02234 7.99998 3.79848 7.99998 3.52234V1.8718C10.8862 2.12488 13.15 4.54806 13.15 7.49998C13.15 10.6204 10.6204 13.15 7.49998 13.15C4.37957 13.15 1.84998 10.6204 1.84998 7.49998C1.84998 6.10612 2.35407 4.83128 3.19049 3.8459C3.36919 3.63538 3.34339 3.31985 3.13286 3.14115C2.92234 2.96245 2.60681 2.98825 2.42811 3.19877C1.44405 4.35808 0.849976 5.86029 0.849976 7.49998C0.849976 11.1727 3.82728 14.15 7.49998 14.15C11.1727 14.15 14.15 11.1727 14.15 7.49998C14.15 3.82728 11.1727 0.849976 7.49998 0.849976ZM6.74049 8.08072L4.22363 4.57237C4.15231 4.47295 4.16346 4.33652 4.24998 4.25C4.33649 4.16348 4.47293 4.15233 4.57234 4.22365L8.08069 6.74051C8.56227 7.08599 8.61906 7.78091 8.19998 8.2C7.78089 8.61909 7.08597 8.56229 6.74049 8.08072Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),o6=["color"],vy=y.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Cs(t,o6);return y.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),y.createElement("path",{d:"M5.5 1C5.22386 1 5 1.22386 5 1.5C5 1.77614 5.22386 2 5.5 2H9.5C9.77614 2 10 1.77614 10 1.5C10 1.22386 9.77614 1 9.5 1H5.5ZM3 3.5C3 3.22386 3.22386 3 3.5 3H5H10H11.5C11.7761 3 12 3.22386 12 3.5C12 3.77614 11.7761 4 11.5 4H11V12C11 12.5523 10.5523 13 10 13H5C4.44772 13 4 12.5523 4 12V4L3.5 4C3.22386 4 3 3.77614 3 3.5ZM5 4H10V12H5V4Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))});function X(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function k1(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function jh(...t){return e=>{let n=!1;const r=t.map(i=>{const o=k1(i,e);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let i=0;i<r.length;i++){const o=r[i];typeof o=="function"?o():k1(t[i],null)}}}}function Fe(...t){return y.useCallback(jh(...t),t)}function s6(t,e){const n=y.createContext(e),r=o=>{const{children:s,...a}=o,l=y.useMemo(()=>a,Object.values(a));return h.jsx(n.Provider,{value:l,children:s})};r.displayName=t+"Provider";function i(o){const s=y.useContext(n);if(s)return s;if(e!==void 0)return e;throw new Error(`\`${o}\` must be used within \`${t}\``)}return[r,i]}function ho(t,e=[]){let n=[];function r(o,s){const a=y.createContext(s),l=n.length;n=[...n,s];const c=d=>{var v;const{scope:f,children:p,...m}=d,g=((v=f==null?void 0:f[t])==null?void 0:v[l])||a,x=y.useMemo(()=>m,Object.values(m));return h.jsx(g.Provider,{value:x,children:p})};c.displayName=o+"Provider";function u(d,f){var g;const p=((g=f==null?void 0:f[t])==null?void 0:g[l])||a,m=y.useContext(p);if(m)return m;if(s!==void 0)return s;throw new Error(`\`${d}\` must be used within \`${o}\``)}return[c,u]}const i=()=>{const o=n.map(s=>y.createContext(s));return function(a){const l=(a==null?void 0:a[t])||o;return y.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return i.scopeName=t,[r,a6(i,...e)]}function a6(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const s=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(o)[`__scope${c}`];return{...a,...d}},{});return y.useMemo(()=>({[`__scope${e.scopeName}`]:s}),[s])}};return n.scopeName=e.scopeName,n}var to=globalThis!=null&&globalThis.document?y.useLayoutEffect:()=>{},l6=uP["useId".toString()]||(()=>{}),c6=0;function Zo(t){const[e,n]=y.useState(l6());return to(()=>{t||n(r=>r??String(c6++))},[t]),t||(e?`radix-${e}`:"")}function Dt(t){const e=y.useRef(t);return y.useEffect(()=>{e.current=t}),y.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function wu({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,i]=u6({defaultProp:e,onChange:n}),o=t!==void 0,s=o?t:r,a=Dt(n),l=y.useCallback(c=>{if(o){const d=typeof c=="function"?c(t):c;d!==t&&a(d)}else i(c)},[o,t,i,a]);return[s,l]}function u6({defaultProp:t,onChange:e}){const n=y.useState(t),[r]=n,i=y.useRef(r),o=Dt(e);return y.useEffect(()=>{i.current!==r&&(o(r),i.current=r)},[r,i,o]),n}var ps=y.forwardRef((t,e)=>{const{children:n,...r}=t,i=y.Children.toArray(n),o=i.find(f6);if(o){const s=o.props.children,a=i.map(l=>l===o?y.Children.count(s)>1?y.Children.only(null):y.isValidElement(s)?s.props.children:null:l);return h.jsx(xy,{...r,ref:e,children:y.isValidElement(s)?y.cloneElement(s,void 0,a):null})}return h.jsx(xy,{...r,ref:e,children:n})});ps.displayName="Slot";var xy=y.forwardRef((t,e)=>{const{children:n,...r}=t;if(y.isValidElement(n)){const i=p6(n),o=h6(r,n.props);return n.type!==y.Fragment&&(o.ref=e?jh(e,i):i),y.cloneElement(n,o)}return y.Children.count(n)>1?y.Children.only(null):null});xy.displayName="SlotClone";var d6=({children:t})=>h.jsx(h.Fragment,{children:t});function f6(t){return y.isValidElement(t)&&t.type===d6}function h6(t,e){const n={...e};for(const r in e){const i=t[r],o=e[r];/^on[A-Z]/.test(r)?i&&o?n[r]=(...a)=>{o(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...o}:r==="className"&&(n[r]=[i,o].filter(Boolean).join(" "))}return{...t,...n}}function p6(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var m6=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],ye=m6.reduce((t,e)=>{const n=y.forwardRef((r,i)=>{const{asChild:o,...s}=r,a=o?ps:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(a,{...s,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function _0(t,e){t&&cu.flushSync(()=>t.dispatchEvent(e))}function g6(t,e=globalThis==null?void 0:globalThis.document){const n=Dt(t);y.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var y6="DismissableLayer",wy="dismissableLayer.update",v6="dismissableLayer.pointerDownOutside",x6="dismissableLayer.focusOutside",E1,__=y.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),bu=y.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:o,onInteractOutside:s,onDismiss:a,...l}=t,c=y.useContext(__),[u,d]=y.useState(null),f=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=y.useState({}),m=Fe(e,E=>d(E)),g=Array.from(c.layers),[x]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),v=g.indexOf(x),w=u?g.indexOf(u):-1,S=c.layersWithOutsidePointerEventsDisabled.size>0,b=w>=v,C=b6(E=>{const _=E.target,P=[...c.branches].some(R=>R.contains(_));!b||P||(i==null||i(E),s==null||s(E),E.defaultPrevented||a==null||a())},f),k=S6(E=>{const _=E.target;[...c.branches].some(R=>R.contains(_))||(o==null||o(E),s==null||s(E),E.defaultPrevented||a==null||a())},f);return g6(E=>{w===c.layers.size-1&&(r==null||r(E),!E.defaultPrevented&&a&&(E.preventDefault(),a()))},f),y.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(E1=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),T1(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=E1)}},[u,f,n,c]),y.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),T1())},[u,c]),y.useEffect(()=>{const E=()=>p({});return document.addEventListener(wy,E),()=>document.removeEventListener(wy,E)},[]),h.jsx(ye.div,{...l,ref:m,style:{pointerEvents:S?b?"auto":"none":void 0,...t.style},onFocusCapture:X(t.onFocusCapture,k.onFocusCapture),onBlurCapture:X(t.onBlurCapture,k.onBlurCapture),onPointerDownCapture:X(t.onPointerDownCapture,C.onPointerDownCapture)})});bu.displayName=y6;var w6="DismissableLayerBranch",R_=y.forwardRef((t,e)=>{const n=y.useContext(__),r=y.useRef(null),i=Fe(e,r);return y.useEffect(()=>{const o=r.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),h.jsx(ye.div,{...t,ref:i})});R_.displayName=w6;function b6(t,e=globalThis==null?void 0:globalThis.document){const n=Dt(t),r=y.useRef(!1),i=y.useRef(()=>{});return y.useEffect(()=>{const o=a=>{if(a.target&&!r.current){let l=function(){O_(v6,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);r.current=!1},s=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(s),e.removeEventListener("pointerdown",o),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function S6(t,e=globalThis==null?void 0:globalThis.document){const n=Dt(t),r=y.useRef(!1);return y.useEffect(()=>{const i=o=>{o.target&&!r.current&&O_(x6,n,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function T1(){const t=new CustomEvent(wy);document.dispatchEvent(t)}function O_(t,e,n,{discrete:r}){const i=n.originalEvent.target,o=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?_0(i,o):i.dispatchEvent(o)}var C6=bu,k6=R_,um="focusScope.autoFocusOnMount",dm="focusScope.autoFocusOnUnmount",_1={bubbles:!1,cancelable:!0},E6="FocusScope",Lh=y.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:o,...s}=t,[a,l]=y.useState(null),c=Dt(i),u=Dt(o),d=y.useRef(null),f=Fe(e,g=>l(g)),p=y.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;y.useEffect(()=>{if(r){let g=function(S){if(p.paused||!a)return;const b=S.target;a.contains(b)?d.current=b:di(d.current,{select:!0})},x=function(S){if(p.paused||!a)return;const b=S.relatedTarget;b!==null&&(a.contains(b)||di(d.current,{select:!0}))},v=function(S){if(document.activeElement===document.body)for(const C of S)C.removedNodes.length>0&&di(a)};document.addEventListener("focusin",g),document.addEventListener("focusout",x);const w=new MutationObserver(v);return a&&w.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",x),w.disconnect()}}},[r,a,p.paused]),y.useEffect(()=>{if(a){O1.add(p);const g=document.activeElement;if(!a.contains(g)){const v=new CustomEvent(um,_1);a.addEventListener(um,c),a.dispatchEvent(v),v.defaultPrevented||(T6(M6(P_(a)),{select:!0}),document.activeElement===g&&di(a))}return()=>{a.removeEventListener(um,c),setTimeout(()=>{const v=new CustomEvent(dm,_1);a.addEventListener(dm,u),a.dispatchEvent(v),v.defaultPrevented||di(g??document.body,{select:!0}),a.removeEventListener(dm,u),O1.remove(p)},0)}}},[a,c,u,p]);const m=y.useCallback(g=>{if(!n&&!r||p.paused)return;const x=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,v=document.activeElement;if(x&&v){const w=g.currentTarget,[S,b]=_6(w);S&&b?!g.shiftKey&&v===b?(g.preventDefault(),n&&di(S,{select:!0})):g.shiftKey&&v===S&&(g.preventDefault(),n&&di(b,{select:!0})):v===w&&g.preventDefault()}},[n,r,p.paused]);return h.jsx(ye.div,{tabIndex:-1,...s,ref:f,onKeyDown:m})});Lh.displayName=E6;function T6(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(di(r,{select:e}),document.activeElement!==n)return}function _6(t){const e=P_(t),n=R1(e,t),r=R1(e.reverse(),t);return[n,r]}function P_(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function R1(t,e){for(const n of t)if(!R6(n,{upTo:e}))return n}function R6(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function O6(t){return t instanceof HTMLInputElement&&"select"in t}function di(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&O6(t)&&e&&t.select()}}var O1=P6();function P6(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=P1(t,e),t.unshift(e)},remove(e){var n;t=P1(t,e),(n=t[0])==null||n.resume()}}}function P1(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function M6(t){return t.filter(e=>e.tagName!=="A")}var A6="Portal",Su=y.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[i,o]=y.useState(!1);to(()=>o(!0),[]);const s=n||i&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return s?Ek.createPortal(h.jsx(ye.div,{...r,ref:e}),s):null});Su.displayName=A6;function D6(t,e){return y.useReducer((n,r)=>e[n][r]??n,t)}var or=t=>{const{present:e,children:n}=t,r=N6(e),i=typeof n=="function"?n({present:r.isPresent}):y.Children.only(n),o=Fe(r.ref,I6(i));return typeof n=="function"||r.isPresent?y.cloneElement(i,{ref:o}):null};or.displayName="Presence";function N6(t){const[e,n]=y.useState(),r=y.useRef({}),i=y.useRef(t),o=y.useRef("none"),s=t?"mounted":"unmounted",[a,l]=D6(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return y.useEffect(()=>{const c=pd(r.current);o.current=a==="mounted"?c:"none"},[a]),to(()=>{const c=r.current,u=i.current;if(u!==t){const f=o.current,p=pd(c);t?l("MOUNT"):p==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&f!==p?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,l]),to(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,d=p=>{const g=pd(r.current).includes(p.animationName);if(p.target===e&&g&&(l("ANIMATION_END"),!i.current)){const x=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=x)})}},f=p=>{p.target===e&&(o.current=pd(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:y.useCallback(c=>{c&&(r.current=getComputedStyle(c)),n(c)},[])}}function pd(t){return(t==null?void 0:t.animationName)||"none"}function I6(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var fm=0;function R0(){y.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??M1()),document.body.insertAdjacentElement("beforeend",t[1]??M1()),fm++,()=>{fm===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),fm--}},[])}function M1(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var vr=function(){return vr=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},vr.apply(this,arguments)};function M_(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function j6(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}var Hd="right-scroll-bar-position",Wd="width-before-scroll-bar",L6="with-scroll-bars-hidden",$6="--removed-body-scroll-bar-size";function hm(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function F6(t,e){var n=y.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var B6=typeof window<"u"?y.useLayoutEffect:y.useEffect,A1=new WeakMap;function z6(t,e){var n=F6(e||null,function(r){return t.forEach(function(i){return hm(i,r)})});return B6(function(){var r=A1.get(n);if(r){var i=new Set(r),o=new Set(t),s=n.current;i.forEach(function(a){o.has(a)||hm(a,null)}),o.forEach(function(a){i.has(a)||hm(a,s)})}A1.set(n,t)},[t]),n}function U6(t){return t}function V6(t,e){e===void 0&&(e=U6);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(o){var s=e(o,r);return n.push(s),function(){n=n.filter(function(a){return a!==s})}},assignSyncMedium:function(o){for(r=!0;n.length;){var s=n;n=[],s.forEach(o)}n={push:function(a){return o(a)},filter:function(){return n}}},assignMedium:function(o){r=!0;var s=[];if(n.length){var a=n;n=[],a.forEach(o),s=n}var l=function(){var u=s;s=[],u.forEach(o)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){s.push(u),c()},filter:function(u){return s=s.filter(u),n}}}};return i}function H6(t){t===void 0&&(t={});var e=V6(null);return e.options=vr({async:!0,ssr:!1},t),e}var A_=function(t){var e=t.sideCar,n=M_(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return y.createElement(r,vr({},n))};A_.isSideCarExport=!0;function W6(t,e){return t.useMedium(e),A_}var D_=H6(),pm=function(){},$h=y.forwardRef(function(t,e){var n=y.useRef(null),r=y.useState({onScrollCapture:pm,onWheelCapture:pm,onTouchMoveCapture:pm}),i=r[0],o=r[1],s=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,d=t.shards,f=t.sideCar,p=t.noIsolation,m=t.inert,g=t.allowPinchZoom,x=t.as,v=x===void 0?"div":x,w=t.gapMode,S=M_(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),b=f,C=z6([n,e]),k=vr(vr({},S),i);return y.createElement(y.Fragment,null,u&&y.createElement(b,{sideCar:D_,removeScrollBar:c,shards:d,noIsolation:p,inert:m,setCallbacks:o,allowPinchZoom:!!g,lockRef:n,gapMode:w}),s?y.cloneElement(y.Children.only(a),vr(vr({},k),{ref:C})):y.createElement(v,vr({},k,{className:l,ref:C}),a))});$h.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};$h.classNames={fullWidth:Wd,zeroRight:Hd};var D1,K6=function(){if(D1)return D1;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function q6(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=K6();return e&&t.setAttribute("nonce",e),t}function G6(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function J6(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var Y6=function(){var t=0,e=null;return{add:function(n){t==0&&(e=q6())&&(G6(e,n),J6(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},Q6=function(){var t=Y6();return function(e,n){y.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},N_=function(){var t=Q6(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},X6={left:0,top:0,right:0,gap:0},mm=function(t){return parseInt(t||"",10)||0},Z6=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[mm(n),mm(r),mm(i)]},e5=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return X6;var e=Z6(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},t5=N_(),va="data-scroll-locked",n5=function(t,e,n,r){var i=t.left,o=t.top,s=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(L6,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(va,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(s,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Hd,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Wd,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Hd," .").concat(Hd,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Wd," .").concat(Wd,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(va,`] {
    `).concat($6,": ").concat(a,`px;
  }
`)},N1=function(){var t=parseInt(document.body.getAttribute(va)||"0",10);return isFinite(t)?t:0},r5=function(){y.useEffect(function(){return document.body.setAttribute(va,(N1()+1).toString()),function(){var t=N1()-1;t<=0?document.body.removeAttribute(va):document.body.setAttribute(va,t.toString())}},[])},i5=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;r5();var o=y.useMemo(function(){return e5(i)},[i]);return y.createElement(t5,{styles:n5(o,!e,i,n?"":"!important")})},by=!1;if(typeof window<"u")try{var md=Object.defineProperty({},"passive",{get:function(){return by=!0,!0}});window.addEventListener("test",md,md),window.removeEventListener("test",md,md)}catch{by=!1}var Ls=by?{passive:!1}:!1,o5=function(t){return t.tagName==="TEXTAREA"},I_=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!o5(t)&&n[e]==="visible")},s5=function(t){return I_(t,"overflowY")},a5=function(t){return I_(t,"overflowX")},I1=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=j_(t,r);if(i){var o=L_(t,r),s=o[1],a=o[2];if(s>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},l5=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},c5=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},j_=function(t,e){return t==="v"?s5(e):a5(e)},L_=function(t,e){return t==="v"?l5(e):c5(e)},u5=function(t,e){return t==="h"&&e==="rtl"?-1:1},d5=function(t,e,n,r,i){var o=u5(t,window.getComputedStyle(e).direction),s=o*r,a=n.target,l=e.contains(a),c=!1,u=s>0,d=0,f=0;do{var p=L_(t,a),m=p[0],g=p[1],x=p[2],v=g-x-o*m;(m||v)&&j_(t,a)&&(d+=v,f+=m),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&(i&&Math.abs(d)<1||!i&&s>d)||!u&&(i&&Math.abs(f)<1||!i&&-s>f))&&(c=!0),c},gd=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},j1=function(t){return[t.deltaX,t.deltaY]},L1=function(t){return t&&"current"in t?t.current:t},f5=function(t,e){return t[0]===e[0]&&t[1]===e[1]},h5=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},p5=0,$s=[];function m5(t){var e=y.useRef([]),n=y.useRef([0,0]),r=y.useRef(),i=y.useState(p5++)[0],o=y.useState(N_)[0],s=y.useRef(t);y.useEffect(function(){s.current=t},[t]),y.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var g=j6([t.lockRef.current],(t.shards||[]).map(L1),!0).filter(Boolean);return g.forEach(function(x){return x.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),g.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var a=y.useCallback(function(g,x){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!s.current.allowPinchZoom;var v=gd(g),w=n.current,S="deltaX"in g?g.deltaX:w[0]-v[0],b="deltaY"in g?g.deltaY:w[1]-v[1],C,k=g.target,E=Math.abs(S)>Math.abs(b)?"h":"v";if("touches"in g&&E==="h"&&k.type==="range")return!1;var _=I1(E,k);if(!_)return!0;if(_?C=E:(C=E==="v"?"h":"v",_=I1(E,k)),!_)return!1;if(!r.current&&"changedTouches"in g&&(S||b)&&(r.current=C),!C)return!0;var P=r.current||C;return d5(P,x,g,P==="h"?S:b,!0)},[]),l=y.useCallback(function(g){var x=g;if(!(!$s.length||$s[$s.length-1]!==o)){var v="deltaY"in x?j1(x):gd(x),w=e.current.filter(function(C){return C.name===x.type&&(C.target===x.target||x.target===C.shadowParent)&&f5(C.delta,v)})[0];if(w&&w.should){x.cancelable&&x.preventDefault();return}if(!w){var S=(s.current.shards||[]).map(L1).filter(Boolean).filter(function(C){return C.contains(x.target)}),b=S.length>0?a(x,S[0]):!s.current.noIsolation;b&&x.cancelable&&x.preventDefault()}}},[]),c=y.useCallback(function(g,x,v,w){var S={name:g,delta:x,target:v,should:w,shadowParent:g5(v)};e.current.push(S),setTimeout(function(){e.current=e.current.filter(function(b){return b!==S})},1)},[]),u=y.useCallback(function(g){n.current=gd(g),r.current=void 0},[]),d=y.useCallback(function(g){c(g.type,j1(g),g.target,a(g,t.lockRef.current))},[]),f=y.useCallback(function(g){c(g.type,gd(g),g.target,a(g,t.lockRef.current))},[]);y.useEffect(function(){return $s.push(o),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",l,Ls),document.addEventListener("touchmove",l,Ls),document.addEventListener("touchstart",u,Ls),function(){$s=$s.filter(function(g){return g!==o}),document.removeEventListener("wheel",l,Ls),document.removeEventListener("touchmove",l,Ls),document.removeEventListener("touchstart",u,Ls)}},[]);var p=t.removeScrollBar,m=t.inert;return y.createElement(y.Fragment,null,m?y.createElement(o,{styles:h5(i)}):null,p?y.createElement(i5,{gapMode:t.gapMode}):null)}function g5(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const y5=W6(D_,m5);var $_=y.forwardRef(function(t,e){return y.createElement($h,vr({},t,{ref:e,sideCar:y5}))});$_.classNames=$h.classNames;const O0=$_;var v5=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Fs=new WeakMap,yd=new WeakMap,vd={},gm=0,F_=function(t){return t&&(t.host||F_(t.parentNode))},x5=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=F_(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},w5=function(t,e,n,r){var i=x5(e,Array.isArray(t)?t:[t]);vd[n]||(vd[n]=new WeakMap);var o=vd[n],s=[],a=new Set,l=new Set(i),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};i.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))u(f);else try{var p=f.getAttribute(r),m=p!==null&&p!=="false",g=(Fs.get(f)||0)+1,x=(o.get(f)||0)+1;Fs.set(f,g),o.set(f,x),s.push(f),g===1&&m&&yd.set(f,!0),x===1&&f.setAttribute(n,"true"),m||f.setAttribute(r,"true")}catch(v){console.error("aria-hidden: cannot operate on ",f,v)}})};return u(e),a.clear(),gm++,function(){s.forEach(function(d){var f=Fs.get(d)-1,p=o.get(d)-1;Fs.set(d,f),o.set(d,p),f||(yd.has(d)||d.removeAttribute(r),yd.delete(d)),p||d.removeAttribute(n)}),gm--,gm||(Fs=new WeakMap,Fs=new WeakMap,yd=new WeakMap,vd={})}},P0=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=e||v5(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),w5(r,i,n,"aria-hidden")):function(){return null}},M0="Dialog",[B_,UH]=ho(M0),[b5,sr]=B_(M0),z_=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:i,onOpenChange:o,modal:s=!0}=t,a=y.useRef(null),l=y.useRef(null),[c=!1,u]=wu({prop:r,defaultProp:i,onChange:o});return h.jsx(b5,{scope:e,triggerRef:a,contentRef:l,contentId:Zo(),titleId:Zo(),descriptionId:Zo(),open:c,onOpenChange:u,onOpenToggle:y.useCallback(()=>u(d=>!d),[u]),modal:s,children:n})};z_.displayName=M0;var U_="DialogTrigger",S5=y.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=sr(U_,n),o=Fe(e,i.triggerRef);return h.jsx(ye.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":N0(i.open),...r,ref:o,onClick:X(t.onClick,i.onOpenToggle)})});S5.displayName=U_;var A0="DialogPortal",[C5,V_]=B_(A0,{forceMount:void 0}),H_=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:i}=t,o=sr(A0,e);return h.jsx(C5,{scope:e,forceMount:n,children:y.Children.map(r,s=>h.jsx(or,{present:n||o.open,children:h.jsx(Su,{asChild:!0,container:i,children:s})}))})};H_.displayName=A0;var Bf="DialogOverlay",W_=y.forwardRef((t,e)=>{const n=V_(Bf,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,o=sr(Bf,t.__scopeDialog);return o.modal?h.jsx(or,{present:r||o.open,children:h.jsx(k5,{...i,ref:e})}):null});W_.displayName=Bf;var k5=y.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=sr(Bf,n);return h.jsx(O0,{as:ps,allowPinchZoom:!0,shards:[i.contentRef],children:h.jsx(ye.div,{"data-state":N0(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),ms="DialogContent",K_=y.forwardRef((t,e)=>{const n=V_(ms,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,o=sr(ms,t.__scopeDialog);return h.jsx(or,{present:r||o.open,children:o.modal?h.jsx(E5,{...i,ref:e}):h.jsx(T5,{...i,ref:e})})});K_.displayName=ms;var E5=y.forwardRef((t,e)=>{const n=sr(ms,t.__scopeDialog),r=y.useRef(null),i=Fe(e,n.contentRef,r);return y.useEffect(()=>{const o=r.current;if(o)return P0(o)},[]),h.jsx(q_,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:X(t.onCloseAutoFocus,o=>{var s;o.preventDefault(),(s=n.triggerRef.current)==null||s.focus()}),onPointerDownOutside:X(t.onPointerDownOutside,o=>{const s=o.detail.originalEvent,a=s.button===0&&s.ctrlKey===!0;(s.button===2||a)&&o.preventDefault()}),onFocusOutside:X(t.onFocusOutside,o=>o.preventDefault())})}),T5=y.forwardRef((t,e)=>{const n=sr(ms,t.__scopeDialog),r=y.useRef(!1),i=y.useRef(!1);return h.jsx(q_,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var s,a;(s=t.onCloseAutoFocus)==null||s.call(t,o),o.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),o.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:o=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const s=o.target;((c=n.triggerRef.current)==null?void 0:c.contains(s))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&i.current&&o.preventDefault()}})}),q_=y.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:o,...s}=t,a=sr(ms,n),l=y.useRef(null),c=Fe(e,l);return R0(),h.jsxs(h.Fragment,{children:[h.jsx(Lh,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:o,children:h.jsx(bu,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":N0(a.open),...s,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),h.jsxs(h.Fragment,{children:[h.jsx(_5,{titleId:a.titleId}),h.jsx(O5,{contentRef:l,descriptionId:a.descriptionId})]})]})}),D0="DialogTitle",G_=y.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=sr(D0,n);return h.jsx(ye.h2,{id:i.titleId,...r,ref:e})});G_.displayName=D0;var J_="DialogDescription",Y_=y.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=sr(J_,n);return h.jsx(ye.p,{id:i.descriptionId,...r,ref:e})});Y_.displayName=J_;var Q_="DialogClose",X_=y.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=sr(Q_,n);return h.jsx(ye.button,{type:"button",...r,ref:e,onClick:X(t.onClick,()=>i.onOpenChange(!1))})});X_.displayName=Q_;function N0(t){return t?"open":"closed"}var Z_="DialogTitleWarning",[VH,eR]=s6(Z_,{contentName:ms,titleName:D0,docsSlug:"dialog"}),_5=({titleId:t})=>{const e=eR(Z_),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return y.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},R5="DialogDescriptionWarning",O5=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${eR(R5).contentName}}.`;return y.useEffect(()=>{var o;const i=(o=t.current)==null?void 0:o.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},Ll=z_,$l=H_,Fl=W_,Bl=K_,zl=G_,ym=Y_,xd=X_;const en={overlay:{backgroundColor:"rgba(0, 0, 0, 0.4)",position:"fixed",inset:0,animation:"overlayShow 150ms cubic-bezier(0.16, 1, 0.3, 1)"},content:{backgroundColor:"white",borderRadius:"8px",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.2)",position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"90vw",maxWidth:"600px",maxHeight:"85vh",padding:"24px"},title:{fontSize:"20px",fontWeight:"500",color:"#1f2937",marginBottom:"24px"},field:{marginBottom:"24px"},label:{display:"block",fontSize:"14px",color:"#4b5563",marginBottom:"8px"},input:{width:"100%",padding:"8px 12px",fontSize:"14px",border:"1px solid #d1d5db",borderRadius:"6px",color:"#1f2937"},textarea:{width:"100%",padding:"8px 12px",fontSize:"14px",border:"1px solid #d1d5db",borderRadius:"6px",color:"#1f2937",minHeight:"200px",resize:"vertical"},closeButton:{position:"absolute",top:"16px",right:"16px",padding:"4px",color:"#6b7280",cursor:"pointer",background:"none",border:"none","&:hover":{color:"#1f2937"}},footer:{display:"flex",justifyContent:"flex-end",gap:"12px",marginTop:"24px"},cancelButton:{padding:"8px 16px",fontSize:"14px",color:"#6b7280",backgroundColor:"#f3f4f6",border:"none",borderRadius:"6px",cursor:"pointer","&:hover":{backgroundColor:"#e5e7eb"}},saveButton:{padding:"8px 16px",fontSize:"14px",color:"white",backgroundColor:"#2563eb",border:"none",borderRadius:"6px",cursor:"pointer","&:hover":{backgroundColor:"#1d4ed8"}}};function P5({open:t,onClose:e,onSave:n}){const[r,i]=y.useState(""),[o,s]=y.useState(""),a=()=>{n(r,o),i(""),s(""),e()};return h.jsx(Ll,{open:t,onOpenChange:e,children:h.jsxs($l,{children:[h.jsx(Fl,{style:en.overlay}),h.jsxs(Bl,{style:en.content,children:[h.jsx(zl,{style:en.title,children:"Create snippet"}),h.jsx("button",{style:en.closeButton,onClick:e,children:h.jsx(sa,{})}),h.jsxs("div",{style:en.field,children:[h.jsx("label",{style:en.label,children:"Shorthand"}),h.jsx("div",{style:{position:"relative"},children:h.jsx("input",{style:en.input,type:"text",value:r,onChange:l=>i(l.target.value),placeholder:"Short, memorable trigger for your snippet"})})]}),h.jsxs("div",{style:en.field,children:[h.jsx("label",{style:en.label,children:"Content"}),h.jsx("textarea",{style:en.textarea,value:o,onChange:l=>s(l.target.value),placeholder:"Type or paste your snippet content here..."})]}),h.jsxs("div",{style:en.footer,children:[h.jsx("button",{style:en.cancelButton,onClick:e,children:"Cancel"}),h.jsx("button",{style:en.saveButton,onClick:a,disabled:!r.trim()||!o.trim(),children:"Create Snippet"})]})]})]})})}const ht={...te,section:{marginBottom:"48px"},description:{fontSize:"14px",color:"#6b7280",marginBottom:"24px"},table:{width:"100%",backgroundColor:"#f3f6f9",borderRadius:"8px",padding:"16px"},tableHeader:{display:"grid",gridTemplateColumns:"1fr 1fr auto",gap:"16px",padding:"8px 16px",color:"#6b7280",fontSize:"14px",fontWeight:"500"},tableRow:{display:"grid",gridTemplateColumns:"1fr 1fr auto",gap:"16px",padding:"8px 16px",alignItems:"center"},addButton:{display:"flex",alignItems:"center",gap:"8px",color:"#6b7280",fontSize:"14px",padding:"8px 16px",cursor:"pointer",border:"none",background:"none","&:hover":{color:"#2563eb"}},iconButton:{padding:"4px",border:"none",background:"none",cursor:"pointer",color:"#6b7280","&:hover":{color:"#ef4444"}},snippetCard:{backgroundColor:"white",borderRadius:"8px",padding:"16px",marginBottom:"16px",border:"1px solid #e5e7eb"},snippetHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},snippetCommand:{fontSize:"14px",fontWeight:"500",color:"#1f2937"},snippetText:{fontSize:"14px",color:"#6b7280"}};function tR(){const[t,e]=y.useState([{command:"/test",text:"Tests are not covered under your insurance and may be subject..."}]);return{snippets:t,addSnippet:(i,o)=>{e([...t,{command:`/${i}`,text:o}])},deleteSnippet:i=>{e(t.filter((o,s)=>s!==i))}}}function M5(){const[t,e]=y.useState([{instead:"Chi",doThis:"Qi"}]),{snippets:n,addSnippet:r,deleteSnippet:i}=tR(),[o,s]=y.useState(!1),a=()=>{e([...t,{instead:"",doThis:""}])},l=u=>{e(t.filter((d,f)=>f!==u))},c=(u,d)=>{r(u,d)};return h.jsxs("div",{style:{height:"100%",overflow:"auto",paddingRight:"16px"},children:[h.jsxs("div",{style:ht.section,children:[h.jsx("h2",{style:te.sectionTitle,children:"Replace"}),h.jsx("p",{style:ht.description,children:"Specify any abbreviations or alternative spellings of words you use in your notes"}),h.jsxs("div",{style:ht.table,children:[h.jsxs("div",{style:ht.tableHeader,children:[h.jsx("div",{children:"Instead of"}),h.jsx("div",{children:"Do this"}),h.jsx("div",{})]}),t.map((u,d)=>h.jsxs("div",{style:ht.tableRow,children:[h.jsx("input",{style:te.input,value:u.instead,placeholder:"Type word or phrase"}),h.jsx("input",{style:te.input,value:u.doThis,placeholder:"Type replacement"}),h.jsx("button",{style:ht.iconButton,onClick:()=>l(d),children:h.jsx(vy,{width:20,height:20})})]},d))]}),h.jsxs("button",{style:ht.addButton,onClick:a,children:[h.jsx(Ff,{width:20,height:20}),"New replacement"]})]}),h.jsxs("div",{style:ht.section,children:[h.jsx("h2",{style:te.sectionTitle,children:"Snippets"}),h.jsx("p",{style:ht.description,children:"Type / to insert your pre-written text snippets"}),n.map((u,d)=>h.jsxs("div",{style:ht.snippetCard,children:[h.jsxs("div",{style:ht.snippetHeader,children:[h.jsx("div",{style:ht.snippetCommand,children:u.command}),h.jsxs("div",{style:{display:"flex",gap:"8px"},children:[h.jsx("button",{style:ht.iconButton,children:h.jsx(Zz,{width:20,height:20})}),h.jsx("button",{style:ht.iconButton,onClick:()=>i(d),children:h.jsx(vy,{width:20,height:20})})]})]}),h.jsx("div",{style:ht.snippetText,children:u.text})]},d)),h.jsxs("button",{style:ht.addButton,onClick:()=>s(!0),children:[h.jsx(Ff,{width:20,height:20}),"New snippet"]})]}),h.jsx(P5,{open:o,onClose:()=>s(!1),onSave:c})]})}const lr={tabsContainer:{display:"flex",gap:"1px",alignItems:"flex-end",height:"44px",flexShrink:0,overflow:"auto hidden",WebkitOverflowScrolling:"touch",borderBottom:"1px solid #e5e7eb",position:"relative",zIndex:10},tab:{padding:"0 12px",backgroundColor:"#f3f4f6",border:"none",borderTopLeftRadius:"6px",borderTopRightRadius:"6px",borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px",cursor:"pointer",fontWeight:"500",color:"#6b7280",transition:"all 0.15s ease",height:"44px",display:"flex",alignItems:"center",fontSize:"13px",whiteSpace:"nowrap",position:"relative",marginBottom:"-1px","&:hover":{backgroundColor:"#f9fafb"}},activeTab:{backgroundColor:"#ffffff",color:"#111827",zIndex:1,borderLeft:"1px solid rgb(229, 231, 235)",borderRight:"1px solid rgb(229, 231, 235)",borderTop:"1px solid rgb(229, 231, 235)"},generateButton:{display:"flex",alignItems:"center",justifyContent:"center",minWidth:"32px",height:"32px",padding:0,backgroundColor:"#ffffff",border:"1px solid #e5e7eb",borderRadius:"6px",cursor:"pointer",transition:"all 0.15s ease",fontSize:"16px",lineHeight:"1",flexShrink:0,marginLeft:"4px",marginBottom:"4px",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.05)","&:hover":{backgroundColor:"#f9fafb"}}};function A5({activeTab:t,setActiveTab:e,aiContext:n,soapNote:r,templateNotes:i,onOpenTemplateModal:o}){const s=[...i].sort((a,l)=>{const c=new Date(a.created_at||0),u=new Date(l.created_at||0);return c.getTime()-u.getTime()});return h.jsxs("div",{style:lr.tabsContainer,className:"tabs-container",children:[h.jsx("button",{style:{...lr.tab,...t==="transcript"?lr.activeTab:{}},onClick:()=>e("transcript"),children:"Transcript"}),n&&h.jsx("button",{style:{...lr.tab,...t==="ai_context"?lr.activeTab:{}},onClick:()=>e("ai_context"),children:"Context"}),r&&h.jsx("button",{style:{...lr.tab,...t==="soap"?lr.activeTab:{}},onClick:()=>e("soap"),children:"SOAP Note"}),s.map(a=>{const l=a.metadata;return h.jsxs("button",{style:{...lr.tab,...t===a.id?lr.activeTab:{}},onClick:()=>e(a.id),children:[(l==null?void 0:l.template_name)||"Template Note",a.version_id&&a.version_id>1?` (v${a.version_id})`:""]},a.id)}),r&&h.jsx("button",{style:lr.generateButton,onClick:o,title:"Generate from template",children:"+"})]})}function I0(){const t=Be();return{getValidSessionToken:async()=>{const{data:{session:n},error:r}=await t.auth.getSession();if(r)throw new Error("Failed to get session: "+r.message);if(!(n!=null&&n.access_token)){const{data:{session:i},error:o}=await t.auth.refreshSession();if(o||!(i!=null&&i.access_token))throw new Error("No valid session available");return console.log("[Session] Using refreshed session token"),i.access_token}return console.log("[Session] Using existing session token"),n.access_token}}}function D5({visitId:t,onSuccess:e}){const[n,r]=y.useState(!1),i=Be(),{getValidSessionToken:o}=I0();return{generateFromTemplate:async a=>{if(!(!t||n)){r(!0);try{const{data:l,error:c}=await i.from("notes").insert({visit_id:t,content:"Generating note...",type:"template",template_id:a.id,metadata:{template_name:a.name,status:"processing"},user_facing:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select("id").single();if(c){console.error("Error creating placeholder note:",c);return}const{data:u,error:d}=await i.from("notes").select("*").eq("visit_id",t).eq("type","template").order("created_at",{ascending:!1});!d&&u&&(e==null||e(l.id,u));const f=await o(),p=await fetch(`${Qi.apiUrl}/generate-from-template`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${f}`},body:JSON.stringify({visitId:t,templateId:a.id,noteId:l.id})});if(!p.ok){const m=await p.json();throw new Error(m.error||"Failed to generate note")}}catch(l){console.error("Error generating template note:",l);const{error:c}=await i.from("notes").upsert({visit_id:t,content:"Failed to generate note. Please try again.",type:"template",user_facing:!0,updated_at:new Date().toISOString(),metadata:{template_id:a.id,template_name:a.name,status:"error"}},{onConflict:"visit_id,type,metadata->template_id"});c&&console.error("Error updating note status:",c)}finally{r(!1)}}},isGenerating:n}}/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N5=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),nR=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var I5={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j5=y.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:o,iconNode:s,...a},l)=>y.createElement("svg",{ref:l,...I5,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:nR("lucide",i),...a},[...s.map(([c,u])=>y.createElement(c,u)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=(t,e)=>{const n=y.forwardRef(({className:r,...i},o)=>y.createElement(j5,{ref:o,iconNode:e,className:nR(`lucide-${N5(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L5=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],rR=jt("ChevronDown",L5);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $5=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],F5=jt("ChevronRight",$5);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],z5=jt("CircleAlert",B5);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],V5=jt("CircleCheck",U5);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H5=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],W5=jt("Copy",H5);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K5=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],q5=jt("Ellipsis",K5);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G5=[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],zf=jt("Mic",G5);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J5=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],Y5=jt("Pause",J5);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q5=[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]],X5=jt("Redo",Q5);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z5=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],iR=jt("RefreshCw",Z5);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e8=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],t8=jt("Save",e8);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n8=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],r8=jt("Square",n8);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i8=[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]],o8=jt("Undo",i8);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s8=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],a8=jt("Upload",s8);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l8=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],c8=jt("X",l8);function j0(t){const e=t+"CollectionProvider",[n,r]=ho(e),[i,o]=n(e,{collectionRef:{current:null},itemMap:new Map}),s=p=>{const{scope:m,children:g}=p,x=ve.useRef(null),v=ve.useRef(new Map).current;return h.jsx(i,{scope:m,itemMap:v,collectionRef:x,children:g})};s.displayName=e;const a=t+"CollectionSlot",l=ve.forwardRef((p,m)=>{const{scope:g,children:x}=p,v=o(a,g),w=Fe(m,v.collectionRef);return h.jsx(ps,{ref:w,children:x})});l.displayName=a;const c=t+"CollectionItemSlot",u="data-radix-collection-item",d=ve.forwardRef((p,m)=>{const{scope:g,children:x,...v}=p,w=ve.useRef(null),S=Fe(m,w),b=o(c,g);return ve.useEffect(()=>(b.itemMap.set(w,{ref:w,...v}),()=>void b.itemMap.delete(w))),h.jsx(ps,{[u]:"",ref:S,children:x})});d.displayName=c;function f(p){const m=o(t+"CollectionConsumer",p);return ve.useCallback(()=>{const x=m.collectionRef.current;if(!x)return[];const v=Array.from(x.querySelectorAll(`[${u}]`));return Array.from(m.itemMap.values()).sort((b,C)=>v.indexOf(b.ref.current)-v.indexOf(C.ref.current))},[m.collectionRef,m.itemMap])}return[{Provider:s,Slot:l,ItemSlot:d},f,r]}var u8=y.createContext(void 0);function oR(t){const e=y.useContext(u8);return t||e||"ltr"}const d8=["top","right","bottom","left"],no=Math.min,sn=Math.max,Uf=Math.round,wd=Math.floor,Cr=t=>({x:t,y:t}),f8={left:"right",right:"left",bottom:"top",top:"bottom"},h8={start:"end",end:"start"};function Sy(t,e,n){return sn(t,no(e,n))}function Xr(t,e){return typeof t=="function"?t(e):t}function Zr(t){return t.split("-")[0]}function dl(t){return t.split("-")[1]}function L0(t){return t==="x"?"y":"x"}function $0(t){return t==="y"?"height":"width"}function ro(t){return["top","bottom"].includes(Zr(t))?"y":"x"}function F0(t){return L0(ro(t))}function p8(t,e,n){n===void 0&&(n=!1);const r=dl(t),i=F0(t),o=$0(i);let s=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(s=Vf(s)),[s,Vf(s)]}function m8(t){const e=Vf(t);return[Cy(t),e,Cy(e)]}function Cy(t){return t.replace(/start|end/g,e=>h8[e])}function g8(t,e,n){const r=["left","right"],i=["right","left"],o=["top","bottom"],s=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?o:s;default:return[]}}function y8(t,e,n,r){const i=dl(t);let o=g8(Zr(t),n==="start",r);return i&&(o=o.map(s=>s+"-"+i),e&&(o=o.concat(o.map(Cy)))),o}function Vf(t){return t.replace(/left|right|bottom|top/g,e=>f8[e])}function v8(t){return{top:0,right:0,bottom:0,left:0,...t}}function sR(t){return typeof t!="number"?v8(t):{top:t,right:t,bottom:t,left:t}}function Hf(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function $1(t,e,n){let{reference:r,floating:i}=t;const o=ro(e),s=F0(e),a=$0(s),l=Zr(e),c=o==="y",u=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,f=r[a]/2-i[a]/2;let p;switch(l){case"top":p={x:u,y:r.y-i.height};break;case"bottom":p={x:u,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:d};break;case"left":p={x:r.x-i.width,y:d};break;default:p={x:r.x,y:r.y}}switch(dl(e)){case"start":p[s]-=f*(n&&c?-1:1);break;case"end":p[s]+=f*(n&&c?-1:1);break}return p}const x8=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:s}=n,a=o.filter(Boolean),l=await(s.isRTL==null?void 0:s.isRTL(e));let c=await s.getElementRects({reference:t,floating:e,strategy:i}),{x:u,y:d}=$1(c,r,l),f=r,p={},m=0;for(let g=0;g<a.length;g++){const{name:x,fn:v}=a[g],{x:w,y:S,data:b,reset:C}=await v({x:u,y:d,initialPlacement:r,placement:f,strategy:i,middlewareData:p,rects:c,platform:s,elements:{reference:t,floating:e}});u=w??u,d=S??d,p={...p,[x]:{...p[x],...b}},C&&m<=50&&(m++,typeof C=="object"&&(C.placement&&(f=C.placement),C.rects&&(c=C.rects===!0?await s.getElementRects({reference:t,floating:e,strategy:i}):C.rects),{x:u,y:d}=$1(c,f,l)),g=-1)}return{x:u,y:d,placement:f,strategy:i,middlewareData:p}};async function Uc(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:o,rects:s,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:p=0}=Xr(e,t),m=sR(p),x=a[f?d==="floating"?"reference":"floating":d],v=Hf(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(x)))==null||n?x:x.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),w=d==="floating"?{x:r,y:i,width:s.floating.width,height:s.floating.height}:s.reference,S=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),b=await(o.isElement==null?void 0:o.isElement(S))?await(o.getScale==null?void 0:o.getScale(S))||{x:1,y:1}:{x:1,y:1},C=Hf(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:w,offsetParent:S,strategy:l}):w);return{top:(v.top-C.top+m.top)/b.y,bottom:(C.bottom-v.bottom+m.bottom)/b.y,left:(v.left-C.left+m.left)/b.x,right:(C.right-v.right+m.right)/b.x}}const w8=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:o,platform:s,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=Xr(t,e)||{};if(c==null)return{};const d=sR(u),f={x:n,y:r},p=F0(i),m=$0(p),g=await s.getDimensions(c),x=p==="y",v=x?"top":"left",w=x?"bottom":"right",S=x?"clientHeight":"clientWidth",b=o.reference[m]+o.reference[p]-f[p]-o.floating[m],C=f[p]-o.reference[p],k=await(s.getOffsetParent==null?void 0:s.getOffsetParent(c));let E=k?k[S]:0;(!E||!await(s.isElement==null?void 0:s.isElement(k)))&&(E=a.floating[S]||o.floating[m]);const _=b/2-C/2,P=E/2-g[m]/2-1,R=no(d[v],P),N=no(d[w],P),A=R,I=E-g[m]-N,O=E/2-g[m]/2+_,L=Sy(A,O,I),$=!l.arrow&&dl(i)!=null&&O!==L&&o.reference[m]/2-(O<A?R:N)-g[m]/2<0,H=$?O<A?O-A:O-I:0;return{[p]:f[p]+H,data:{[p]:L,centerOffset:O-L-H,...$&&{alignmentOffset:H}},reset:$}}}),b8=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:o,rects:s,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:g=!0,...x}=Xr(t,e);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const v=Zr(i),w=ro(a),S=Zr(a)===a,b=await(l.isRTL==null?void 0:l.isRTL(c.floating)),C=f||(S||!g?[Vf(a)]:m8(a)),k=m!=="none";!f&&k&&C.push(...y8(a,g,m,b));const E=[a,...C],_=await Uc(e,x),P=[];let R=((r=o.flip)==null?void 0:r.overflows)||[];if(u&&P.push(_[v]),d){const O=p8(i,s,b);P.push(_[O[0]],_[O[1]])}if(R=[...R,{placement:i,overflows:P}],!P.every(O=>O<=0)){var N,A;const O=(((N=o.flip)==null?void 0:N.index)||0)+1,L=E[O];if(L)return{data:{index:O,overflows:R},reset:{placement:L}};let $=(A=R.filter(H=>H.overflows[0]<=0).sort((H,M)=>H.overflows[1]-M.overflows[1])[0])==null?void 0:A.placement;if(!$)switch(p){case"bestFit":{var I;const H=(I=R.filter(M=>{if(k){const D=ro(M.placement);return D===w||D==="y"}return!0}).map(M=>[M.placement,M.overflows.filter(D=>D>0).reduce((D,B)=>D+B,0)]).sort((M,D)=>M[1]-D[1])[0])==null?void 0:I[0];H&&($=H);break}case"initialPlacement":$=a;break}if(i!==$)return{reset:{placement:$}}}return{}}}};function F1(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function B1(t){return d8.some(e=>t[e]>=0)}const S8=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=Xr(t,e);switch(r){case"referenceHidden":{const o=await Uc(e,{...i,elementContext:"reference"}),s=F1(o,n.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:B1(s)}}}case"escaped":{const o=await Uc(e,{...i,altBoundary:!0}),s=F1(o,n.floating);return{data:{escapedOffsets:s,escaped:B1(s)}}}default:return{}}}}};async function C8(t,e){const{placement:n,platform:r,elements:i}=t,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),s=Zr(n),a=dl(n),l=ro(n)==="y",c=["left","top"].includes(s)?-1:1,u=o&&l?-1:1,d=Xr(e,t);let{mainAxis:f,crossAxis:p,alignmentAxis:m}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof m=="number"&&(p=a==="end"?m*-1:m),l?{x:p*u,y:f*c}:{x:f*c,y:p*u}}const k8=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:o,placement:s,middlewareData:a}=e,l=await C8(e,t);return s===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:o+l.y,data:{...l,placement:s}}}}},E8=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:o=!0,crossAxis:s=!1,limiter:a={fn:x=>{let{x:v,y:w}=x;return{x:v,y:w}}},...l}=Xr(t,e),c={x:n,y:r},u=await Uc(e,l),d=ro(Zr(i)),f=L0(d);let p=c[f],m=c[d];if(o){const x=f==="y"?"top":"left",v=f==="y"?"bottom":"right",w=p+u[x],S=p-u[v];p=Sy(w,p,S)}if(s){const x=d==="y"?"top":"left",v=d==="y"?"bottom":"right",w=m+u[x],S=m-u[v];m=Sy(w,m,S)}const g=a.fn({...e,[f]:p,[d]:m});return{...g,data:{x:g.x-n,y:g.y-r,enabled:{[f]:o,[d]:s}}}}}},T8=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:o,middlewareData:s}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Xr(t,e),u={x:n,y:r},d=ro(i),f=L0(d);let p=u[f],m=u[d];const g=Xr(a,e),x=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){const S=f==="y"?"height":"width",b=o.reference[f]-o.floating[S]+x.mainAxis,C=o.reference[f]+o.reference[S]-x.mainAxis;p<b?p=b:p>C&&(p=C)}if(c){var v,w;const S=f==="y"?"width":"height",b=["top","left"].includes(Zr(i)),C=o.reference[d]-o.floating[S]+(b&&((v=s.offset)==null?void 0:v[d])||0)+(b?0:x.crossAxis),k=o.reference[d]+o.reference[S]+(b?0:((w=s.offset)==null?void 0:w[d])||0)-(b?x.crossAxis:0);m<C?m=C:m>k&&(m=k)}return{[f]:p,[d]:m}}}},_8=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:o,platform:s,elements:a}=e,{apply:l=()=>{},...c}=Xr(t,e),u=await Uc(e,c),d=Zr(i),f=dl(i),p=ro(i)==="y",{width:m,height:g}=o.floating;let x,v;d==="top"||d==="bottom"?(x=d,v=f===(await(s.isRTL==null?void 0:s.isRTL(a.floating))?"start":"end")?"left":"right"):(v=d,x=f==="end"?"top":"bottom");const w=g-u.top-u.bottom,S=m-u.left-u.right,b=no(g-u[x],w),C=no(m-u[v],S),k=!e.middlewareData.shift;let E=b,_=C;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(_=S),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(E=w),k&&!f){const R=sn(u.left,0),N=sn(u.right,0),A=sn(u.top,0),I=sn(u.bottom,0);p?_=m-2*(R!==0||N!==0?R+N:sn(u.left,u.right)):E=g-2*(A!==0||I!==0?A+I:sn(u.top,u.bottom))}await l({...e,availableWidth:_,availableHeight:E});const P=await s.getDimensions(a.floating);return m!==P.width||g!==P.height?{reset:{rects:!0}}:{}}}};function Fh(){return typeof window<"u"}function fl(t){return aR(t)?(t.nodeName||"").toLowerCase():"#document"}function un(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Rr(t){var e;return(e=(aR(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function aR(t){return Fh()?t instanceof Node||t instanceof un(t).Node:!1}function Zn(t){return Fh()?t instanceof Element||t instanceof un(t).Element:!1}function _r(t){return Fh()?t instanceof HTMLElement||t instanceof un(t).HTMLElement:!1}function z1(t){return!Fh()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof un(t).ShadowRoot}function Cu(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=er(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function R8(t){return["table","td","th"].includes(fl(t))}function Bh(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function B0(t){const e=z0(),n=Zn(t)?er(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function O8(t){let e=io(t);for(;_r(e)&&!Za(e);){if(B0(e))return e;if(Bh(e))return null;e=io(e)}return null}function z0(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Za(t){return["html","body","#document"].includes(fl(t))}function er(t){return un(t).getComputedStyle(t)}function zh(t){return Zn(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function io(t){if(fl(t)==="html")return t;const e=t.assignedSlot||t.parentNode||z1(t)&&t.host||Rr(t);return z1(e)?e.host:e}function lR(t){const e=io(t);return Za(e)?t.ownerDocument?t.ownerDocument.body:t.body:_r(e)&&Cu(e)?e:lR(e)}function Vc(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=lR(t),o=i===((r=t.ownerDocument)==null?void 0:r.body),s=un(i);if(o){const a=ky(s);return e.concat(s,s.visualViewport||[],Cu(i)?i:[],a&&n?Vc(a):[])}return e.concat(i,Vc(i,[],n))}function ky(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function cR(t){const e=er(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=_r(t),o=i?t.offsetWidth:n,s=i?t.offsetHeight:r,a=Uf(n)!==o||Uf(r)!==s;return a&&(n=o,r=s),{width:n,height:r,$:a}}function U0(t){return Zn(t)?t:t.contextElement}function xa(t){const e=U0(t);if(!_r(e))return Cr(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:o}=cR(e);let s=(o?Uf(n.width):n.width)/r,a=(o?Uf(n.height):n.height)/i;return(!s||!Number.isFinite(s))&&(s=1),(!a||!Number.isFinite(a))&&(a=1),{x:s,y:a}}const P8=Cr(0);function uR(t){const e=un(t);return!z0()||!e.visualViewport?P8:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function M8(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==un(t)?!1:e}function gs(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),o=U0(t);let s=Cr(1);e&&(r?Zn(r)&&(s=xa(r)):s=xa(t));const a=M8(o,n,r)?uR(o):Cr(0);let l=(i.left+a.x)/s.x,c=(i.top+a.y)/s.y,u=i.width/s.x,d=i.height/s.y;if(o){const f=un(o),p=r&&Zn(r)?un(r):r;let m=f,g=ky(m);for(;g&&r&&p!==m;){const x=xa(g),v=g.getBoundingClientRect(),w=er(g),S=v.left+(g.clientLeft+parseFloat(w.paddingLeft))*x.x,b=v.top+(g.clientTop+parseFloat(w.paddingTop))*x.y;l*=x.x,c*=x.y,u*=x.x,d*=x.y,l+=S,c+=b,m=un(g),g=ky(m)}}return Hf({width:u,height:d,x:l,y:c})}function V0(t,e){const n=zh(t).scrollLeft;return e?e.left+n:gs(Rr(t)).left+n}function dR(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),i=r.left+e.scrollLeft-(n?0:V0(t,r)),o=r.top+e.scrollTop;return{x:i,y:o}}function A8(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const o=i==="fixed",s=Rr(r),a=e?Bh(e.floating):!1;if(r===s||a&&o)return n;let l={scrollLeft:0,scrollTop:0},c=Cr(1);const u=Cr(0),d=_r(r);if((d||!d&&!o)&&((fl(r)!=="body"||Cu(s))&&(l=zh(r)),_r(r))){const p=gs(r);c=xa(r),u.x=p.x+r.clientLeft,u.y=p.y+r.clientTop}const f=s&&!d&&!o?dR(s,l,!0):Cr(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+f.x,y:n.y*c.y-l.scrollTop*c.y+u.y+f.y}}function D8(t){return Array.from(t.getClientRects())}function N8(t){const e=Rr(t),n=zh(t),r=t.ownerDocument.body,i=sn(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),o=sn(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+V0(t);const a=-n.scrollTop;return er(r).direction==="rtl"&&(s+=sn(e.clientWidth,r.clientWidth)-i),{width:i,height:o,x:s,y:a}}function I8(t,e){const n=un(t),r=Rr(t),i=n.visualViewport;let o=r.clientWidth,s=r.clientHeight,a=0,l=0;if(i){o=i.width,s=i.height;const c=z0();(!c||c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:o,height:s,x:a,y:l}}function j8(t,e){const n=gs(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,o=_r(t)?xa(t):Cr(1),s=t.clientWidth*o.x,a=t.clientHeight*o.y,l=i*o.x,c=r*o.y;return{width:s,height:a,x:l,y:c}}function U1(t,e,n){let r;if(e==="viewport")r=I8(t,n);else if(e==="document")r=N8(Rr(t));else if(Zn(e))r=j8(e,n);else{const i=uR(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return Hf(r)}function fR(t,e){const n=io(t);return n===e||!Zn(n)||Za(n)?!1:er(n).position==="fixed"||fR(n,e)}function L8(t,e){const n=e.get(t);if(n)return n;let r=Vc(t,[],!1).filter(a=>Zn(a)&&fl(a)!=="body"),i=null;const o=er(t).position==="fixed";let s=o?io(t):t;for(;Zn(s)&&!Za(s);){const a=er(s),l=B0(s);!l&&a.position==="fixed"&&(i=null),(o?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Cu(s)&&!l&&fR(t,s))?r=r.filter(u=>u!==s):i=a,s=io(s)}return e.set(t,r),r}function $8(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const s=[...n==="clippingAncestors"?Bh(e)?[]:L8(e,this._c):[].concat(n),r],a=s[0],l=s.reduce((c,u)=>{const d=U1(e,u,i);return c.top=sn(d.top,c.top),c.right=no(d.right,c.right),c.bottom=no(d.bottom,c.bottom),c.left=sn(d.left,c.left),c},U1(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function F8(t){const{width:e,height:n}=cR(t);return{width:e,height:n}}function B8(t,e,n){const r=_r(e),i=Rr(e),o=n==="fixed",s=gs(t,!0,o,e);let a={scrollLeft:0,scrollTop:0};const l=Cr(0);if(r||!r&&!o)if((fl(e)!=="body"||Cu(i))&&(a=zh(e)),r){const f=gs(e,!0,o,e);l.x=f.x+e.clientLeft,l.y=f.y+e.clientTop}else i&&(l.x=V0(i));const c=i&&!r&&!o?dR(i,a):Cr(0),u=s.left+a.scrollLeft-l.x-c.x,d=s.top+a.scrollTop-l.y-c.y;return{x:u,y:d,width:s.width,height:s.height}}function vm(t){return er(t).position==="static"}function V1(t,e){if(!_r(t)||er(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Rr(t)===n&&(n=n.ownerDocument.body),n}function hR(t,e){const n=un(t);if(Bh(t))return n;if(!_r(t)){let i=io(t);for(;i&&!Za(i);){if(Zn(i)&&!vm(i))return i;i=io(i)}return n}let r=V1(t,e);for(;r&&R8(r)&&vm(r);)r=V1(r,e);return r&&Za(r)&&vm(r)&&!B0(r)?n:r||O8(t)||n}const z8=async function(t){const e=this.getOffsetParent||hR,n=this.getDimensions,r=await n(t.floating);return{reference:B8(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function U8(t){return er(t).direction==="rtl"}const V8={convertOffsetParentRelativeRectToViewportRelativeRect:A8,getDocumentElement:Rr,getClippingRect:$8,getOffsetParent:hR,getElementRects:z8,getClientRects:D8,getDimensions:F8,getScale:xa,isElement:Zn,isRTL:U8};function pR(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function H8(t,e){let n=null,r;const i=Rr(t);function o(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function s(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),o();const c=t.getBoundingClientRect(),{left:u,top:d,width:f,height:p}=c;if(a||e(),!f||!p)return;const m=wd(d),g=wd(i.clientWidth-(u+f)),x=wd(i.clientHeight-(d+p)),v=wd(u),S={rootMargin:-m+"px "+-g+"px "+-x+"px "+-v+"px",threshold:sn(0,no(1,l))||1};let b=!0;function C(k){const E=k[0].intersectionRatio;if(E!==l){if(!b)return s();E?s(!1,E):r=setTimeout(()=>{s(!1,1e-7)},1e3)}E===1&&!pR(c,t.getBoundingClientRect())&&s(),b=!1}try{n=new IntersectionObserver(C,{...S,root:i.ownerDocument})}catch{n=new IntersectionObserver(C,S)}n.observe(t)}return s(!0),o}function W8(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=U0(t),u=i||o?[...c?Vc(c):[],...Vc(e)]:[];u.forEach(v=>{i&&v.addEventListener("scroll",n,{passive:!0}),o&&v.addEventListener("resize",n)});const d=c&&a?H8(c,n):null;let f=-1,p=null;s&&(p=new ResizeObserver(v=>{let[w]=v;w&&w.target===c&&p&&(p.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var S;(S=p)==null||S.observe(e)})),n()}),c&&!l&&p.observe(c),p.observe(e));let m,g=l?gs(t):null;l&&x();function x(){const v=gs(t);g&&!pR(g,v)&&n(),g=v,m=requestAnimationFrame(x)}return n(),()=>{var v;u.forEach(w=>{i&&w.removeEventListener("scroll",n),o&&w.removeEventListener("resize",n)}),d==null||d(),(v=p)==null||v.disconnect(),p=null,l&&cancelAnimationFrame(m)}}const K8=k8,q8=E8,G8=b8,J8=_8,Y8=S8,H1=w8,Q8=T8,X8=(t,e,n)=>{const r=new Map,i={platform:V8,...n},o={...i.platform,_c:r};return x8(t,e,{...i,platform:o})};var Kd=typeof document<"u"?y.useLayoutEffect:y.useEffect;function Wf(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Wf(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const o=i[r];if(!(o==="_owner"&&t.$$typeof)&&!Wf(t[o],e[o]))return!1}return!0}return t!==t&&e!==e}function mR(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function W1(t,e){const n=mR(t);return Math.round(e*n)/n}function xm(t){const e=y.useRef(t);return Kd(()=>{e.current=t}),e}function Z8(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:o,floating:s}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[u,d]=y.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,p]=y.useState(r);Wf(f,r)||p(r);const[m,g]=y.useState(null),[x,v]=y.useState(null),w=y.useCallback(M=>{M!==k.current&&(k.current=M,g(M))},[]),S=y.useCallback(M=>{M!==E.current&&(E.current=M,v(M))},[]),b=o||m,C=s||x,k=y.useRef(null),E=y.useRef(null),_=y.useRef(u),P=l!=null,R=xm(l),N=xm(i),A=xm(c),I=y.useCallback(()=>{if(!k.current||!E.current)return;const M={placement:e,strategy:n,middleware:f};N.current&&(M.platform=N.current),X8(k.current,E.current,M).then(D=>{const B={...D,isPositioned:A.current!==!1};O.current&&!Wf(_.current,B)&&(_.current=B,cu.flushSync(()=>{d(B)}))})},[f,e,n,N,A]);Kd(()=>{c===!1&&_.current.isPositioned&&(_.current.isPositioned=!1,d(M=>({...M,isPositioned:!1})))},[c]);const O=y.useRef(!1);Kd(()=>(O.current=!0,()=>{O.current=!1}),[]),Kd(()=>{if(b&&(k.current=b),C&&(E.current=C),b&&C){if(R.current)return R.current(b,C,I);I()}},[b,C,I,R,P]);const L=y.useMemo(()=>({reference:k,floating:E,setReference:w,setFloating:S}),[w,S]),$=y.useMemo(()=>({reference:b,floating:C}),[b,C]),H=y.useMemo(()=>{const M={position:n,left:0,top:0};if(!$.floating)return M;const D=W1($.floating,u.x),B=W1($.floating,u.y);return a?{...M,transform:"translate("+D+"px, "+B+"px)",...mR($.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:D,top:B}},[n,a,$.floating,u.x,u.y]);return y.useMemo(()=>({...u,update:I,refs:L,elements:$,floatingStyles:H}),[u,I,L,$,H])}const eU=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?H1({element:r.current,padding:i}).fn(n):{}:r?H1({element:r,padding:i}).fn(n):{}}}},tU=(t,e)=>({...K8(t),options:[t,e]}),nU=(t,e)=>({...q8(t),options:[t,e]}),rU=(t,e)=>({...Q8(t),options:[t,e]}),iU=(t,e)=>({...G8(t),options:[t,e]}),oU=(t,e)=>({...J8(t),options:[t,e]}),sU=(t,e)=>({...Y8(t),options:[t,e]}),aU=(t,e)=>({...eU(t),options:[t,e]});var lU="Arrow",gR=y.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...o}=t;return h.jsx(ye.svg,{...o,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:h.jsx("polygon",{points:"0,0 30,0 15,10"})})});gR.displayName=lU;var cU=gR;function uU(t){const[e,n]=y.useState(void 0);return to(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const o=i[0];let s,a;if("borderBoxSize"in o){const l=o.borderBoxSize,c=Array.isArray(l)?l[0]:l;s=c.inlineSize,a=c.blockSize}else s=t.offsetWidth,a=t.offsetHeight;n({width:s,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var H0="Popper",[yR,Uh]=ho(H0),[dU,vR]=yR(H0),xR=t=>{const{__scopePopper:e,children:n}=t,[r,i]=y.useState(null);return h.jsx(dU,{scope:e,anchor:r,onAnchorChange:i,children:n})};xR.displayName=H0;var wR="PopperAnchor",bR=y.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,o=vR(wR,n),s=y.useRef(null),a=Fe(e,s);return y.useEffect(()=>{o.onAnchorChange((r==null?void 0:r.current)||s.current)}),r?null:h.jsx(ye.div,{...i,ref:a})});bR.displayName=wR;var W0="PopperContent",[fU,hU]=yR(W0),SR=y.forwardRef((t,e)=>{var je,bt,Ve,$t,Or,mo;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:o="center",alignOffset:s=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:f=!1,updatePositionStrategy:p="optimized",onPlaced:m,...g}=t,x=vR(W0,n),[v,w]=y.useState(null),S=Fe(e,Ln=>w(Ln)),[b,C]=y.useState(null),k=uU(b),E=(k==null?void 0:k.width)??0,_=(k==null?void 0:k.height)??0,P=r+(o!=="center"?"-"+o:""),R=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},N=Array.isArray(c)?c:[c],A=N.length>0,I={padding:R,boundary:N.filter(mU),altBoundary:A},{refs:O,floatingStyles:L,placement:$,isPositioned:H,middlewareData:M}=Z8({strategy:"fixed",placement:P,whileElementsMounted:(...Ln)=>W8(...Ln,{animationFrame:p==="always"}),elements:{reference:x.anchor},middleware:[tU({mainAxis:i+_,alignmentAxis:s}),l&&nU({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?rU():void 0,...I}),l&&iU({...I}),oU({...I,apply:({elements:Ln,rects:go,availableWidth:Ts,availableHeight:yo})=>{const{width:vo,height:_s}=go.reference,Pr=Ln.floating.style;Pr.setProperty("--radix-popper-available-width",`${Ts}px`),Pr.setProperty("--radix-popper-available-height",`${yo}px`),Pr.setProperty("--radix-popper-anchor-width",`${vo}px`),Pr.setProperty("--radix-popper-anchor-height",`${_s}px`)}}),b&&aU({element:b,padding:a}),gU({arrowWidth:E,arrowHeight:_}),f&&sU({strategy:"referenceHidden",...I})]}),[D,B]=ER($),Q=Dt(m);to(()=>{H&&(Q==null||Q())},[H,Q]);const U=(je=M.arrow)==null?void 0:je.x,ee=(bt=M.arrow)==null?void 0:bt.y,he=((Ve=M.arrow)==null?void 0:Ve.centerOffset)!==0,[_e,Ce]=y.useState();return to(()=>{v&&Ce(window.getComputedStyle(v).zIndex)},[v]),h.jsx("div",{ref:O.setFloating,"data-radix-popper-content-wrapper":"",style:{...L,transform:H?L.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:_e,"--radix-popper-transform-origin":[($t=M.transformOrigin)==null?void 0:$t.x,(Or=M.transformOrigin)==null?void 0:Or.y].join(" "),...((mo=M.hide)==null?void 0:mo.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:h.jsx(fU,{scope:n,placedSide:D,onArrowChange:C,arrowX:U,arrowY:ee,shouldHideArrow:he,children:h.jsx(ye.div,{"data-side":D,"data-align":B,...g,ref:S,style:{...g.style,animation:H?void 0:"none"}})})})});SR.displayName=W0;var CR="PopperArrow",pU={top:"bottom",right:"left",bottom:"top",left:"right"},kR=y.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,o=hU(CR,r),s=pU[o.placedSide];return h.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:h.jsx(cU,{...i,ref:n,style:{...i.style,display:"block"}})})});kR.displayName=CR;function mU(t){return t!==null}var gU=t=>({name:"transformOrigin",options:t,fn(e){var x,v,w;const{placement:n,rects:r,middlewareData:i}=e,s=((x=i.arrow)==null?void 0:x.centerOffset)!==0,a=s?0:t.arrowWidth,l=s?0:t.arrowHeight,[c,u]=ER(n),d={start:"0%",center:"50%",end:"100%"}[u],f=(((v=i.arrow)==null?void 0:v.x)??0)+a/2,p=(((w=i.arrow)==null?void 0:w.y)??0)+l/2;let m="",g="";return c==="bottom"?(m=s?d:`${f}px`,g=`${-l}px`):c==="top"?(m=s?d:`${f}px`,g=`${r.floating.height+l}px`):c==="right"?(m=`${-l}px`,g=s?d:`${p}px`):c==="left"&&(m=`${r.floating.width+l}px`,g=s?d:`${p}px`),{data:{x:m,y:g}}}});function ER(t){const[e,n="center"]=t.split("-");return[e,n]}var TR=xR,K0=bR,_R=SR,RR=kR,wm="rovingFocusGroup.onEntryFocus",yU={bubbles:!1,cancelable:!0},Vh="RovingFocusGroup",[Ey,OR,vU]=j0(Vh),[xU,PR]=ho(Vh,[vU]),[wU,bU]=xU(Vh),MR=y.forwardRef((t,e)=>h.jsx(Ey.Provider,{scope:t.__scopeRovingFocusGroup,children:h.jsx(Ey.Slot,{scope:t.__scopeRovingFocusGroup,children:h.jsx(SU,{...t,ref:e})})}));MR.displayName=Vh;var SU=y.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:o,currentTabStopId:s,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=t,f=y.useRef(null),p=Fe(e,f),m=oR(o),[g=null,x]=wu({prop:s,defaultProp:a,onChange:l}),[v,w]=y.useState(!1),S=Dt(c),b=OR(n),C=y.useRef(!1),[k,E]=y.useState(0);return y.useEffect(()=>{const _=f.current;if(_)return _.addEventListener(wm,S),()=>_.removeEventListener(wm,S)},[S]),h.jsx(wU,{scope:n,orientation:r,dir:m,loop:i,currentTabStopId:g,onItemFocus:y.useCallback(_=>x(_),[x]),onItemShiftTab:y.useCallback(()=>w(!0),[]),onFocusableItemAdd:y.useCallback(()=>E(_=>_+1),[]),onFocusableItemRemove:y.useCallback(()=>E(_=>_-1),[]),children:h.jsx(ye.div,{tabIndex:v||k===0?-1:0,"data-orientation":r,...d,ref:p,style:{outline:"none",...t.style},onMouseDown:X(t.onMouseDown,()=>{C.current=!0}),onFocus:X(t.onFocus,_=>{const P=!C.current;if(_.target===_.currentTarget&&P&&!v){const R=new CustomEvent(wm,yU);if(_.currentTarget.dispatchEvent(R),!R.defaultPrevented){const N=b().filter($=>$.focusable),A=N.find($=>$.active),I=N.find($=>$.id===g),L=[A,I,...N].filter(Boolean).map($=>$.ref.current);NR(L,u)}}C.current=!1}),onBlur:X(t.onBlur,()=>w(!1))})})}),AR="RovingFocusGroupItem",DR=y.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:o,...s}=t,a=Zo(),l=o||a,c=bU(AR,n),u=c.currentTabStopId===l,d=OR(n),{onFocusableItemAdd:f,onFocusableItemRemove:p}=c;return y.useEffect(()=>{if(r)return f(),()=>p()},[r,f,p]),h.jsx(Ey.ItemSlot,{scope:n,id:l,focusable:r,active:i,children:h.jsx(ye.span,{tabIndex:u?0:-1,"data-orientation":c.orientation,...s,ref:e,onMouseDown:X(t.onMouseDown,m=>{r?c.onItemFocus(l):m.preventDefault()}),onFocus:X(t.onFocus,()=>c.onItemFocus(l)),onKeyDown:X(t.onKeyDown,m=>{if(m.key==="Tab"&&m.shiftKey){c.onItemShiftTab();return}if(m.target!==m.currentTarget)return;const g=EU(m,c.orientation,c.dir);if(g!==void 0){if(m.metaKey||m.ctrlKey||m.altKey||m.shiftKey)return;m.preventDefault();let v=d().filter(w=>w.focusable).map(w=>w.ref.current);if(g==="last")v.reverse();else if(g==="prev"||g==="next"){g==="prev"&&v.reverse();const w=v.indexOf(m.currentTarget);v=c.loop?TU(v,w+1):v.slice(w+1)}setTimeout(()=>NR(v))}})})})});DR.displayName=AR;var CU={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function kU(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function EU(t,e,n){const r=kU(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return CU[r]}function NR(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function TU(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var _U=MR,RU=DR,Ty=["Enter"," "],OU=["ArrowDown","PageUp","Home"],IR=["ArrowUp","PageDown","End"],PU=[...OU,...IR],MU={ltr:[...Ty,"ArrowRight"],rtl:[...Ty,"ArrowLeft"]},AU={ltr:["ArrowLeft"],rtl:["ArrowRight"]},ku="Menu",[Hc,DU,NU]=j0(ku),[ks,jR]=ho(ku,[NU,Uh,PR]),Hh=Uh(),LR=PR(),[IU,Es]=ks(ku),[jU,Eu]=ks(ku),$R=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:i,onOpenChange:o,modal:s=!0}=t,a=Hh(e),[l,c]=y.useState(null),u=y.useRef(!1),d=Dt(o),f=oR(i);return y.useEffect(()=>{const p=()=>{u.current=!0,document.addEventListener("pointerdown",m,{capture:!0,once:!0}),document.addEventListener("pointermove",m,{capture:!0,once:!0})},m=()=>u.current=!1;return document.addEventListener("keydown",p,{capture:!0}),()=>{document.removeEventListener("keydown",p,{capture:!0}),document.removeEventListener("pointerdown",m,{capture:!0}),document.removeEventListener("pointermove",m,{capture:!0})}},[]),h.jsx(TR,{...a,children:h.jsx(IU,{scope:e,open:n,onOpenChange:d,content:l,onContentChange:c,children:h.jsx(jU,{scope:e,onClose:y.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:u,dir:f,modal:s,children:r})})})};$R.displayName=ku;var LU="MenuAnchor",q0=y.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=Hh(n);return h.jsx(K0,{...i,...r,ref:e})});q0.displayName=LU;var G0="MenuPortal",[$U,FR]=ks(G0,{forceMount:void 0}),BR=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:i}=t,o=Es(G0,e);return h.jsx($U,{scope:e,forceMount:n,children:h.jsx(or,{present:n||o.open,children:h.jsx(Su,{asChild:!0,container:i,children:r})})})};BR.displayName=G0;var On="MenuContent",[FU,J0]=ks(On),zR=y.forwardRef((t,e)=>{const n=FR(On,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,o=Es(On,t.__scopeMenu),s=Eu(On,t.__scopeMenu);return h.jsx(Hc.Provider,{scope:t.__scopeMenu,children:h.jsx(or,{present:r||o.open,children:h.jsx(Hc.Slot,{scope:t.__scopeMenu,children:s.modal?h.jsx(BU,{...i,ref:e}):h.jsx(zU,{...i,ref:e})})})})}),BU=y.forwardRef((t,e)=>{const n=Es(On,t.__scopeMenu),r=y.useRef(null),i=Fe(e,r);return y.useEffect(()=>{const o=r.current;if(o)return P0(o)},[]),h.jsx(Y0,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:X(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),zU=y.forwardRef((t,e)=>{const n=Es(On,t.__scopeMenu);return h.jsx(Y0,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Y0=y.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:i,onOpenAutoFocus:o,onCloseAutoFocus:s,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:p,disableOutsideScroll:m,...g}=t,x=Es(On,n),v=Eu(On,n),w=Hh(n),S=LR(n),b=DU(n),[C,k]=y.useState(null),E=y.useRef(null),_=Fe(e,E,x.onContentChange),P=y.useRef(0),R=y.useRef(""),N=y.useRef(0),A=y.useRef(null),I=y.useRef("right"),O=y.useRef(0),L=m?O0:y.Fragment,$=m?{as:ps,allowPinchZoom:!0}:void 0,H=D=>{var je,bt;const B=R.current+D,Q=b().filter(Ve=>!Ve.disabled),U=document.activeElement,ee=(je=Q.find(Ve=>Ve.ref.current===U))==null?void 0:je.textValue,he=Q.map(Ve=>Ve.textValue),_e=ZU(he,B,ee),Ce=(bt=Q.find(Ve=>Ve.textValue===_e))==null?void 0:bt.ref.current;(function Ve($t){R.current=$t,window.clearTimeout(P.current),$t!==""&&(P.current=window.setTimeout(()=>Ve(""),1e3))})(B),Ce&&setTimeout(()=>Ce.focus())};y.useEffect(()=>()=>window.clearTimeout(P.current),[]),R0();const M=y.useCallback(D=>{var Q,U;return I.current===((Q=A.current)==null?void 0:Q.side)&&tV(D,(U=A.current)==null?void 0:U.area)},[]);return h.jsx(FU,{scope:n,searchRef:R,onItemEnter:y.useCallback(D=>{M(D)&&D.preventDefault()},[M]),onItemLeave:y.useCallback(D=>{var B;M(D)||((B=E.current)==null||B.focus(),k(null))},[M]),onTriggerLeave:y.useCallback(D=>{M(D)&&D.preventDefault()},[M]),pointerGraceTimerRef:N,onPointerGraceIntentChange:y.useCallback(D=>{A.current=D},[]),children:h.jsx(L,{...$,children:h.jsx(Lh,{asChild:!0,trapped:i,onMountAutoFocus:X(o,D=>{var B;D.preventDefault(),(B=E.current)==null||B.focus({preventScroll:!0})}),onUnmountAutoFocus:s,children:h.jsx(bu,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:p,children:h.jsx(_U,{asChild:!0,...S,dir:v.dir,orientation:"vertical",loop:r,currentTabStopId:C,onCurrentTabStopIdChange:k,onEntryFocus:X(l,D=>{v.isUsingKeyboardRef.current||D.preventDefault()}),preventScrollOnEntryFocus:!0,children:h.jsx(_R,{role:"menu","aria-orientation":"vertical","data-state":rO(x.open),"data-radix-menu-content":"",dir:v.dir,...w,...g,ref:_,style:{outline:"none",...g.style},onKeyDown:X(g.onKeyDown,D=>{const Q=D.target.closest("[data-radix-menu-content]")===D.currentTarget,U=D.ctrlKey||D.altKey||D.metaKey,ee=D.key.length===1;Q&&(D.key==="Tab"&&D.preventDefault(),!U&&ee&&H(D.key));const he=E.current;if(D.target!==he||!PU.includes(D.key))return;D.preventDefault();const Ce=b().filter(je=>!je.disabled).map(je=>je.ref.current);IR.includes(D.key)&&Ce.reverse(),QU(Ce)}),onBlur:X(t.onBlur,D=>{D.currentTarget.contains(D.target)||(window.clearTimeout(P.current),R.current="")}),onPointerMove:X(t.onPointerMove,Wc(D=>{const B=D.target,Q=O.current!==D.clientX;if(D.currentTarget.contains(B)&&Q){const U=D.clientX>O.current?"right":"left";I.current=U,O.current=D.clientX}}))})})})})})})});zR.displayName=On;var UU="MenuGroup",Q0=y.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return h.jsx(ye.div,{role:"group",...r,ref:e})});Q0.displayName=UU;var VU="MenuLabel",UR=y.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return h.jsx(ye.div,{...r,ref:e})});UR.displayName=VU;var Kf="MenuItem",K1="menu.itemSelect",Wh=y.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...i}=t,o=y.useRef(null),s=Eu(Kf,t.__scopeMenu),a=J0(Kf,t.__scopeMenu),l=Fe(e,o),c=y.useRef(!1),u=()=>{const d=o.current;if(!n&&d){const f=new CustomEvent(K1,{bubbles:!0,cancelable:!0});d.addEventListener(K1,p=>r==null?void 0:r(p),{once:!0}),_0(d,f),f.defaultPrevented?c.current=!1:s.onClose()}};return h.jsx(VR,{...i,ref:l,disabled:n,onClick:X(t.onClick,u),onPointerDown:d=>{var f;(f=t.onPointerDown)==null||f.call(t,d),c.current=!0},onPointerUp:X(t.onPointerUp,d=>{var f;c.current||(f=d.currentTarget)==null||f.click()}),onKeyDown:X(t.onKeyDown,d=>{const f=a.searchRef.current!=="";n||f&&d.key===" "||Ty.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});Wh.displayName=Kf;var VR=y.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:i,...o}=t,s=J0(Kf,n),a=LR(n),l=y.useRef(null),c=Fe(e,l),[u,d]=y.useState(!1),[f,p]=y.useState("");return y.useEffect(()=>{const m=l.current;m&&p((m.textContent??"").trim())},[o.children]),h.jsx(Hc.ItemSlot,{scope:n,disabled:r,textValue:i??f,children:h.jsx(RU,{asChild:!0,...a,focusable:!r,children:h.jsx(ye.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...o,ref:c,onPointerMove:X(t.onPointerMove,Wc(m=>{r?s.onItemLeave(m):(s.onItemEnter(m),m.defaultPrevented||m.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:X(t.onPointerLeave,Wc(m=>s.onItemLeave(m))),onFocus:X(t.onFocus,()=>d(!0)),onBlur:X(t.onBlur,()=>d(!1))})})})}),HU="MenuCheckboxItem",HR=y.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...i}=t;return h.jsx(JR,{scope:t.__scopeMenu,checked:n,children:h.jsx(Wh,{role:"menuitemcheckbox","aria-checked":qf(n)?"mixed":n,...i,ref:e,"data-state":Z0(n),onSelect:X(i.onSelect,()=>r==null?void 0:r(qf(n)?!0:!n),{checkForDefaultPrevented:!1})})})});HR.displayName=HU;var WR="MenuRadioGroup",[WU,KU]=ks(WR,{value:void 0,onValueChange:()=>{}}),KR=y.forwardRef((t,e)=>{const{value:n,onValueChange:r,...i}=t,o=Dt(r);return h.jsx(WU,{scope:t.__scopeMenu,value:n,onValueChange:o,children:h.jsx(Q0,{...i,ref:e})})});KR.displayName=WR;var qR="MenuRadioItem",GR=y.forwardRef((t,e)=>{const{value:n,...r}=t,i=KU(qR,t.__scopeMenu),o=n===i.value;return h.jsx(JR,{scope:t.__scopeMenu,checked:o,children:h.jsx(Wh,{role:"menuitemradio","aria-checked":o,...r,ref:e,"data-state":Z0(o),onSelect:X(r.onSelect,()=>{var s;return(s=i.onValueChange)==null?void 0:s.call(i,n)},{checkForDefaultPrevented:!1})})})});GR.displayName=qR;var X0="MenuItemIndicator",[JR,qU]=ks(X0,{checked:!1}),YR=y.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...i}=t,o=qU(X0,n);return h.jsx(or,{present:r||qf(o.checked)||o.checked===!0,children:h.jsx(ye.span,{...i,ref:e,"data-state":Z0(o.checked)})})});YR.displayName=X0;var GU="MenuSeparator",QR=y.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return h.jsx(ye.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});QR.displayName=GU;var JU="MenuArrow",XR=y.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=Hh(n);return h.jsx(RR,{...i,...r,ref:e})});XR.displayName=JU;var YU="MenuSub",[HH,ZR]=ks(YU),Ul="MenuSubTrigger",eO=y.forwardRef((t,e)=>{const n=Es(Ul,t.__scopeMenu),r=Eu(Ul,t.__scopeMenu),i=ZR(Ul,t.__scopeMenu),o=J0(Ul,t.__scopeMenu),s=y.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=o,c={__scopeMenu:t.__scopeMenu},u=y.useCallback(()=>{s.current&&window.clearTimeout(s.current),s.current=null},[]);return y.useEffect(()=>u,[u]),y.useEffect(()=>{const d=a.current;return()=>{window.clearTimeout(d),l(null)}},[a,l]),h.jsx(q0,{asChild:!0,...c,children:h.jsx(VR,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":i.contentId,"data-state":rO(n.open),...t,ref:jh(e,i.onTriggerChange),onClick:d=>{var f;(f=t.onClick)==null||f.call(t,d),!(t.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:X(t.onPointerMove,Wc(d=>{o.onItemEnter(d),!d.defaultPrevented&&!t.disabled&&!n.open&&!s.current&&(o.onPointerGraceIntentChange(null),s.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:X(t.onPointerLeave,Wc(d=>{var p,m;u();const f=(p=n.content)==null?void 0:p.getBoundingClientRect();if(f){const g=(m=n.content)==null?void 0:m.dataset.side,x=g==="right",v=x?-5:5,w=f[x?"left":"right"],S=f[x?"right":"left"];o.onPointerGraceIntentChange({area:[{x:d.clientX+v,y:d.clientY},{x:w,y:f.top},{x:S,y:f.top},{x:S,y:f.bottom},{x:w,y:f.bottom}],side:g}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(d),d.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:X(t.onKeyDown,d=>{var p;const f=o.searchRef.current!=="";t.disabled||f&&d.key===" "||MU[r.dir].includes(d.key)&&(n.onOpenChange(!0),(p=n.content)==null||p.focus(),d.preventDefault())})})})});eO.displayName=Ul;var tO="MenuSubContent",nO=y.forwardRef((t,e)=>{const n=FR(On,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,o=Es(On,t.__scopeMenu),s=Eu(On,t.__scopeMenu),a=ZR(tO,t.__scopeMenu),l=y.useRef(null),c=Fe(e,l);return h.jsx(Hc.Provider,{scope:t.__scopeMenu,children:h.jsx(or,{present:r||o.open,children:h.jsx(Hc.Slot,{scope:t.__scopeMenu,children:h.jsx(Y0,{id:a.contentId,"aria-labelledby":a.triggerId,...i,ref:c,align:"start",side:s.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var d;s.isUsingKeyboardRef.current&&((d=l.current)==null||d.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:X(t.onFocusOutside,u=>{u.target!==a.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:X(t.onEscapeKeyDown,u=>{s.onClose(),u.preventDefault()}),onKeyDown:X(t.onKeyDown,u=>{var p;const d=u.currentTarget.contains(u.target),f=AU[s.dir].includes(u.key);d&&f&&(o.onOpenChange(!1),(p=a.trigger)==null||p.focus(),u.preventDefault())})})})})})});nO.displayName=tO;function rO(t){return t?"open":"closed"}function qf(t){return t==="indeterminate"}function Z0(t){return qf(t)?"indeterminate":t?"checked":"unchecked"}function QU(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function XU(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function ZU(t,e,n){const i=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,o=n?t.indexOf(n):-1;let s=XU(t,Math.max(o,0));i.length===1&&(s=s.filter(c=>c!==n));const l=s.find(c=>c.toLowerCase().startsWith(i.toLowerCase()));return l!==n?l:void 0}function eV(t,e){const{x:n,y:r}=t;let i=!1;for(let o=0,s=e.length-1;o<e.length;s=o++){const a=e[o].x,l=e[o].y,c=e[s].x,u=e[s].y;l>r!=u>r&&n<(c-a)*(r-l)/(u-l)+a&&(i=!i)}return i}function tV(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return eV(n,e)}function Wc(t){return e=>e.pointerType==="mouse"?t(e):void 0}var nV=$R,rV=q0,iV=BR,oV=zR,sV=Q0,aV=UR,lV=Wh,cV=HR,uV=KR,dV=GR,fV=YR,hV=QR,pV=XR,mV=eO,gV=nO,ex="DropdownMenu",[yV,WH]=ho(ex,[jR]),Lt=jR(),[vV,iO]=yV(ex),oO=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:i,defaultOpen:o,onOpenChange:s,modal:a=!0}=t,l=Lt(e),c=y.useRef(null),[u=!1,d]=wu({prop:i,defaultProp:o,onChange:s});return h.jsx(vV,{scope:e,triggerId:Zo(),triggerRef:c,contentId:Zo(),open:u,onOpenChange:d,onOpenToggle:y.useCallback(()=>d(f=>!f),[d]),modal:a,children:h.jsx(nV,{...l,open:u,onOpenChange:d,dir:r,modal:a,children:n})})};oO.displayName=ex;var sO="DropdownMenuTrigger",aO=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...i}=t,o=iO(sO,n),s=Lt(n);return h.jsx(rV,{asChild:!0,...s,children:h.jsx(ye.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...i,ref:jh(e,o.triggerRef),onPointerDown:X(t.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(o.onOpenToggle(),o.open||a.preventDefault())}),onKeyDown:X(t.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&o.onOpenToggle(),a.key==="ArrowDown"&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});aO.displayName=sO;var xV="DropdownMenuPortal",lO=t=>{const{__scopeDropdownMenu:e,...n}=t,r=Lt(e);return h.jsx(iV,{...r,...n})};lO.displayName=xV;var cO="DropdownMenuContent",uO=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=iO(cO,n),o=Lt(n),s=y.useRef(!1);return h.jsx(oV,{id:i.contentId,"aria-labelledby":i.triggerId,...o,...r,ref:e,onCloseAutoFocus:X(t.onCloseAutoFocus,a=>{var l;s.current||(l=i.triggerRef.current)==null||l.focus(),s.current=!1,a.preventDefault()}),onInteractOutside:X(t.onInteractOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;(!i.modal||u)&&(s.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});uO.displayName=cO;var wV="DropdownMenuGroup",bV=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Lt(n);return h.jsx(sV,{...i,...r,ref:e})});bV.displayName=wV;var SV="DropdownMenuLabel",CV=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Lt(n);return h.jsx(aV,{...i,...r,ref:e})});CV.displayName=SV;var kV="DropdownMenuItem",dO=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Lt(n);return h.jsx(lV,{...i,...r,ref:e})});dO.displayName=kV;var EV="DropdownMenuCheckboxItem",TV=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Lt(n);return h.jsx(cV,{...i,...r,ref:e})});TV.displayName=EV;var _V="DropdownMenuRadioGroup",RV=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Lt(n);return h.jsx(uV,{...i,...r,ref:e})});RV.displayName=_V;var OV="DropdownMenuRadioItem",PV=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Lt(n);return h.jsx(dV,{...i,...r,ref:e})});PV.displayName=OV;var MV="DropdownMenuItemIndicator",AV=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Lt(n);return h.jsx(fV,{...i,...r,ref:e})});AV.displayName=MV;var DV="DropdownMenuSeparator",fO=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Lt(n);return h.jsx(hV,{...i,...r,ref:e})});fO.displayName=DV;var NV="DropdownMenuArrow",IV=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Lt(n);return h.jsx(pV,{...i,...r,ref:e})});IV.displayName=NV;var jV="DropdownMenuSubTrigger",LV=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Lt(n);return h.jsx(mV,{...i,...r,ref:e})});LV.displayName=jV;var $V="DropdownMenuSubContent",FV=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Lt(n);return h.jsx(gV,{...i,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});FV.displayName=$V;var Kh=oO,qh=aO,Gh=lO,Jh=uO,dr=dO,q1=fO,BV="VisuallyHidden",tx=y.forwardRef((t,e)=>h.jsx(ye.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));tx.displayName=BV;var nx="ToastProvider",[rx,zV,UV]=j0("Toast"),[hO,KH]=ho("Toast",[UV]),[VV,Yh]=hO(nx),pO=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:o=50,children:s}=t,[a,l]=y.useState(null),[c,u]=y.useState(0),d=y.useRef(!1),f=y.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${nx}\`. Expected non-empty \`string\`.`),h.jsx(rx.Provider,{scope:e,children:h.jsx(VV,{scope:e,label:n,duration:r,swipeDirection:i,swipeThreshold:o,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:y.useCallback(()=>u(p=>p+1),[]),onToastRemove:y.useCallback(()=>u(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:f,children:s})})};pO.displayName=nx;var mO="ToastViewport",HV=["F8"],_y="toast.viewportPause",Ry="toast.viewportResume",gO=y.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=HV,label:i="Notifications ({hotkey})",...o}=t,s=Yh(mO,n),a=zV(n),l=y.useRef(null),c=y.useRef(null),u=y.useRef(null),d=y.useRef(null),f=Fe(e,d,s.onViewportChange),p=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),m=s.toastCount>0;y.useEffect(()=>{const x=v=>{var S;r.length!==0&&r.every(b=>v[b]||v.code===b)&&((S=d.current)==null||S.focus())};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[r]),y.useEffect(()=>{const x=l.current,v=d.current;if(m&&x&&v){const w=()=>{if(!s.isClosePausedRef.current){const k=new CustomEvent(_y);v.dispatchEvent(k),s.isClosePausedRef.current=!0}},S=()=>{if(s.isClosePausedRef.current){const k=new CustomEvent(Ry);v.dispatchEvent(k),s.isClosePausedRef.current=!1}},b=k=>{!x.contains(k.relatedTarget)&&S()},C=()=>{x.contains(document.activeElement)||S()};return x.addEventListener("focusin",w),x.addEventListener("focusout",b),x.addEventListener("pointermove",w),x.addEventListener("pointerleave",C),window.addEventListener("blur",w),window.addEventListener("focus",S),()=>{x.removeEventListener("focusin",w),x.removeEventListener("focusout",b),x.removeEventListener("pointermove",w),x.removeEventListener("pointerleave",C),window.removeEventListener("blur",w),window.removeEventListener("focus",S)}}},[m,s.isClosePausedRef]);const g=y.useCallback(({tabbingDirection:x})=>{const w=a().map(S=>{const b=S.ref.current,C=[b,...i7(b)];return x==="forwards"?C:C.reverse()});return(x==="forwards"?w.reverse():w).flat()},[a]);return y.useEffect(()=>{const x=d.current;if(x){const v=w=>{var C,k,E;const S=w.altKey||w.ctrlKey||w.metaKey;if(w.key==="Tab"&&!S){const _=document.activeElement,P=w.shiftKey;if(w.target===x&&P){(C=c.current)==null||C.focus();return}const A=g({tabbingDirection:P?"backwards":"forwards"}),I=A.findIndex(O=>O===_);bm(A.slice(I+1))?w.preventDefault():P?(k=c.current)==null||k.focus():(E=u.current)==null||E.focus()}};return x.addEventListener("keydown",v),()=>x.removeEventListener("keydown",v)}},[a,g]),h.jsxs(k6,{ref:l,role:"region","aria-label":i.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:m?void 0:"none"},children:[m&&h.jsx(Oy,{ref:c,onFocusFromOutsideViewport:()=>{const x=g({tabbingDirection:"forwards"});bm(x)}}),h.jsx(rx.Slot,{scope:n,children:h.jsx(ye.ol,{tabIndex:-1,...o,ref:f})}),m&&h.jsx(Oy,{ref:u,onFocusFromOutsideViewport:()=>{const x=g({tabbingDirection:"backwards"});bm(x)}})]})});gO.displayName=mO;var yO="ToastFocusProxy",Oy=y.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...i}=t,o=Yh(yO,n);return h.jsx(tx,{"aria-hidden":!0,tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:s=>{var c;const a=s.relatedTarget;!((c=o.viewport)!=null&&c.contains(a))&&r()}})});Oy.displayName=yO;var Qh="Toast",WV="toast.swipeStart",KV="toast.swipeMove",qV="toast.swipeCancel",GV="toast.swipeEnd",vO=y.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:i,onOpenChange:o,...s}=t,[a=!0,l]=wu({prop:r,defaultProp:i,onChange:o});return h.jsx(or,{present:n||a,children:h.jsx(QV,{open:a,...s,ref:e,onClose:()=>l(!1),onPause:Dt(t.onPause),onResume:Dt(t.onResume),onSwipeStart:X(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:X(t.onSwipeMove,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:X(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:X(t.onSwipeEnd,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),l(!1)})})})});vO.displayName=Qh;var[JV,YV]=hO(Qh,{onClose(){}}),QV=y.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:i,open:o,onClose:s,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:u,onSwipeMove:d,onSwipeCancel:f,onSwipeEnd:p,...m}=t,g=Yh(Qh,n),[x,v]=y.useState(null),w=Fe(e,O=>v(O)),S=y.useRef(null),b=y.useRef(null),C=i||g.duration,k=y.useRef(0),E=y.useRef(C),_=y.useRef(0),{onToastAdd:P,onToastRemove:R}=g,N=Dt(()=>{var L;(x==null?void 0:x.contains(document.activeElement))&&((L=g.viewport)==null||L.focus()),s()}),A=y.useCallback(O=>{!O||O===1/0||(window.clearTimeout(_.current),k.current=new Date().getTime(),_.current=window.setTimeout(N,O))},[N]);y.useEffect(()=>{const O=g.viewport;if(O){const L=()=>{A(E.current),c==null||c()},$=()=>{const H=new Date().getTime()-k.current;E.current=E.current-H,window.clearTimeout(_.current),l==null||l()};return O.addEventListener(_y,$),O.addEventListener(Ry,L),()=>{O.removeEventListener(_y,$),O.removeEventListener(Ry,L)}}},[g.viewport,C,l,c,A]),y.useEffect(()=>{o&&!g.isClosePausedRef.current&&A(C)},[o,C,g.isClosePausedRef,A]),y.useEffect(()=>(P(),()=>R()),[P,R]);const I=y.useMemo(()=>x?kO(x):null,[x]);return g.viewport?h.jsxs(h.Fragment,{children:[I&&h.jsx(XV,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:I}),h.jsx(JV,{scope:n,onClose:N,children:cu.createPortal(h.jsx(rx.ItemSlot,{scope:n,children:h.jsx(C6,{asChild:!0,onEscapeKeyDown:X(a,()=>{g.isFocusedToastEscapeKeyDownRef.current||N(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:h.jsx(ye.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":g.swipeDirection,...m,ref:w,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:X(t.onKeyDown,O=>{O.key==="Escape"&&(a==null||a(O.nativeEvent),O.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,N()))}),onPointerDown:X(t.onPointerDown,O=>{O.button===0&&(S.current={x:O.clientX,y:O.clientY})}),onPointerMove:X(t.onPointerMove,O=>{if(!S.current)return;const L=O.clientX-S.current.x,$=O.clientY-S.current.y,H=!!b.current,M=["left","right"].includes(g.swipeDirection),D=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,B=M?D(0,L):0,Q=M?0:D(0,$),U=O.pointerType==="touch"?10:2,ee={x:B,y:Q},he={originalEvent:O,delta:ee};H?(b.current=ee,bd(KV,d,he,{discrete:!1})):G1(ee,g.swipeDirection,U)?(b.current=ee,bd(WV,u,he,{discrete:!1}),O.target.setPointerCapture(O.pointerId)):(Math.abs(L)>U||Math.abs($)>U)&&(S.current=null)}),onPointerUp:X(t.onPointerUp,O=>{const L=b.current,$=O.target;if($.hasPointerCapture(O.pointerId)&&$.releasePointerCapture(O.pointerId),b.current=null,S.current=null,L){const H=O.currentTarget,M={originalEvent:O,delta:L};G1(L,g.swipeDirection,g.swipeThreshold)?bd(GV,p,M,{discrete:!0}):bd(qV,f,M,{discrete:!0}),H.addEventListener("click",D=>D.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),XV=t=>{const{__scopeToast:e,children:n,...r}=t,i=Yh(Qh,e),[o,s]=y.useState(!1),[a,l]=y.useState(!1);return n7(()=>s(!0)),y.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:h.jsx(Su,{asChild:!0,children:h.jsx(tx,{...r,children:o&&h.jsxs(h.Fragment,{children:[i.label," ",n]})})})},ZV="ToastTitle",xO=y.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return h.jsx(ye.div,{...r,ref:e})});xO.displayName=ZV;var e7="ToastDescription",wO=y.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return h.jsx(ye.div,{...r,ref:e})});wO.displayName=e7;var bO="ToastAction",t7=y.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?h.jsx(CO,{altText:n,asChild:!0,children:h.jsx(ix,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${bO}\`. Expected non-empty \`string\`.`),null)});t7.displayName=bO;var SO="ToastClose",ix=y.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,i=YV(SO,n);return h.jsx(CO,{asChild:!0,children:h.jsx(ye.button,{type:"button",...r,ref:e,onClick:X(t.onClick,i.onClose)})})});ix.displayName=SO;var CO=y.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...i}=t;return h.jsx(ye.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:e})});function kO(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),r7(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",o=r.dataset.radixToastAnnounceExclude==="";if(!i)if(o){const s=r.dataset.radixToastAnnounceAlt;s&&e.push(s)}else e.push(...kO(r))}}),e}function bd(t,e,n,{discrete:r}){const i=n.originalEvent.currentTarget,o=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?_0(i,o):i.dispatchEvent(o)}var G1=(t,e,n=0)=>{const r=Math.abs(t.x),i=Math.abs(t.y),o=r>i;return e==="left"||e==="right"?o&&r>n:!o&&i>n};function n7(t=()=>{}){const e=Dt(t);to(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function r7(t){return t.nodeType===t.ELEMENT_NODE}function i7(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function bm(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var o7=pO,s7=gO,a7=vO,l7=xO,c7=wO,u7=ix;const d7=`
  .toast-close-button {
    all: unset;
    cursor: pointer;
    color: #9CA3AF;
    flex-shrink: 0;
    padding: 2px;
    border-radius: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
  }
  
  .toast-close-button:hover {
    background-color: #F3F4F6;
    color: #6B7280;
  }

  @keyframes slideIn {
    from {
      transform: translateY(100%);
      opacity: 0;
    }
    to {
      transform: translateY(0);
      opacity: 1;
    }
  }

  @keyframes slideOut {
    from {
      transform: translateY(0);
      opacity: 1;
    }
    to {
      transform: translateY(100%);
      opacity: 0;
    }
  }

  .toast-root[data-state='open'] {
    animation: slideIn 300ms cubic-bezier(0.16, 1, 0.3, 1);
  }

  .toast-root[data-state='closed'] {
    animation: slideOut 300ms cubic-bezier(0.16, 1, 0.3, 1);
  }
`,Bs={viewport:{position:"fixed",bottom:"32px",left:"50%",transform:"translateX(-50%)",display:"flex",flexDirection:"column",padding:"25px",gap:"10px",width:"fit-content",minWidth:"300px",maxWidth:"480px",listStyle:"none",zIndex:2147483647,outline:"none"},toast:{backgroundColor:"white",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",padding:"16px",display:"flex",alignItems:"flex-start",justifyContent:"space-between",gap:"12px",border:"1px solid #e5e7eb",width:"100%"},title:{color:"#111827",fontSize:"14px",fontWeight:600,marginBottom:"4px"},description:{color:"#6b7280",fontSize:"13px"},icon:{flexShrink:0,marginTop:"2px"}},EO=y.createContext(null);function f7({children:t}){const[e,n]=y.useState({open:!1,title:"",description:"",type:"success"}),r=(i,o,s="success")=>{n({open:!0,title:i,description:o,type:s})};return h.jsx(EO.Provider,{value:{showToast:r},children:h.jsxs(o7,{swipeDirection:"down",duration:2e3,children:[h.jsx("style",{children:d7}),t,h.jsxs(a7,{open:e.open,onOpenChange:i=>n(o=>({...o,open:i})),style:Bs.toast,className:"toast-root",children:[h.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px",flex:1},children:[e.type==="success"?h.jsx(V5,{size:18,style:{...Bs.icon,color:"#10b981"}}):h.jsx(z5,{size:18,style:{...Bs.icon,color:"#ef4444"}}),h.jsxs("div",{style:{flex:1},children:[h.jsx(l7,{style:Bs.title,children:e.title}),h.jsx(c7,{style:Bs.description,children:e.description})]})]}),h.jsx(u7,{asChild:!0,children:h.jsx("button",{className:"toast-close-button",children:h.jsx(c8,{size:16})})})]}),h.jsx(s7,{style:Bs.viewport})]})})}function h7(){const t=y.useContext(EO);if(!t)throw new Error("useToast must be used within a ToastProvider");return t}function gn(){const t=Be(),e=xs(),{data:n,isLoading:r,error:i}=Rc({queryKey:["user"],queryFn:async()=>{const o=e.getQueryData(["user"]);if(o)return o;const{data:{user:s},error:a}=await t.auth.getUser();if(a)throw a;if(!s)return null;try{const{data:l,error:c}=await t.from("user_profiles").select("*").eq("id",s.id).single();if(c){if(c.code==="PGRST116")return s;throw c}return{...s,...l}}catch{return s}},staleTime:1/0,gcTime:30*60*1e3,retry:!1,refetchOnMount:!1,refetchOnWindowFocus:!1});return y.useEffect(()=>{const{data:{subscription:o}}=t.auth.onAuthStateChange((s,a)=>{s==="SIGNED_OUT"?e.setQueryData(["user"],null):a!=null&&a.user&&e.invalidateQueries({queryKey:["user"]})});return()=>{o.unsubscribe()}},[t,e]),y.useEffect(()=>{if(!(n!=null&&n.id))return;const o=t.channel(`profile-changes-${n.id}`).on("postgres_changes",{event:"*",schema:"public",table:"user_profiles",filter:`id=eq.${n.id}`},s=>{s.new&&e.setQueryData(["user"],a=>a?{...a,name:s.new.name,specialty:s.new.specialty}:null)}).subscribe();return()=>{o.unsubscribe()}},[t,n==null?void 0:n.id,e]),{user:n,loading:r,error:(i==null?void 0:i.message)||null}}function J1(t){return typeof t=="object"&&t!==null&&"default_copy_mode"in t&&typeof t.default_copy_mode=="string"}function p7(t,e){switch(e){case"plain":return t.getText();case"rich_text":return t.getHTML();case"without_lists":return t.getText();default:return t.getText()}}const me={toolbar:{display:"flex",gap:"4px",alignItems:"center"},button:{padding:"8px",backgroundColor:"#f3f4f6",border:"1px solid #e5e7eb",borderRadius:"4px",cursor:"pointer",color:"#6b7280",display:"flex",alignItems:"center",justifyContent:"center",height:"36px",width:"36px",transition:"all 0.2s ease","&:hover:not(:disabled)":{backgroundColor:"#e5e7eb"},"&:disabled":{opacity:.5,cursor:"not-allowed",backgroundColor:"#f3f4f6"}},divider:{width:"1px",height:"24px",backgroundColor:"#e5e7eb",margin:"0 4px"},buttonContainer:{position:"relative"},dropdown:{position:"absolute",top:"calc(100% + 4px)",right:"0",backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"6px",padding:"4px",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",zIndex:1e3,minWidth:"180px"},dropdownButton:{width:"100%",padding:"8px 12px",border:"none",backgroundColor:"transparent",cursor:"pointer",textAlign:"left",fontSize:"14px",color:"#6b7280",borderRadius:"4px","&:hover":{backgroundColor:"#f3f4f6"}},modal:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"white",padding:"24px",borderRadius:"8px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",zIndex:100,width:"400px"},modalOverlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:99},modalTitle:{fontSize:"18px",fontWeight:"600",color:"#111827",marginBottom:"16px"},modalText:{fontSize:"14px",color:"#4b5563",marginBottom:"24px",lineHeight:"1.5"},modalButtons:{display:"flex",gap:"8px",justifyContent:"flex-end"},modalButton:{padding:"8px 16px",borderRadius:"6px",fontSize:"14px",fontWeight:"500",cursor:"pointer",border:"1px solid #e5e7eb"},modalButtonPrimary:{backgroundColor:"#ef4444",color:"white",border:"none","&:hover":{backgroundColor:"#dc2626"}},modalButtonSecondary:{backgroundColor:"white",color:"#6b7280","&:hover":{backgroundColor:"#f3f4f6"}},copyButtonGroup:{display:"flex",alignItems:"center",gap:"1px"},copyMainButton:{padding:"8px",backgroundColor:"#f3f4f6",border:"1px solid #e5e7eb",borderRadius:"4px 0 0 4px",cursor:"pointer",color:"#6b7280",display:"flex",alignItems:"center",justifyContent:"center",height:"36px",width:"36px",transition:"all 0.2s ease","&:hover":{backgroundColor:"#e5e7eb"}},copyDropdownButton:{padding:"8px 4px",backgroundColor:"#f3f4f6",border:"1px solid #e5e7eb",borderLeft:"none",borderRadius:"0 4px 4px 0",cursor:"pointer",color:"#6b7280",display:"flex",alignItems:"center",justifyContent:"center",height:"36px",width:"24px",transition:"all 0.2s ease","&:hover":{backgroundColor:"#e5e7eb"}},dropdownContent:{minWidth:"220px",backgroundColor:"white",borderRadius:"6px",padding:"5px",boxShadow:"0px 10px 38px -10px rgba(22, 23, 24, 0.35), 0px 10px 20px -15px rgba(22, 23, 24, 0.2)",zIndex:20},dropdownItem:{fontSize:"14px",lineHeight:"1",color:"#374151",borderRadius:"3px",display:"flex",alignItems:"center",justifyContent:"space-between",height:"32px",padding:"0 8px",userSelect:"none",outline:"none",cursor:"pointer","&:hover":{backgroundColor:"#f3f4f6"}},selectedDropdownItem:{backgroundColor:"#f0f9ff",color:"#2563eb","&:hover":{backgroundColor:"#e0f2fe"}},checkmark:{color:"#2563eb",marginLeft:"8px"},toastViewport:{position:"fixed",bottom:0,right:0,display:"flex",flexDirection:"column",padding:"25px",gap:"10px",width:"390px",listStyle:"none",zIndex:2147483647,outline:"none"},toast:{backgroundColor:"white",borderRadius:"6px",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.1)",padding:"15px",display:"flex",alignItems:"center",justifyContent:"space-between",border:"1px solid #e5e7eb"},toastTitle:{color:"#111827",fontSize:"14px",fontWeight:500,marginBottom:"4px"},toastDescription:{color:"#6b7280",fontSize:"13px"},successIcon:{color:"#10b981",marginRight:"12px"}};function m7({editor:t,currentNote:e,previousVersions:n=[],onRevertToPreviousVersion:r,hasUnsavedChanges:i=!1,onSave:o,tabType:s,onRegenerateSoapNote:a,onRegenerateCurrentNote:l}){const c=Be(),{showToast:u}=h7(),{user:d}=gn(),[f,p]=y.useState(!1),[m,g]=y.useState(!1),[x,v]=y.useState(!1),[w,S]=y.useState("plain"),b=y.useRef(null),C=y.useRef(null);y.useEffect(()=>{function O(L){b.current&&!b.current.contains(L.target)&&p(!1),C.current&&!C.current.contains(L.target)&&g(!1)}return document.addEventListener("mousedown",O),()=>{document.removeEventListener("mousedown",O)}},[]),y.useEffect(()=>{d!=null&&d.note_preferences&&J1(d.note_preferences)&&S(d.note_preferences.default_copy_mode)},[d==null?void 0:d.note_preferences]);const k=(t==null?void 0:t.can().undo())||n.length>0&&!!r,E=t==null?void 0:t.can().redo(),_=async(O=w)=>{if(t)try{const L=p7(t,O);await navigator.clipboard.writeText(L),u("Copied!",`Content copied as ${O.replace(/_/g," ").toLowerCase()}`,"success")}catch(L){console.error("Failed to copy text:",L),u("Copy Failed","Failed to copy content to clipboard","error")}},P=async O=>{try{if(!(d!=null&&d.id))return;const L=d.note_preferences&&J1(d.note_preferences)?d.note_preferences:{};await c.from("user_profiles").update({note_preferences:{...L,default_copy_mode:O}}).eq("user_id",d.id),S(O),await _(O)}catch(L){console.error("Failed to update default copy mode:",L),u("Error","Failed to update copy mode","error")}},R=()=>{if(!(!t||!k)){if(t.can().undo()){t.chain().focus().undo().run();return}n.length>0&&r&&v(!0)}},N=async()=>{if(!r||n.length===0)return;const O=n[0];await r(O),v(!1)},A=()=>{if(console.log("[EditorToolbar] Save button clicked, hasUnsavedChanges:",i),!i){console.log("[EditorToolbar] No unsaved changes, skipping save");return}o?(console.log("[EditorToolbar] Calling onSave handler"),o(),u("Saved!","Your changes have been saved","success")):console.log("[EditorToolbar] No onSave handler provided")};y.useEffect(()=>{console.log("[EditorToolbar] Current note changed:",e==null?void 0:e.id)},[e==null?void 0:e.id]);const I=[{value:"plain",label:"Copy as Plain Text"},{value:"rich_text",label:"Copy as Rich Text"},{value:"without_lists",label:"Copy Without Lists"}];return t?(console.log("[EditorToolbar] Tab type:",s),h.jsxs("div",{style:me.toolbar,children:[h.jsx("button",{onClick:R,disabled:!k,style:{...me.button,opacity:k?1:.5},title:t!=null&&t.can().undo()?"Undo last change":n.length>0?"Revert to previous version":"Nothing to undo",children:h.jsx(o8,{size:18})}),h.jsx("button",{onClick:()=>t.chain().focus().redo().run(),disabled:!E,style:{...me.button,opacity:E?1:.5},title:E?"Redo":"Nothing to redo",children:h.jsx(X5,{size:18})}),h.jsx("div",{style:me.divider}),h.jsx("button",{onClick:A,disabled:!i,style:{...me.button,...i?{backgroundColor:"#10b981",color:"white",border:"none","&:hover":{backgroundColor:"#059669"}}:{}},title:i?"Save changes":"No unsaved changes",children:h.jsx(t8,{size:18})}),h.jsx("div",{style:me.divider}),h.jsxs("div",{style:me.copyButtonGroup,children:[h.jsx("button",{onClick:()=>_(),style:me.copyMainButton,title:`Copy as ${w.replace(/_/g," ").toUpperCase()}`,children:h.jsx(W5,{size:18})}),h.jsxs(Kh,{children:[h.jsx(qh,{asChild:!0,children:h.jsx("button",{style:me.copyDropdownButton,title:"Copy Options",children:h.jsx(rR,{size:14})})}),h.jsx(Gh,{children:h.jsx(Jh,{style:me.dropdownContent,sideOffset:5,children:I.map(O=>{const L=O.value===w;return h.jsxs(dr,{style:{...me.dropdownItem,...L?me.selectedDropdownItem:{}},onClick:()=>P(O.value),children:[O.label,L&&h.jsx("span",{style:me.checkmark,children:""})]},O.value)})})})]})]}),h.jsx("div",{style:me.divider}),h.jsxs("div",{style:me.buttonContainer,ref:b,children:[h.jsx("button",{onClick:()=>p(!f),style:me.button,title:"More Options",children:h.jsx(q5,{size:18})}),f&&h.jsxs("div",{style:me.dropdown,children:[h.jsx("button",{onClick:()=>_(),style:me.dropdownButton,children:"Copy All"}),(s==="ai_context"||s==="soap")&&a&&h.jsx("button",{onClick:()=>a(),style:me.dropdownButton,children:"Regenerate SOAP Note"}),s==="template"&&l&&h.jsx("button",{onClick:()=>l(),style:me.dropdownButton,children:"Regenerate Current Note"})]})]}),x&&h.jsxs(h.Fragment,{children:[h.jsx("div",{style:me.modalOverlay,onClick:()=>v(!1)}),h.jsxs("div",{style:me.modal,children:[h.jsx("h3",{style:me.modalTitle,children:"Revert to Previous Version?"}),h.jsx("p",{style:me.modalText,children:"This will delete your current changes and restore the previous version of this note. This action cannot be undone."}),h.jsxs("div",{style:me.modalButtons,children:[h.jsx("button",{onClick:()=>v(!1),style:{...me.modalButton,...me.modalButtonSecondary},children:"Cancel"}),h.jsx("button",{onClick:N,style:{...me.modalButton,...me.modalButtonPrimary},children:"Revert to Previous Version"})]})]})]})]})):null}function g7({visit:t,partialTranscription:e="",onRevert:n}){const r=Be(),i=y.useRef(!1),[o,s]=y.useState({transcript:null,soapNote:null,aiContext:null,templateNotes:[],noteVersions:{soap:[],ai_context:[]},hasUnsavedChanges:!1,pendingContent:null});y.useEffect(()=>{if(!t.id||t.id==="")return;(async()=>{try{const{data:w,error:S}=await r.from("transcripts").select("full_text").eq("visit_id",t.id).single(),{data:b}=await r.from("notes").select("content").eq("visit_id",t.id).eq("type","soap").order("version_id",{ascending:!1}).limit(1).single(),{data:C}=await r.from("notes").select("content").eq("visit_id",t.id).eq("type","ai_context").order("version_id",{ascending:!1}).limit(1).single(),{data:k}=await r.from("notes").select("*").eq("visit_id",t.id).eq("type","template").order("created_at",{ascending:!1});s(E=>({...E,transcript:S?e:(w==null?void 0:w.full_text)||null,soapNote:(b==null?void 0:b.content)||null,aiContext:(C==null?void 0:C.content)||null,templateNotes:k||[]}))}catch(w){console.error("Error in loadTranscriptAndNotes:",w)}})()},[t.id,t.state,r,e]);const a=y.useCallback(async(v,w)=>{if(t.id)try{const{data:S}=await r.from("notes").select("*").eq("visit_id",t.id).eq("type",v).order("version_id",{ascending:!1});if(S)if(v==="template"&&w){const b=S.filter(C=>C.template_id===w);s(C=>({...C,noteVersions:{...C.noteVersions,[w]:b}}))}else s(b=>({...b,noteVersions:{...b.noteVersions,[v]:S}}))}catch(S){console.error("Error loading note versions:",S)}},[t.id,r]),l=y.useCallback(v=>{s(w=>({...w,templateNotes:v}))},[]),c=y.useCallback((v,w)=>{s(S=>({...S,hasUnsavedChanges:!1,pendingContent:null}))},[]),u=y.useCallback((v,w,S)=>{var C;const b=w==="soap"?o.soapNote:w==="ai_context"?o.aiContext:(C=o.templateNotes.find(k=>k.id===S))==null?void 0:C.content;s(k=>({...k,pendingContent:v?{content:v,type:w,noteId:S}:null,hasUnsavedChanges:v!==b}))},[o.soapNote,o.aiContext,o.templateNotes]),d=y.useCallback((v,w)=>{var S;return v==="soap"||v==="ai_context"?((S=o.noteVersions[v])==null?void 0:S[0])||null:o.templateNotes.find(b=>b.id===w)||null},[o.noteVersions,o.templateNotes]),f=y.useCallback((v,w)=>{var S;return v==="soap"||v==="ai_context"?((S=o.noteVersions[v])==null?void 0:S.slice(1))||[]:o.noteVersions[w||""]||[]},[o.noteVersions]),p=y.useCallback(async()=>{if(!t.id||!o.pendingContent||i.current)return;i.current=!0;const{content:v,type:w,noteId:S}=o.pendingContent;try{if(w==="template"&&S){const{data:b}=await r.from("notes").select("version_id, metadata, template_id").eq("id",S).single(),C=((b==null?void 0:b.version_id)||0)+1;await r.from("notes").insert({visit_id:t.id,content:v,type:w,template_id:b==null?void 0:b.template_id,metadata:{...b==null?void 0:b.metadata,status:"edited"},version_id:C,user_facing:!0});const{data:k}=await r.from("notes").select("*").eq("visit_id",t.id).eq("type","template").order("created_at",{ascending:!1});k&&s(E=>({...E,templateNotes:k}))}else{const{data:b}=await r.from("notes").select("version_id").eq("visit_id",t.id).eq("type",w).order("version_id",{ascending:!1}).limit(1).single(),C=((b==null?void 0:b.version_id)||0)+1;await r.from("notes").insert({visit_id:t.id,content:v,type:w,version_id:C,user_facing:!0}),s(k=>({...k,[w==="soap"?"soapNote":"aiContext"]:v})),await a(w)}return c(w,S),!0}catch(b){throw console.error("Error saving note:",b),b}finally{i.current=!1}},[t.id,o.pendingContent,r,a,c]),m=y.useCallback(async v=>{if(!(!t.id||i.current)){i.current=!0;try{const w=d(v.type,v.id);w&&await r.from("notes").delete().eq("id",w.id),s(S=>{const b={...S};return v.type==="soap"?b.soapNote=v.content:v.type==="ai_context"?b.aiContext=v.content:v.type==="template"&&(b.templateNotes=S.templateNotes.map(C=>C.id===v.id?{...C,content:v.content}:C)),{...b,hasUnsavedChanges:!1,pendingContent:null}}),await a(v.type,v.template_id||void 0),n==null||n()}catch(w){console.error("Error reverting to previous version:",w)}finally{i.current=!1}}},[t.id,r,a,d,n]),g=y.useCallback(async()=>{var v;try{const w=await fetch(`/api/notes/${(v=d("soap",""))==null?void 0:v.id}/regenerate-soap`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!w.ok)throw new Error("Failed to regenerate SOAP note");const S=await w.json();s(b=>({...b,soapNote:S.content,hasUnsavedChanges:!0,pendingContent:{content:S.content,type:"soap"}})),n==null||n()}catch(w){console.error("Error regenerating SOAP note:",w)}},[d,n]),x=y.useCallback(async v=>{try{const w=await fetch(`/api/notes/${v}/regenerate-template`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!w.ok)throw new Error("Failed to regenerate template note");const S=await w.json(),b=o.templateNotes.map(C=>C.id===v?{...C,content:S.content}:C);s(C=>({...C,templateNotes:b,hasUnsavedChanges:!0,pendingContent:{content:S.content,type:"template",noteId:v}})),n==null||n()}catch(w){console.error("Error regenerating template note:",w)}},[o.templateNotes,n]);return{transcript:o.transcript,soapNote:o.soapNote,aiContext:o.aiContext,templateNotes:o.templateNotes,hasUnsavedChanges:o.hasUnsavedChanges,handleContentChange:u,saveNote:p,revertToPreviousVersion:m,getCurrentNote:d,getPreviousVersions:f,loadNoteVersions:a,updateTemplateNotes:l,resetState:c,regenerateSoapNote:g,regenerateTemplateNote:x}}const _l={container:{display:"flex",flexDirection:"column",gap:"0px",height:"100%",overflow:"hidden"},transcriptPanel:{flex:1,display:"flex",flexDirection:"column",backgroundColor:"white",border:"1px solid #e5e7eb",borderTop:"none",borderBottomLeftRadius:"6px",borderBottomRightRadius:"6px",padding:"16px",overflow:"hidden",minHeight:0},text:{fontSize:"16px",color:"#374151",lineHeight:"1.5",whiteSpace:"pre-wrap",margin:0,overflow:"auto",flex:1},contentContainer:{flex:1,display:"flex",flexDirection:"column",minHeight:0,height:"100%",overflow:"hidden",gap:"16px"},toolbarSection:{display:"flex",alignItems:"center",justifyContent:"flex-start",gap:"8px",flexShrink:0}};function y7({visit:t,partialTranscription:e}){console.log("[ReadyTranscriptionDisplay] Rendering with visit:",{id:t.id,state:t.state});const[n,r]=y.useState("transcript"),[i,o]=y.useState(!1),[s,a]=y.useState(null),[l,c]=y.useState(0),{snippets:u}=tR(),d=y.useCallback(()=>{c(U=>U+1)},[]),{transcript:f,soapNote:p,aiContext:m,templateNotes:g,hasUnsavedChanges:x,handleContentChange:v,saveNote:w,revertToPreviousVersion:S,getCurrentNote:b,getPreviousVersions:C,loadNoteVersions:k,updateTemplateNotes:E,resetState:_,regenerateSoapNote:P,regenerateTemplateNote:R}=g7({visit:t,partialTranscription:e,onRevert:d}),N=y.useCallback((U,ee)=>{E(ee),k("template"),r(U),o(!1)},[E,k]),{generateFromTemplate:A,isGenerating:I}=D5({visitId:t.id,onSuccess:N});y.useEffect(()=>{if(!t.id||n==="transcript")return;let U="soap";n==="ai_context"?U="ai_context":n!=="soap"&&(U="template");const ee=U==="template"?g.find(_e=>_e.id===n):void 0,he=(ee==null?void 0:ee.template_id)||void 0;k(U,he)},[t.id,n,k,g]);const O=y.useCallback(U=>{x&&!window.confirm("You have unsaved changes. Are you sure you want to switch tabs? Your changes will be lost.")||(r(U),c(ee=>ee+1),_(U==="soap"?"soap":U==="ai_context"?"ai_context":"template",U!=="soap"&&U!=="ai_context"?U:void 0))},[x,_]),L=y.useCallback(async()=>{await w()&&c(ee=>ee+1)},[w]),$=y.useCallback(()=>{if(x){if(!window.confirm("You have unsaved changes. Are you sure you want to create a new template? Your changes will be lost."))return;_("template")}o(!0)},[x,_]),H=y.useCallback(()=>{o(!1)},[]),M=y.useMemo(()=>g.filter((U,ee,he)=>ee===he.findIndex(_e=>_e.template_id===U.template_id)).map(U=>U.template_id).filter(U=>U!==null),[g]),D=y.useCallback(async()=>{x&&!window.confirm("You have unsaved changes. Are you sure you want to regenerate? Your changes will be lost.")||await P()},[x,P]),B=y.useCallback(async()=>{if(x&&!window.confirm("You have unsaved changes. Are you sure you want to regenerate? Your changes will be lost."))return;const U=b("template",n);U&&await R(U.id)},[x,R,b,n]),Q=()=>{if(n==="transcript")return h.jsx("p",{style:_l.text,children:f});if(n==="soap")return h.jsx(cm,{content:p||"",readOnly:!1,placeholder:"Start typing your SOAP note...",onChange:ee=>v(ee,"soap"),snippets:u,onEditorReady:a},`soap-editor-${l}`);if(n==="ai_context")return h.jsx(cm,{content:m||"",readOnly:!1,placeholder:"Start typing your context note...",onChange:ee=>v(ee,"ai_context"),snippets:u,onEditorReady:a},`ai_context-${l}`);const U=g.find(ee=>ee.id===n);return h.jsx(cm,{content:(U==null?void 0:U.content)||"",readOnly:!1,placeholder:"Start typing your template note...",onChange:ee=>v(ee,"template",U==null?void 0:U.id),snippets:u,onEditorReady:a},`template-${U==null?void 0:U.id}-${l}`)};return h.jsxs("div",{style:_l.container,children:[h.jsx(A5,{activeTab:n,setActiveTab:O,aiContext:m,soapNote:p,templateNotes:g,onOpenTemplateModal:$}),h.jsx("div",{style:_l.transcriptPanel,children:h.jsxs("div",{style:_l.contentContainer,children:[s&&n!=="transcript"&&h.jsx("div",{style:_l.toolbarSection,children:h.jsx(m7,{editor:s,currentNote:b(n==="soap"?"soap":n==="ai_context"?"ai_context":"template",n!=="soap"&&n!=="ai_context"?n:void 0),previousVersions:C(n==="soap"?"soap":n==="ai_context"?"ai_context":"template",n!=="soap"&&n!=="ai_context"?n:void 0),onRevertToPreviousVersion:S,hasUnsavedChanges:x,onSave:L,tabType:n,onRegenerateSoapNote:n==="ai_context"?D:void 0,onRegenerateCurrentNote:n!=="soap"&&n!=="ai_context"&&n!=="transcript"?B:void 0})}),Q()]})}),h.jsx(V2,{isOpen:i,onClose:H,onGenerate:A,existingTemplateIds:M})]})}const Sd=(...t)=>{};function v7({visitId:t,onMessage:e}){const[n,r]=y.useState([]),i=y.useRef(!1),o=y.useRef(null),s=y.useCallback(async()=>{if(!t||t==="")return;const{data:a,error:l}=await Xi.from("containers").select("*").eq("visit_id",t).order("chunk_id",{ascending:!0});l||a&&(Sd(`Fetched ${a.length} containers`),r(a),i.current=!0,a.forEach(c=>e==null?void 0:e(c)))},[t,e]);return y.useEffect(()=>{if(!t||t===""){r([]),i.current=!1;return}i.current||s(),o.current&&(o.current.unsubscribe(),o.current=null);const a=Xi.channel(`containers_list_${t}`).on("postgres_changes",{event:"*",schema:"public",table:"containers",filter:`visit_id=eq.${t}`},l=>{switch(Sd("Received realtime event:",l.eventType,l),l.eventType){case Yn.INSERT:{const c=l.new;r(u=>{if(u.some(f=>f.id===c.id))return u;const d=[...u,c].sort((f,p)=>f.chunk_id-p.chunk_id);return e==null||e(c),d});break}case Yn.UPDATE:{const c=l.new;r(u=>{const d=u.map(f=>f.id===c.id?c:f);return JSON.stringify(d)===JSON.stringify(u)?u:(e==null||e(c),d)});break}case Yn.DELETE:{const c=l.old;r(u=>{const d=u.filter(f=>f.id!==c.id);return d.length,u.length,d});break}default:Sd("Unhandled event type:",l.eventType);break}}).subscribe(l=>{});return o.current=a,()=>{a.unsubscribe(),o.current=null}},[t,s,e]),y.useEffect(()=>{Sd("Containers state updated:",n.length,"containers")},[n]),n}var ox="Popover",[TO,qH]=ho(ox,[Uh]),Tu=Uh(),[x7,po]=TO(ox),_O=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:i,onOpenChange:o,modal:s=!1}=t,a=Tu(e),l=y.useRef(null),[c,u]=y.useState(!1),[d=!1,f]=wu({prop:r,defaultProp:i,onChange:o});return h.jsx(TR,{...a,children:h.jsx(x7,{scope:e,contentId:Zo(),triggerRef:l,open:d,onOpenChange:f,onOpenToggle:y.useCallback(()=>f(p=>!p),[f]),hasCustomAnchor:c,onCustomAnchorAdd:y.useCallback(()=>u(!0),[]),onCustomAnchorRemove:y.useCallback(()=>u(!1),[]),modal:s,children:n})})};_O.displayName=ox;var RO="PopoverAnchor",w7=y.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=po(RO,n),o=Tu(n),{onCustomAnchorAdd:s,onCustomAnchorRemove:a}=i;return y.useEffect(()=>(s(),()=>a()),[s,a]),h.jsx(K0,{...o,...r,ref:e})});w7.displayName=RO;var OO="PopoverTrigger",PO=y.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=po(OO,n),o=Tu(n),s=Fe(e,i.triggerRef),a=h.jsx(ye.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":IO(i.open),...r,ref:s,onClick:X(t.onClick,i.onOpenToggle)});return i.hasCustomAnchor?a:h.jsx(K0,{asChild:!0,...o,children:a})});PO.displayName=OO;var sx="PopoverPortal",[b7,S7]=TO(sx,{forceMount:void 0}),MO=t=>{const{__scopePopover:e,forceMount:n,children:r,container:i}=t,o=po(sx,e);return h.jsx(b7,{scope:e,forceMount:n,children:h.jsx(or,{present:n||o.open,children:h.jsx(Su,{asChild:!0,container:i,children:r})})})};MO.displayName=sx;var el="PopoverContent",AO=y.forwardRef((t,e)=>{const n=S7(el,t.__scopePopover),{forceMount:r=n.forceMount,...i}=t,o=po(el,t.__scopePopover);return h.jsx(or,{present:r||o.open,children:o.modal?h.jsx(C7,{...i,ref:e}):h.jsx(k7,{...i,ref:e})})});AO.displayName=el;var C7=y.forwardRef((t,e)=>{const n=po(el,t.__scopePopover),r=y.useRef(null),i=Fe(e,r),o=y.useRef(!1);return y.useEffect(()=>{const s=r.current;if(s)return P0(s)},[]),h.jsx(O0,{as:ps,allowPinchZoom:!0,children:h.jsx(DO,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:X(t.onCloseAutoFocus,s=>{var a;s.preventDefault(),o.current||(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:X(t.onPointerDownOutside,s=>{const a=s.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,c=a.button===2||l;o.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:X(t.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1})})})}),k7=y.forwardRef((t,e)=>{const n=po(el,t.__scopePopover),r=y.useRef(!1),i=y.useRef(!1);return h.jsx(DO,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var s,a;(s=t.onCloseAutoFocus)==null||s.call(t,o),o.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),o.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:o=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const s=o.target;((c=n.triggerRef.current)==null?void 0:c.contains(s))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&i.current&&o.preventDefault()}})}),DO=y.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:s,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:u,...d}=t,f=po(el,n),p=Tu(n);return R0(),h.jsx(Lh,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:o,children:h.jsx(bu,{asChild:!0,disableOutsidePointerEvents:s,onInteractOutside:u,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>f.onOpenChange(!1),children:h.jsx(_R,{"data-state":IO(f.open),role:"dialog",id:f.contentId,...p,...d,ref:e,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),NO="PopoverClose",E7=y.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=po(NO,n);return h.jsx(ye.button,{type:"button",...r,ref:e,onClick:X(t.onClick,()=>i.onOpenChange(!1))})});E7.displayName=NO;var T7="PopoverArrow",_7=y.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=Tu(n);return h.jsx(RR,{...i,...r,ref:e})});_7.displayName=T7;function IO(t){return t?"open":"closed"}var R7=_O,O7=PO,P7=MO,M7=AO;async function A7(t,e){const{data:n,error:r}=await t.from("visits").insert([{state:"recording",user_id:e.userId,name:e.name,patient_id:e.patientId,started_at:new Date().toISOString(),ended_at:null,updated_at:new Date().toISOString()}]).select().single();if(r)throw r;return n}async function Vl(t,e,n,r){const i={state:n,updated_at:new Date().toISOString()};r&&(i.ended_at=new Date().toISOString());const{error:o}=await t.from("visits").update(i).eq("id",e);if(o)throw o}async function D7(t,e,n){console.log("Updating visit name:",e,n);const{error:r}=await t.from("visits").update({name:n,updated_at:new Date().toISOString()}).eq("id",e);if(r)throw r}const nt={container:{position:"relative",width:"100%",maxWidth:"400px"},inputContainer:{display:"flex",alignItems:"center",gap:"8px",width:"100%"},selectedContainer:{display:"flex",alignItems:"center",gap:"8px",width:"100%",padding:"8px 12px",fontSize:"16px",border:"1px solid #e5e7eb",borderRadius:"6px",backgroundColor:"#f9fafb"},selectedName:{flex:1,fontWeight:"500",color:"#1f2937"},unlinkButton:{display:"flex",alignItems:"center",padding:"4px",border:"none",borderRadius:"4px",backgroundColor:"transparent",color:"#6b7280",cursor:"pointer","&:hover":{backgroundColor:"#f3f4f6",color:"#dc2626"}},input:{width:"100%",padding:"8px 12px",fontSize:"16px",border:"1px solid #e5e7eb",borderRadius:"6px",outline:"none","&:focus":{borderColor:"#3b82f6",boxShadow:"0 0 0 2px rgba(59, 130, 246, 0.1)"}},popoverContent:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"6px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",marginTop:"4px",width:"300px",maxHeight:"300px",overflow:"auto",zIndex:50},section:{padding:"8px 0"},sectionTitle:{padding:"0 12px 4px",fontSize:"12px",fontWeight:"500",color:"#6b7280",textTransform:"uppercase"},item:{padding:"8px 12px",cursor:"pointer",outline:"none",width:"100%",border:"none",backgroundColor:"transparent",textAlign:"left","&:hover":{backgroundColor:"#f3f4f6"},"&:focus":{backgroundColor:"#f3f4f6"}},createButton:{display:"flex",alignItems:"center",gap:"8px",width:"100%",padding:"8px 12px",backgroundColor:"#f3f4f6",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",color:"#1f2937","&:hover":{backgroundColor:"#e5e7eb"}},patientName:{fontSize:"14px",fontWeight:"500",color:"#1f2937"},patientMrn:{fontSize:"12px",color:"#6b7280"},separator:{height:"1px",backgroundColor:"#e5e7eb",margin:"8px 0"}};function N7({onPatientSelect:t,onVisitNameChange:e,selectedPatientId:n,visitId:r}){const[i,o]=y.useState(""),[s,a]=y.useState(!1),l=E0(i,300),{user:c}=gn(),u=Be(),d=y.useRef(null),f=xs(),[p,m]=y.useState(!1),{data:g=[],isLoading:x}=Rc({queryKey:["patients",c==null?void 0:c.id,l],queryFn:async()=>{if(!(c!=null&&c.id))return[];const{data:A,error:I}=await u.rpc("search_patients",{search_term:l||"",user_id_param:c.id});if(I)throw I;return A||[]},enabled:!!(c!=null&&c.id)}),{data:v}=Rc({queryKey:["patient",n],queryFn:async()=>{if(!n)return null;const{data:A,error:I}=await u.from("patient_profiles").select("id, name, medical_record_number").eq("id",n).single();if(I)throw I;return A},enabled:!!n}),w=Zl({mutationFn:async A=>{if(!(c!=null&&c.id))throw new Error("No user");const{data:I,error:O}=await u.from("patient_profiles").insert([{name:A.trim(),user_id:c.id}]).select().single();if(O)throw O;return I},onSuccess:A=>{f.invalidateQueries({queryKey:["patients"]}),C(A)}}),S=Zl({mutationFn:async({visitId:A,name:I})=>{if(!A)throw new Error("No visit ID provided");await D7(u,A,I)},onSuccess:(A,I)=>{f.invalidateQueries({queryKey:["visit",I.visitId]})}}),b=l?g:g.slice(0,3),C=A=>{o(A.name),a(!1),t(A),e==null||e(null)},k=async()=>{!i.trim()||!(c!=null&&c.id)||w.mutate(i)},E=A=>{const I=A.target.value;o(I)},_=A=>{if(A.key==="Enter"&&i.trim()){console.log("handleInputKeyDown",r,i),A.preventDefault();const I=i.trim();t(null),e==null||e(I),o(I),m(!0),a(!1),r&&(console.log("handleInputKeyDown here?",r,I),S.mutate({visitId:r,name:I}))}},P=()=>{o(""),m(!1),t(null),e==null||e(null),r&&S.mutate({visitId:r,name:null})};ve.useEffect(()=>{(async()=>{if(n){const{data:I}=await u.from("patient_profiles").select("name").eq("id",n).single();I&&o(I.name)}else if(r){const{data:I}=await u.from("visits").select("name").eq("id",r).single();I!=null&&I.name&&o(I.name)}})()},[n,r,u]),ve.useEffect(()=>{!r&&!n&&(o(""),m(!1),a(!1))},[r,n]);const R=v||p||r&&i&&!s,N=(A,I)=>h.jsxs("button",{style:nt.item,onClick:I,children:[h.jsx("div",{style:nt.patientName,children:A.name}),A.medical_record_number&&h.jsxs("div",{style:nt.patientMrn,children:["MRN: ",A.medical_record_number]})]},A.id);return R?h.jsx("div",{style:nt.container,children:h.jsxs("div",{style:nt.selectedContainer,onClick:()=>{a(!0),m(!1),setTimeout(()=>{var A;return(A=d.current)==null?void 0:A.focus()},0)},children:[h.jsx("div",{style:nt.selectedName,children:(v==null?void 0:v.name)||i}),h.jsx("button",{style:nt.unlinkButton,onClick:A=>{A.stopPropagation(),P()},title:"Unlink patient",children:h.jsx(sa,{})})]})}):h.jsx("div",{style:nt.container,children:h.jsxs(R7,{modal:!1,open:s,onOpenChange:a,children:[h.jsx(O7,{asChild:!0,children:h.jsx("div",{style:nt.inputContainer,children:h.jsx("input",{ref:d,type:"text",value:i,onChange:E,onKeyDown:_,onFocus:()=>a(!0),onClick:A=>{A.stopPropagation(),a(!0),A.currentTarget.focus()},placeholder:"Add patient details",style:nt.input})})}),h.jsx(P7,{children:h.jsx(M7,{style:nt.popoverContent,align:"start",sideOffset:4,onEscapeKeyDown:()=>a(!1),onInteractOutside:A=>{var O;const I=A.target;if((O=d.current)!=null&&O.contains(I)){A.preventDefault();return}a(!1)},children:x?h.jsx("div",{style:nt.item,children:"Searching..."}):h.jsxs(h.Fragment,{children:[h.jsxs("div",{style:nt.section,children:[h.jsx("div",{style:nt.sectionTitle,children:"Suggested"}),b.length>0?b.map(A=>N(A,()=>C(A))):h.jsx("div",{style:nt.item,children:"No matches found"})]}),h.jsx("div",{style:nt.separator}),h.jsxs("button",{style:nt.createButton,onClick:k,disabled:w.isPending||!i.trim(),children:[h.jsx(Ff,{}),w.isPending?"Creating...":i.trim()?`Create new patient "${i}"`:"Create new patient"]})]})})})]})})}const Py=(t,e)=>e.some(n=>t instanceof n);let Y1,Q1;function I7(){return Y1||(Y1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function j7(){return Q1||(Q1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const My=new WeakMap,Sm=new WeakMap,Xh=new WeakMap;function L7(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(es(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return Xh.set(e,t),e}function $7(t){if(My.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});My.set(t,e)}let Ay={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return My.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return es(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function jO(t){Ay=t(Ay)}function F7(t){return j7().includes(t)?function(...e){return t.apply(Dy(this),e),es(this.request)}:function(...e){return es(t.apply(Dy(this),e))}}function B7(t){return typeof t=="function"?F7(t):(t instanceof IDBTransaction&&$7(t),Py(t,I7())?new Proxy(t,Ay):t)}function es(t){if(t instanceof IDBRequest)return L7(t);if(Sm.has(t))return Sm.get(t);const e=B7(t);return e!==t&&(Sm.set(t,e),Xh.set(e,t)),e}const Dy=t=>Xh.get(t);function z7(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),a=es(s);return r&&s.addEventListener("upgradeneeded",l=>{r(es(s.result),l.oldVersion,l.newVersion,es(s.transaction),l)}),n&&s.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{o&&l.addEventListener("close",()=>o()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const U7=["get","getKey","getAll","getAllKeys","count"],V7=["put","add","delete","clear"],Cm=new Map;function X1(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Cm.get(e))return Cm.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=V7.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||U7.includes(n)))return;const o=async function(s,...a){const l=this.transaction(s,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return Cm.set(e,o),o}jO(t=>({...t,get:(e,n,r)=>X1(e,n)||t.get(e,n,r),has:(e,n)=>!!X1(e,n)||t.has(e,n)}));const H7=["continue","continuePrimaryKey","advance"],Z1={},Ny=new WeakMap,LO=new WeakMap,W7={get(t,e){if(!H7.includes(e))return t[e];let n=Z1[e];return n||(n=Z1[e]=function(...r){Ny.set(this,LO.get(this)[e](...r))}),n}};async function*K7(...t){let e=this;if(e instanceof IDBCursor||(e=await e.openCursor(...t)),!e)return;e=e;const n=new Proxy(e,W7);for(LO.set(n,e),Xh.set(n,Dy(e));e;)yield n,e=await(Ny.get(n)||e.continue()),Ny.delete(n)}function eS(t,e){return e===Symbol.asyncIterator&&Py(t,[IDBIndex,IDBObjectStore,IDBCursor])||e==="iterate"&&Py(t,[IDBIndex,IDBObjectStore])}jO(t=>({...t,get(e,n,r){return eS(e,n)?K7:t.get(e,n,r)},has(e,n){return eS(e,n)||t.has(e,n)}}));class q7{constructor(){this.db=null,this.DB_NAME="audio-recorder-db",this.STORE_NAME="audio-chunks",this.SYNC_STORE="chunk-sync-metadata",this.DB_VERSION=1}async initialize(){this.db||(this.db=await z7(this.DB_NAME,this.DB_VERSION,{upgrade(e){e.objectStoreNames.contains("audio-chunks")||e.createObjectStore("audio-chunks",{keyPath:["visitId","containerIndex","chunkId"]}).createIndex("by-visit","visitId"),e.objectStoreNames.contains("chunk-sync-metadata")||e.createObjectStore("chunk-sync-metadata",{keyPath:"key"}).createIndex("by-visit","visitId")}}))}async getDb(){return this.db||await this.initialize(),this.db}async storeChunk(e){this.db||await this.initialize(),console.log(` Storing chunk ${e.containerIndex}:${e.chunkId} (${(e.blob.size/1024).toFixed(1)}KB)`),await this.db.put(this.STORE_NAME,e)}async getChunk(e,n,r){return this.db||await this.initialize(),this.db.get(this.STORE_NAME,[e,n,r])}async getChunksByVisit(e){return this.db||await this.initialize(),this.db.getAllFromIndex(this.STORE_NAME,"by-visit",e)}async deleteChunksByVisit(e){this.db||await this.initialize();const n=await this.getChunksByVisit(e),r=this.db.transaction(this.STORE_NAME,"readwrite");await Promise.all(n.map(i=>r.store.delete([i.visitId,i.containerIndex,i.chunkId]))),await r.done}async deleteChunk(e,n,r){this.db||await this.initialize();const i=this.db.transaction(this.STORE_NAME,"readwrite");if(r!==void 0)await i.store.delete([e,n,r]);else{const o=await this.getChunksByVisit(e);await Promise.all(o.filter(s=>s.containerIndex===n).map(s=>i.store.delete([s.visitId,s.containerIndex,s.chunkId])))}await i.done}async getDatabaseStats(){try{this.db||await this.initialize();const r=await this.db.transaction(this.STORE_NAME).objectStore(this.STORE_NAME).getAll(),i={};r.forEach(s=>{i[s.visitId]||(i[s.visitId]={chunks:0,size:0,containers:new Set}),i[s.visitId].chunks++,i[s.visitId].size+=s.blob.size,i[s.visitId].containers.add(s.containerIndex)});const o={totalChunks:r.length,totalVisits:Object.keys(i).length,totalSize:r.reduce((s,a)=>s+a.blob.size,0),visitStats:Object.entries(i).reduce((s,[a,l])=>({...s,[a]:{chunks:l.chunks,size:l.size,containers:l.containers.size}}),{})};return console.log("[AudioStorage] Database stats:",o),o}catch(e){throw console.error("[AudioStorage] Failed to get database stats:",e),e}}}const Po=new q7,Zh=class nn{constructor(){this.isSyncing=!1,this.syncPromise=null}async getUnuploadedChunks(){return(await Po.getDb()).transaction(nn.SYNC_STORE).objectStore(nn.SYNC_STORE).getAll()}async markChunkForUpload(e){await(await Po.getDb()).transaction(nn.SYNC_STORE,"readwrite").objectStore(nn.SYNC_STORE).put({...e,uploadAttempts:0,lastAttempt:Date.now()})}async markChunkAsUploaded(e){await(await Po.getDb()).transaction(nn.SYNC_STORE,"readwrite").objectStore(nn.SYNC_STORE).delete(e)}async updateUploadAttempt(e){await(await Po.getDb()).transaction(nn.SYNC_STORE,"readwrite").objectStore(nn.SYNC_STORE).put({...e,uploadAttempts:e.uploadAttempts+1,lastAttempt:Date.now()})}async uploadChunk(e,n){console.log(` Uploading container ${e.containerIndex} (${(e.blob.size/1024).toFixed(1)}KB)`);try{const r=e.blob.type.includes("mp4")?"mp4":"webm",i={key:`audio-chunks/${e.visitId}/${e.containerIndex}-${e.chunkId}-${e.timestamp}.${r}`,contentType:e.blob.type,visitId:e.visitId,chunkId:e.chunkId,isFinal:e.isFinal,containerIndex:e.containerIndex},o=await fetch(`${Qi.apiUrl}/get-upload-url`,{method:"POST",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify(i)});if(!o.ok)throw new Error(`Failed to get upload URL: ${o.status}`);const{uploadUrl:s,fields:a}=await o.json(),l=new FormData;if(Object.entries(a).forEach(([f,p])=>{l.append(f,p)}),l.append("file",e.blob),!(await fetch(s,{method:"POST",body:l})).ok)throw new Error("Failed to upload to S3");const u=await fetch(`${Qi.apiUrl}/process-audio`,{method:"POST",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify({key:i.key,visitId:e.visitId,chunkId:e.chunkId,isFinal:e.isFinal,contentType:e.blob.type,containerIndex:e.containerIndex})});if(!u.ok)throw new Error(`Failed to process audio: ${u.status}`);if(!(await u.json()).success)throw new Error("Processing failed");return console.log(` Uploaded container ${e.containerIndex}`),!0}catch(r){return console.error(` Failed to upload container ${e.containerIndex}:`,r),!1}}async syncChunks(e){return this.isSyncing?this.syncPromise||Promise.resolve():(this.isSyncing=!0,this.syncPromise=(async()=>{try{const n=await this.getUnuploadedChunks();for(const r of n){if(r.uploadAttempts>=nn.MAX_RETRIES){console.log(` Skipping container ${r.containerIndex} (max retries reached)`);continue}const i=await Po.getChunk(r.visitId,r.containerIndex,r.chunkId);if(!i){console.warn(` Container ${r.containerIndex} not found in storage`);continue}await this.uploadChunk(i,e)?await this.markChunkAsUploaded(r.key):(await this.updateUploadAttempt(r),console.log(` Will retry container ${r.containerIndex} later (attempt ${r.uploadAttempts+1}/${nn.MAX_RETRIES})`)),await new Promise(s=>setTimeout(s,nn.RETRY_DELAY))}}finally{this.isSyncing=!1,this.syncPromise=null}})(),this.syncPromise)}async markForUpload(e){const n=e.blob.type.includes("mp4")?"mp4":"webm",r={key:`audio-chunks/${e.visitId}/${e.containerIndex}-${e.chunkId}-${e.timestamp}.${n}`,visitId:e.visitId,chunkId:e.chunkId,containerIndex:e.containerIndex,isFinal:e.isFinal,contentType:e.blob.type};await this.markChunkForUpload(r)}async getSyncStats(){const n=(await this.getUnuploadedChunks()).reduce((r,i)=>{if(r.visitStats[i.visitId]||(r.visitStats[i.visitId]={pending:0,failed:0,lastAttempt:null}),i.uploadAttempts>=nn.MAX_RETRIES?(r.failedUploads++,r.visitStats[i.visitId].failed++):(r.pendingUploads++,r.visitStats[i.visitId].pending++),i.lastAttempt){const o=new Date(i.lastAttempt).toISOString();(!r.visitStats[i.visitId].lastAttempt||o>r.visitStats[i.visitId].lastAttempt)&&(r.visitStats[i.visitId].lastAttempt=o)}return r},{pendingUploads:0,failedUploads:0,visitStats:{}});return console.log("[ChunkSyncManager] Sync stats:",n),n}};Zh.SYNC_STORE="chunk-sync-metadata";Zh.MAX_RETRIES=3;Zh.RETRY_DELAY=5e3;let G7=Zh;function $O(){const t=["audio/webm;codecs=opus","audio/webm","audio/mp4;codecs=mp4a","audio/mp4","audio/mpeg"];for(const e of t)if(MediaRecorder.isTypeSupported(e))return console.log(`[MediaRecorder] Using MIME type: ${e}`),e;throw new Error("No supported MIME type found for MediaRecorder")}class J7{constructor(e){this.mediaRecorder=null,this.stream=null,this.isRecording=!1,this.isPaused=!1,this.currentChunkId=0,this.currentContainerIndex=0,this.chunkBatch=[],this.containerChunks=[],this.CHUNK_DURATION=2e3,this.BATCH_SIZE=5,this.CONTAINER_DURATION=2e4,this.containerStartTime=null,this.containerTimer=null,this.visitId=null,this.config={saveLocally:!0,...e},this.syncManager=new G7,this.visitId=e.visitId||null}async saveChunkLocally(e,n,r,i=!1){if(!this.config.saveLocally)return;const o=URL.createObjectURL(e),s=document.createElement("a");s.href=o;const a=i?"container":"chunk",l=e.type.includes("mp4")?"mp4":"webm";s.download=`${a}_${this.config.visitId||"debug"}_${this.currentContainerIndex}_${n}${r?"_final":""}.${l}`,s.click(),URL.revokeObjectURL(o),console.log(`[RecorderV3] Saved ${a} locally: ${s.download}, size: ${e.size} bytes`)}async initialize(e){try{this.stream&&this.cleanup();const n={sampleRate:16e3,channelCount:1,autoGainControl:!0,deviceId:e||void 0};this.stream=await navigator.mediaDevices.getUserMedia({audio:n}),console.log("[RecorderV3] Initialized with device:",e||"default")}catch(n){throw console.error("[RecorderV3] Initialization failed:",n),this.cleanup(),n}}async flushChunks(e=!1){if(this.chunkBatch.length===0)return;const n=new Blob(this.chunkBatch,{type:"audio/webm;codecs=opus"}),r=Date.now();console.log("[RecorderV3] Flushing chunks:",{batchSize:this.chunkBatch.length,totalSize:n.size,containerIndex:this.currentContainerIndex,isFinal:e});try{this.containerChunks.push(n);const i={blob:n,timestamp:r,chunkId:this.currentChunkId,visitId:this.visitId,isFinal:e,containerIndex:this.currentContainerIndex};await Po.storeChunk(i),console.log(`[RecorderV3] Stored chunk in IndexedDB: ${this.currentChunkId}`),this.currentChunkId++,this.chunkBatch=[]}catch(i){throw console.error("[RecorderV3] Error in flushChunks:",i),i}}async flushContainer(e=!1){if(this.containerChunks.length===0)return;this.chunkBatch.length>0&&await this.flushChunks(!1);const n=new Blob(this.containerChunks,{type:"audio/webm;codecs=opus"}),r=Date.now(),i=`audio-chunks/${this.visitId}/${this.currentContainerIndex}-${r}.webm`;console.log(`[RecorderV3] Flushing container ${this.currentContainerIndex}:`,{chunks:this.containerChunks.length,totalSize:n.size,timestamp:r,isFinal:e});try{await this.config.onChunkReady({blob:n,chunkId:this.currentContainerIndex,isFinal:e,key:i,isCompleteContainer:!0,visitId:this.visitId}),console.log(`[RecorderV3] Container ${this.currentContainerIndex} uploaded successfully`)}catch(o){console.error("[RecorderV3] Failed to upload container, storing in IndexedDB for retry:",o);const s={blob:n,timestamp:r,chunkId:this.currentContainerIndex,visitId:this.visitId,isFinal:e,containerIndex:this.currentContainerIndex};await Po.storeChunk(s),await this.syncManager.markForUpload(s)}this.containerChunks=[]}async switchContainer(){var e;if(((e=this.mediaRecorder)==null?void 0:e.state)==="recording"){console.log("[RecorderV3] Switching container:",{currentIndex:this.currentContainerIndex,batchSize:this.chunkBatch.length,containerSize:this.containerChunks.length});try{const n=this.mediaRecorder;await new Promise(r=>{const i=()=>{n.removeEventListener("dataavailable",i),r()};n.addEventListener("dataavailable",i),n.stop()}),this.mediaRecorder=null,this.chunkBatch.length>0&&await this.flushChunks(!1),await this.flushContainer(!1),this.currentContainerIndex++,this.containerStartTime=Date.now(),this.mediaRecorder=this.createRecorder(),this.mediaRecorder.start(this.CHUNK_DURATION),console.log("[RecorderV3] Switched to new container:",{newIndex:this.currentContainerIndex,timestamp:this.containerStartTime})}catch(n){console.error("[RecorderV3] Failed to switch container:",n)}}}createRecorder(){if(!this.stream)throw new Error("No audio stream available");const e=$O(),n=new MediaRecorder(this.stream,{mimeType:e,audioBitsPerSecond:48e3});return n.addEventListener("dataavailable",async r=>{var i;if(!(!(r instanceof BlobEvent)||!((i=r.data)!=null&&i.size))&&(console.log("[RecorderV3] Data available:",{size:r.data.size,batchSize:this.chunkBatch.length,containerIndex:this.currentContainerIndex,isActiveRecorder:this.mediaRecorder===n}),this.chunkBatch.push(r.data),this.chunkBatch.length>=this.BATCH_SIZE))try{await this.flushChunks(!1)}catch(o){console.error("[RecorderV3] Error flushing chunks:",o)}}),n}async startRecording(e){if(!this.isRecording)try{if(this.visitId=e||this.visitId,!this.visitId)throw new Error("No visit ID provided for recording");this.stream||await this.initialize(),this.isRecording=!0,this.currentChunkId=0,this.currentContainerIndex=0,this.chunkBatch=[],this.containerChunks=[],this.containerStartTime=Date.now(),this.mediaRecorder=this.createRecorder(),this.mediaRecorder.start(this.CHUNK_DURATION),this.containerTimer=setInterval(()=>{Date.now()-this.containerStartTime>=this.CONTAINER_DURATION&&this.switchContainer()},1e3),console.log("[RecorderV3] Started recording with visit ID:",this.visitId)}catch(n){throw console.error("[RecorderV3] Failed to start recording:",n),this.cleanup(),n}}async stopRecording(){if(this.isRecording){console.log("[RecorderV3] Stopping recording:",{currentIndex:this.currentContainerIndex,batchSize:this.chunkBatch.length,containerSize:this.containerChunks.length});try{this.containerTimer&&(clearInterval(this.containerTimer),this.containerTimer=null);const e=this.mediaRecorder;this.mediaRecorder=null,this.isRecording=!1;let n=!1;((e==null?void 0:e.state)==="recording"||(e==null?void 0:e.state)==="paused")&&await new Promise((r,i)=>{const o=async s=>{var a;try{e.removeEventListener("dataavailable",o),(a=s.data)!=null&&a.size&&!n&&(console.log("[RecorderV3] Adding final chunk:",{size:s.data.size,existingBatchSize:this.chunkBatch.length}),this.chunkBatch.push(s.data),n=!0),this.chunkBatch.length>0&&await this.flushChunks(!0),await this.flushContainer(!0),r()}catch(l){i(l)}};e.addEventListener("dataavailable",o),e.stop()}),console.log("[RecorderV3] Recording stopped and final data flushed:",{finalContainerIndex:this.currentContainerIndex,finalBatchSize:this.chunkBatch.length,finalContainerSize:this.containerChunks.length}),this.isRecording=!1,this.stream&&(this.stream.getTracks().forEach(r=>r.stop()),this.stream=null),this.chunkBatch=[],this.containerChunks=[]}catch(e){throw console.error("[RecorderV3] Error stopping recording:",e),e}}}async pauseRecording(){if(!(!this.isRecording||this.isPaused))try{this.containerTimer&&(clearInterval(this.containerTimer),this.containerTimer=null);const e=this.mediaRecorder;(e==null?void 0:e.state)==="recording"&&await new Promise(n=>{const r=async()=>{try{e.removeEventListener("dataavailable",r),this.chunkBatch.length>0&&await this.flushChunks(!1),n()}catch(i){console.error("[RecorderV3] Error flushing chunks during pause:",i),n()}};e.addEventListener("dataavailable",r),e.pause()}),this.isPaused=!0,console.log("[RecorderV3] Recording paused")}catch(e){throw console.error("[RecorderV3] Failed to pause recording:",e),e}}async resumeRecording(){var e;if(!(!this.isRecording||!this.isPaused))try{this.stream||await this.initialize(),((e=this.mediaRecorder)==null?void 0:e.state)==="paused"&&this.mediaRecorder.resume(),this.containerStartTime=Date.now(),this.containerTimer=setInterval(()=>{Date.now()-this.containerStartTime>=this.CONTAINER_DURATION&&this.switchContainer()},1e3),this.isPaused=!1,console.log("[RecorderV3] Recording resumed")}catch(n){throw console.error("[RecorderV3] Failed to resume recording:",n),this.isPaused=!0,this.mediaRecorder&&this.mediaRecorder.pause(),n}}cleanup(){var e;this.containerTimer&&(clearInterval(this.containerTimer),this.containerTimer=null),((e=this.mediaRecorder)==null?void 0:e.state)==="recording"&&this.mediaRecorder.stop(),this.mediaRecorder=null,this.stream&&(this.stream.getTracks().forEach(n=>n.stop()),this.stream=null),this.isRecording=!1,this.isPaused=!1,this.chunkBatch=[],this.containerChunks=[],console.log("[RecorderV3] Cleanup complete")}getState(){return{isRecording:this.isRecording,isPaused:this.isPaused,currentChunkId:this.currentChunkId,currentContainerIndex:this.currentContainerIndex,batchSize:this.chunkBatch.length,containerSize:this.containerChunks.length}}}const Y7=()=>crypto.randomUUID(),Q7=t=>{const e=Math.floor(t/60),n=t%60;return`${e}:${n.toString().padStart(2,"0")}`};function X7(t={}){const[e,n]=y.useState(!1),[r,i]=y.useState(!1),[o,s]=y.useState(0),[a,l]=y.useState(t.initialVisitId||null),c=y.useRef(null),u=y.useRef(null),d=y.useRef(null),{user:f}=gn(),{getValidSessionToken:p}=I0(),m=Be(),g=rr();y.useEffect(()=>f!=null&&f.id?((async()=>{try{if(!await p())throw new Error("No session token available");c.current=new J7({saveLocally:!0,async onChunkReady({blob:k,chunkId:E,isFinal:_,key:P,visitId:R}){const N=await p(),A={key:P,contentType:k.type,visitId:R,chunkId:E,isFinal:_,userId:f==null?void 0:f.id};if(console.log("[Debug] Request payload:",A),!A.key||!A.contentType||!A.visitId)throw new Error("Missing required fields in payload");const I=await fetch(`${Qi.apiUrl}/get-upload-url`,{method:"POST",headers:{Authorization:`Bearer ${N}`,"Content-Type":"application/json"},body:JSON.stringify(A)});if(!I.ok){const B=await I.text();throw console.error("[Debug] Upload URL error response:",{status:I.status,statusText:I.statusText,body:B}),new Error(`Failed to get upload URL: ${I.status} ${I.statusText} - ${B}`)}const{uploadUrl:O,fields:L}=await I.json(),$=new FormData;Object.entries(L).forEach(([B,Q])=>{$.append(B,Q)}),$.append("file",k),console.log("[Debug] Uploading to S3:",{uploadUrl:O,fields:L,formDataKeys:Array.from($.keys())});const H=await fetch(O,{method:"POST",body:$});if(!H.ok){const B=await H.text();throw console.error("[Debug] S3 upload error:",{status:H.status,statusText:H.statusText,response:B}),new Error(`Failed to upload to S3: ${H.status} ${H.statusText} - ${B}`)}console.log("[Debug] S3 upload successful");const M={key:P,visitId:R,chunkId:Number(E),isFinal:!!_,contentType:k.type},D=await fetch(`${Qi.apiUrl}/process-audio`,{method:"POST",headers:{Authorization:`Bearer ${N}`,"Content-Type":"application/json"},body:JSON.stringify(M)});if(!D.ok){const B=await D.text();throw new Error(`Failed to process audio: ${D.status} ${D.statusText} - ${B}`)}}}),await c.current.initialize()}catch(C){console.error("Failed to initialize recorder:",C)}})(),()=>{var C;return(C=c.current)==null?void 0:C.cleanup()}):void 0,[f==null?void 0:f.id]),y.useEffect(()=>(e&&!r&&u.current&&(d.current=setInterval(()=>{const b=Date.now()-u.current;s(Math.floor(b/1e3))},1e3)),()=>{d.current&&(clearInterval(d.current),d.current=null)}),[e,r]),y.useEffect(()=>{t.initialVisitId&&t.initialState==="recording"?(n(!0),i(!1)):t.initialVisitId&&t.initialState==="paused"&&(n(!0),i(!0))},[t.initialVisitId,t.initialState]);const x=y.useCallback(async(b,C)=>{var k;try{if(!c.current)throw new Error("Recorder not initialized");if(!(f!=null&&f.id))throw new Error("Must be logged in to record");const E=C||a||Y7();if(l(E),b&&await c.current.initialize(b),u.current=Date.now(),await c.current.startRecording(E),n(!0),i(!1),!C&&!a){const{error:_}=await m.from("visits").insert([{id:E,user_id:f.id,state:"recording"}]).select().single();_?console.error("Failed to create visit record:",_):g(`/visit/${E}`)}(k=t.onRecordingStateChange)==null||k.call(t,!0,!1)}catch(E){console.error("Failed to start recording:",E)}},[f==null?void 0:f.id,m,a,g]),v=y.useCallback(async()=>{var b;try{c.current&&(await c.current.stopRecording(),a&&await m.from("visits").update({state:"processing"}).eq("id",a),n(!1),i(!1),s(0),(b=t.onRecordingStateChange)==null||b.call(t,!1,!1))}catch(C){console.error("Failed to stop recording:",C)}},[a,m]),w=y.useCallback(async()=>{var b;try{c.current&&(await c.current.pauseRecording(),i(!0),(b=t.onRecordingStateChange)==null||b.call(t,!0,!0))}catch(C){console.error("Failed to pause recording:",C)}},[]),S=y.useCallback(async()=>{var b;try{c.current&&(await c.current.resumeRecording(),i(!1),(b=t.onRecordingStateChange)==null||b.call(t,!0,!1))}catch(C){console.error("Failed to resume recording:",C)}},[]);return{isRecording:e,isPaused:r,startRecording:x,stopRecording:v,pauseRecording:w,resumeRecording:S,formattedTime:Q7(o),currentVisitId:a}}class Z7{constructor(e={}){this.stream=null,this.monitorRecorder=null,this.audioContext=null,this.analyser=null,this.mediaStreamSource=null,this.reconnectInterval=null,this.isReconnecting=!1,this.onStreamAvailable=e.onStreamAvailable}startStreamMonitoring(){this.reconnectInterval&&clearInterval(this.reconnectInterval),this.reconnectInterval=window.setInterval(async()=>{if(!this.stream)return;if(!this.stream.getAudioTracks().some(r=>r.readyState==="live")&&!this.isReconnecting){console.log("[AudioMonitor] Stream inactive, attempting to reconnect..."),this.isReconnecting=!0;try{await this.initialize(this.lastDeviceId),console.log("[AudioMonitor] Successfully reconnected stream")}catch(r){console.error("[AudioMonitor] Failed to reconnect stream:",r)}finally{this.isReconnecting=!1}}},5e3)}async initialize(e){try{this.lastDeviceId=e,this.cleanup(),this.stream=await navigator.mediaDevices.getUserMedia({audio:{deviceId:e?{exact:e}:void 0,channelCount:1,sampleRate:48e3}}),this.audioContext=new AudioContext,this.analyser=this.audioContext.createAnalyser(),this.analyser.minDecibels=-85,this.analyser.maxDecibels=-10,this.analyser.smoothingTimeConstant=.85,this.analyser.fftSize=1024,this.mediaStreamSource=this.audioContext.createMediaStreamSource(this.stream),this.mediaStreamSource.connect(this.analyser);const n=$O();this.monitorRecorder=new MediaRecorder(this.stream,{mimeType:n,audioBitsPerSecond:48e3}),this.monitorRecorder.start(100),this.startStreamMonitoring(),this.onStreamAvailable&&this.onStreamAvailable(this.stream)}catch(n){throw console.error("[AudioMonitor] Failed to initialize:",n),this.cleanup(),n}}getStream(){return this.stream}getAnalyser(){return this.analyser}getAudioContext(){return this.audioContext}isMonitoring(){return this.monitorRecorder!==null&&this.monitorRecorder.state==="recording"}async resumeContext(){var e;((e=this.audioContext)==null?void 0:e.state)==="suspended"&&await this.audioContext.resume()}cleanup(){if(console.log("[AudioMonitor] Cleaning up..."),this.reconnectInterval&&(clearInterval(this.reconnectInterval),this.reconnectInterval=null),this.monitorRecorder){try{this.monitorRecorder.state==="recording"&&this.monitorRecorder.stop()}catch(e){console.warn("[AudioMonitor] Error stopping monitor recorder:",e)}this.monitorRecorder=null}this.mediaStreamSource&&(this.mediaStreamSource.disconnect(),this.mediaStreamSource=null),this.analyser&&(this.analyser.disconnect(),this.analyser=null),this.audioContext&&(this.audioContext.close(),this.audioContext=null),this.stream&&(this.stream.getTracks().forEach(e=>e.stop()),this.stream=null),console.log("[AudioMonitor] Cleanup complete.")}}const eH=t=>{const e=y.useRef(null),n=y.useRef(null),r=y.useRef(null),i=y.useRef(null),o=async()=>{const a=t.current;if(!a){console.error("AudioMonitor not provided");return}const l=document.getElementById("visualizer");if(!l){console.error("Canvas element not found");return}i.current=l;const c=l.getContext("2d");if(!c){console.error("Unable to get canvas context");return}if(l.width===0||l.height===0){console.error("Canvas has zero dimensions:",l.width,l.height);return}let u=a.getAnalyser(),d=0;const f=5;for(;!u&&d<f;)console.log(`Waiting for analyzer (attempt ${d+1}/${f})...`),await new Promise(P=>{r.current=window.setTimeout(P,500)}),u=a.getAnalyser(),d++;if(!u){console.error("Analyzer not available after retries");return}await a.resumeContext();const p=u.frequencyBinCount,m=new Uint8Array(p),g=8,x=new Float32Array(g).fill(0),v=.85,w=a.getAudioContext();if(!w){console.error("AudioContext not available");return}const b=w.sampleRate/u.fftSize,C=Math.floor(50/b),k=Math.floor(1e3/b),E=k-C;e.current&&(cancelAnimationFrame(e.current),e.current=null);const _=()=>{if(!i.current){console.log("Canvas no longer exists, stopping visualization"),e.current&&(cancelAnimationFrame(e.current),e.current=null);return}e.current=requestAnimationFrame(_),u.getByteFrequencyData(m);const P=m.slice(C,k).every($=>$===0),R=Date.now();P?n.current||(n.current=R):n.current&&(n.current=null);const N=n.current&&R-n.current>3e4;c.clearRect(0,0,l.width,l.height);const A=1,I=(g-1)*A,O=Math.floor((l.width-I)/g);let L=0;for(let $=0;$<g;$++){const H=C+Math.floor($/g*E),M=C+Math.floor(($+1)/g*E);if(M<=H)continue;const D=m.slice(H,M).reduce((U,ee)=>U+ee,0)/(M-H);x[$]=x[$]*v+D*(1-v);const B=Math.max(x[$]/255*l.height*1.2,l.height*.2),Q=(l.height-B)/2;c.fillStyle=N?"rgba(239, 68, 68, 0.8)":`rgba(59, 130, 246, ${Math.max(.3,x[$]/255)})`,c.fillRect(L,Q,O,B),L+=O+A}};_()},s=()=>{r.current&&(window.clearTimeout(r.current),r.current=null),e.current&&(cancelAnimationFrame(e.current),e.current=null),i.current=null};return y.useEffect(()=>()=>{s()},[]),{startVisualizer:o,stopVisualizer:s}},oi={micSelectorContainer:{display:"flex",alignItems:"center"},visualizerButton:{display:"flex",alignItems:"center",padding:"0",backgroundColor:"transparent",border:"none",cursor:"pointer",outline:"none",WebkitTapHighlightColor:"transparent","&:hover":{backgroundColor:"transparent"},"&:active":{backgroundColor:"transparent"},"&:focus":{backgroundColor:"transparent",outline:"none"}},visualizerGroup:{display:"flex",alignItems:"center",gap:"4px",backgroundColor:"white",padding:"0 12px",borderRadius:"6px",border:"1px solid #e5e7eb",justifyContent:"space-between",height:"36px"},visualizer:{maxWidth:"60px",height:"36px",backgroundColor:"transparent"},dropdownContent:{minWidth:"220px",backgroundColor:"white",borderRadius:"6px",padding:"5px",boxShadow:"0px 10px 38px -10px rgba(22, 23, 24, 0.35), 0px 10px 20px -15px rgba(22, 23, 24, 0.2)"},dropdownItem:{fontSize:"14px",lineHeight:"1",color:"#374151",borderRadius:"3px",display:"flex",alignItems:"center",height:"32px",padding:"0 8px",userSelect:"none",outline:"none",cursor:"pointer","&:hover":{backgroundColor:"#f3f4f6"}},selectedDropdownItem:{backgroundColor:"#f0f9ff",color:"#2563eb","&:hover":{backgroundColor:"#e0f2fe"}},dropdownLabel:{fontSize:"12px",lineHeight:"1",color:"#6b7280",padding:"0 8px",marginBottom:"4px"}};function tH({onDeviceSelect:t,selectedDevice:e}){const[n,r]=y.useState([]),[i,o]=y.useState(null),s=y.useRef(null),a=y.useRef(!1),{startVisualizer:l}=eH(s),c=y.useRef(!0);y.useEffect(()=>(s.current=new Z7,c.current=!0,()=>{c.current=!1}),[]);const u=y.useCallback(async()=>{if(c.current)try{await navigator.mediaDevices.getUserMedia({audio:!0});const m=(await navigator.mediaDevices.enumerateDevices()).filter(x=>x.kind==="audioinput");if(r(m),e&&m.some(x=>x.deviceId===e.deviceId)){if(m.length>0&&!e){const x=m.find(v=>v.deviceId!=="default"&&v.deviceId!=="communications")||m[0];t(x)}}else{const x=m.find(v=>v.deviceId!=="default"&&v.deviceId!=="communications")||m[0];x&&(console.log("Previously selected device no longer available. Switching to:",x.label),t(x))}}catch(p){console.error("Failed to load audio devices:",p)}},[e,t]);y.useEffect(()=>(u(),navigator.mediaDevices.addEventListener("devicechange",u),()=>{navigator.mediaDevices.removeEventListener("devicechange",u)}),[u]);const d=y.useCallback(async()=>{if(!(!c.current||!s.current||!e||a.current))try{a.current=!0,s.current.cleanup(),await s.current.initialize(e.deviceId),c.current&&(await new Promise(p=>setTimeout(p,100)),await l())}catch(p){console.error("Failed to initialize audio monitor:",p),c.current&&s.current&&s.current.cleanup()}finally{c.current&&(a.current=!1)}},[e==null?void 0:e.deviceId,l]);y.useEffect(()=>{(i==null?void 0:i.deviceId)!==(e==null?void 0:e.deviceId)&&(o(e),e&&d())},[i==null?void 0:i.deviceId,e==null?void 0:e.deviceId,d]);const f=y.useCallback(p=>{if(!c.current)return;const m=n.find(g=>g.deviceId===p);m&&t(m)},[n,t]);return h.jsx("div",{style:oi.micSelectorContainer,children:h.jsxs(Kh,{children:[h.jsx(qh,{asChild:!0,children:h.jsx("button",{style:oi.visualizerButton,children:h.jsxs("div",{style:oi.visualizerGroup,children:[h.jsx(zf,{size:16,color:"#6b7280"}),h.jsx("canvas",{id:"visualizer",style:oi.visualizer,width:"120",height:"36"}),h.jsx(T0,{width:16,height:16,color:"#6b7280"})]})})}),h.jsx(Gh,{children:h.jsxs(Jh,{style:oi.dropdownContent,sideOffset:5,children:[h.jsx("div",{style:oi.dropdownLabel,children:"Select Microphone"}),n.filter(p=>p.deviceId!=="default").map(p=>{const m=p.deviceId===(e==null?void 0:e.deviceId);return h.jsxs(dr,{style:{...oi.dropdownItem,...m?oi.selectedDropdownItem:{}},onClick:()=>f(p.deviceId),children:[h.jsx(zf,{size:16,style:{marginRight:"8px",color:m?"#2563eb":"#6b7280"}}),p.label||`Microphone ${p.deviceId.slice(0,4)}`]},p.deviceId)})]})})]})})}const Bt={container:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"8px"},buttonsContainer:{width:"200px",height:"36px"},buttonGroup:{display:"flex",alignItems:"stretch",height:"100%",width:"100%",minWidth:"200px"},dropdownTrigger:{display:"flex",alignItems:"center",padding:"0 8px",backgroundColor:"#3b82f6",color:"white",border:"none",borderLeft:"1px solid rgba(255,255,255,0.2)",borderRadius:"0 6px 6px 0",cursor:"pointer",transition:"all 0.2s ease",outline:"none",width:"32px","&:hover":{backgroundColor:"#2563eb"},"&:focus":{outline:"none"},"&:active":{outline:"none"},WebkitTapHighlightColor:"transparent"},controlsRow:{display:"flex",alignItems:"center",gap:"16px",userSelect:"none",height:"36px"},timerContainer:{display:"flex",alignItems:"center",pointerEvents:"none",height:"36px"},timer:{display:"flex",alignItems:"center",gap:"4px",fontSize:"14px",color:"#374151",height:"36px",padding:"0 8px"},timerIcon:{width:"16px",height:"16px",color:"#6b7280"},dropdownContent:{minWidth:"220px",backgroundColor:"white",borderRadius:"6px",padding:"5px",boxShadow:"0px 10px 38px -10px rgba(22, 23, 24, 0.35), 0px 10px 20px -15px rgba(22, 23, 24, 0.2)"},dropdownItem:{fontSize:"14px",lineHeight:"1",color:"#374151",borderRadius:"3px",display:"flex",alignItems:"center",height:"32px",padding:"0 8px",userSelect:"none",outline:"none",cursor:"pointer","&:hover":{backgroundColor:"#f3f4f6"}},pauseButton:{display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",padding:"8px 16px",color:"white",border:"none",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"all 0.2s ease",outline:"none",borderRadius:"6px 0 0 6px",backgroundColor:"#9ca3af",width:"100px","&:hover":{backgroundColor:"#6b7280"}},resumeButton:{display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",padding:"8px 16px",color:"white",border:"none",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"all 0.2s ease",outline:"none",borderRadius:"6px 0 0 6px",backgroundColor:"#3b82f6",flex:"1","&:hover":{backgroundColor:"#2563eb"}},stopButton:{display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",padding:"8px 16px",color:"white",border:"none",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"all 0.2s ease",outline:"none",borderRadius:"0 6px 6px 0",backgroundColor:"#dc2626",width:"100px","&:hover":{backgroundColor:"#b91c1c"}},startButton:{display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",padding:"8px 16px",color:"white",border:"none",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"all 0.2s ease",outline:"none",borderRadius:"6px 0 0 6px",backgroundColor:"#3b82f6",minWidth:"168px",flex:1,"&:hover":{backgroundColor:"#2563eb"}}};function nH({disabled:t=!1,onRecordingStateChange:e,initialVisitId:n,initialChunkId:r,onVisitIdChange:i,onStartRecording:o}){const[s,a]=y.useState(null),[l,c]=y.useState(n||null),[u,d]=y.useState("new"),{user:f}=gn(),p=Be(),m=rr(),{isRecording:g,isPaused:x,formattedTime:v,startRecording:w,stopRecording:S,pauseRecording:b,resumeRecording:C}=X7({onRecordingStateChange:e,initialVisitId:n,initialChunkId:r});y.useEffect(()=>{n&&u==="paused"&&c(n)},[n,u]),y.useEffect(()=>{console.log("[AudioRecorder] State update:",{isRecording:g,isPaused:x,recordingState:u,initialVisitId:n,currentVisitId:l,disabled:t})},[g,x,u,n,l,t]),y.useEffect(()=>{n===null&&(c(null),d("new"),i==null||i(null))},[n,i]);const k=y.useCallback(async()=>{try{if(!(f!=null&&f.id))throw new Error("User not authenticated");let N=null;if(o){if(N=await o(),!N)return}else if(n&&u==="paused")N=n,await Vl(p,n,"recording"),m(`/visit/${n}`);else{console.error("No visit ID available and no onStartRecording provided");return}c(N),d("recording"),i==null||i(N),await w(s==null?void 0:s.deviceId,N)}catch(N){console.error("Failed to start recording:",N)}},[f==null?void 0:f.id,n,u,s,w,p,i,m,o]),E=y.useCallback(async()=>{if(l)try{await b(),d("paused"),await Vl(p,l,"paused")}catch(N){console.error("Failed to pause recording:",N)}},[l,b,p]),_=y.useCallback(async()=>{if(l)try{await C(),d("recording"),await Vl(p,l,"recording")}catch(N){console.error("Failed to resume recording:",N)}},[l,C,p]),P=y.useCallback(async()=>{if(l)try{await S(),d("processing"),await Vl(p,l,"processing",!0),c(null),i==null||i(null)}catch(N){console.error("Failed to stop recording:",N)}},[l,S,p,i]);y.useEffect(()=>{e==null||e(g,x)},[g,x,e]);const R=y.useMemo(()=>({startButton:{...Bt.startButton,...t?{opacity:.5,cursor:"not-allowed",backgroundColor:"#9ca3af"}:{}},dropdownTrigger:{...Bt.dropdownTrigger,...t?{opacity:.5,cursor:"not-allowed",backgroundColor:"#9ca3af"}:{}}}),[t]);return h.jsxs("div",{style:Bt.container,children:[h.jsxs("div",{style:Bt.controlsRow,children:[h.jsx("div",{style:Bt.timerContainer,children:h.jsxs("div",{style:Bt.timer,children:[h.jsx(i6,{style:Bt.timerIcon}),v]})}),h.jsx(tH,{selectedDevice:s,onDeviceSelect:a})]}),h.jsx("div",{style:Bt.buttonsContainer,children:h.jsx("div",{style:Bt.buttonGroup,children:g?h.jsxs(h.Fragment,{children:[h.jsxs("button",{onClick:u==="paused"?_:E,style:u==="paused"?Bt.resumeButton:Bt.pauseButton,disabled:t,children:[u==="paused"?h.jsx(zf,{size:16}):h.jsx(Y5,{size:16}),u==="paused"?"Resume":"Pause"]}),h.jsxs("button",{onClick:P,style:Bt.stopButton,disabled:t,children:[h.jsx(r8,{size:16}),"Stop"]})]}):h.jsxs(h.Fragment,{children:[h.jsxs("button",{onClick:k,style:R.startButton,disabled:t,children:[h.jsx(zf,{size:16}),"Start Recording"]}),h.jsxs(Kh,{children:[h.jsx(qh,{asChild:!0,children:h.jsx("button",{style:R.dropdownTrigger,disabled:t,children:h.jsx(T0,{width:16,height:16})})}),h.jsx(Gh,{children:h.jsx(Jh,{style:Bt.dropdownContent,sideOffset:5,children:h.jsxs(dr,{style:Bt.dropdownItem,children:[h.jsx(a8,{size:16,style:{marginRight:"8px"}}),"Upload Audio"]})})})]})]})})})]})}const km={header:{height:"60px",backgroundColor:"#f9fafb",padding:"0 24px 0",display:"flex",alignItems:"flex-end",justifyContent:"space-between",gap:"32px"},headerLeft:{flex:"0 1 auto",minWidth:0,maxWidth:"400px"},headerRight:{flex:"0 0 auto",display:"flex",alignItems:"center",gap:"16px"}};function rH({onPatientSelect:t,selectedPatientId:e,onRecordingStateChange:n,visitId:r}){const[i,o]=y.useState(void 0),[s,a]=y.useState(r),l=Be(),{user:c}=gn(),u=rr(),d=g=>{t(g)},f=g=>{o(g||void 0)},p=g=>{a(g||void 0)},m=y.useCallback(async()=>{try{if(!(c!=null&&c.id))throw new Error("User not authenticated");let g=s;if(r)g=r,await Vl(l,r,"recording");else{const x=await A7(l,{userId:c.id,name:i,patientId:e||void 0});g=x.id,a(x.id)}return u(`/visit/${g}`),g}catch(g){return console.error("Failed to create/resume visit:",g),null}},[c==null?void 0:c.id,s,r,l,i,e,u]);return h.jsxs("div",{style:km.header,children:[h.jsx("div",{style:km.headerLeft,children:h.jsx(N7,{onPatientSelect:d,onVisitNameChange:f,selectedPatientId:e,visitId:r||s})}),h.jsx("div",{style:km.headerRight,children:h.jsx(nH,{disabled:!1,onRecordingStateChange:n,initialVisitId:r,onVisitIdChange:p,onStartRecording:m})})]})}const iH=async(t,e,n)=>{try{if(n==="paused"||n==="processing"){const{data:o,error:s}=await t.from("containers").select("transcript_fragment").eq("visit_id",e).order("chunk_id",{ascending:!0});return s?(console.error("Error loading containers:",s),"Error loading partial transcription."):o.map(l=>l.transcript_fragment).filter(l=>l!==null).join(" ").trim()||"Processing..."}else if(n==="recording")return"";const{data:r,error:i}=await t.from("transcripts").select("full_text").eq("visit_id",e).single();return i?i.code==="PGRST116"?"No transcript available for this visit.":(console.error("Error loading transcript:",i),"Error loading transcript. Please try again later."):(r==null?void 0:r.full_text)||"No transcript content available."}catch(r){return console.error("Error processing transcription:",r),"Error loading transcription data. Please try again later."}},Cd={container:{display:"flex",flexDirection:"column",height:"100%",width:"100%",backgroundColor:"#f9fafb"},content:{flex:1,backgroundColor:"#f9fafb",overflow:"hidden",width:"100%",height:"calc(100vh - 60px)",padding:"24px"},transcriptContainer:{height:"100%",overflow:"hidden"},transcriptContent:{lineHeight:"1.5",color:"#374151",height:"100%",display:"flex",flexDirection:"column"}};function oH({placeholder:t="Your transcription will appear here as you speak...",isTranscribing:e=!1,visitId:n,onRecordingStateChange:r,onPatientSelect:i,selectedPatientId:o,visits:s}){const[a,l]=y.useState(""),[c,u]=y.useState({}),[d,f]=y.useState(null),p=Be(),m=y.useMemo(()=>n?s.find(C=>C.id===n):null,[n,s]),g=m==null?void 0:m.state,x=y.useCallback(C=>{const k=C.transcript_fragment,E=C.chunk_id;k&&typeof E=="number"&&u(_=>({..._,[E]:k}))},[]);v7({visitId:n||"",onMessage:x});const v=y.useMemo(()=>e?Object.entries(c).sort(([C],[k])=>Number(C)-Number(k)).map(([C,k])=>k).join(" ").trim():"",[c,e]);y.useEffect(()=>{e&&v!==a&&l(v)},[v,a,e]),y.useEffect(()=>{if(!n||!g||!m){u({}),l(""),f(null);return}(async()=>{try{const k=await iH(p,n,g);f(k),e||l(k)}catch{l("Error loading transcription data.")}})()},[n,g,m,p,e]);const w=y.useCallback(C=>{i((C==null?void 0:C.id)||null)},[i]),S=y.useMemo(()=>e?a:d||a||"",[e,a,d]),b=y.useMemo(()=>h.jsx("div",{style:Cd.content,children:h.jsx("div",{style:Cd.transcriptContainer,children:h.jsx("div",{style:Cd.transcriptContent,children:e||!n||!m?h.jsx(U2,{transcription:S,placeholder:t,isTranscribing:e,visit:m??void 0}):h.jsx(y7,{partialTranscription:S,visit:m})})})}),[S,t,e,n,m]);return h.jsxs("div",{style:Cd.container,children:[h.jsx(rH,{onPatientSelect:w,selectedPatientId:o,onRecordingStateChange:r,visitId:n}),b]})}function sH(){const t=y.useContext(CE),e=Be();if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return{...t,signIn:async(r,i)=>{try{const{data:o,error:s}=await e.auth.signInWithPassword({email:r,password:i});if(s)throw s;return await e.auth.getSession(),{data:o,error:null}}catch(o){return console.error("Sign in error:",o),{data:null,error:o}}}}}const kt={container:{minHeight:"100vh",width:"100vw",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f3f4f6",padding:"20px"},formContainer:{backgroundColor:"white",padding:"48px",borderRadius:"12px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)",width:"100%",maxWidth:"480px"},title:{fontSize:"32px",fontWeight:"bold",color:"#1f2937",marginBottom:"32px",textAlign:"center"},form:{display:"flex",flexDirection:"column",gap:"24px"},inputGroup:{display:"flex",flexDirection:"column",gap:"8px"},label:{fontSize:"14px",color:"#4b5563",fontWeight:"500"},input:{padding:"12px 16px",borderRadius:"8px",border:"1px solid #e5e7eb",fontSize:"16px",backgroundColor:"white",transition:"all 0.2s ease","&:focus":{outline:"none",borderColor:"#3b82f6",boxShadow:"0 0 0 3px rgba(59, 130, 246, 0.1)"}},button:{backgroundColor:"#3b82f6",color:"white",padding:"14px",borderRadius:"8px",border:"none",fontSize:"16px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",marginTop:"8px","&:hover":{backgroundColor:"#2563eb"},"&:disabled":{backgroundColor:"#93c5fd",cursor:"not-allowed"}},error:{color:"#ef4444",fontSize:"14px",textAlign:"center",marginBottom:"16px"},signupText:{textAlign:"center",marginTop:"24px",fontSize:"14px",color:"#6b7280"},signupLink:{color:"#3b82f6",textDecoration:"none",fontWeight:"500","&:hover":{textDecoration:"underline"}}};function aH(){const t=rr(),{signIn:e,user:n}=sH(),[r,i]=y.useState(""),[o,s]=y.useState(""),[a,l]=y.useState(""),[c,u]=y.useState(!1),d=xs(),f=jn();y.useEffect(()=>{var m,g;if(n){console.log("User is logged in, redirecting to record",{user:n.id,email:n.email,location:window.location.pathname});const x=((g=(m=f.state)==null?void 0:m.from)==null?void 0:g.pathname)||"/record";t(x,{replace:!0})}},[n,t,f]);const p=async m=>{if(m.preventDefault(),!c){l(""),u(!0);try{const g=await e(r,o);if(g.error)throw g.error;d.clear()}catch(g){l(g instanceof Error?g.message:"Failed to sign in"),u(!1)}}};return n?h.jsx("div",{style:kt.container,children:h.jsx("div",{style:kt.formContainer,children:h.jsx("div",{style:{textAlign:"center",color:"#4b5563"},children:"Redirecting..."})})}):h.jsx("div",{style:kt.container,children:h.jsxs("div",{style:kt.formContainer,children:[h.jsx("h1",{style:kt.title,children:"Welcome to East Medical AI Scribe"}),h.jsxs("form",{onSubmit:p,style:kt.form,children:[a&&h.jsx("div",{style:kt.error,children:a}),h.jsxs("div",{style:kt.inputGroup,children:[h.jsx("label",{htmlFor:"email",style:kt.label,children:"Email Address"}),h.jsx("input",{id:"email",type:"email",value:r,onChange:m=>i(m.target.value),required:!0,style:kt.input,placeholder:"Enter your email"})]}),h.jsxs("div",{style:kt.inputGroup,children:[h.jsx("label",{htmlFor:"password",style:kt.label,children:"Password"}),h.jsx("input",{id:"password",type:"password",value:o,onChange:m=>s(m.target.value),required:!0,style:kt.input,placeholder:"Enter your password"})]}),h.jsx("button",{type:"submit",disabled:c,style:kt.button,children:c?"Signing in...":"Sign In"})]}),h.jsxs("div",{style:kt.signupText,children:["Don't have an account?"," "]})]})})}const FO=y.createContext(void 0);function lH({children:t}){const[e,n]=y.useState(null),[r,i]=y.useState(!0),o=Be();y.useEffect(()=>{(async()=>{const{data:{session:f},error:p}=await o.auth.getSession();p&&console.error("Error fetching session:",p),n((f==null?void 0:f.user)??null),i(!1)})();const{data:{subscription:d}}=o.auth.onAuthStateChange((f,p)=>{n((p==null?void 0:p.user)??null)});return()=>{d.unsubscribe()}},[o]);const c={user:e,loading:r,signIn:async(u,d)=>{const{error:f}=await o.auth.signInWithPassword({email:u,password:d});if(f)throw f},signUp:async(u,d)=>{const{error:f}=await o.auth.signUp({email:u,password:d});if(f)throw f},signOut:async()=>{const{error:u}=await o.auth.signOut();if(u)throw u}};return h.jsx(FO.Provider,{value:c,children:t})}function BO(){const t=y.useContext(FO);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const zt={container:{minHeight:"100vh",width:"100vw",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f3f4f6",padding:"20px"},formContainer:{backgroundColor:"white",padding:"48px",borderRadius:"12px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)",width:"100%",maxWidth:"480px"},title:{fontSize:"32px",fontWeight:"bold",color:"#1f2937",marginBottom:"32px",textAlign:"center"},form:{display:"flex",flexDirection:"column",gap:"24px"},inputGroup:{display:"flex",flexDirection:"column",gap:"8px"},label:{fontSize:"14px",color:"#4b5563",fontWeight:"500"},input:{padding:"12px 16px",borderRadius:"8px",border:"1px solid #e5e7eb",fontSize:"16px",backgroundColor:"white",transition:"all 0.2s ease","&:focus":{outline:"none",borderColor:"#3b82f6",boxShadow:"0 0 0 3px rgba(59, 130, 246, 0.1)"}},button:{backgroundColor:"#3b82f6",color:"white",padding:"14px",borderRadius:"8px",border:"none",fontSize:"16px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",marginTop:"8px","&:hover":{backgroundColor:"#2563eb"},"&:disabled":{backgroundColor:"#93c5fd",cursor:"not-allowed"}},error:{color:"#ef4444",fontSize:"14px",textAlign:"center",marginBottom:"16px"},loginText:{textAlign:"center",marginTop:"24px",fontSize:"14px",color:"#6b7280"},loginLink:{color:"#3b82f6",textDecoration:"none",fontWeight:"500","&:hover":{textDecoration:"underline"}}};function cH(){const[t,e]=y.useState(""),[n,r]=y.useState(""),[i,o]=y.useState(""),[s,a]=y.useState(!1),{signUp:l}=BO(),c=rr(),u=async d=>{d.preventDefault();try{o(""),a(!0),await l(t,n),c("/")}catch(f){o("Failed to create account. Please try again."),console.error("Signup error:",f)}finally{a(!1)}};return h.jsx("div",{style:zt.container,children:h.jsxs("div",{style:zt.formContainer,children:[h.jsx("h1",{style:zt.title,children:"Create an Account"}),h.jsxs("form",{onSubmit:u,style:zt.form,children:[i&&h.jsx("div",{style:zt.error,children:i}),h.jsxs("div",{style:zt.inputGroup,children:[h.jsx("label",{htmlFor:"email",style:zt.label,children:"Email Address"}),h.jsx("input",{id:"email",type:"email",value:t,onChange:d=>e(d.target.value),required:!0,style:zt.input,placeholder:"Enter your email"})]}),h.jsxs("div",{style:zt.inputGroup,children:[h.jsx("label",{htmlFor:"password",style:zt.label,children:"Password"}),h.jsx("input",{id:"password",type:"password",value:n,onChange:d=>r(d.target.value),required:!0,style:zt.input,placeholder:"Choose a password"})]}),h.jsx("button",{type:"submit",disabled:s,style:zt.button,children:s?"Creating Account...":"Sign Up"})]}),h.jsxs("div",{style:zt.loginText,children:["Already have an account?"," ",h.jsx(Lv,{to:"/login",style:zt.loginLink,children:"Sign in"})]})]})})}const uH=["Accident and Emergency Nurse","Acupuncturist","Addiction Counsellor","Addiction Medicine Specialist","Adolescent and young adult medicine Specialist","Adult Intensive Care Specialist","Aerospace Medicine Specialist","Allergy and Immunologist","Allied Health Professional","Alternative medicine practitioner","Anaesthetist","Anatomical Pathologist","Andrologist","Animal-Assisted Therapist","Aromatherapist","Arts Therapist","Audiologist","Audiology Technician","Audiometrist","Ayurveda","Behaviour Therapist","Bereavement Counselor","Biofeedback Therapist","Blood Transfusion Doctor","Breast Surgeon","Cardiologist","Cardiothoracic Surgeon","Chemical Pathologist","Chemotherapy Nurse","Child and Adolescent Psychiatrist","Chiropractor","Chronic Pain Specialist","Clinical Geneticist","Clinical Immunologist","Clinical Neurophysiologist","Clinical Pathologist","Clinical Pharmacologist","Clinical Physiologist","Clinical Social Worker","Cognitive Behavioral Therapist","Colorectal Surgeon","Community Child Health Specialist","Community Nurse","Coroner","Counselling Psychologist","Counselors","Critical Care Medicine Specialist","Dance Therapist","Dental Auxiliary","Dental Technician","Dental assistant","Dental nurse","Dentist","Dermatologist","Diabetes Dietitian","Diabetes Specialist","Diabetologist","Diagnostic Radiographer","Diagnostic Radiologist","Dietitian","Drama Therapist","ECG Technician","EEG Technician","EMT","Eating Disorder Specialist Dietitian","Eating Disorder Specialist Psychologist","Emergency Medicine Specialist","Endocrine Surgeon","Endocrinologist","Endodontist","Equine Therapist","Exercise Physiologists","Family Medicine Specialist","Family Planning Doctor","Fetal Medicine Specialist","Foot and Ankle Surgeon","Forensic Medicine Specialist","Forensic Psychiatrist","Functional Medicine Specialist","Gastroenterologist","Gastrointestinal Surgeon","General Dietitian","General Gastrointestinal Surgeon","General Practitioner","General Surgeon","Genetic Counselor","Geriatric Medicine Specialist","Geriatrician","Gerodontist","Geropsychologist","Grief Counsellor","Gynaecologist","Haematologist","Haemodialysis Nurse","Hand Surgeon","Health Coach","Health Psychologist","Healthcare Assistant","Healthcare Service Manager","Hepatobiliary Surgeon","Hepatologist","Herbal Medicine Specialist","Hip and Knee Surgeon","Holistic Health Practitioner","Homeopath","Horticultural Therapist","Hospital Administrator","Hydrotherapist","Hypnotherapist","Immunopathologist","Infection Control Nurse","Infectious Diseases Physician","Intensive Care Specialist","Internal Medicine Specialist","Interpreter","Interventional Radiologist","Invasive Cardiologist","Kinesiologist","Laboratory Haematologist","Laboratory Medicine Specialist","Lactation Consultant","Lifestyle medicine Specialist","Liver Dietitian","Lower Gastrointestinal Surgeon","Marriage Guidance Counsellor","Marriage and family therapist","Massage Therapist","Maternal-Fetal Medicine Specialist","Maxillofacial Surgeon","Medical Geneticist","Medical Microbiologist","Medical Oncologist","Medical Pathologist","Medical Record Administrator","Medical Secretary","Medical Technician","Medical X-ray Technician","Mental Health Counselor","Mental Health Nurse","Mental Health and Behavioural Specialist","Midwife","Music Therapist","Naturopath","Neonatal Nurse","Neonatologist","Nephrologist","Neuroendocrinologist","Neurologist","Neuropathologist","Neuropsychiatrist","Neuroradiologist","Neurosurgeon","Nuclear Medicine Physician","Nurse","Nurse Administrator","Nurse Anaesthetist","Nurse Practitioner","Nurse Psychotherapist","Nursing Aid","Nursing Auxiliary","Nutrition & diabetics Specialist","Nutrition Therapist","Obesity Medicine","Obesity Specialist","Obstetrician & Gynaecologist","Occupational Health Nurse","Occupational Medicine Specialist","Occupational Therapist","Oculoplastic Surgeon","Oncologist","Oncology Dietitian","Oncology Nurse","Ophthalmologist","Optician","Optometrist","Oral Pathologist","Oral/Dental Hygienist","Orthodontist","Orthopaedic Surgeon","Orthoptist","Orthotist","Osteopath","Otolaryngologist","Otorhinolaryngologist (ENT Specialist)","Paediatric Allergist","Paediatric Audiologist","Paediatric Cardiologist","Paediatric Dietitian","Paediatric Emergency Medicine Specialist","Paediatric Endocrinologist","Paediatric Gastroenterologist","Paediatric Intensive Care Specialist","Paediatric Nephrologist","Paediatric Neurologist","Paediatric Nurse","Paediatric Oncologist","Paediatric Orthopaedic Surgeon","Paediatric Respirologist","Paediatric Rheumatologist","Paediatric Surgeon","Paediatric haematologist","Paediatrician","Pain Management Specialist","Palantypist","Palliative Care Nurse","Palliative Care Physician","Pancreatic Surgeon","Paramedic","Pathologist","Pediatric Dentist","Pediatric Psychologist","Pediatric Pulmonologist","Pediatric Radiologist","Pediatric Surgeon","Periodontist","Perioperative Nurse","Pharmacist","Physical Medicine and Rehabilitation Specialist","Physician","Physician Assistant","Physiologist","Physiotherapist","Pituitary Surgeon","Plastic & Reconstructive Surgeon","Play Therapist","Podiatrist","Podiatrist Assistant","Practice Manager","Preventive medicine Specialist","Prosthetist","Prosthodontist","Psychiatric Nurse","Psychiatrist","Psychiatrist for Mental Handicap","Psychoanalyst","Psychogeriatrician","Psychologist","Psychotherapist","Public Health Medicine Specialist","Public Health Nurse","Pulmonologist","Radiation Oncologist","Radiation Oncology","Radiation Therapist","Radiologist","Radiology and Imaging Specialist","Radiotherapy Nurse","Recreational Therapist","Reflexologist","Registered Nurse"],we={container:{padding:"32px",width:"100%",height:"100%",backgroundColor:"#fff"},title:{fontSize:"16px",fontWeight:"500",marginBottom:"32px",color:"#1f2937"},section:{maxWidth:"1200px",margin:"0 auto"},formGrid:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"24px"},field:{marginBottom:"24px"},label:{display:"block",fontSize:"14px",color:"#4b5563",marginBottom:"8px"},input:{width:"100%",padding:"8px 12px",fontSize:"14px",border:"1px solid #d1d5db",borderRadius:"6px",color:"#1f2937",backgroundColor:"#fff","&:focus":{outline:"none",borderColor:"#2563eb",boxShadow:"0 0 0 2px rgba(37, 99, 235, 0.2)"}},select:{width:"100%",padding:"8px 12px",fontSize:"14px",border:"1px solid #d1d5db",borderRadius:"6px",color:"#1f2937",backgroundColor:"#fff",cursor:"pointer",appearance:"none",backgroundImage:'url("data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2224%22%20height%3D%2224%22%20viewBox%3D%220%200%2024%2024%22%20fill%3D%22none%22%20stroke%3D%22%236b7280%22%20stroke-width%3D%222%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%3E%3Cpolyline%20points%3D%226%209%2012%2015%2018%209%22%3E%3C%2Fpolyline%3E%3C%2Fsvg%3E")',backgroundRepeat:"no-repeat",backgroundPosition:"right 8px center",backgroundSize:"16px",paddingRight:"32px"},saveButton:{backgroundColor:"#2563eb",color:"white",padding:"10px 20px",borderRadius:"6px",border:"none",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"background-color 0.2s","&:hover":{backgroundColor:"#1d4ed8"},"&:disabled":{backgroundColor:"#93c5fd",cursor:"not-allowed"}},disabledInput:{backgroundColor:"#f3f4f6",cursor:"not-allowed"}};function dH(){const{user:t,loading:e}=gn(),n=Be(),[r,i]=y.useState({firstName:"",lastName:"",specialty:"",title:"",organization:"",companySize:"Just me",position:"Individual clinician"}),[o,s]=y.useState(!1);if(ve.useEffect(()=>{if(t){const[c="",u=""]=(t.name||"").split(" ");i({firstName:c,lastName:u,specialty:t.specialty||"",title:t.title||"",organization:t.organization||"",companySize:"Just me",position:"Individual clinician"})}},[t]),e)return h.jsx("div",{children:"Loading..."});if(!t)return h.jsx("div",{children:"Not logged in"});const a=c=>{const{name:u,value:d}=c.target;i(f=>({...f,[u]:d}))},l=async()=>{if(t.id){s(!0);try{const{error:c}=await n.from("user_profiles").update({name:`${r.firstName} ${r.lastName}`.trim(),specialty:r.specialty,title:r.title,organization:r.organization,updated_at:new Date().toISOString()}).eq("id",t.id);if(c)throw c}catch(c){console.error("Error updating profile:",c)}finally{s(!1)}}};return h.jsx("div",{style:we.container,children:h.jsxs("div",{style:we.section,children:[h.jsx("h1",{style:we.title,children:"About you"}),h.jsxs("div",{style:we.formGrid,children:[h.jsxs("div",{style:we.field,children:[h.jsx("label",{style:we.label,children:"Title"}),h.jsx("input",{style:we.input,name:"title",value:r.title,onChange:a,type:"text",placeholder:"Enter your title"})]}),h.jsxs("div",{style:we.field,children:[h.jsx("label",{style:we.label,children:"First name"}),h.jsx("input",{style:we.input,type:"text",name:"firstName",value:r.firstName,onChange:a,placeholder:"Enter your first name"})]}),h.jsxs("div",{style:we.field,children:[h.jsx("label",{style:we.label,children:"Last name"}),h.jsx("input",{style:we.input,type:"text",name:"lastName",value:r.lastName,onChange:a,placeholder:"Enter your last name"})]}),h.jsxs("div",{style:we.field,children:[h.jsx("label",{style:we.label,children:"Specialty"}),h.jsxs("select",{style:we.select,name:"specialty",value:r.specialty,onChange:a,children:[h.jsx("option",{value:"",children:"Select a specialty"}),uH.map(c=>h.jsx("option",{value:c,children:c},c))]})]}),h.jsxs("div",{style:we.field,children:[h.jsx("label",{style:we.label,children:"Organization name"}),h.jsx("input",{style:we.input,type:"text",name:"organization",value:r.organization,onChange:a,placeholder:"Enter your organization"})]}),h.jsxs("div",{style:we.field,children:[h.jsx("label",{style:we.label,children:"Company size"}),h.jsxs("select",{style:we.select,name:"companySize",value:r.companySize,onChange:a,children:[h.jsx("option",{value:"Just me",children:"Just me"}),h.jsx("option",{value:"2-10",children:"2-10 employees"}),h.jsx("option",{value:"11-50",children:"11-50 employees"}),h.jsx("option",{value:"51+",children:"51+ employees"})]})]}),h.jsxs("div",{style:we.field,children:[h.jsx("label",{style:we.label,children:"Position"}),h.jsxs("select",{style:we.select,name:"position",value:r.position,onChange:a,children:[h.jsx("option",{value:"Individual clinician",children:"Individual clinician"}),h.jsx("option",{value:"Practice owner",children:"Practice owner"}),h.jsx("option",{value:"Administrator",children:"Administrator"})]})]})]}),h.jsx("div",{style:{marginTop:"24px",textAlign:"right"},children:h.jsx("button",{style:we.saveButton,onClick:l,disabled:o,children:o?"Saving...":"Save changes"})})]})})}const fH=[{value:"plain",label:"Plain Text"},{value:"rich_text",label:"Formatted Text"},{value:"without_lists",label:"Formatted Text (Without Lists)"}],tS=[{value:"auto",label:"Multi-lingual"},{value:"en",label:"English"},{value:"zh",label:"Mandarin"},{value:"zh-HK",label:"Cantonese"},{value:"cs",label:"Czech"},{value:"da",label:"Danish"},{value:"nl",label:"Dutch"},{value:"nl-BE",label:"Flemish"},{value:"fr",label:"French"},{value:"de",label:"German"},{value:"el",label:"Greek"},{value:"hi",label:"Hindi"},{value:"id",label:"Indonesian"},{value:"it",label:"Italian"},{value:"ja",label:"Japanese"},{value:"ko",label:"Korean"},{value:"ms",label:"Malay"},{value:"no",label:"Norwegian"},{value:"pl",label:"Polish"},{value:"pt",label:"Portuguese"},{value:"ru",label:"Russian"},{value:"es",label:"Spanish"},{value:"sv",label:"Swedish"},{value:"th",label:"Thai"},{value:"tr",label:"Turkish"},{value:"uk",label:"Ukrainian"},{value:"vi",label:"Vietnamese"}];function hH(){const t=Be(),[e,n]=y.useState({default_copy_mode:"plain",date_format:"MM/DD/YYYY",primary_language:"auto",preferred_note_language:"en",patient_instructions_language:"en",spelling:"en-us",patient_reference_format:"",clinician_reference_format:""});y.useEffect(()=>{(async()=>{const{data:{user:a}}=await t.auth.getUser();if(!(a!=null&&a.id))return;const{data:l}=await t.from("user_profiles").select("note_preferences").eq("id",a.id).single();l!=null&&l.note_preferences&&n(c=>({...c,...l.note_preferences}))})()},[t]);const i=E0(async s=>{try{const{data:{user:a}}=await t.auth.getUser();if(!(a!=null&&a.id))return;const{data:l}=await t.from("user_profiles").select("note_preferences").eq("id",a.id).single(),c=(l==null?void 0:l.note_preferences)||{};await t.from("user_profiles").update({note_preferences:{...c,...s}}).eq("id",a.id)}catch(a){console.error("Failed to update preferences:",a)}},500),o=(s,a)=>{n(l=>({...l,[s]:a})),i({[s]:a})};return h.jsxs("div",{style:{height:"100%",overflow:"auto",paddingRight:"16px"},children:[h.jsx("div",{style:te.sectionTitle,children:"Editor Settings"}),h.jsx("div",{style:te.formGrid,children:h.jsxs("div",{style:te.field,children:[h.jsx("label",{style:te.label,children:"Default Copy Mode"}),h.jsx("select",{style:te.select,value:e.default_copy_mode,onChange:s=>o("default_copy_mode",s.target.value),children:fH.map(s=>h.jsx("option",{value:s.value,children:s.label},s.value))})]})}),h.jsx("div",{style:te.sectionTitle,children:"Date"}),h.jsx("div",{style:te.formGrid,children:h.jsxs("div",{style:te.field,children:[h.jsx("label",{style:te.label,children:"Date format"}),h.jsxs("select",{style:te.select,value:e.date_format,onChange:s=>o("date_format",s.target.value),children:[h.jsx("option",{value:"MM/DD/YYYY",children:"MM/DD/YYYY"}),h.jsx("option",{value:"DD/MM/YYYY",children:"DD/MM/YYYY"}),h.jsx("option",{value:"D MMM YYYY",children:"D MMM YYYY"}),h.jsx("option",{value:"MMMM DD YYYY",children:"MMMM DD YYYY"}),h.jsx("option",{value:"MMM DD YYYY",children:"MMM DD YYYY"}),h.jsx("option",{value:"YYYY/MM/DD",children:"YYYY/MM/DD"})]})]})}),h.jsx("div",{style:te.sectionTitle,children:"Language & spelling"}),h.jsxs("div",{style:te.formGrid,children:[h.jsxs("div",{style:te.field,children:[h.jsx("label",{style:te.label,children:"Primary spoken language"}),h.jsx("select",{style:te.select,value:e.primary_language,onChange:s=>o("primary_language",s.target.value),children:tS.map(s=>h.jsx("option",{value:s.value,children:s.label},s.value))})]}),h.jsxs("div",{style:te.field,children:[h.jsx("label",{style:te.label,children:"Preferred Note Language"}),h.jsx("select",{style:te.select,value:e.preferred_note_language,onChange:s=>o("preferred_note_language",s.target.value),children:tS.filter(s=>s.value!=="auto").map(s=>h.jsx("option",{value:s.value,children:s.label},s.value))})]}),h.jsxs("div",{style:te.field,children:[h.jsx("label",{style:te.label,children:"Patient Instructions Language"}),h.jsxs("select",{style:te.select,value:e.patient_instructions_language,onChange:s=>o("patient_instructions_language",s.target.value),children:[h.jsx("option",{value:"en",children:"English"}),h.jsx("option",{value:"match_spoken",children:"Match spoken language"})]})]}),h.jsxs("div",{style:te.field,children:[h.jsx("label",{style:te.label,children:"Spelling"}),h.jsxs("select",{style:te.select,value:e.spelling,onChange:s=>o("spelling",s.target.value),children:[h.jsx("option",{value:"en-us",children:"English (United States)"}),h.jsx("option",{value:"en-gb",children:"English (United Kingdom)"}),h.jsx("option",{value:"en-au",children:"English (Australia)"}),h.jsx("option",{value:"en-ca",children:"English (Canada)"})]})]})]}),h.jsx("div",{style:te.sectionTitle,children:"Reference format"}),h.jsxs("div",{style:te.formGrid,children:[h.jsxs("div",{style:te.field,children:[h.jsx("label",{style:te.label,children:"Refer to patient"}),h.jsx("input",{style:te.input,type:"text",value:e.patient_reference_format,onChange:s=>o("patient_reference_format",s.target.value),placeholder:"e.g Title + Firstname + Lastname"})]}),h.jsxs("div",{style:te.field,children:[h.jsx("label",{style:te.label,children:"Refer to clinician"}),h.jsx("input",{style:te.input,type:"text",value:e.clinician_reference_format,onChange:s=>o("clinician_reference_format",s.target.value),placeholder:"e.g Dr Smith"})]})]})]})}function pH(){const[t,e]=y.useState("preferences");return h.jsx("div",{style:te.container,children:h.jsxs("div",{style:te.section,children:[h.jsxs("div",{style:te.header,children:[h.jsx("h1",{style:te.title,children:"Settings"}),h.jsxs("div",{style:te.tabs,children:[h.jsx("div",{style:{...te.tab,...t==="preferences"?te.activeTab:{}},onClick:()=>e("preferences"),children:"Note Preferences"}),h.jsx("div",{style:{...te.tab,...t==="memory"?te.activeTab:{}},onClick:()=>e("memory"),children:"Memory"})]})]}),h.jsx("div",{style:te.contentContainer,children:t==="preferences"?h.jsx(hH,{}):h.jsx(M5,{})})]})})}const ke={container:{padding:"32px",width:"100%",height:"100%",backgroundColor:"#fff"},section:{maxWidth:"1200px",margin:"0 auto"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px"},title:{fontSize:"24px",fontWeight:"600",color:"#1f2937"},actions:{display:"flex",gap:"12px"},button:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 16px",borderRadius:"6px",fontSize:"14px",fontWeight:"500"},primaryButton:{backgroundColor:"#1f2937",color:"white",border:"none"},secondaryButton:{backgroundColor:"transparent",color:"#1f2937",border:"1px solid #e5e7eb"},searchBar:{display:"flex",gap:"12px",marginBottom:"24px"},searchInput:{flex:"1",maxWidth:"320px",padding:"8px 12px",border:"1px solid #e5e7eb",borderRadius:"6px",fontSize:"14px"},table:{width:"100%",borderCollapse:"collapse"},tableHeader:{textAlign:"left",padding:"12px 16px",fontSize:"14px",fontWeight:"500",color:"#6b7280",borderBottom:"1px solid #e5e7eb"},tableCell:{padding:"12px 16px",fontSize:"14px",color:"#374151",borderBottom:"1px solid #e5e7eb"},templateType:{fontSize:"12px",padding:"4 px 6px",marginLeft:"8px",backgroundColor:"#f3f4f6",borderRadius:"12px",color:"#6b7280"},actionButton:{padding:"4px",border:"none",background:"none",cursor:"pointer",color:"#6b7280","&:hover":{color:"#374151"}}};function mH(){const[t,e]=y.useState([]),[n,r]=y.useState(!0),[i,o]=y.useState(""),s=Be(),{user:a}=gn();y.useEffect(()=>{(async()=>{try{if(!(a!=null&&a.id))return;const{data:u,error:d}=await s.from("template_library").select("*").or(`owner_id.eq.${a.id},published.eq.false`).order("name");if(d)throw d;e(u||[])}catch(u){console.error("Error fetching templates:",u)}finally{r(!1)}})()},[s,a==null?void 0:a.id]);const l=t.filter(c=>c.name.toLowerCase().includes(i.toLowerCase()));return n?h.jsx("div",{style:ke.container,children:h.jsxs("div",{style:ke.section,children:[h.jsx("h1",{style:ke.title,children:"My Templates"}),h.jsx("div",{children:"Loading templates..."})]})}):h.jsx("div",{style:ke.container,children:h.jsxs("div",{style:ke.section,children:[h.jsxs("div",{style:ke.header,children:[h.jsx("h1",{style:ke.title,children:"My Templates"}),h.jsxs("div",{style:ke.actions,children:[h.jsx("button",{style:{...ke.button,...ke.secondaryButton},children:"Browse community"}),h.jsx("button",{style:{...ke.button,...ke.primaryButton},children:"Create template"})]})]}),h.jsx("div",{style:ke.searchBar,children:h.jsx("input",{type:"text",placeholder:"Search templates...",value:i,onChange:c=>o(c.target.value),style:ke.searchInput})}),h.jsxs("table",{style:ke.table,children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{style:ke.tableHeader,children:"Template name"}),h.jsx("th",{style:ke.tableHeader,children:"Creator"}),h.jsx("th",{style:ke.tableHeader,children:"Visibility"}),h.jsx("th",{style:ke.tableHeader})]})}),h.jsx("tbody",{children:l.map(c=>h.jsxs("tr",{children:[h.jsxs("td",{style:ke.tableCell,children:[c.name,h.jsx("span",{style:ke.templateType,children:c.type})]}),h.jsx("td",{style:ke.tableCell,children:c.owner_id===(a==null?void 0:a.id)?"Me":"Library"}),h.jsx("td",{style:ke.tableCell,children:"Just me"}),h.jsx("td",{style:ke.tableCell,children:h.jsx("button",{style:ke.actionButton,children:""})})]},c.id))})]})]})})}const rt={container:{padding:"32px",width:"100%",height:"100%",backgroundColor:"#fff"},section:{maxWidth:"1200px",margin:"0 auto"},title:{fontSize:"16px",fontWeight:"500",marginBottom:"32px",color:"#1f2937"},searchContainer:{marginBottom:"24px"},searchInput:{width:"100%",maxWidth:"400px",padding:"8px 16px",fontSize:"14px",border:"1px solid #e5e7eb",borderRadius:"6px","&:focus":{outline:"none",borderColor:"#2563eb",boxShadow:"0 0 0 2px rgba(37, 99, 235, 0.2)"}},templateGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"16px",marginTop:"24px"},templateCard:{backgroundColor:"white",borderRadius:"8px",border:"1px solid #e5e7eb",padding:"16px",transition:"all 0.2s ease","&:hover":{transform:"translateY(-2px)",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"}},templateName:{fontSize:"18px",fontWeight:"500",color:"#111827",marginBottom:"8px"},templateDescription:{fontSize:"14px",color:"#6b7280",marginBottom:"12px"},templateMeta:{display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"12px",color:"#6b7280"},templateType:{display:"inline-block",padding:"2px 8px",backgroundColor:"#f3f4f6",borderRadius:"12px",fontSize:"12px",color:"#374151"},noTemplates:{textAlign:"center",padding:"48px",color:"#6b7280",backgroundColor:"#f9fafb",borderRadius:"8px",border:"1px dashed #e5e7eb"},tagsContainer:{display:"flex",flexWrap:"wrap",gap:"8px",marginBottom:"12px"},tag:{display:"inline-block",padding:"2px 8px",backgroundColor:"#e5e7eb",borderRadius:"12px",fontSize:"12px",color:"#374151"}};function gH(){const[t,e]=y.useState([]),[n,r]=y.useState(!0),[i,o]=y.useState(""),s=Be();return y.useEffect(()=>{(async()=>{try{const l=s.from("template_library").select("*").eq("editable",!0).order("name");i&&l.or(`name.ilike.%${i}%,description.ilike.%${i}%`);const{data:c,error:u}=await l;if(u)throw u;e(c||[])}catch(l){console.error("Error fetching templates:",l)}finally{r(!1)}})()},[s,i]),n?h.jsx("div",{style:rt.container,children:h.jsxs("div",{style:rt.section,children:[h.jsx("h1",{style:rt.title,children:"Community Templates"}),h.jsx("div",{children:"Loading templates..."})]})}):h.jsx("div",{style:rt.container,children:h.jsxs("div",{style:rt.section,children:[h.jsx("h1",{style:rt.title,children:"Community Templates"}),h.jsx("div",{style:rt.searchContainer,children:h.jsx("input",{type:"text",placeholder:"Search templates...",value:i,onChange:a=>o(a.target.value),style:rt.searchInput})}),t.length===0?h.jsx("div",{style:rt.noTemplates,children:i?"No templates found matching your search.":"No community templates available."}):h.jsx("div",{style:rt.templateGrid,children:t.map(a=>h.jsxs("div",{style:rt.templateCard,children:[h.jsx("div",{style:rt.templateName,children:a.name}),a.description&&h.jsx("div",{style:rt.templateDescription,children:a.description}),a.tags&&a.tags.length>0&&h.jsx("div",{style:rt.tagsContainer,children:a.tags.map((l,c)=>h.jsx("span",{style:rt.tag,children:l},c))}),h.jsxs("div",{style:rt.templateMeta,children:[h.jsx("div",{style:rt.templateType,children:a.type.charAt(0).toUpperCase()+a.type.slice(1)}),a.specialty&&h.jsx("div",{children:a.specialty})]})]},a.id))})]})})}function si({children:t}){const{user:e,loading:n,error:r}=gn(),i=jn(),[o,s]=y.useState(!0);return console.log("ProtectedRoute state:",{isAuthenticated:!!e,userId:e==null?void 0:e.id,isLoading:n,hasError:!!r,errorMessage:r,path:i.pathname,isInitialLoad:o}),y.useEffect(()=>{!n&&o&&s(!1)},[n]),n||o?h.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,height:"100vh",width:"100vw",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"#f3f4f6",flexDirection:"column",gap:"12px",zIndex:9999},children:[h.jsx("div",{style:{width:"48px",height:"48px",border:"4px solid #e5e7eb",borderTopColor:"#3b82f6",borderRadius:"50%",animation:"spin 1s linear infinite"}}),h.jsx("div",{style:{fontSize:"16px",color:"#4b5563",marginTop:"16px"},children:"Loading..."}),h.jsx("style",{children:`
          @keyframes spin {
            to {
              transform: rotate(360deg);
            }
          }
        `})]}):(r&&console.error("ProtectedRoute error:",r),e?(console.log("ProtectedRoute: User authenticated, rendering protected content"),h.jsx(h.Fragment,{children:t})):(console.log("ProtectedRoute: No user found, redirecting to login"),h.jsx(xf,{to:"/login",state:{from:i},replace:!0})))}const Kn={container:{flex:1,overflowY:"auto"},dateGroup:{display:"flex",flexDirection:"column",gap:"1px",marginBottom:"16px"},dateHeader:{fontSize:"12px",fontWeight:"600",color:"#6b7280",padding:"4px 12px",backgroundColor:"#f9fafb",borderTop:"1px solid #e5e7eb",borderBottom:"1px solid #e5e7eb",textTransform:"uppercase",letterSpacing:"0.05em"},visitItem:{display:"flex",flexDirection:"column",padding:"8px 12px",backgroundColor:"white",cursor:"pointer",transition:"all 0.2s ease"},selectedVisit:{backgroundColor:"#f0f9ff"},visitHeader:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"8px"},visitName:{fontSize:"15px",fontWeight:"600",color:"#111827",flex:1},visitState:{fontSize:"12px",padding:"2px 6px",borderRadius:"4px",backgroundColor:"#f3f4f6",color:"#374151",textTransform:"capitalize",flexShrink:0},visitTime:{fontSize:"12px",color:"#6b7280",marginTop:"2px"},loadingContainer:{display:"flex",justifyContent:"center",alignItems:"center",height:"100px",color:"#6b7280"}},yH=y.memo(function({visit:e,isSelected:n,onSelect:r}){const{data:i}=Rc({queryKey:["patient",e.patient_id],queryFn:async()=>{if(!e.patient_id)return null;const{data:a}=await Xi.from("patient_profiles").select("name").eq("id",e.patient_id).single();return a},enabled:!!e.patient_id}),o=(i==null?void 0:i.name)||e.name||"Untitled",s=new Date(e.started_at).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"});return h.jsxs("div",{style:{...Kn.visitItem,...n?Kn.selectedVisit:{}},onClick:()=>r(e),children:[h.jsxs("div",{style:Kn.visitHeader,children:[h.jsx("div",{style:Kn.visitName,children:o}),h.jsx("div",{style:Kn.visitState,children:e.state})]}),h.jsx("div",{style:Kn.visitTime,children:s})]})});function vH({visits:t,onVisitSelect:e,selectedVisitId:n,onContinueRecording:r}){const{user:i}=gn(),[o,s]=y.useState(!0),a=y.useCallback(u=>{u.state==="paused"&&r?r(u):e==null||e(u)},[r,e]),l=y.useMemo(()=>t.reduce((u,d)=>{const f=new Date(d.started_at).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"});return u[f]||(u[f]=[]),u[f].push(d),u},{}),[t]);if(y.useEffect(()=>{i!=null&&i.id&&s(t.length===0)},[i==null?void 0:i.id,t.length]),!(i!=null&&i.id)||o)return h.jsx("div",{style:Kn.container,children:h.jsx("div",{style:Kn.loadingContainer,children:o?"Your visits will appear here":"Loading..."})});const c=Object.keys(l).sort((u,d)=>new Date(d).getTime()-new Date(u).getTime());return h.jsx("div",{style:Kn.container,children:c.map(u=>h.jsxs("div",{style:Kn.dateGroup,children:[h.jsx("div",{style:Kn.dateHeader,children:u}),l[u].sort((d,f)=>new Date(f.started_at).getTime()-new Date(d.started_at).getTime()).map(d=>h.jsx(yH,{visit:d,isSelected:d.id===n,onSelect:a},d.id))]},u))})}const xH=({user:t,onSignOut:e})=>{const n=rr();return h.jsx("div",{style:pt.userSection,children:h.jsxs(Kh,{children:[h.jsx(qh,{asChild:!0,children:h.jsxs("button",{style:pt.userButton,children:[h.jsxs("div",{style:pt.userInfo,children:[h.jsx("span",{style:pt.userName,children:t!=null&&t.name?`${t.name}`:"User"}),h.jsx("span",{style:pt.userSpecialty,children:(t==null?void 0:t.specialty)||"No specialty set"})]}),h.jsx(T0,{style:pt.chevronIcon})]})}),h.jsx(Gh,{children:h.jsxs(Jh,{style:pt.dropdownContent,sideOffset:5,align:"start",children:[h.jsx(dr,{asChild:!0,children:h.jsx("button",{style:pt.dropdownItem,onClick:()=>n("/profile"),children:"Profile"})}),h.jsx(dr,{asChild:!0,children:h.jsx("button",{style:pt.dropdownItem,onClick:()=>n("/settings"),children:"Settings"})}),h.jsx(dr,{asChild:!0,children:h.jsx("button",{style:pt.dropdownItem,onClick:()=>n("/group"),children:"Group Settings"})}),h.jsx(dr,{asChild:!0,children:h.jsx("button",{style:pt.dropdownItem,onClick:()=>n("/patients"),children:"Patients"})}),h.jsx(q1,{style:pt.dropdownSeparator}),h.jsx(dr,{asChild:!0,children:h.jsx("button",{style:pt.dropdownItem,onClick:()=>n("/my-templates"),children:"My Templates"})}),h.jsx(dr,{asChild:!0,children:h.jsx("button",{style:pt.dropdownItem,onClick:()=>n("/community-templates"),children:"Community Templates"})}),h.jsx(q1,{style:pt.dropdownSeparator}),h.jsx(dr,{asChild:!0,children:h.jsx("button",{style:pt.dropdownItem,onClick:e,children:"Logout"})})]})})]})})},pt={userSection:{padding:"12px",borderBottom:"1px solid #e5e7eb"},userButton:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",padding:"8px",border:"none",borderRadius:"6px",background:"transparent",cursor:"pointer",":hover":{backgroundColor:"#f5f5f5"}},userInfo:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"2px"},userName:{fontSize:"14px",fontWeight:600,color:"#111827"},userSpecialty:{fontSize:"12px",color:"#6b7280",fontWeight:500},chevronIcon:{width:"16px",height:"16px",color:"#666"},dropdownContent:{maxWidth:"280px",backgroundColor:"white",borderRadius:"6px",padding:"4px",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.1)",zIndex:100},dropdownItem:{width:"100%",border:"none",borderRadius:"4px",padding:"8px 12px",fontSize:"14px",textAlign:"left",backgroundColor:"transparent",cursor:"pointer",":hover":{backgroundColor:"#f5f5f5"}},dropdownSeparator:{height:"1px",backgroundColor:"#eaeaea",margin:"4px 0"}},Em={sidebar:{width:"240px",backgroundColor:"#ffffff",display:"flex",flexDirection:"column",overflow:"hidden",borderRight:"1px solid #d1d5db",height:"100vh",position:"relative",zIndex:50},userSection:{padding:"16px 16px 12px 16px",borderBottom:"1px solid #d1d5db",backgroundColor:"#ffffff",marginBottom:"8px"},userButton:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px",backgroundColor:"transparent",border:"none",cursor:"pointer",transition:"all 0.2s ease","&:hover":{backgroundColor:"#f3f4f6"}},userInfo:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1},userName:{fontSize:"14px",fontWeight:"500",color:"#111827"},userEmail:{fontSize:"12px",color:"#6b7280",marginTop:"2px"},chevronIcon:{color:"#9ca3af",width:"12px",height:"12px",marginLeft:"8px",flexShrink:0},dropdownContent:{minWidth:"200px",backgroundColor:"white",borderRadius:"8px",padding:"6px",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",border:"1px solid #e5e7eb"},dropdownItem:{fontSize:"14px",padding:"8px 12px",borderRadius:"6px",cursor:"pointer",color:"#374151",display:"block",width:"100%",textAlign:"left",border:"none",backgroundColor:"transparent",transition:"all 0.2s ease","&:hover":{backgroundColor:"#f3f4f6",color:"#111827"}},dropdownSeparator:{height:"1px",backgroundColor:"#e5e7eb",margin:"6px"},newSessionButton:{display:"flex",alignItems:"center",backgroundColor:"#FF8080",color:"#ffffff",border:"none",cursor:"pointer",fontSize:"14px",fontWeight:"600",margin:"16px 12px 16px 12px",width:"calc(100% - 24px)",justifyContent:"center",borderRadius:"8px",transition:"all 0.2s ease","&:hover":{backgroundColor:"#ff6666",transform:"translateY(-1px)"},"&:active":{transform:"translateY(0px)"}},visitsContainer:{flex:1,overflow:"auto",borderTop:"1px solid #e5e7eb"}};function wH({onNewSession:t,onVisitSelect:e,selectedVisitId:n,onContinueRecording:r,visits:i=[]}){const o=rr(),{user:s}=gn(),{signOut:a}=BO();console.log("[Sidebar] Render with visits:",i.length);const l=async()=>{try{await a(),o("/login")}catch(c){console.error("Error signing out:",c)}};return s?h.jsxs("div",{style:Em.sidebar,children:[h.jsx(xH,{user:s,onSignOut:l}),h.jsx("button",{style:Em.newSessionButton,onClick:t,children:"New Session"}),h.jsx("div",{style:Em.visitsContainer,children:h.jsx(vH,{visits:i,onVisitSelect:e,selectedVisitId:n,onContinueRecording:r})})]}):null}const qe=(...t)=>{console.log("[useRealtimeVisits]",...t)};function bH(t){const[e,n]=y.useState([]),r=y.useRef(!1),i=y.useRef(null),o=y.useRef(null),s=y.useRef([]);y.useEffect(()=>{s.current=e,qe("Updated visitsRef:",e.length,"visits")},[e]),y.useEffect(()=>{if(!t||r.current)return;(async()=>{qe("Fetching initial visits for user:",t);const{data:c,error:u}=await Xi.from("visits").select("*").eq("user_id",t).order("started_at",{ascending:!1});if(u){qe("Error fetching initial visits:",u);return}c&&(qe(`Setting initial ${c.length} visits`),n(c),s.current=c,r.current=!0)})()},[t]);const a=y.useCallback(l=>{const c=[...l].sort((u,d)=>new Date(d.started_at).getTime()-new Date(u.started_at).getTime());n(c)},[]);return y.useEffect(()=>{if(!t){qe("No userId, skipping subscription");return}qe("Setting up realtime subscription for user:",t),i.current&&(qe("Cleaning up existing subscription"),i.current.unsubscribe(),i.current=null);const l=Xi.channel(`visits_list_${t}`).on("postgres_changes",{event:"*",schema:"public",table:"visits",filter:`user_id=eq.${t}`},c=>{const u=new Date().toISOString(),d=o.current?new Date(u).getTime()-new Date(o.current).getTime():null;switch(qe("Received realtime event:",c.eventType,{...c,timeSinceLastUpdate:d?`${d}ms`:"first update",currentVisitsCount:s.current.length}),o.current=u,c.eventType){case Yn.INSERT:{const f=c.new;if(qe("Processing insert for visit:",f.id),s.current.some(m=>m.id===f.id)){qe("Visit already exists, skipping insert:",f.id);return}const p=[f,...s.current];qe(`Updating visits after insert: ${p.length} visits`),a(p);break}case Yn.UPDATE:{const f=c.new;qe("Processing update for visit:",f.id);const p=s.current.map(m=>m.id===f.id?f:m);qe(`Updating visits after update: ${p.length} visits`),a(p);break}case Yn.DELETE:{const f=c.old;qe("Processing delete for visit:",f.id);const p=s.current.filter(m=>m.id!==f.id);qe(`Updating visits after delete: ${p.length} visits`),a(p);break}}}).subscribe(c=>{qe("Subscription status:",c)});return i.current=l,()=>{qe("Cleaning up subscription in effect cleanup"),l.unsubscribe(),i.current=null}},[t,a]),y.useEffect(()=>{qe("Visits state updated:",e.length,"visits")},[e]),e}function Tm({title:t,children:e}){const[n,r]=y.useState(!1);return h.jsxs("div",{className:"border border-gray-200 rounded-md mb-4",children:[h.jsxs("button",{onClick:()=>r(!n),className:"w-full px-4 py-3 flex items-center justify-between bg-gray-50 hover:bg-gray-100 transition-colors rounded-t-md",children:[h.jsx("h3",{className:"text-sm font-medium text-gray-700",children:t}),n?h.jsx(rR,{className:"h-4 w-4 text-gray-500"}):h.jsx(F5,{className:"h-4 w-4 text-gray-500"})]}),n&&h.jsx("div",{className:"p-4 bg-white rounded-b-md",children:e})]})}function SH({onClick:t,icon:e,label:n,loading:r=!1,disabled:i=!1}){return h.jsxs("button",{onClick:t,disabled:r||i,className:`
        flex items-center gap-2 px-3 py-2 text-sm 
        ${i?"bg-gray-100 text-gray-400":"bg-gray-50 text-gray-700 hover:bg-gray-100"} 
        rounded-md transition-colors
        ${r?"cursor-not-allowed":""}
      `,children:[r?h.jsx(iR,{className:"h-4 w-4 animate-spin"}):e,n]})}function CH(){const[t,e]=ZD(),n=Be(),[r,i]=y.useState(t.get("visitId")||""),[o,s]=y.useState(null),[a,l]=y.useState(null),[c,u]=y.useState([]),[d,f]=y.useState([]),[p,m]=y.useState([]),{getValidSessionToken:g}=I0(),[x,v]=y.useState(!1);y.useEffect(()=>{const R=t.get("visitId");R&&(i(R),w(R))},[]);const w=async R=>{const N=R||r;if(N.trim()){l(null);try{const{data:A,error:I}=await n.from("visits").select("*").eq("id",N.trim()).single();if(I)throw I;s(A),e({visitId:N.trim()}),await S(N.trim())}catch(A){console.error("Error fetching visit:",A),l("Visit not found"),s(null),e({}),u([]),f([]),m([])}}},S=async R=>{try{const{data:N,error:A}=await n.from("transcripts").select("*").eq("visit_id",R).order("created_at",{ascending:!1});if(A)throw A;u(N||[]);const{data:I,error:O}=await n.from("containers").select("*").eq("visit_id",R).order("chunk_id",{ascending:!0});if(O)throw O;f(I||[]);const{data:L,error:$}=await n.from("notes").select("*").eq("visit_id",R).order("created_at",{ascending:!1});if($)throw $;m(L||[])}catch(N){console.error("Error loading visit data:",N),l("Failed to load visit data")}},b=async()=>{if(!(!(o!=null&&o.id)||x))try{v(!0);const R=await g(),N=await fetch(`${Qi.apiUrl}/admin/regenerate-visit`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",Authorization:`Bearer ${R}`,Accept:"application/json"},body:JSON.stringify({visitId:o.id})});if(!N.ok){const A=await N.text();let I="Failed to regenerate visit";try{I=JSON.parse(A).error||I}catch{I=A||I}throw new Error(I)}await S(o.id)}catch(R){console.error("Error regenerating visit:",R),l(R instanceof Error?R.message:"Failed to regenerate visit")}finally{v(!1)}},C=()=>o?h.jsx("div",{className:"bg-white rounded-lg shadow-sm mb-6",children:h.jsxs("div",{className:"p-6",children:[h.jsx("div",{className:"flex items-center justify-between mb-6",children:h.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Visit Details"})}),h.jsxs("dl",{className:"grid grid-cols-2 gap-6",children:[h.jsxs("div",{children:[h.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"ID"}),h.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:o.id})]}),h.jsxs("div",{children:[h.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Created At"}),h.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:new Date(o.created_at).toLocaleString()})]}),h.jsxs("div",{children:[h.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Patient ID"}),h.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:o.patient_id||"No patient assigned"})]}),h.jsxs("div",{children:[h.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"State"}),h.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:o.state})]})]})]})}):null,k=()=>o?h.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-6",children:h.jsx("div",{className:"flex items-center gap-4",children:h.jsx(SH,{onClick:b,icon:h.jsx(iR,{className:"h-4 w-4"}),label:"Regenerate SOAP Note",loading:x,disabled:!(o!=null&&o.id)})})}):null,E=()=>h.jsx(Tm,{title:`Transcripts (${c.length})`,children:h.jsx("div",{className:"space-y-4",children:c.map(R=>h.jsxs("div",{className:"border border-gray-200 rounded p-3",children:[h.jsxs("div",{className:"flex justify-between mb-2",children:[h.jsx("span",{className:"text-xs text-gray-500",children:new Date(R.created_at).toLocaleString()}),h.jsxs("span",{className:"text-xs text-gray-500",children:["ID: ",R.id]})]}),h.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:R.full_text})]},R.id))})}),_=()=>h.jsx(Tm,{title:`Container Fragments (${d.length})`,children:h.jsx("div",{className:"space-y-4",children:d.map(R=>h.jsxs("div",{className:"border border-gray-200 rounded p-3",children:[h.jsxs("div",{className:"flex justify-between mb-2",children:[h.jsxs("span",{className:"text-xs text-gray-500",children:["Chunk ",R.chunk_id,"  ",R.state]}),h.jsx("span",{className:"text-xs text-gray-500",children:new Date(R.created_at).toLocaleString()})]}),h.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:R.transcript_fragment||"No text available"})]},R.id))})}),P=()=>h.jsx(Tm,{title:`Notes (${p.length})`,children:h.jsx("div",{className:"space-y-4",children:p.map(R=>h.jsxs("div",{className:"border border-gray-200 rounded p-3",children:[h.jsxs("div",{className:"flex justify-between mb-2",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-xs font-medium text-gray-700",children:R.type}),R.version_id&&h.jsxs("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-0.5 rounded",children:["v",R.version_id]}),R.template_id&&h.jsx("span",{className:"text-xs text-gray-500",children:"Template"})]}),h.jsx("span",{className:"text-xs text-gray-500",children:new Date(R.created_at).toLocaleString()})]}),h.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:R.content}),R.metadata&&Object.keys(R.metadata).length>0&&h.jsx("div",{className:"mt-2 pt-2 border-t border-gray-200",children:h.jsxs("details",{children:[h.jsx("summary",{className:"text-xs text-gray-500 cursor-pointer",children:"Metadata"}),h.jsx("pre",{className:"mt-2 text-xs text-gray-600 overflow-auto",children:JSON.stringify(R.metadata,null,2)})]})})]},R.id))})});return h.jsxs("div",{className:"h-screen bg-gray-50 flex",children:[h.jsxs("div",{className:"w-80 bg-white border-r border-gray-200 p-6 flex flex-col gap-6",children:[h.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Admin Tools"}),h.jsxs("div",{className:"flex flex-col gap-2",children:[h.jsx("h2",{className:"text-sm font-medium text-gray-700",children:"Visit Search"}),h.jsx("input",{type:"text",value:r,onChange:R=>i(R.target.value),placeholder:"Enter Visit ID",className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),h.jsx("button",{onClick:()=>w(),className:"w-full px-3 py-2 text-sm bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors",children:"Search"})]}),h.jsxs("div",{className:"flex flex-col gap-2",children:[h.jsx("h2",{className:"text-sm font-medium text-gray-700",children:"Actions"}),h.jsx("button",{className:"w-full px-3 py-2 text-sm text-gray-700 bg-gray-50 hover:bg-gray-100 rounded-md text-left transition-colors",children:"Future Action 1"}),h.jsx("button",{className:"w-full px-3 py-2 text-sm text-gray-700 bg-gray-50 hover:bg-gray-100 rounded-md text-left transition-colors",children:"Future Action 2"})]})]}),h.jsxs("div",{className:"flex-1 p-6 overflow-auto",children:[a&&h.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 mb-6",children:h.jsx("p",{className:"text-sm text-red-600",children:a})}),o&&h.jsxs(h.Fragment,{children:[C(),k(),E(),_(),P()]})]})]})}const kH=["test@localhost"];function EH({children:t}){const{user:e,loading:n}=gn();return n?h.jsx("div",{children:"Loading..."}):!e||!kH.includes(e.email||"")?h.jsx(xf,{to:"/record",replace:!0}):h.jsx(h.Fragment,{children:t})}function TH(){const t=Be(),{user:e}=gn(),n=xs(),[r,i]=y.useState(null),[o,s]=y.useState(!1),[a,l]=y.useState(!1),[c,u]=y.useState(!1),[d,f]=y.useState(!1),[p,m]=y.useState([]),[g,x]=y.useState({}),v=async O=>{const{data:L,error:$}=await t.from("visits").select("created_at").eq("patient_id",O).order("created_at",{ascending:!1}).limit(1);return $||!L||L.length===0?null:L[0].created_at},{data:w=[],isLoading:S}=Rc({queryKey:["patients",e==null?void 0:e.id],queryFn:async()=>{if(!(e!=null&&e.id))return[];const{data:O,error:L}=await t.from("patient_profiles").select("*").eq("user_id",e.id).order("name",{ascending:!0});if(L)throw L;return(O||[]).sort(($,H)=>$.name.toLowerCase().localeCompare(H.name.toLowerCase()))},enabled:!!(e!=null&&e.id)});y.useEffect(()=>{(async()=>{if(!w.length)return;const L={},$=w.map(async H=>{const M=await v(H.id);L[H.id]=M});await Promise.all($),x(L)})()},[w,t]);const b=O=>{if(!O)return"Never";const L=new Date(O);return isNaN(L.getTime())?"Invalid date":L.toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})},C=Zl({mutationFn:async O=>{if(!(e!=null&&e.id))throw new Error("No user");const{data:L,error:$}=await t.from("patient_profiles").insert({...O,user_id:e.id,contact_information:{},ai_context:null}).select().single();if($)throw $;return L},onSuccess:()=>{n.invalidateQueries({queryKey:["patients"]}),s(!1)}}),k=Zl({mutationFn:async O=>{const{data:L,error:$}=await t.from("patient_profiles").update(O).eq("id",O.id).select().single();if($)throw $;return L},onSuccess:()=>{n.invalidateQueries({queryKey:["patients"]}),l(!1)}}),E=Zl({mutationFn:async O=>{const{error:L}=await t.from("patient_profiles").delete().eq("id",O);if(L)throw L;return O},onSuccess:()=>{n.invalidateQueries({queryKey:["patients"]}),u(!1)}}),_=async O=>{const{data:L,error:$}=await t.from("visits").select("*").eq("patient_id",O).order("created_at",{ascending:!1});if($){console.error("Error loading patient visits:",$);return}m(L||[])},P=async O=>{i(O),await _(O.id),f(!0)},R=O=>{O.preventDefault();const L=new FormData(O.currentTarget),$=L.get("name");if(!$)return;const H={name:$,medical_record_number:L.get("medical_record_number")||null,phone:L.get("phone")||null,email:L.get("email")||null,pronoun:L.get("pronoun")||null,notes:L.get("notes")||null};C.mutate(H)},N=O=>{if(O.preventDefault(),!r)return;const L=new FormData(O.currentTarget),$={...r,name:L.get("name"),medical_record_number:L.get("medical_record_number"),phone:L.get("phone")||null,email:L.get("email")||null,pronoun:L.get("pronoun")||null,notes:L.get("notes")||null};k.mutate($)},A=()=>{r&&E.mutate(r.id)},I=({patient:O,onSubmit:L})=>h.jsxs("form",{onSubmit:L,style:V.form,children:[h.jsxs("div",{style:V.formGroup,children:[h.jsx("label",{htmlFor:"name",style:V.label,children:"Name*"}),h.jsx("input",{id:"name",name:"name",type:"text",required:!0,defaultValue:(O==null?void 0:O.name)||"",style:V.input})]}),h.jsxs("div",{style:V.formGroup,children:[h.jsx("label",{htmlFor:"medical_record_number",style:V.label,children:"Medical Record Number"}),h.jsx("input",{id:"medical_record_number",name:"medical_record_number",type:"text",defaultValue:(O==null?void 0:O.medical_record_number)||"",style:V.input})]}),h.jsxs("div",{style:V.formGroup,children:[h.jsx("label",{htmlFor:"pronoun",style:V.label,children:"Pronoun"}),h.jsx("input",{id:"pronoun",name:"pronoun",type:"text",defaultValue:(O==null?void 0:O.pronoun)||"",style:V.input})]}),h.jsxs("div",{style:V.formGroup,children:[h.jsx("label",{htmlFor:"phone",style:V.label,children:"Phone"}),h.jsx("input",{id:"phone",name:"phone",type:"tel",defaultValue:(O==null?void 0:O.phone)||"",style:V.input})]}),h.jsxs("div",{style:V.formGroup,children:[h.jsx("label",{htmlFor:"email",style:V.label,children:"Email"}),h.jsx("input",{id:"email",name:"email",type:"email",defaultValue:(O==null?void 0:O.email)||"",style:V.input})]}),h.jsxs("div",{style:V.formGroup,children:[h.jsx("label",{htmlFor:"notes",style:V.label,children:"Notes"}),h.jsx("textarea",{id:"notes",name:"notes",defaultValue:(O==null?void 0:O.notes)||"",style:{...V.input,minHeight:"100px"}})]}),h.jsx("div",{style:V.formActions,children:h.jsx("button",{type:"submit",style:V.primaryButton,children:O?"Update Patient":"Add Patient"})})]});return h.jsxs("div",{style:V.container,children:[h.jsxs("div",{style:V.header,children:[h.jsx("h1",{style:V.title,children:"Patients"}),h.jsxs("button",{onClick:()=>s(!0),style:V.addButton,children:[h.jsx(Ff,{}),h.jsx("span",{children:"Add Patient"})]})]}),S?h.jsx("div",{style:V.loading,children:"Loading patients..."}):w.length===0?h.jsxs("div",{style:V.emptyState,children:[h.jsx("p",{children:"No patients found. Add your first patient to get started."}),h.jsx("button",{onClick:()=>s(!0),style:V.primaryButton,children:"Add Patient"})]}):h.jsx("div",{style:V.tableContainer,children:h.jsxs("table",{style:V.table,children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{style:V.th,children:"Name"}),h.jsx("th",{style:V.th,children:"MRN"}),h.jsx("th",{style:V.th,children:"Phone"}),h.jsx("th",{style:V.th,children:"Email"}),h.jsx("th",{style:V.th,children:"Last Visit"}),h.jsx("th",{style:V.th,children:"Actions"})]})}),h.jsx("tbody",{children:w.map(O=>h.jsxs("tr",{style:V.tr,children:[h.jsx("td",{style:V.td,children:O.name}),h.jsx("td",{style:V.td,children:O.medical_record_number||"-"}),h.jsx("td",{style:V.td,children:O.phone||"-"}),h.jsx("td",{style:V.td,children:O.email||"-"}),h.jsx("td",{style:V.td,children:b(g[O.id])}),h.jsx("td",{style:V.td,children:h.jsxs("div",{style:V.actions,children:[h.jsx("button",{onClick:()=>{i(O),l(!0)},style:V.iconButton,title:"Edit patient",children:h.jsx(t6,{})}),h.jsx("button",{onClick:()=>P(O),style:V.iconButton,title:"View patient visits",children:"Visits"}),h.jsx("button",{onClick:()=>{i(O),u(!0)},style:V.iconButton,title:"Delete patient",children:h.jsx(vy,{})})]})})]},O.id))})]})}),h.jsx(Ll,{open:o,onOpenChange:s,children:h.jsxs($l,{children:[h.jsx(Fl,{style:V.overlay}),h.jsxs(Bl,{style:V.dialogContent,children:[h.jsx(zl,{style:V.dialogTitle,children:"Add New Patient"}),h.jsx(ym,{style:V.dialogDescription,children:"Fill in the details to add a new patient."}),h.jsx(I,{onSubmit:R}),h.jsx(xd,{asChild:!0,children:h.jsx("button",{style:V.closeButton,children:h.jsx(sa,{})})})]})]})}),h.jsx(Ll,{open:a,onOpenChange:l,children:h.jsxs($l,{children:[h.jsx(Fl,{style:V.overlay}),h.jsxs(Bl,{style:V.dialogContent,children:[h.jsx(zl,{style:V.dialogTitle,children:"Edit Patient"}),h.jsx(ym,{style:V.dialogDescription,children:"Update patient information."}),r&&h.jsx(I,{patient:r,onSubmit:N}),h.jsx(xd,{asChild:!0,children:h.jsx("button",{style:V.closeButton,children:h.jsx(sa,{})})})]})]})}),h.jsx(Ll,{open:c,onOpenChange:u,children:h.jsxs($l,{children:[h.jsx(Fl,{style:V.overlay}),h.jsxs(Bl,{style:V.dialogContent,children:[h.jsx(zl,{style:V.dialogTitle,children:"Delete Patient"}),h.jsxs(ym,{style:V.dialogDescription,children:["Are you sure you want to delete ",r==null?void 0:r.name,"? This action cannot be undone."]}),h.jsxs("div",{style:V.formActions,children:[h.jsx("button",{onClick:()=>u(!1),style:V.secondaryButton,children:"Cancel"}),h.jsx("button",{onClick:A,style:{...V.primaryButton,backgroundColor:"#ef4444"},children:"Delete"})]}),h.jsx(xd,{asChild:!0,children:h.jsx("button",{style:V.closeButton,children:h.jsx(sa,{})})})]})]})}),h.jsx(Ll,{open:d,onOpenChange:f,children:h.jsxs($l,{children:[h.jsx(Fl,{style:V.overlay}),h.jsxs(Bl,{style:{...V.dialogContent,maxWidth:"800px"},children:[h.jsxs(zl,{style:V.dialogTitle,children:["Visits for ",r==null?void 0:r.name]}),p.length===0?h.jsx("p",{style:V.emptyNotes,children:"No visits found for this patient."}):h.jsx("div",{style:V.notesContainer,children:p.map(O=>h.jsxs("div",{style:V.noteCard,children:[h.jsxs("div",{style:V.noteHeader,children:[h.jsx("h3",{style:V.noteTitle,children:O.name||new Date(O.created_at).toLocaleDateString()}),h.jsx("span",{style:V.noteDate,children:new Date(O.created_at).toLocaleString()})]}),h.jsx("div",{style:V.noteContent,children:O.name||"No name available"})]},O.id))}),h.jsx(xd,{asChild:!0,children:h.jsx("button",{style:V.closeButton,children:h.jsx(sa,{})})})]})]})})]})}const V={container:{padding:"24px",height:"100%",width:"100%",overflow:"auto",backgroundColor:"#f9fafb",display:"flex",flexDirection:"column",flex:1},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px",width:"100%"},title:{fontSize:"24px",fontWeight:"bold",color:"#111827",margin:0},addButton:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 16px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:500},loading:{padding:"40px",textAlign:"center",color:"#6b7280"},emptyState:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"60px 20px",textAlign:"center",color:"#6b7280",gap:"16px"},tableContainer:{backgroundColor:"white",borderRadius:"8px",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",overflow:"hidden",flex:1,width:"100%"},table:{width:"100%",borderCollapse:"collapse"},th:{textAlign:"left",padding:"12px 16px",backgroundColor:"#f9fafb",fontSize:"12px",fontWeight:600,color:"#4b5563",borderBottom:"1px solid #e5e7eb"},tr:{borderBottom:"1px solid #e5e7eb",":last-child":{borderBottom:"none"}},td:{padding:"12px 16px",fontSize:"14px",color:"#1f2937"},actions:{display:"flex",gap:"8px"},iconButton:{padding:"4px 8px",backgroundColor:"transparent",border:"none",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:"#4b5563",":hover":{backgroundColor:"#f3f4f6",color:"#1f2937"}},overlay:{backgroundColor:"rgba(0, 0, 0, 0.4)",position:"fixed",inset:0,animation:"overlayShow 150ms cubic-bezier(0.16, 1, 0.3, 1)"},dialogContent:{backgroundColor:"white",borderRadius:"6px",boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"90vw",maxWidth:"500px",maxHeight:"85vh",padding:"24px",animation:"contentShow 150ms cubic-bezier(0.16, 1, 0.3, 1)",overflow:"auto"},dialogTitle:{margin:0,fontWeight:600,color:"#111827",fontSize:"18px"},dialogDescription:{marginTop:"8px",marginBottom:"20px",color:"#6b7280",fontSize:"14px"},closeButton:{position:"absolute",top:"16px",right:"16px",backgroundColor:"transparent",border:"none",borderRadius:"4px",cursor:"pointer",color:"#6b7280",display:"flex",padding:"4px"},form:{display:"flex",flexDirection:"column",gap:"16px"},formGroup:{display:"flex",flexDirection:"column",gap:"4px"},label:{fontSize:"14px",fontWeight:500,color:"#374151"},input:{padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",color:"#1f2937"},formActions:{display:"flex",justifyContent:"flex-end",gap:"12px",marginTop:"12px"},primaryButton:{padding:"8px 16px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:500},secondaryButton:{padding:"8px 16px",backgroundColor:"white",color:"#374151",border:"1px solid #d1d5db",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:500},notesContainer:{display:"flex",flexDirection:"column",gap:"12px",maxHeight:"500px",overflow:"auto"},noteCard:{padding:"16px",backgroundColor:"#f9fafb",borderRadius:"6px",border:"1px solid #e5e7eb"},noteHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},noteTitle:{margin:0,fontSize:"16px",fontWeight:600,color:"#111827"},noteDate:{fontSize:"12px",color:"#6b7280"},noteContent:{fontSize:"14px",color:"#1f2937",whiteSpace:"pre-wrap"},emptyNotes:{textAlign:"center",color:"#6b7280",padding:"20px"}},_m={container:{height:"100vh",width:"100vw",display:"flex",flexDirection:"column",backgroundColor:"#f3f4f6"},mainContent:{flex:1,display:"flex",flexDirection:"row",overflow:"hidden"},content:{flex:1,display:"flex",flexDirection:"column",alignItems:"flex-start",overflow:"hidden"}};function So(){const t=rr(),{visitId:e}=aD(),n=jn(),[r,i]=y.useState(null),[o,s]=y.useState(null),[a,l]=y.useState(!1),[c,u]=y.useState(!1),{user:d,loading:f,error:p}=gn(),m=Be();console.log("MainContent rendering:",{path:n.pathname,userId:d==null?void 0:d.id,isLoading:f,hasError:!!p,visitId:e,selectedVisitId:r==null?void 0:r.id});let g=[];try{g=bH((d==null?void 0:d.id)||""),console.log("Visits loaded:",g.length)}catch(C){console.error("Error loading visits:",C)}const x=y.useCallback((C,k=!1)=>{l(C),u(k)},[]);y.useEffect(()=>{e&&n.pathname.startsWith("/visit/")&&(async()=>{try{const{data:k,error:E}=await m.from("visits").select("*, patient_profiles(id, name, medical_record_number)").eq("id",e).single();if(E)throw E;k&&(i(k),s(k.patient_id))}catch(k){console.error("Error loading visit:",k)}})()},[e,n.pathname,m]),y.useEffect(()=>{n.pathname==="/record"&&(i(null),s(null))},[n.pathname]);const v=C=>{t(`/visit/${C.id}`)},w=()=>{i(null),s(null),t("/record")},S=async C=>{if(s(C),r!=null&&r.id)try{const{error:k}=await m.from("visits").update({patient_id:C}).eq("id",r.id);if(k)throw k}catch(k){console.error("Error updating visit with patient:",k)}},b=C=>{if(C.state!=="paused")return;(async()=>{var E;try{const{data:_,error:P}=await m.from("containers").select("chunk_id").eq("visit_id",C.id).order("chunk_id",{ascending:!1}).limit(1);if(P)throw P;return((E=_==null?void 0:_[0])==null?void 0:E.chunk_id)??-1}catch(_){return console.error("Error getting last chunk ID:",_),-1}})().then(E=>{i(C),t(`/visit/${C.id}`,{state:{visitId:C.id,lastChunkId:E,state:"paused",isRecordingEnabled:!0}})})};return f?h.jsx("div",{style:{height:"100vh",width:"100vw",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"#f3f4f6"},children:h.jsx("div",{children:"Loading..."})}):p?h.jsxs("div",{children:["Error loading user profile: ",p]}):h.jsx("div",{style:_m.container,children:h.jsxs("div",{style:_m.mainContent,children:[h.jsx(wH,{onNewSession:w,onVisitSelect:v,selectedVisitId:r==null?void 0:r.id,onContinueRecording:b,visits:g}),h.jsx("div",{style:_m.content,children:n.pathname==="/profile"?h.jsx(dH,{}):n.pathname==="/settings"?h.jsx(pH,{}):n.pathname==="/my-templates"?h.jsx(mH,{}):n.pathname==="/community-templates"?h.jsx(gH,{}):n.pathname==="/patients"?h.jsx(TH,{}):h.jsx(oH,{isTranscribing:a&&!c,placeholder:a?c?"Recording paused...":"Your transcription will appear here as you speak...":r?"Loading visit transcription...":"Select a visit or start a new recording session",visitId:r==null?void 0:r.id,onRecordingStateChange:x,onPatientSelect:S,selectedPatientId:o,visits:g})})]})})}const _H=new Gk({defaultOptions:{queries:{retry:1,refetchOnWindowFocus:!1}}});function RH(){return h.jsx(Qk,{client:_H,children:h.jsx(lH,{children:h.jsx(f7,{children:h.jsxs(SD,{children:[h.jsx(tn,{path:"/login",element:h.jsx(aH,{})}),h.jsx(tn,{path:"/signup",element:h.jsx(cH,{})}),h.jsx(tn,{path:"/",element:h.jsx(xf,{to:"/record",replace:!0})}),h.jsx(tn,{path:"*",element:h.jsx(xf,{to:"/record",replace:!0})}),h.jsx(tn,{path:"/record",element:h.jsx(si,{children:h.jsx(So,{})})}),h.jsx(tn,{path:"/visit/:visitId",element:h.jsx(si,{children:h.jsx(So,{})})}),h.jsx(tn,{path:"/profile",element:h.jsx(si,{children:h.jsx(So,{})})}),h.jsx(tn,{path:"/settings",element:h.jsx(si,{children:h.jsx(So,{})})}),h.jsx(tn,{path:"/my-templates",element:h.jsx(si,{children:h.jsx(So,{})})}),h.jsx(tn,{path:"/community-templates",element:h.jsx(si,{children:h.jsx(So,{})})}),h.jsx(tn,{path:"/patients",element:h.jsx(si,{children:h.jsx(So,{})})}),h.jsx(tn,{path:"/admin",element:h.jsx(si,{children:h.jsx(EH,{children:h.jsx(CH,{})})})})]})})})})}const OH=new Gk({defaultOptions:{queries:{retry:1,refetchOnWindowFocus:!1}}});Rm.createRoot(document.getElementById("root")).render(h.jsx(ve.StrictMode,{children:h.jsx(Qk,{client:OH,children:h.jsx(B2,{children:h.jsx(GD,{children:h.jsx(RH,{})})})})}));export{fS as g};
